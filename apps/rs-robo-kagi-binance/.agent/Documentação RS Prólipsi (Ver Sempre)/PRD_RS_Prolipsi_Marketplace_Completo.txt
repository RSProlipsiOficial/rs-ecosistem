PLANO DE SISTEMA – RS PRÓLIPSI MARKETPLACE (RS SHOPPING)
Versão funcional completa – estrutura tratada como finalizada
1. Estrutura Geral do Marketplace

O RS Shopping é o marketplace oficial da RS Prólipsi, totalmente integrado ao ecossistema do escritório virtual (Admin e Consultor).
Permite vendas diretas, afiliadas e dropshipping, com repasse automático de comissões e pontuação ao SIGMA e Wallet Pay.

Domínio oficial: marketplace.rsprolipsi.com.br
Ambiente de produção: Porta 5003 – Nginx + SSL ativo
Banco de dados: Supabase (products, orders, commissions, stores, affiliates, wallet_transactions)
Infraestrutura: Node.js + Next.js + Supabase REST API + PM2 deploy
Cores padrão: preto #0F1115, dourado #C8A74E, cinza #1B2029

2. Catálogo e Estrutura de Produtos

Produtos:
- Cadastro completo com título, descrição, imagens, preço, SKU, peso e estoque.
- Suporte a variações (tamanho, cor, modelo).
- Controle de estoque automático e baixa após cada pedido.
- Filtros por categoria, preço, relevância e avaliação.
- Exibição em cards com hover dourado e botão de compra direto.

Categorias:
- Hierarquia em até três níveis (Categoria > Subcategoria > Item).
- Possibilidade de destacar categorias principais na home.
- API /api/categories integrada ao painel Admin.

Pedidos e Faturamento:
- Geração automática de número de pedido, nota fiscal e fatura.
- Status: Pendente, Aprovado, Enviado, Entregue, Cancelado.
- Histórico completo por cliente e consultor.
- Painel de auditoria para cada pedido com timeline detalhada.

Logística e Entregas:
- Integração total com Correios, Melhor Envio, Azul Cargo, Loggi, Total Express, Jadlog e SuperFrete.
- Cálculo automático de frete no checkout via API (CEP de origem do CD).
- Rastreamento em tempo real.
- Suporte a cálculo de frete personalizado por loja.

3. Pagamentos e Processamento Financeiro

Gateways Integrados:
- MercadoPago, PagSeguro, PIX (QR Code Dinâmico) e Boleto Bancário.
- Split automático para Wallet Pay e comissão do afiliado.
- Pagamento confirmado ? pedido aprovado ? comissão liberada.
- Todos os pagamentos registrados na tabela wallet_transactions.

Auditoria de Pagamentos:
- Logs automáticos de cada transação.
- Verificação antifraude e chargeback.
- Rotina cron mensal para conciliação e repasse automático.

4. Afiliação e Dropshipping

Afiliados:
- Cada consultor tem um link único de loja (loja.rsprolipsi.com.br/consultor/nome).
- Cada venda feita por esse link gera comissão direta e pontos de rede.
- Registros automáticos dos eventos de pixel (View ? AddToCart ? Purchase).
- Painel do consultor mostra total de vendas, comissão total e conversão.

Lojas Individuais:
- Loja replicada da principal com pixels configuráveis.
- Consultor pode ativar/desativar produtos do catálogo.
- Comissão e pontuação calculadas individualmente.

Dropshipping:
- Parceria com fornecedores cadastrados no Admin.
- Pedidos encaminhados automaticamente aos fornecedores.
- Repasses automáticos e auditoria via webhook /api/dropshipping/confirm.

5. Painel do Consultor (RS Shopping)

Painel exibe informações de vendas, produtos e comissões.

Telas Principais:
1. Resumo Geral: total de vendas, comissão, clientes e produtos vendidos.
2. Pedidos: histórico com status e datas.
3. Extrato Financeiro: comissões pagas e pendentes.
4. Link de Afiliado: cópia rápida + QR Code.
5. Relatórios: exportação em CSV e PDF.
6. Ranking: posição no TOP Vendas.
7. Catálogo: busca por categoria.
8. Treinamentos: vídeos curtos sobre técnicas de vendas.

Integrações automáticas:
- Wallet Pay (extrato e saldo).
- RS.IA (automação de copy, anúncios e posts).
- Painel SIGMA (reflexo em pontos de rede).

6. Painel Administrativo (Admin)

Painel administrativo controla todo o marketplace.

Telas e Funções:
1. Produtos: criação, edição e destaque.
2. Lojas e Afiliados: cadastro e vinculação.
3. Pedidos: acompanhamento e status.
4. Comissões: configuração de percentual e split.
5. Fretes e Pagamentos: configuração de provedores.
6. Relatórios: vendas, lucros e top vendedores.
7. Auditoria: log de ações com ID e data/hora.

7. Integração com Wallet Pay

Todos os eventos financeiros passam pela Wallet Pay.

Evento | Origem | Descrição
commission_shop | Venda | Comissão da loja ou afiliado
bonus | SIGMA | Reflexo de pontos de rede
withdrawal | Consultor | Saque de valores
transfer | Interno | Transferência entre contas RS
fees | Sistema | Taxas operacionais

- Logs automáticos e snapshots diários.
- Transações conciliadas com hash de segurança.
- Exportação de extratos em PDF e CSV.

8. Pixels e Rastreamento

Cada loja tem seus próprios pixels:

Tipo | Plataforma | Evento
Pixel Google | Google Ads | ViewItem, AddToCart, Purchase
Pixel Meta | Facebook/Instagram | ViewContent, AddToCart, Purchase
Pixel TikTok | TikTok Ads | ProductView, AddToCart, CompletePayment
Pixel Taboola | Taboola Ads | Click ? Conversion
Pixel LinkedIn | LinkedIn Ads | PageView, Lead, Purchase

- Todos os pixels seguem o Consent Mode (LGPD).
- Disparo automático com base em domínio e ID do consultor.
- Logs armazenados em pixels_logs.

9. Comunicação e Treinamentos

- Módulo interno de mensagens e notificações.
- Publicação de campanhas e banners.
- Área de aprendizado com vídeos explicativos.
- Canal direto com suporte via WhatsApp e RS.IA Chatbot.

10. Design e Experiência (UX/UI)

- Tema Dark com Dourado (padrão RS Unificado).
- Layout responsivo mobile-first.
- Sidebar retrátil, cards com sombra 2xl.
- Gráficos com Recharts e ícones Lucide-React.
- Skeletons em carregamento e animações Framer Motion.
- Áreas de busca, filtros e ordenação integradas.

11. Checklists Internos de Implantação

? Cadastro de produtos e categorias
? Configuração de gateways de pagamento e frete
? Cadastro de fornecedores e dropshipping
? Criação das lojas pessoais dos consultores
? Conexão dos pixels individuais
? Auditoria de logs e comissões
? Testes de compra e conciliação financeira
? Validação da integração com Wallet Pay e SIGMA
? Ativação da área de treinamentos
? Revisão dos relatórios administrativos

12. Estrutura CRM / PRD Oficial

Código | Módulo | Descrição
CRM-01 | Catálogo & Produtos | Gerenciamento de produtos e categorias
CRM-02 | Pedidos & Faturamento | Controle de pedidos, status e notas
CRM-03 | Pagamentos | Integrações com gateways e wallet
CRM-04 | Afiliação & Dropshipping | Controle de afiliados e comissões
CRM-05 | Pixels & Marketing | Rastreamento e anúncios
CRM-06 | Painel do Consultor | Relatórios, extratos e links pessoais
CRM-07 | Painel Administrativo | Gestão de vendas e auditoria
CRM-08 | Comunicação & Treinamentos | Notificações e vídeos internos
CRM-09 | Design & UX | Layouts, interatividade e animações

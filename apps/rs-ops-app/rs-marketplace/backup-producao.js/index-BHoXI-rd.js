function i5(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function Gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a5(t){if(Object.prototype.hasOwnProperty.call(t,"__esModule"))return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var km={exports:{}},sc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function l5(){if(g1)return sc;g1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,s,o){var a=null;if(o!==void 0&&(a=""+o),s.key!==void 0&&(a=""+s.key),"key"in s){o={};for(var d in s)d!=="key"&&(o[d]=s[d])}else o=s;return s=o.ref,{$$typeof:t,type:r,key:a,ref:s!==void 0?s:null,props:o}}return sc.Fragment=e,sc.jsx=n,sc.jsxs=n,sc}var b1;function c5(){return b1||(b1=1,km.exports=l5()),km.exports}var l=c5(),Am={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function d5(){if(x1)return Ie;x1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function w(M){return M===null||typeof M!="object"?null:(M=x&&M[x]||M["@@iterator"],typeof M=="function"?M:null)}var C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,N={};function k(M,B,K){this.props=M,this.context=B,this.refs=N,this.updater=K||C}k.prototype.isReactComponent={},k.prototype.setState=function(M,B){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,B,"setState")},k.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function _(){}_.prototype=k.prototype;function j(M,B,K){this.props=M,this.context=B,this.refs=N,this.updater=K||C}var P=j.prototype=new _;P.constructor=j,E(P,k.prototype),P.isPureReactComponent=!0;var z=Array.isArray;function O(){}var D={H:null,A:null,T:null,S:null},te=Object.prototype.hasOwnProperty;function G(M,B,K){var ie=K.ref;return{$$typeof:t,type:M,key:B,ref:ie!==void 0?ie:null,props:K}}function le(M,B){return G(M.type,B,M.props)}function Ne(M){return typeof M=="object"&&M!==null&&M.$$typeof===t}function ne(M){var B={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(K){return B[K]})}var oe=/\/+/g;function me(M,B){return typeof M=="object"&&M!==null&&M.key!=null?ne(""+M.key):B.toString(36)}function fe(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(O,O):(M.status="pending",M.then(function(B){M.status==="pending"&&(M.status="fulfilled",M.value=B)},function(B){M.status==="pending"&&(M.status="rejected",M.reason=B)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function q(M,B,K,ie,he){var Ae=typeof M;(Ae==="undefined"||Ae==="boolean")&&(M=null);var Me=!1;if(M===null)Me=!0;else switch(Ae){case"bigint":case"string":case"number":Me=!0;break;case"object":switch(M.$$typeof){case t:case e:Me=!0;break;case p:return Me=M._init,q(Me(M._payload),B,K,ie,he)}}if(Me)return he=he(M),Me=ie===""?"."+me(M,0):ie,z(he)?(K="",Me!=null&&(K=Me.replace(oe,"$&/")+"/"),q(he,B,K,"",function(Zt){return Zt})):he!=null&&(Ne(he)&&(he=le(he,K+(he.key==null||M&&M.key===he.key?"":(""+he.key).replace(oe,"$&/")+"/")+Me)),B.push(he)),1;Me=0;var Re=ie===""?".":ie+":";if(z(M))for(var _e=0;_e<M.length;_e++)ie=M[_e],Ae=Re+me(ie,_e),Me+=q(ie,B,K,Ae,he);else if(_e=w(M),typeof _e=="function")for(M=_e.call(M),_e=0;!(ie=M.next()).done;)ie=ie.value,Ae=Re+me(ie,_e++),Me+=q(ie,B,K,Ae,he);else if(Ae==="object"){if(typeof M.then=="function")return q(fe(M),B,K,ie,he);throw B=String(M),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.")}return Me}function W(M,B,K){if(M==null)return M;var ie=[],he=0;return q(M,ie,"","",function(Ae){return B.call(K,Ae,he++)}),ie}function be(M){if(M._status===-1){var B=M._result;B=B(),B.then(function(K){(M._status===0||M._status===-1)&&(M._status=1,M._result=K)},function(K){(M._status===0||M._status===-1)&&(M._status=2,M._result=K)}),M._status===-1&&(M._status=0,M._result=B)}if(M._status===1)return M._result.default;throw M._result}var ve=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var B=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(B))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Pe={map:W,forEach:function(M,B,K){W(M,function(){B.apply(this,arguments)},K)},count:function(M){var B=0;return W(M,function(){B++}),B},toArray:function(M){return W(M,function(B){return B})||[]},only:function(M){if(!Ne(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ie.Activity=g,Ie.Children=Pe,Ie.Component=k,Ie.Fragment=n,Ie.Profiler=s,Ie.PureComponent=j,Ie.StrictMode=r,Ie.Suspense=u,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(M){return D.H.useMemoCache(M)}},Ie.cache=function(M){return function(){return M.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(M,B,K){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var ie=E({},M.props),he=M.key;if(B!=null)for(Ae in B.key!==void 0&&(he=""+B.key),B)!te.call(B,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&B.ref===void 0||(ie[Ae]=B[Ae]);var Ae=arguments.length-2;if(Ae===1)ie.children=K;else if(1<Ae){for(var Me=Array(Ae),Re=0;Re<Ae;Re++)Me[Re]=arguments[Re+2];ie.children=Me}return G(M.type,he,ie)},Ie.createContext=function(M){return M={$$typeof:a,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:o,_context:M},M},Ie.createElement=function(M,B,K){var ie,he={},Ae=null;if(B!=null)for(ie in B.key!==void 0&&(Ae=""+B.key),B)te.call(B,ie)&&ie!=="key"&&ie!=="__self"&&ie!=="__source"&&(he[ie]=B[ie]);var Me=arguments.length-2;if(Me===1)he.children=K;else if(1<Me){for(var Re=Array(Me),_e=0;_e<Me;_e++)Re[_e]=arguments[_e+2];he.children=Re}if(M&&M.defaultProps)for(ie in Me=M.defaultProps,Me)he[ie]===void 0&&(he[ie]=Me[ie]);return G(M,Ae,he)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(M){return{$$typeof:d,render:M}},Ie.isValidElement=Ne,Ie.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:be}},Ie.memo=function(M,B){return{$$typeof:f,type:M,compare:B===void 0?null:B}},Ie.startTransition=function(M){var B=D.T,K={};D.T=K;try{var ie=M(),he=D.S;he!==null&&he(K,ie),typeof ie=="object"&&ie!==null&&typeof ie.then=="function"&&ie.then(O,ve)}catch(Ae){ve(Ae)}finally{B!==null&&K.types!==null&&(B.types=K.types),D.T=B}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(M){return D.H.use(M)},Ie.useActionState=function(M,B,K){return D.H.useActionState(M,B,K)},Ie.useCallback=function(M,B){return D.H.useCallback(M,B)},Ie.useContext=function(M){return D.H.useContext(M)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(M,B){return D.H.useDeferredValue(M,B)},Ie.useEffect=function(M,B){return D.H.useEffect(M,B)},Ie.useEffectEvent=function(M){return D.H.useEffectEvent(M)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(M,B,K){return D.H.useImperativeHandle(M,B,K)},Ie.useInsertionEffect=function(M,B){return D.H.useInsertionEffect(M,B)},Ie.useLayoutEffect=function(M,B){return D.H.useLayoutEffect(M,B)},Ie.useMemo=function(M,B){return D.H.useMemo(M,B)},Ie.useOptimistic=function(M,B){return D.H.useOptimistic(M,B)},Ie.useReducer=function(M,B,K){return D.H.useReducer(M,B,K)},Ie.useRef=function(M){return D.H.useRef(M)},Ie.useState=function(M){return D.H.useState(M)},Ie.useSyncExternalStore=function(M,B,K){return D.H.useSyncExternalStore(M,B,K)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.0",Ie}var y1;function Jc(){return y1||(y1=1,Am.exports=d5()),Am.exports}var R=Jc();const vn=Gc(R);var _m={exports:{}},oc={},jm={exports:{}},Mm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var v1;function u5(){return v1||(v1=1,(function(t){function e(q,W){var be=q.length;q.push(W);e:for(;0<be;){var ve=be-1>>>1,Pe=q[ve];if(0<s(Pe,W))q[ve]=W,q[be]=Pe,be=ve;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var W=q[0],be=q.pop();if(be!==W){q[0]=be;e:for(var ve=0,Pe=q.length,M=Pe>>>1;ve<M;){var B=2*(ve+1)-1,K=q[B],ie=B+1,he=q[ie];if(0>s(K,be))ie<Pe&&0>s(he,K)?(q[ve]=he,q[ie]=be,ve=ie):(q[ve]=K,q[B]=be,ve=B);else if(ie<Pe&&0>s(he,be))q[ve]=he,q[ie]=be,ve=ie;else break e}}return W}function s(q,W){var be=q.sortIndex-W.sortIndex;return be!==0?be:q.id-W.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,d=a.now();t.unstable_now=function(){return a.now()-d}}var u=[],f=[],p=1,g=null,x=3,w=!1,C=!1,E=!1,N=!1,k=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function P(q){for(var W=n(f);W!==null;){if(W.callback===null)r(f);else if(W.startTime<=q)r(f),W.sortIndex=W.expirationTime,e(u,W);else break;W=n(f)}}function z(q){if(E=!1,P(q),!C)if(n(u)!==null)C=!0,O||(O=!0,ne());else{var W=n(f);W!==null&&fe(z,W.startTime-q)}}var O=!1,D=-1,te=5,G=-1;function le(){return N?!0:!(t.unstable_now()-G<te)}function Ne(){if(N=!1,O){var q=t.unstable_now();G=q;var W=!0;try{e:{C=!1,E&&(E=!1,_(D),D=-1),w=!0;var be=x;try{t:{for(P(q),g=n(u);g!==null&&!(g.expirationTime>q&&le());){var ve=g.callback;if(typeof ve=="function"){g.callback=null,x=g.priorityLevel;var Pe=ve(g.expirationTime<=q);if(q=t.unstable_now(),typeof Pe=="function"){g.callback=Pe,P(q),W=!0;break t}g===n(u)&&r(u),P(q)}else r(u);g=n(u)}if(g!==null)W=!0;else{var M=n(f);M!==null&&fe(z,M.startTime-q),W=!1}}break e}finally{g=null,x=be,w=!1}W=void 0}}finally{W?ne():O=!1}}}var ne;if(typeof j=="function")ne=function(){j(Ne)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,me=oe.port2;oe.port1.onmessage=Ne,ne=function(){me.postMessage(null)}}else ne=function(){k(Ne,0)};function fe(q,W){D=k(function(){q(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_next=function(q){switch(x){case 1:case 2:case 3:var W=3;break;default:W=x}var be=x;x=W;try{return q()}finally{x=be}},t.unstable_requestPaint=function(){N=!0},t.unstable_runWithPriority=function(q,W){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var be=x;x=q;try{return W()}finally{x=be}},t.unstable_scheduleCallback=function(q,W,be){var ve=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?ve+be:ve):be=ve,q){case 1:var Pe=-1;break;case 2:Pe=250;break;case 5:Pe=1073741823;break;case 4:Pe=1e4;break;default:Pe=5e3}return Pe=be+Pe,q={id:p++,callback:W,priorityLevel:q,startTime:be,expirationTime:Pe,sortIndex:-1},be>ve?(q.sortIndex=be,e(f,q),n(u)===null&&q===n(f)&&(E?(_(D),D=-1):E=!0,fe(z,be-ve))):(q.sortIndex=Pe,e(u,q),C||w||(C=!0,O||(O=!0,ne()))),q},t.unstable_shouldYield=le,t.unstable_wrapCallback=function(q){var W=x;return function(){var be=x;x=W;try{return q.apply(this,arguments)}finally{x=be}}}})(Mm)),Mm}var w1;function h5(){return w1||(w1=1,jm.exports=u5()),jm.exports}var Rm={exports:{}},hn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1;function f5(){if(S1)return hn;S1=1;var t=Jc();function e(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)f+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},s=Symbol.for("react.portal");function o(u,f,p){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:g==null?null:""+g,children:u,containerInfo:f,implementation:p}}var a=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return hn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,hn.createPortal=function(u,f){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(u,f,null,p)},hn.flushSync=function(u){var f=a.T,p=r.p;try{if(a.T=null,r.p=2,u)return u()}finally{a.T=f,r.p=p,r.d.f()}},hn.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(u,f))},hn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},hn.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var p=f.as,g=d(p,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,w=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;p==="style"?r.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:w}):p==="script"&&r.d.X(u,{crossOrigin:g,integrity:x,fetchPriority:w,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},hn.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var p=d(f.as,f.crossOrigin);r.d.M(u,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(u)},hn.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var p=f.as,g=d(p,f.crossOrigin);r.d.L(u,p,{crossOrigin:g,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},hn.preloadModule=function(u,f){if(typeof u=="string")if(f){var p=d(f.as,f.crossOrigin);r.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(u)},hn.requestFormReset=function(u){r.d.r(u)},hn.unstable_batchedUpdates=function(u,f){return u(f)},hn.useFormState=function(u,f,p){return a.H.useFormState(u,f,p)},hn.useFormStatus=function(){return a.H.useHostTransitionStatus()},hn.version="19.2.0",hn}var C1;function PC(){if(C1)return Rm.exports;C1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Rm.exports=f5(),Rm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var N1;function p5(){if(N1)return oc;N1=1;var t=h5(),e=Jc(),n=PC();function r(i){var c="https://react.dev/errors/"+i;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)c+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+i+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var c=i,h=i;if(i.alternate)for(;c.return;)c=c.return;else{i=c;do c=i,(c.flags&4098)!==0&&(h=c.return),i=c.return;while(i)}return c.tag===3?h:null}function a(i){if(i.tag===13){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function d(i){if(i.tag===31){var c=i.memoizedState;if(c===null&&(i=i.alternate,i!==null&&(c=i.memoizedState)),c!==null)return c.dehydrated}return null}function u(i){if(o(i)!==i)throw Error(r(188))}function f(i){var c=i.alternate;if(!c){if(c=o(i),c===null)throw Error(r(188));return c!==i?null:i}for(var h=i,m=c;;){var v=h.return;if(v===null)break;var S=v.alternate;if(S===null){if(m=v.return,m!==null){h=m;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===h)return u(v),i;if(S===m)return u(v),c;S=S.sibling}throw Error(r(188))}if(h.return!==m.return)h=v,m=S;else{for(var T=!1,A=v.child;A;){if(A===h){T=!0,h=v,m=S;break}if(A===m){T=!0,m=v,h=S;break}A=A.sibling}if(!T){for(A=S.child;A;){if(A===h){T=!0,h=S,m=v;break}if(A===m){T=!0,m=S,h=v;break}A=A.sibling}if(!T)throw Error(r(189))}}if(h.alternate!==m)throw Error(r(190))}if(h.tag!==3)throw Error(r(188));return h.stateNode.current===h?i:c}function p(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i;for(i=i.child;i!==null;){if(c=p(i),c!==null)return c;i=i.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),C=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),j=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),te=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),Ne=Symbol.iterator;function ne(i){return i===null||typeof i!="object"?null:(i=Ne&&i[Ne]||i["@@iterator"],typeof i=="function"?i:null)}var oe=Symbol.for("react.client.reference");function me(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===oe?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case k:return"Profiler";case N:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList";case G:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case C:return"Portal";case j:return i.displayName||"Context";case _:return(i._context.displayName||"Context")+".Consumer";case P:var c=i.render;return i=i.displayName,i||(i=c.displayName||c.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return c=i.displayName||null,c!==null?c:me(i.type)||"Memo";case te:c=i._payload,i=i._init;try{return me(i(c))}catch{}}return null}var fe=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},ve=[],Pe=-1;function M(i){return{current:i}}function B(i){0>Pe||(i.current=ve[Pe],ve[Pe]=null,Pe--)}function K(i,c){Pe++,ve[Pe]=i.current,i.current=c}var ie=M(null),he=M(null),Ae=M(null),Me=M(null);function Re(i,c){switch(K(Ae,c),K(he,i),K(ie,null),c.nodeType){case 9:case 11:i=(i=c.documentElement)&&(i=i.namespaceURI)?Uv(i):0;break;default:if(i=c.tagName,c=c.namespaceURI)c=Uv(c),i=zv(c,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}B(ie),K(ie,i)}function _e(){B(ie),B(he),B(Ae)}function Zt(i){i.memoizedState!==null&&K(Me,i);var c=ie.current,h=zv(c,i.type);c!==h&&(K(he,i),K(ie,h))}function Ct(i){he.current===i&&(B(ie),B(he)),Me.current===i&&(B(Me),ec._currentValue=be)}var bt,Ge;function xt(i){if(bt===void 0)try{throw Error()}catch(h){var c=h.stack.trim().match(/\n( *(at )?)/);bt=c&&c[1]||"",Ge=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bt+i+Ge}var Rt=!1;function Rs(i,c){if(!i||Rt)return"";Rt=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(J){var $=J}Reflect.construct(i,[],ee)}else{try{ee.call()}catch(J){$=J}i.call(ee.prototype)}}else{try{throw Error()}catch(J){$=J}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(J){if(J&&$&&typeof J.stack=="string")return[J.stack,$.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=m.DetermineComponentFrameRoot(),T=S[0],A=S[1];if(T&&A){var I=T.split(`
`),V=A.split(`
`);for(v=m=0;m<I.length&&!I[m].includes("DetermineComponentFrameRoot");)m++;for(;v<V.length&&!V[v].includes("DetermineComponentFrameRoot");)v++;if(m===I.length||v===V.length)for(m=I.length-1,v=V.length-1;1<=m&&0<=v&&I[m]!==V[v];)v--;for(;1<=m&&0<=v;m--,v--)if(I[m]!==V[v]){if(m!==1||v!==1)do if(m--,v--,0>v||I[m]!==V[v]){var Y=`
`+I[m].replace(" at new "," at ");return i.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",i.displayName)),Y}while(1<=m&&0<=v);break}}}finally{Rt=!1,Error.prepareStackTrace=h}return(h=i?i.displayName||i.name:"")?xt(h):""}function Is(i,c){switch(i.tag){case 26:case 27:case 5:return xt(i.type);case 16:return xt("Lazy");case 13:return i.child!==c&&c!==null?xt("Suspense Fallback"):xt("Suspense");case 19:return xt("SuspenseList");case 0:case 15:return Rs(i.type,!1);case 11:return Rs(i.type.render,!1);case 1:return Rs(i.type,!0);case 31:return xt("Activity");default:return""}}function Ft(i){try{var c="",h=null;do c+=Is(i,h),h=i,i=i.return;while(i);return c}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Xn=Object.prototype.hasOwnProperty,Ir=t.unstable_scheduleCallback,$t=t.unstable_cancelCallback,Ui=t.unstable_shouldYield,Uo=t.unstable_requestPaint,dn=t.unstable_now,zo=t.unstable_getCurrentPriorityLevel,Ds=t.unstable_ImmediatePriority,zi=t.unstable_UserBlockingPriority,$r=t.unstable_NormalPriority,ol=t.unstable_LowPriority,xe=t.unstable_IdlePriority,Ue=t.log,ze=t.unstable_setDisableYieldValue,Qe=null,Ye=null;function en(i){if(typeof Ue=="function"&&ze(i),Ye&&typeof Ye.setStrictMode=="function")try{Ye.setStrictMode(Qe,i)}catch{}}var Ze=Math.clz32?Math.clz32:Gr,ut=Math.log,et=Math.LN2;function Gr(i){return i>>>=0,i===0?32:31-(ut(i)/et|0)|0}var qo=256,Ho=262144,il=4194304;function Ps(i){var c=i&42;if(c!==0)return c;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function al(i,c,h){var m=i.pendingLanes;if(m===0)return 0;var v=0,S=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var A=m&134217727;return A!==0?(m=A&~S,m!==0?v=Ps(m):(T&=A,T!==0?v=Ps(T):h||(h=A&~i,h!==0&&(v=Ps(h))))):(A=m&~S,A!==0?v=Ps(A):T!==0?v=Ps(T):h||(h=m&~i,h!==0&&(v=Ps(h)))),v===0?0:c!==0&&c!==v&&(c&S)===0&&(S=v&-v,h=c&-c,S>=h||S===32&&(h&4194048)!==0)?c:v}function Vo(i,c){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&c)===0}function qb(i,c){switch(i){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vf(){var i=il;return il<<=1,(il&62914560)===0&&(il=4194304),i}function ed(i){for(var c=[],h=0;31>h;h++)c.push(i);return c}function mr(i,c){i.pendingLanes|=c,c!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function wf(i,c,h,m,v,S){var T=i.pendingLanes;i.pendingLanes=h,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=h,i.entangledLanes&=h,i.errorRecoveryDisabledLanes&=h,i.shellSuspendCounter=0;var A=i.entanglements,I=i.expirationTimes,V=i.hiddenUpdates;for(h=T&~h;0<h;){var Y=31-Ze(h),ee=1<<Y;A[Y]=0,I[Y]=-1;var $=V[Y];if($!==null)for(V[Y]=null,Y=0;Y<$.length;Y++){var J=$[Y];J!==null&&(J.lane&=-536870913)}h&=~ee}m!==0&&ll(i,m,0),S!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=S&~(T&~c))}function ll(i,c,h){i.pendingLanes|=c,i.suspendedLanes&=~c;var m=31-Ze(c);i.entangledLanes|=c,i.entanglements[m]=i.entanglements[m]|1073741824|h&261930}function Sf(i,c){var h=i.entangledLanes|=c;for(i=i.entanglements;h;){var m=31-Ze(h),v=1<<m;v&c|i[m]&c&&(i[m]|=c),h&=~v}}function cl(i,c){var h=c&-c;return h=(h&42)!==0?1:dl(h),(h&(i.suspendedLanes|c))!==0?0:h}function dl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Jr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function td(){var i=W.p;return i!==0?i:(i=window.event,i===void 0?32:c1(i.type))}function ul(i,c){var h=W.p;try{return W.p=i,c()}finally{W.p=h}}var gr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+gr,un="__reactProps$"+gr,qt="__reactContainer$"+gr,Os="__reactEvents$"+gr,nd="__reactListeners$"+gr,Kr="__reactHandles$"+gr,rd="__reactResources$"+gr,Ls="__reactMarker$"+gr;function Fo(i){delete i[Gt],delete i[un],delete i[Os],delete i[nd],delete i[Kr]}function Bs(i){var c=i[Gt];if(c)return c;for(var h=i.parentNode;h;){if(c=h[qt]||h[Gt]){if(h=c.alternate,c.child!==null||h!==null&&h.child!==null)for(i=Jv(i);i!==null;){if(h=i[Gt])return h;i=Jv(i)}return c}i=h,h=i.parentNode}return null}function Wr(i){if(i=i[Gt]||i[qt]){var c=i.tag;if(c===5||c===6||c===13||c===31||c===26||c===27||c===3)return i}return null}function Us(i){var c=i.tag;if(c===5||c===26||c===27||c===6)return i.stateNode;throw Error(r(33))}function zs(i){var c=i[rd];return c||(c=i[rd]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function It(i){i[Ls]=!0}var Dr=new Set,re={};function Yr(i,c){qs(i,c),qs(i+"Capture",c)}function qs(i,c){for(re[i]=c,i=0;i<c.length;i++)Dr.add(c[i])}var Cf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sd={},od={};function $o(i){return Xn.call(od,i)?!0:Xn.call(sd,i)?!1:Cf.test(i)?od[i]=!0:(sd[i]=!0,!1)}function Pr(i,c,h){if($o(c))if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":i.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){i.removeAttribute(c);return}}i.setAttribute(c,""+h)}}function Go(i,c,h){if(h===null)i.removeAttribute(c);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttribute(c,""+h)}}function br(i,c,h,m){if(m===null)i.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(h);return}i.setAttributeNS(c,h,""+m)}}function En(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function id(i){var c=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Nf(i,c,h){var m=Object.getOwnPropertyDescriptor(i.constructor.prototype,c);if(!i.hasOwnProperty(c)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,S=m.set;return Object.defineProperty(i,c,{configurable:!0,get:function(){return v.call(this)},set:function(T){h=""+T,S.call(this,T)}}),Object.defineProperty(i,c,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){i._valueTracker=null,delete i[c]}}}}function hl(i){if(!i._valueTracker){var c=id(i)?"checked":"value";i._valueTracker=Nf(i,c,""+i[c])}}function ad(i){if(!i)return!1;var c=i._valueTracker;if(!c)return!0;var h=c.getValue(),m="";return i&&(m=id(i)?i.checked?"true":"false":i.value),i=m,i!==h?(c.setValue(i),!0):!1}function qi(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var Ef=/[\n"\\]/g;function Tn(i){return i.replace(Ef,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function fl(i,c,h,m,v,S,T,A){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),c!=null?T==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+En(c)):i.value!==""+En(c)&&(i.value=""+En(c)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),c!=null?pl(i,T,En(c)):h!=null?pl(i,T,En(h)):m!=null&&i.removeAttribute("value"),v==null&&S!=null&&(i.defaultChecked=!!S),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+En(A):i.removeAttribute("name")}function ld(i,c,h,m,v,S,T,A){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(i.type=S),c!=null||h!=null){if(!(S!=="submit"&&S!=="reset"||c!=null)){hl(i);return}h=h!=null?""+En(h):"",c=c!=null?""+En(c):h,A||c===i.value||(i.value=c),i.defaultValue=c}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,i.checked=A?i.checked:!!m,i.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),hl(i)}function pl(i,c,h){c==="number"&&qi(i.ownerDocument)===i||i.defaultValue===""+h||(i.defaultValue=""+h)}function Hs(i,c,h,m){if(i=i.options,c){c={};for(var v=0;v<h.length;v++)c["$"+h[v]]=!0;for(h=0;h<i.length;h++)v=c.hasOwnProperty("$"+i[h].value),i[h].selected!==v&&(i[h].selected=v),v&&m&&(i[h].defaultSelected=!0)}else{for(h=""+En(h),c=null,v=0;v<i.length;v++){if(i[v].value===h){i[v].selected=!0,m&&(i[v].defaultSelected=!0);return}c!==null||i[v].disabled||(c=i[v])}c!==null&&(c.selected=!0)}}function cd(i,c,h){if(c!=null&&(c=""+En(c),c!==i.value&&(i.value=c),h==null)){i.defaultValue!==c&&(i.defaultValue=c);return}i.defaultValue=h!=null?""+En(h):""}function dd(i,c,h,m){if(c==null){if(m!=null){if(h!=null)throw Error(r(92));if(fe(m)){if(1<m.length)throw Error(r(93));m=m[0]}h=m}h==null&&(h=""),c=h}h=En(c),i.defaultValue=h,m=i.textContent,m===h&&m!==""&&m!==null&&(i.value=m),hl(i)}function Vs(i,c){if(c){var h=i.firstChild;if(h&&h===i.lastChild&&h.nodeType===3){h.nodeValue=c;return}}i.textContent=c}var Tf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ud(i,c,h){var m=c.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="":m?i.setProperty(c,h):typeof h!="number"||h===0||Tf.has(c)?c==="float"?i.cssFloat=h:i[c]=(""+h).trim():i[c]=h+"px"}function hd(i,c,h){if(c!=null&&typeof c!="object")throw Error(r(62));if(i=i.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?i.setProperty(m,""):m==="float"?i.cssFloat="":i[m]="");for(var v in c)m=c[v],c.hasOwnProperty(v)&&h[v]!==m&&ud(i,v,m)}else for(var S in c)c.hasOwnProperty(S)&&ud(i,S,c[S])}function ml(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Af=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hi(i){return Af.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function xr(){}var gl=null;function bl(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,$s=null;function fd(i){var c=Wr(i);if(c&&(i=c.stateNode)){var h=i[un]||null;e:switch(i=c.stateNode,c.type){case"input":if(fl(i,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),c=h.name,h.type==="radio"&&c!=null){for(h=i;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+Tn(""+c)+'"][type="radio"]'),c=0;c<h.length;c++){var m=h[c];if(m!==i&&m.form===i.form){var v=m[un]||null;if(!v)throw Error(r(90));fl(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<h.length;c++)m=h[c],m.form===i.form&&ad(m)}break e;case"textarea":cd(i,h.value,h.defaultValue);break e;case"select":c=h.value,c!=null&&Hs(i,!!h.multiple,c,!1)}}}var Xr=!1;function xl(i,c,h){if(Xr)return i(c,h);Xr=!0;try{var m=i(c);return m}finally{if(Xr=!1,(Fs!==null||$s!==null)&&(Xd(),Fs&&(c=Fs,i=$s,$s=Fs=null,fd(c),i)))for(c=0;c<i.length;c++)fd(i[c])}}function Jo(i,c){var h=i.stateNode;if(h===null)return null;var m=h[un]||null;if(m===null)return null;h=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(i=i.type,m=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!m;break e;default:i=!1}if(i)return null;if(h&&typeof h!="function")throw Error(r(231,c,typeof h));return h}var F=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),X=!1;if(F)try{var Z={};Object.defineProperty(Z,"passive",{get:function(){X=!0}}),window.addEventListener("test",Z,Z),window.removeEventListener("test",Z,Z)}catch{X=!1}var ce=null,Nt=null,yr=null;function Qn(){if(yr)return yr;var i,c=Nt,h=c.length,m,v="value"in ce?ce.value:ce.textContent,S=v.length;for(i=0;i<h&&c[i]===v[i];i++);var T=h-i;for(m=1;m<=T&&c[h-m]===v[S-m];m++);return yr=v.slice(i,1<m?1-m:void 0)}function Qr(i){var c=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&c===13&&(i=13)):i=c,i===10&&(i=13),32<=i||i===13?i:0}function Ln(){return!0}function Ko(){return!1}function kn(i){function c(h,m,v,S,T){this._reactName=h,this._targetInst=v,this.type=m,this.nativeEvent=S,this.target=T,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(h=i[A],this[A]=h?h(S):S[A]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Ln:Ko,this.isPropagationStopped=Ko,this}return g(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=Ln)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=Ln)},persist:function(){},isPersistent:Ln}),c}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=kn(Wo),yl=g({},Wo,{view:0,detail:0}),sA=kn(yl),_f,jf,vl,md=g({},yl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rf,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==vl&&(vl&&i.type==="mousemove"?(_f=i.screenX-vl.screenX,jf=i.screenY-vl.screenY):jf=_f=0,vl=i),_f)},movementY:function(i){return"movementY"in i?i.movementY:jf}}),Hb=kn(md),oA=g({},md,{dataTransfer:0}),iA=kn(oA),aA=g({},yl,{relatedTarget:0}),Mf=kn(aA),lA=g({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),cA=kn(lA),dA=g({},Wo,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),uA=kn(dA),hA=g({},Wo,{data:0}),Vb=kn(hA),fA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gA(i){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(i):(i=mA[i])?!!c[i]:!1}function Rf(){return gA}var bA=g({},yl,{key:function(i){if(i.key){var c=fA[i.key]||i.key;if(c!=="Unidentified")return c}return i.type==="keypress"?(i=Qr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rf,charCode:function(i){return i.type==="keypress"?Qr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Qr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),xA=kn(bA),yA=g({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fb=kn(yA),vA=g({},yl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rf}),wA=kn(vA),SA=g({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),CA=kn(SA),NA=g({},md,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),EA=kn(NA),TA=g({},Wo,{newState:0,oldState:0}),kA=kn(TA),AA=[9,13,27,32],If=F&&"CompositionEvent"in window,wl=null;F&&"documentMode"in document&&(wl=document.documentMode);var _A=F&&"TextEvent"in window&&!wl,$b=F&&(!If||wl&&8<wl&&11>=wl),Gb=" ",Jb=!1;function Kb(i,c){switch(i){case"keyup":return AA.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wb(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Vi=!1;function jA(i,c){switch(i){case"compositionend":return Wb(c);case"keypress":return c.which!==32?null:(Jb=!0,Gb);case"textInput":return i=c.data,i===Gb&&Jb?null:i;default:return null}}function MA(i,c){if(Vi)return i==="compositionend"||!If&&Kb(i,c)?(i=Qn(),yr=Nt=ce=null,Vi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return $b&&c.locale!=="ko"?null:c.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yb(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c==="input"?!!RA[i.type]:c==="textarea"}function Xb(i,c,h,m){Fs?$s?$s.push(m):$s=[m]:Fs=m,c=su(c,"onChange"),0<c.length&&(h=new pd("onChange","change",null,h,m),i.push({event:h,listeners:c}))}var Sl=null,Cl=null;function IA(i){Iv(i,0)}function gd(i){var c=Us(i);if(ad(c))return i}function Qb(i,c){if(i==="change")return c}var Zb=!1;if(F){var Df;if(F){var Pf="oninput"in document;if(!Pf){var ex=document.createElement("div");ex.setAttribute("oninput","return;"),Pf=typeof ex.oninput=="function"}Df=Pf}else Df=!1;Zb=Df&&(!document.documentMode||9<document.documentMode)}function tx(){Sl&&(Sl.detachEvent("onpropertychange",nx),Cl=Sl=null)}function nx(i){if(i.propertyName==="value"&&gd(Cl)){var c=[];Xb(c,Cl,i,bl(i)),xl(IA,c)}}function DA(i,c,h){i==="focusin"?(tx(),Sl=c,Cl=h,Sl.attachEvent("onpropertychange",nx)):i==="focusout"&&tx()}function PA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return gd(Cl)}function OA(i,c){if(i==="click")return gd(c)}function LA(i,c){if(i==="input"||i==="change")return gd(c)}function BA(i,c){return i===c&&(i!==0||1/i===1/c)||i!==i&&c!==c}var Bn=typeof Object.is=="function"?Object.is:BA;function Nl(i,c){if(Bn(i,c))return!0;if(typeof i!="object"||i===null||typeof c!="object"||c===null)return!1;var h=Object.keys(i),m=Object.keys(c);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var v=h[m];if(!Xn.call(c,v)||!Bn(i[v],c[v]))return!1}return!0}function rx(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function sx(i,c){var h=rx(i);i=0;for(var m;h;){if(h.nodeType===3){if(m=i+h.textContent.length,i<=c&&m>=c)return{node:h,offset:c-i};i=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=rx(h)}}function ox(i,c){return i&&c?i===c?!0:i&&i.nodeType===3?!1:c&&c.nodeType===3?ox(i,c.parentNode):"contains"in i?i.contains(c):i.compareDocumentPosition?!!(i.compareDocumentPosition(c)&16):!1:!1}function ix(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var c=qi(i.document);c instanceof i.HTMLIFrameElement;){try{var h=typeof c.contentWindow.location.href=="string"}catch{h=!1}if(h)i=c.contentWindow;else break;c=qi(i.document)}return c}function Of(i){var c=i&&i.nodeName&&i.nodeName.toLowerCase();return c&&(c==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||c==="textarea"||i.contentEditable==="true")}var UA=F&&"documentMode"in document&&11>=document.documentMode,Fi=null,Lf=null,El=null,Bf=!1;function ax(i,c,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Bf||Fi==null||Fi!==qi(m)||(m=Fi,"selectionStart"in m&&Of(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),El&&Nl(El,m)||(El=m,m=su(Lf,"onSelect"),0<m.length&&(c=new pd("onSelect","select",null,c,h),i.push({event:c,listeners:m}),c.target=Fi)))}function Yo(i,c){var h={};return h[i.toLowerCase()]=c.toLowerCase(),h["Webkit"+i]="webkit"+c,h["Moz"+i]="moz"+c,h}var $i={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionrun:Yo("Transition","TransitionRun"),transitionstart:Yo("Transition","TransitionStart"),transitioncancel:Yo("Transition","TransitionCancel"),transitionend:Yo("Transition","TransitionEnd")},Uf={},lx={};F&&(lx=document.createElement("div").style,"AnimationEvent"in window||(delete $i.animationend.animation,delete $i.animationiteration.animation,delete $i.animationstart.animation),"TransitionEvent"in window||delete $i.transitionend.transition);function Xo(i){if(Uf[i])return Uf[i];if(!$i[i])return i;var c=$i[i],h;for(h in c)if(c.hasOwnProperty(h)&&h in lx)return Uf[i]=c[h];return i}var cx=Xo("animationend"),dx=Xo("animationiteration"),ux=Xo("animationstart"),zA=Xo("transitionrun"),qA=Xo("transitionstart"),HA=Xo("transitioncancel"),hx=Xo("transitionend"),fx=new Map,zf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zf.push("scrollEnd");function vr(i,c){fx.set(i,c),Yr(c,[i])}var bd=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Zn=[],Gi=0,qf=0;function xd(){for(var i=Gi,c=qf=Gi=0;c<i;){var h=Zn[c];Zn[c++]=null;var m=Zn[c];Zn[c++]=null;var v=Zn[c];Zn[c++]=null;var S=Zn[c];if(Zn[c++]=null,m!==null&&v!==null){var T=m.pending;T===null?v.next=v:(v.next=T.next,T.next=v),m.pending=v}S!==0&&px(h,v,S)}}function yd(i,c,h,m){Zn[Gi++]=i,Zn[Gi++]=c,Zn[Gi++]=h,Zn[Gi++]=m,qf|=m,i.lanes|=m,i=i.alternate,i!==null&&(i.lanes|=m)}function Hf(i,c,h,m){return yd(i,c,h,m),vd(i)}function Qo(i,c){return yd(i,null,null,c),vd(i)}function px(i,c,h){i.lanes|=h;var m=i.alternate;m!==null&&(m.lanes|=h);for(var v=!1,S=i.return;S!==null;)S.childLanes|=h,m=S.alternate,m!==null&&(m.childLanes|=h),S.tag===22&&(i=S.stateNode,i===null||i._visibility&1||(v=!0)),i=S,S=S.return;return i.tag===3?(S=i.stateNode,v&&c!==null&&(v=31-Ze(h),i=S.hiddenUpdates,m=i[v],m===null?i[v]=[c]:m.push(c),c.lane=h|536870912),S):null}function vd(i){if(50<Jl)throw Jl=0,Xp=null,Error(r(185));for(var c=i.return;c!==null;)i=c,c=i.return;return i.tag===3?i.stateNode:null}var Ji={};function VA(i,c,h,m){this.tag=i,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(i,c,h,m){return new VA(i,c,h,m)}function Vf(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Zr(i,c){var h=i.alternate;return h===null?(h=Un(i.tag,c,i.key,i.mode),h.elementType=i.elementType,h.type=i.type,h.stateNode=i.stateNode,h.alternate=i,i.alternate=h):(h.pendingProps=c,h.type=i.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=i.flags&65011712,h.childLanes=i.childLanes,h.lanes=i.lanes,h.child=i.child,h.memoizedProps=i.memoizedProps,h.memoizedState=i.memoizedState,h.updateQueue=i.updateQueue,c=i.dependencies,h.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},h.sibling=i.sibling,h.index=i.index,h.ref=i.ref,h.refCleanup=i.refCleanup,h}function mx(i,c){i.flags&=65011714;var h=i.alternate;return h===null?(i.childLanes=0,i.lanes=c,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=h.childLanes,i.lanes=h.lanes,i.child=h.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=h.memoizedProps,i.memoizedState=h.memoizedState,i.updateQueue=h.updateQueue,i.type=h.type,c=h.dependencies,i.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),i}function wd(i,c,h,m,v,S){var T=0;if(m=i,typeof i=="function")Vf(i)&&(T=1);else if(typeof i=="string")T=K_(i,h,ie.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case G:return i=Un(31,h,c,v),i.elementType=G,i.lanes=S,i;case E:return Zo(h.children,v,S,c);case N:T=8,v|=24;break;case k:return i=Un(12,h,c,v|2),i.elementType=k,i.lanes=S,i;case z:return i=Un(13,h,c,v),i.elementType=z,i.lanes=S,i;case O:return i=Un(19,h,c,v),i.elementType=O,i.lanes=S,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:T=10;break e;case _:T=9;break e;case P:T=11;break e;case D:T=14;break e;case te:T=16,m=null;break e}T=29,h=Error(r(130,i===null?"null":typeof i,"")),m=null}return c=Un(T,h,c,v),c.elementType=i,c.type=m,c.lanes=S,c}function Zo(i,c,h,m){return i=Un(7,i,m,c),i.lanes=h,i}function Ff(i,c,h){return i=Un(6,i,null,c),i.lanes=h,i}function gx(i){var c=Un(18,null,null,0);return c.stateNode=i,c}function $f(i,c,h){return c=Un(4,i.children!==null?i.children:[],i.key,c),c.lanes=h,c.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},c}var bx=new WeakMap;function er(i,c){if(typeof i=="object"&&i!==null){var h=bx.get(i);return h!==void 0?h:(c={value:i,source:c,stack:Ft(c)},bx.set(i,c),c)}return{value:i,source:c,stack:Ft(c)}}var Ki=[],Wi=0,Sd=null,Tl=0,tr=[],nr=0,Gs=null,Or=1,Lr="";function es(i,c){Ki[Wi++]=Tl,Ki[Wi++]=Sd,Sd=i,Tl=c}function xx(i,c,h){tr[nr++]=Or,tr[nr++]=Lr,tr[nr++]=Gs,Gs=i;var m=Or;i=Lr;var v=32-Ze(m)-1;m&=~(1<<v),h+=1;var S=32-Ze(c)+v;if(30<S){var T=v-v%5;S=(m&(1<<T)-1).toString(32),m>>=T,v-=T,Or=1<<32-Ze(c)+v|h<<v|m,Lr=S+i}else Or=1<<S|h<<v|m,Lr=i}function Gf(i){i.return!==null&&(es(i,1),xx(i,1,0))}function Jf(i){for(;i===Sd;)Sd=Ki[--Wi],Ki[Wi]=null,Tl=Ki[--Wi],Ki[Wi]=null;for(;i===Gs;)Gs=tr[--nr],tr[nr]=null,Lr=tr[--nr],tr[nr]=null,Or=tr[--nr],tr[nr]=null}function yx(i,c){tr[nr++]=Or,tr[nr++]=Lr,tr[nr++]=Gs,Or=c.id,Lr=c.overflow,Gs=i}var tn=null,ht=null,$e=!1,Js=null,rr=!1,Kf=Error(r(519));function Ks(i){var c=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw kl(er(c,i)),Kf}function vx(i){var c=i.stateNode,h=i.type,m=i.memoizedProps;switch(c[Gt]=i,c[un]=m,h){case"dialog":He("cancel",c),He("close",c);break;case"iframe":case"object":case"embed":He("load",c);break;case"video":case"audio":for(h=0;h<Wl.length;h++)He(Wl[h],c);break;case"source":He("error",c);break;case"img":case"image":case"link":He("error",c),He("load",c);break;case"details":He("toggle",c);break;case"input":He("invalid",c),ld(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":He("invalid",c);break;case"textarea":He("invalid",c),dd(c,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||c.textContent===""+h||m.suppressHydrationWarning===!0||Lv(c.textContent,h)?(m.popover!=null&&(He("beforetoggle",c),He("toggle",c)),m.onScroll!=null&&He("scroll",c),m.onScrollEnd!=null&&He("scrollend",c),m.onClick!=null&&(c.onclick=xr),c=!0):c=!1,c||Ks(i,!0)}function wx(i){for(tn=i.return;tn;)switch(tn.tag){case 5:case 31:case 13:rr=!1;return;case 27:case 3:rr=!0;return;default:tn=tn.return}}function Yi(i){if(i!==tn)return!1;if(!$e)return wx(i),$e=!0,!1;var c=i.tag,h;if((h=c!==3&&c!==27)&&((h=c===5)&&(h=i.type,h=!(h!=="form"&&h!=="button")||hm(i.type,i.memoizedProps)),h=!h),h&&ht&&Ks(i),wx(i),c===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=Gv(i)}else if(c===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));ht=Gv(i)}else c===27?(c=ht,lo(i.type)?(i=bm,bm=null,ht=i):ht=c):ht=tn?or(i.stateNode.nextSibling):null;return!0}function ei(){ht=tn=null,$e=!1}function Wf(){var i=Js;return i!==null&&(Mn===null?Mn=i:Mn.push.apply(Mn,i),Js=null),i}function kl(i){Js===null?Js=[i]:Js.push(i)}var Yf=M(null),ti=null,ts=null;function Ws(i,c,h){K(Yf,c._currentValue),c._currentValue=h}function ns(i){i._currentValue=Yf.current,B(Yf)}function Xf(i,c,h){for(;i!==null;){var m=i.alternate;if((i.childLanes&c)!==c?(i.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),i===h)break;i=i.return}}function Qf(i,c,h,m){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var S=v.dependencies;if(S!==null){var T=v.child;S=S.firstContext;e:for(;S!==null;){var A=S;S=v;for(var I=0;I<c.length;I++)if(A.context===c[I]){S.lanes|=h,A=S.alternate,A!==null&&(A.lanes|=h),Xf(S.return,h,i),m||(T=null);break e}S=A.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(r(341));T.lanes|=h,S=T.alternate,S!==null&&(S.lanes|=h),Xf(T,h,i),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===i){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Xi(i,c,h,m){i=null;for(var v=c,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var A=v.type;Bn(v.pendingProps.value,T.value)||(i!==null?i.push(A):i=[A])}}else if(v===Me.current){if(T=v.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(ec):i=[ec])}v=v.return}i!==null&&Qf(c,i,h,m),c.flags|=262144}function Cd(i){for(i=i.firstContext;i!==null;){if(!Bn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ni(i){ti=i,ts=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function nn(i){return Sx(ti,i)}function Nd(i,c){return ti===null&&ni(i),Sx(i,c)}function Sx(i,c){var h=c._currentValue;if(c={context:c,memoizedValue:h,next:null},ts===null){if(i===null)throw Error(r(308));ts=c,i.dependencies={lanes:0,firstContext:c},i.flags|=524288}else ts=ts.next=c;return h}var FA=typeof AbortController<"u"?AbortController:function(){var i=[],c=this.signal={aborted:!1,addEventListener:function(h,m){i.push(m)}};this.abort=function(){c.aborted=!0,i.forEach(function(h){return h()})}},$A=t.unstable_scheduleCallback,GA=t.unstable_NormalPriority,Dt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Zf(){return{controller:new FA,data:new Map,refCount:0}}function Al(i){i.refCount--,i.refCount===0&&$A(GA,function(){i.controller.abort()})}var _l=null,ep=0,Qi=0,Zi=null;function JA(i,c){if(_l===null){var h=_l=[];ep=0,Qi=rm(),Zi={status:"pending",value:void 0,then:function(m){h.push(m)}}}return ep++,c.then(Cx,Cx),c}function Cx(){if(--ep===0&&_l!==null){Zi!==null&&(Zi.status="fulfilled");var i=_l;_l=null,Qi=0,Zi=null;for(var c=0;c<i.length;c++)(0,i[c])()}}function KA(i,c){var h=[],m={status:"pending",value:null,reason:null,then:function(v){h.push(v)}};return i.then(function(){m.status="fulfilled",m.value=c;for(var v=0;v<h.length;v++)(0,h[v])(c)},function(v){for(m.status="rejected",m.reason=v,v=0;v<h.length;v++)(0,h[v])(void 0)}),m}var Nx=q.S;q.S=function(i,c){av=dn(),typeof c=="object"&&c!==null&&typeof c.then=="function"&&JA(i,c),Nx!==null&&Nx(i,c)};var ri=M(null);function tp(){var i=ri.current;return i!==null?i:at.pooledCache}function Ed(i,c){c===null?K(ri,ri.current):K(ri,c.pool)}function Ex(){var i=tp();return i===null?null:{parent:Dt._currentValue,pool:i}}var ea=Error(r(460)),np=Error(r(474)),Td=Error(r(542)),kd={then:function(){}};function Tx(i){return i=i.status,i==="fulfilled"||i==="rejected"}function kx(i,c,h){switch(h=i[h],h===void 0?i.push(c):h!==c&&(c.then(xr,xr),c=h),c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,_x(i),i;default:if(typeof c.status=="string")c.then(xr,xr);else{if(i=at,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=c,i.status="pending",i.then(function(m){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=m}},function(m){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw i=c.reason,_x(i),i}throw oi=c,ea}}function si(i){try{var c=i._init;return c(i._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(oi=h,ea):h}}var oi=null;function Ax(){if(oi===null)throw Error(r(459));var i=oi;return oi=null,i}function _x(i){if(i===ea||i===Td)throw Error(r(483))}var ta=null,jl=0;function Ad(i){var c=jl;return jl+=1,ta===null&&(ta=[]),kx(ta,i,c)}function Ml(i,c){c=c.props.ref,i.ref=c!==void 0?c:null}function _d(i,c){throw c.$$typeof===x?Error(r(525)):(i=Object.prototype.toString.call(c),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":i)))}function jx(i){function c(U,L){if(i){var H=U.deletions;H===null?(U.deletions=[L],U.flags|=16):H.push(L)}}function h(U,L){if(!i)return null;for(;L!==null;)c(U,L),L=L.sibling;return null}function m(U){for(var L=new Map;U!==null;)U.key!==null?L.set(U.key,U):L.set(U.index,U),U=U.sibling;return L}function v(U,L){return U=Zr(U,L),U.index=0,U.sibling=null,U}function S(U,L,H){return U.index=H,i?(H=U.alternate,H!==null?(H=H.index,H<L?(U.flags|=67108866,L):H):(U.flags|=67108866,L)):(U.flags|=1048576,L)}function T(U){return i&&U.alternate===null&&(U.flags|=67108866),U}function A(U,L,H,Q){return L===null||L.tag!==6?(L=Ff(H,U.mode,Q),L.return=U,L):(L=v(L,H),L.return=U,L)}function I(U,L,H,Q){var Se=H.type;return Se===E?Y(U,L,H.props.children,Q,H.key):L!==null&&(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===te&&si(Se)===L.type)?(L=v(L,H.props),Ml(L,H),L.return=U,L):(L=wd(H.type,H.key,H.props,null,U.mode,Q),Ml(L,H),L.return=U,L)}function V(U,L,H,Q){return L===null||L.tag!==4||L.stateNode.containerInfo!==H.containerInfo||L.stateNode.implementation!==H.implementation?(L=$f(H,U.mode,Q),L.return=U,L):(L=v(L,H.children||[]),L.return=U,L)}function Y(U,L,H,Q,Se){return L===null||L.tag!==7?(L=Zo(H,U.mode,Q,Se),L.return=U,L):(L=v(L,H),L.return=U,L)}function ee(U,L,H){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Ff(""+L,U.mode,H),L.return=U,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case w:return H=wd(L.type,L.key,L.props,null,U.mode,H),Ml(H,L),H.return=U,H;case C:return L=$f(L,U.mode,H),L.return=U,L;case te:return L=si(L),ee(U,L,H)}if(fe(L)||ne(L))return L=Zo(L,U.mode,H,null),L.return=U,L;if(typeof L.then=="function")return ee(U,Ad(L),H);if(L.$$typeof===j)return ee(U,Nd(U,L),H);_d(U,L)}return null}function $(U,L,H,Q){var Se=L!==null?L.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:A(U,L,""+H,Q);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case w:return H.key===Se?I(U,L,H,Q):null;case C:return H.key===Se?V(U,L,H,Q):null;case te:return H=si(H),$(U,L,H,Q)}if(fe(H)||ne(H))return Se!==null?null:Y(U,L,H,Q,null);if(typeof H.then=="function")return $(U,L,Ad(H),Q);if(H.$$typeof===j)return $(U,L,Nd(U,H),Q);_d(U,H)}return null}function J(U,L,H,Q,Se){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return U=U.get(H)||null,A(L,U,""+Q,Se);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case w:return U=U.get(Q.key===null?H:Q.key)||null,I(L,U,Q,Se);case C:return U=U.get(Q.key===null?H:Q.key)||null,V(L,U,Q,Se);case te:return Q=si(Q),J(U,L,H,Q,Se)}if(fe(Q)||ne(Q))return U=U.get(H)||null,Y(L,U,Q,Se,null);if(typeof Q.then=="function")return J(U,L,H,Ad(Q),Se);if(Q.$$typeof===j)return J(U,L,H,Nd(L,Q),Se);_d(L,Q)}return null}function pe(U,L,H,Q){for(var Se=null,Je=null,ge=L,Oe=L=0,Fe=null;ge!==null&&Oe<H.length;Oe++){ge.index>Oe?(Fe=ge,ge=null):Fe=ge.sibling;var Ke=$(U,ge,H[Oe],Q);if(Ke===null){ge===null&&(ge=Fe);break}i&&ge&&Ke.alternate===null&&c(U,ge),L=S(Ke,L,Oe),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke,ge=Fe}if(Oe===H.length)return h(U,ge),$e&&es(U,Oe),Se;if(ge===null){for(;Oe<H.length;Oe++)ge=ee(U,H[Oe],Q),ge!==null&&(L=S(ge,L,Oe),Je===null?Se=ge:Je.sibling=ge,Je=ge);return $e&&es(U,Oe),Se}for(ge=m(ge);Oe<H.length;Oe++)Fe=J(ge,U,Oe,H[Oe],Q),Fe!==null&&(i&&Fe.alternate!==null&&ge.delete(Fe.key===null?Oe:Fe.key),L=S(Fe,L,Oe),Je===null?Se=Fe:Je.sibling=Fe,Je=Fe);return i&&ge.forEach(function(po){return c(U,po)}),$e&&es(U,Oe),Se}function Te(U,L,H,Q){if(H==null)throw Error(r(151));for(var Se=null,Je=null,ge=L,Oe=L=0,Fe=null,Ke=H.next();ge!==null&&!Ke.done;Oe++,Ke=H.next()){ge.index>Oe?(Fe=ge,ge=null):Fe=ge.sibling;var po=$(U,ge,Ke.value,Q);if(po===null){ge===null&&(ge=Fe);break}i&&ge&&po.alternate===null&&c(U,ge),L=S(po,L,Oe),Je===null?Se=po:Je.sibling=po,Je=po,ge=Fe}if(Ke.done)return h(U,ge),$e&&es(U,Oe),Se;if(ge===null){for(;!Ke.done;Oe++,Ke=H.next())Ke=ee(U,Ke.value,Q),Ke!==null&&(L=S(Ke,L,Oe),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke);return $e&&es(U,Oe),Se}for(ge=m(ge);!Ke.done;Oe++,Ke=H.next())Ke=J(ge,U,Oe,Ke.value,Q),Ke!==null&&(i&&Ke.alternate!==null&&ge.delete(Ke.key===null?Oe:Ke.key),L=S(Ke,L,Oe),Je===null?Se=Ke:Je.sibling=Ke,Je=Ke);return i&&ge.forEach(function(o5){return c(U,o5)}),$e&&es(U,Oe),Se}function it(U,L,H,Q){if(typeof H=="object"&&H!==null&&H.type===E&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case w:e:{for(var Se=H.key;L!==null;){if(L.key===Se){if(Se=H.type,Se===E){if(L.tag===7){h(U,L.sibling),Q=v(L,H.props.children),Q.return=U,U=Q;break e}}else if(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===te&&si(Se)===L.type){h(U,L.sibling),Q=v(L,H.props),Ml(Q,H),Q.return=U,U=Q;break e}h(U,L);break}else c(U,L);L=L.sibling}H.type===E?(Q=Zo(H.props.children,U.mode,Q,H.key),Q.return=U,U=Q):(Q=wd(H.type,H.key,H.props,null,U.mode,Q),Ml(Q,H),Q.return=U,U=Q)}return T(U);case C:e:{for(Se=H.key;L!==null;){if(L.key===Se)if(L.tag===4&&L.stateNode.containerInfo===H.containerInfo&&L.stateNode.implementation===H.implementation){h(U,L.sibling),Q=v(L,H.children||[]),Q.return=U,U=Q;break e}else{h(U,L);break}else c(U,L);L=L.sibling}Q=$f(H,U.mode,Q),Q.return=U,U=Q}return T(U);case te:return H=si(H),it(U,L,H,Q)}if(fe(H))return pe(U,L,H,Q);if(ne(H)){if(Se=ne(H),typeof Se!="function")throw Error(r(150));return H=Se.call(H),Te(U,L,H,Q)}if(typeof H.then=="function")return it(U,L,Ad(H),Q);if(H.$$typeof===j)return it(U,L,Nd(U,H),Q);_d(U,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,L!==null&&L.tag===6?(h(U,L.sibling),Q=v(L,H),Q.return=U,U=Q):(h(U,L),Q=Ff(H,U.mode,Q),Q.return=U,U=Q),T(U)):h(U,L)}return function(U,L,H,Q){try{jl=0;var Se=it(U,L,H,Q);return ta=null,Se}catch(ge){if(ge===ea||ge===Td)throw ge;var Je=Un(29,ge,null,U.mode);return Je.lanes=Q,Je.return=U,Je}finally{}}}var ii=jx(!0),Mx=jx(!1),Ys=!1;function rp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sp(i,c){i=i.updateQueue,c.updateQueue===i&&(c.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Xs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Qs(i,c,h){var m=i.updateQueue;if(m===null)return null;if(m=m.shared,(Xe&2)!==0){var v=m.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),m.pending=c,c=vd(i),px(i,null,h),c}return yd(i,m,c,h),vd(i)}function Rl(i,c,h){if(c=c.updateQueue,c!==null&&(c=c.shared,(h&4194048)!==0)){var m=c.lanes;m&=i.pendingLanes,h|=m,c.lanes=h,Sf(i,h)}}function op(i,c){var h=i.updateQueue,m=i.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var v=null,S=null;if(h=h.firstBaseUpdate,h!==null){do{var T={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};S===null?v=S=T:S=S.next=T,h=h.next}while(h!==null);S===null?v=S=c:S=S.next=c}else v=S=c;h={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:m.shared,callbacks:m.callbacks},i.updateQueue=h;return}i=h.lastBaseUpdate,i===null?h.firstBaseUpdate=c:i.next=c,h.lastBaseUpdate=c}var ip=!1;function Il(){if(ip){var i=Zi;if(i!==null)throw i}}function Dl(i,c,h,m){ip=!1;var v=i.updateQueue;Ys=!1;var S=v.firstBaseUpdate,T=v.lastBaseUpdate,A=v.shared.pending;if(A!==null){v.shared.pending=null;var I=A,V=I.next;I.next=null,T===null?S=V:T.next=V,T=I;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,A=Y.lastBaseUpdate,A!==T&&(A===null?Y.firstBaseUpdate=V:A.next=V,Y.lastBaseUpdate=I))}if(S!==null){var ee=v.baseState;T=0,Y=V=I=null,A=S;do{var $=A.lane&-536870913,J=$!==A.lane;if(J?(Ve&$)===$:(m&$)===$){$!==0&&$===Qi&&(ip=!0),Y!==null&&(Y=Y.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var pe=i,Te=A;$=c;var it=h;switch(Te.tag){case 1:if(pe=Te.payload,typeof pe=="function"){ee=pe.call(it,ee,$);break e}ee=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=Te.payload,$=typeof pe=="function"?pe.call(it,ee,$):pe,$==null)break e;ee=g({},ee,$);break e;case 2:Ys=!0}}$=A.callback,$!==null&&(i.flags|=64,J&&(i.flags|=8192),J=v.callbacks,J===null?v.callbacks=[$]:J.push($))}else J={lane:$,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Y===null?(V=Y=J,I=ee):Y=Y.next=J,T|=$;if(A=A.next,A===null){if(A=v.shared.pending,A===null)break;J=A,A=J.next,J.next=null,v.lastBaseUpdate=J,v.shared.pending=null}}while(!0);Y===null&&(I=ee),v.baseState=I,v.firstBaseUpdate=V,v.lastBaseUpdate=Y,S===null&&(v.shared.lanes=0),ro|=T,i.lanes=T,i.memoizedState=ee}}function Rx(i,c){if(typeof i!="function")throw Error(r(191,i));i.call(c)}function Ix(i,c){var h=i.callbacks;if(h!==null)for(i.callbacks=null,i=0;i<h.length;i++)Rx(h[i],c)}var na=M(null),jd=M(0);function Dx(i,c){i=hs,K(jd,i),K(na,c),hs=i|c.baseLanes}function ap(){K(jd,hs),K(na,na.current)}function lp(){hs=jd.current,B(na),B(jd)}var zn=M(null),sr=null;function Zs(i){var c=i.alternate;K(jt,jt.current&1),K(zn,i),sr===null&&(c===null||na.current!==null||c.memoizedState!==null)&&(sr=i)}function cp(i){K(jt,jt.current),K(zn,i),sr===null&&(sr=i)}function Px(i){i.tag===22?(K(jt,jt.current),K(zn,i),sr===null&&(sr=i)):eo()}function eo(){K(jt,jt.current),K(zn,zn.current)}function qn(i){B(zn),sr===i&&(sr=null),B(jt)}var jt=M(0);function Md(i){for(var c=i;c!==null;){if(c.tag===13){var h=c.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||mm(h)||gm(h)))return c}else if(c.tag===19&&(c.memoizedProps.revealOrder==="forwards"||c.memoizedProps.revealOrder==="backwards"||c.memoizedProps.revealOrder==="unstable_legacy-backwards"||c.memoizedProps.revealOrder==="together")){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var rs=0,De=null,st=null,Pt=null,Rd=!1,ra=!1,ai=!1,Id=0,Pl=0,sa=null,WA=0;function Et(){throw Error(r(321))}function dp(i,c){if(c===null)return!1;for(var h=0;h<c.length&&h<i.length;h++)if(!Bn(i[h],c[h]))return!1;return!0}function up(i,c,h,m,v,S){return rs=S,De=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,q.H=i===null||i.memoizedState===null?xy:Tp,ai=!1,S=h(m,v),ai=!1,ra&&(S=Lx(c,h,m,v)),Ox(i),S}function Ox(i){q.H=Bl;var c=st!==null&&st.next!==null;if(rs=0,Pt=st=De=null,Rd=!1,Pl=0,sa=null,c)throw Error(r(300));i===null||Ot||(i=i.dependencies,i!==null&&Cd(i)&&(Ot=!0))}function Lx(i,c,h,m){De=i;var v=0;do{if(ra&&(sa=null),Pl=0,ra=!1,25<=v)throw Error(r(301));if(v+=1,Pt=st=null,i.updateQueue!=null){var S=i.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}q.H=yy,S=c(h,m)}while(ra);return S}function YA(){var i=q.H,c=i.useState()[0];return c=typeof c.then=="function"?Ol(c):c,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(De.flags|=1024),c}function hp(){var i=Id!==0;return Id=0,i}function fp(i,c,h){c.updateQueue=i.updateQueue,c.flags&=-2053,i.lanes&=~h}function pp(i){if(Rd){for(i=i.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}Rd=!1}rs=0,Pt=st=De=null,ra=!1,Pl=Id=0,sa=null}function yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?De.memoizedState=Pt=i:Pt=Pt.next=i,Pt}function Mt(){if(st===null){var i=De.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var c=Pt===null?De.memoizedState:Pt.next;if(c!==null)Pt=c,st=i;else{if(i===null)throw De.alternate===null?Error(r(467)):Error(r(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Pt===null?De.memoizedState=Pt=i:Pt=Pt.next=i}return Pt}function Dd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(i){var c=Pl;return Pl+=1,sa===null&&(sa=[]),i=kx(sa,i,c),c=De,(Pt===null?c.memoizedState:Pt.next)===null&&(c=c.alternate,q.H=c===null||c.memoizedState===null?xy:Tp),i}function Pd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ol(i);if(i.$$typeof===j)return nn(i)}throw Error(r(438,String(i)))}function mp(i){var c=null,h=De.updateQueue;if(h!==null&&(c=h.memoCache),c==null){var m=De.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),h===null&&(h=Dd(),De.updateQueue=h),h.memoCache=c,h=c.data[c.index],h===void 0)for(h=c.data[c.index]=Array(i),m=0;m<i;m++)h[m]=le;return c.index++,h}function ss(i,c){return typeof c=="function"?c(i):c}function Od(i){var c=Mt();return gp(c,st,i)}function gp(i,c,h){var m=i.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=h;var v=i.baseQueue,S=m.pending;if(S!==null){if(v!==null){var T=v.next;v.next=S.next,S.next=T}c.baseQueue=v=S,m.pending=null}if(S=i.baseState,v===null)i.memoizedState=S;else{c=v.next;var A=T=null,I=null,V=c,Y=!1;do{var ee=V.lane&-536870913;if(ee!==V.lane?(Ve&ee)===ee:(rs&ee)===ee){var $=V.revertLane;if($===0)I!==null&&(I=I.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ee===Qi&&(Y=!0);else if((rs&$)===$){V=V.next,$===Qi&&(Y=!0);continue}else ee={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},I===null?(A=I=ee,T=S):I=I.next=ee,De.lanes|=$,ro|=$;ee=V.action,ai&&h(S,ee),S=V.hasEagerState?V.eagerState:h(S,ee)}else $={lane:ee,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},I===null?(A=I=$,T=S):I=I.next=$,De.lanes|=ee,ro|=ee;V=V.next}while(V!==null&&V!==c);if(I===null?T=S:I.next=A,!Bn(S,i.memoizedState)&&(Ot=!0,Y&&(h=Zi,h!==null)))throw h;i.memoizedState=S,i.baseState=T,i.baseQueue=I,m.lastRenderedState=S}return v===null&&(m.lanes=0),[i.memoizedState,m.dispatch]}function bp(i){var c=Mt(),h=c.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=i;var m=h.dispatch,v=h.pending,S=c.memoizedState;if(v!==null){h.pending=null;var T=v=v.next;do S=i(S,T.action),T=T.next;while(T!==v);Bn(S,c.memoizedState)||(Ot=!0),c.memoizedState=S,c.baseQueue===null&&(c.baseState=S),h.lastRenderedState=S}return[S,m]}function Bx(i,c,h){var m=De,v=Mt(),S=$e;if(S){if(h===void 0)throw Error(r(407));h=h()}else h=c();var T=!Bn((st||v).memoizedState,h);if(T&&(v.memoizedState=h,Ot=!0),v=v.queue,vp(qx.bind(null,m,v,i),[i]),v.getSnapshot!==c||T||Pt!==null&&Pt.memoizedState.tag&1){if(m.flags|=2048,oa(9,{destroy:void 0},zx.bind(null,m,v,h,c),null),at===null)throw Error(r(349));S||(rs&127)!==0||Ux(m,c,h)}return h}function Ux(i,c,h){i.flags|=16384,i={getSnapshot:c,value:h},c=De.updateQueue,c===null?(c=Dd(),De.updateQueue=c,c.stores=[i]):(h=c.stores,h===null?c.stores=[i]:h.push(i))}function zx(i,c,h,m){c.value=h,c.getSnapshot=m,Hx(c)&&Vx(i)}function qx(i,c,h){return h(function(){Hx(c)&&Vx(i)})}function Hx(i){var c=i.getSnapshot;i=i.value;try{var h=c();return!Bn(i,h)}catch{return!0}}function Vx(i){var c=Qo(i,2);c!==null&&Rn(c,i,2)}function xp(i){var c=yn();if(typeof i=="function"){var h=i;if(i=h(),ai){en(!0);try{h()}finally{en(!1)}}}return c.memoizedState=c.baseState=i,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:i},c}function Fx(i,c,h,m){return i.baseState=h,gp(i,st,typeof m=="function"?m:ss)}function XA(i,c,h,m,v){if(Ud(i))throw Error(r(485));if(i=c.action,i!==null){var S={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){S.listeners.push(T)}};q.T!==null?h(!0):S.isTransition=!1,m(S),h=c.pending,h===null?(S.next=c.pending=S,$x(c,S)):(S.next=h.next,c.pending=h.next=S)}}function $x(i,c){var h=c.action,m=c.payload,v=i.state;if(c.isTransition){var S=q.T,T={};q.T=T;try{var A=h(v,m),I=q.S;I!==null&&I(T,A),Gx(i,c,A)}catch(V){yp(i,c,V)}finally{S!==null&&T.types!==null&&(S.types=T.types),q.T=S}}else try{S=h(v,m),Gx(i,c,S)}catch(V){yp(i,c,V)}}function Gx(i,c,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){Jx(i,c,m)},function(m){return yp(i,c,m)}):Jx(i,c,h)}function Jx(i,c,h){c.status="fulfilled",c.value=h,Kx(c),i.state=h,c=i.pending,c!==null&&(h=c.next,h===c?i.pending=null:(h=h.next,c.next=h,$x(i,h)))}function yp(i,c,h){var m=i.pending;if(i.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=h,Kx(c),c=c.next;while(c!==m)}i.action=null}function Kx(i){i=i.listeners;for(var c=0;c<i.length;c++)(0,i[c])()}function Wx(i,c){return c}function Yx(i,c){if($e){var h=at.formState;if(h!==null){e:{var m=De;if($e){if(ht){t:{for(var v=ht,S=rr;v.nodeType!==8;){if(!S){v=null;break t}if(v=or(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){ht=or(v.nextSibling),m=v.data==="F!";break e}}Ks(m)}m=!1}m&&(c=h[0])}}return h=yn(),h.memoizedState=h.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wx,lastRenderedState:c},h.queue=m,h=my.bind(null,De,m),m.dispatch=h,m=xp(!1),S=Ep.bind(null,De,!1,m.queue),m=yn(),v={state:c,dispatch:null,action:i,pending:null},m.queue=v,h=XA.bind(null,De,v,S,h),v.dispatch=h,m.memoizedState=i,[c,h,!1]}function Xx(i){var c=Mt();return Qx(c,st,i)}function Qx(i,c,h){if(c=gp(i,c,Wx)[0],i=Od(ss)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Ol(c)}catch(T){throw T===ea?Td:T}else m=c;c=Mt();var v=c.queue,S=v.dispatch;return h!==c.memoizedState&&(De.flags|=2048,oa(9,{destroy:void 0},QA.bind(null,v,h),null)),[m,S,i]}function QA(i,c){i.action=c}function Zx(i){var c=Mt(),h=st;if(h!==null)return Qx(c,h,i);Mt(),c=c.memoizedState,h=Mt();var m=h.queue.dispatch;return h.memoizedState=i,[c,m,!1]}function oa(i,c,h,m){return i={tag:i,create:h,deps:m,inst:c,next:null},c=De.updateQueue,c===null&&(c=Dd(),De.updateQueue=c),h=c.lastEffect,h===null?c.lastEffect=i.next=i:(m=h.next,h.next=i,i.next=m,c.lastEffect=i),i}function ey(){return Mt().memoizedState}function Ld(i,c,h,m){var v=yn();De.flags|=i,v.memoizedState=oa(1|c,{destroy:void 0},h,m===void 0?null:m)}function Bd(i,c,h,m){var v=Mt();m=m===void 0?null:m;var S=v.memoizedState.inst;st!==null&&m!==null&&dp(m,st.memoizedState.deps)?v.memoizedState=oa(c,S,h,m):(De.flags|=i,v.memoizedState=oa(1|c,S,h,m))}function ty(i,c){Ld(8390656,8,i,c)}function vp(i,c){Bd(2048,8,i,c)}function ZA(i){De.flags|=4;var c=De.updateQueue;if(c===null)c=Dd(),De.updateQueue=c,c.events=[i];else{var h=c.events;h===null?c.events=[i]:h.push(i)}}function ny(i){var c=Mt().memoizedState;return ZA({ref:c,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}function ry(i,c){return Bd(4,2,i,c)}function sy(i,c){return Bd(4,4,i,c)}function oy(i,c){if(typeof c=="function"){i=i();var h=c(i);return function(){typeof h=="function"?h():c(null)}}if(c!=null)return i=i(),c.current=i,function(){c.current=null}}function iy(i,c,h){h=h!=null?h.concat([i]):null,Bd(4,4,oy.bind(null,c,i),h)}function wp(){}function ay(i,c){var h=Mt();c=c===void 0?null:c;var m=h.memoizedState;return c!==null&&dp(c,m[1])?m[0]:(h.memoizedState=[i,c],i)}function ly(i,c){var h=Mt();c=c===void 0?null:c;var m=h.memoizedState;if(c!==null&&dp(c,m[1]))return m[0];if(m=i(),ai){en(!0);try{i()}finally{en(!1)}}return h.memoizedState=[m,c],m}function Sp(i,c,h){return h===void 0||(rs&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=c:(i.memoizedState=h,i=cv(),De.lanes|=i,ro|=i,h)}function cy(i,c,h,m){return Bn(h,c)?h:na.current!==null?(i=Sp(i,h,m),Bn(i,c)||(Ot=!0),i):(rs&42)===0||(rs&1073741824)!==0&&(Ve&261930)===0?(Ot=!0,i.memoizedState=h):(i=cv(),De.lanes|=i,ro|=i,c)}function dy(i,c,h,m,v){var S=W.p;W.p=S!==0&&8>S?S:8;var T=q.T,A={};q.T=A,Ep(i,!1,c,h);try{var I=v(),V=q.S;if(V!==null&&V(A,I),I!==null&&typeof I=="object"&&typeof I.then=="function"){var Y=KA(I,m);Ll(i,c,Y,Fn(i))}else Ll(i,c,m,Fn(i))}catch(ee){Ll(i,c,{then:function(){},status:"rejected",reason:ee},Fn())}finally{W.p=S,T!==null&&A.types!==null&&(T.types=A.types),q.T=T}}function e_(){}function Cp(i,c,h,m){if(i.tag!==5)throw Error(r(476));var v=uy(i).queue;dy(i,v,c,be,h===null?e_:function(){return hy(i),h(m)})}function uy(i){var c=i.memoizedState;if(c!==null)return c;c={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:be},next:null};var h={};return c.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ss,lastRenderedState:h},next:null},i.memoizedState=c,i=i.alternate,i!==null&&(i.memoizedState=c),c}function hy(i){var c=uy(i);c.next===null&&(c=i.alternate.memoizedState),Ll(i,c.next.queue,{},Fn())}function Np(){return nn(ec)}function fy(){return Mt().memoizedState}function py(){return Mt().memoizedState}function t_(i){for(var c=i.return;c!==null;){switch(c.tag){case 24:case 3:var h=Fn();i=Xs(h);var m=Qs(c,i,h);m!==null&&(Rn(m,c,h),Rl(m,c,h)),c={cache:Zf()},i.payload=c;return}c=c.return}}function n_(i,c,h){var m=Fn();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Ud(i)?gy(c,h):(h=Hf(i,c,h,m),h!==null&&(Rn(h,i,m),by(h,c,m)))}function my(i,c,h){var m=Fn();Ll(i,c,h,m)}function Ll(i,c,h,m){var v={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(Ud(i))gy(c,v);else{var S=i.alternate;if(i.lanes===0&&(S===null||S.lanes===0)&&(S=c.lastRenderedReducer,S!==null))try{var T=c.lastRenderedState,A=S(T,h);if(v.hasEagerState=!0,v.eagerState=A,Bn(A,T))return yd(i,c,v,0),at===null&&xd(),!1}catch{}finally{}if(h=Hf(i,c,v,m),h!==null)return Rn(h,i,m),by(h,c,m),!0}return!1}function Ep(i,c,h,m){if(m={lane:2,revertLane:rm(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Ud(i)){if(c)throw Error(r(479))}else c=Hf(i,h,m,2),c!==null&&Rn(c,i,2)}function Ud(i){var c=i.alternate;return i===De||c!==null&&c===De}function gy(i,c){ra=Rd=!0;var h=i.pending;h===null?c.next=c:(c.next=h.next,h.next=c),i.pending=c}function by(i,c,h){if((h&4194048)!==0){var m=c.lanes;m&=i.pendingLanes,h|=m,c.lanes=h,Sf(i,h)}}var Bl={readContext:nn,use:Pd,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};Bl.useEffectEvent=Et;var xy={readContext:nn,use:Pd,useCallback:function(i,c){return yn().memoizedState=[i,c===void 0?null:c],i},useContext:nn,useEffect:ty,useImperativeHandle:function(i,c,h){h=h!=null?h.concat([i]):null,Ld(4194308,4,oy.bind(null,c,i),h)},useLayoutEffect:function(i,c){return Ld(4194308,4,i,c)},useInsertionEffect:function(i,c){Ld(4,2,i,c)},useMemo:function(i,c){var h=yn();c=c===void 0?null:c;var m=i();if(ai){en(!0);try{i()}finally{en(!1)}}return h.memoizedState=[m,c],m},useReducer:function(i,c,h){var m=yn();if(h!==void 0){var v=h(c);if(ai){en(!0);try{h(c)}finally{en(!1)}}}else v=c;return m.memoizedState=m.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},m.queue=i,i=i.dispatch=n_.bind(null,De,i),[m.memoizedState,i]},useRef:function(i){var c=yn();return i={current:i},c.memoizedState=i},useState:function(i){i=xp(i);var c=i.queue,h=my.bind(null,De,c);return c.dispatch=h,[i.memoizedState,h]},useDebugValue:wp,useDeferredValue:function(i,c){var h=yn();return Sp(h,i,c)},useTransition:function(){var i=xp(!1);return i=dy.bind(null,De,i.queue,!0,!1),yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,c,h){var m=De,v=yn();if($e){if(h===void 0)throw Error(r(407));h=h()}else{if(h=c(),at===null)throw Error(r(349));(Ve&127)!==0||Ux(m,c,h)}v.memoizedState=h;var S={value:h,getSnapshot:c};return v.queue=S,ty(qx.bind(null,m,S,i),[i]),m.flags|=2048,oa(9,{destroy:void 0},zx.bind(null,m,S,h,c),null),h},useId:function(){var i=yn(),c=at.identifierPrefix;if($e){var h=Lr,m=Or;h=(m&~(1<<32-Ze(m)-1)).toString(32)+h,c="_"+c+"R_"+h,h=Id++,0<h&&(c+="H"+h.toString(32)),c+="_"}else h=WA++,c="_"+c+"r_"+h.toString(32)+"_";return i.memoizedState=c},useHostTransitionStatus:Np,useFormState:Yx,useActionState:Yx,useOptimistic:function(i){var c=yn();c.memoizedState=c.baseState=i;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=h,c=Ep.bind(null,De,!0,h),h.dispatch=c,[i,c]},useMemoCache:mp,useCacheRefresh:function(){return yn().memoizedState=t_.bind(null,De)},useEffectEvent:function(i){var c=yn(),h={impl:i};return c.memoizedState=h,function(){if((Xe&2)!==0)throw Error(r(440));return h.impl.apply(void 0,arguments)}}},Tp={readContext:nn,use:Pd,useCallback:ay,useContext:nn,useEffect:vp,useImperativeHandle:iy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:Od,useRef:ey,useState:function(){return Od(ss)},useDebugValue:wp,useDeferredValue:function(i,c){var h=Mt();return cy(h,st.memoizedState,i,c)},useTransition:function(){var i=Od(ss)[0],c=Mt().memoizedState;return[typeof i=="boolean"?i:Ol(i),c]},useSyncExternalStore:Bx,useId:fy,useHostTransitionStatus:Np,useFormState:Xx,useActionState:Xx,useOptimistic:function(i,c){var h=Mt();return Fx(h,st,i,c)},useMemoCache:mp,useCacheRefresh:py};Tp.useEffectEvent=ny;var yy={readContext:nn,use:Pd,useCallback:ay,useContext:nn,useEffect:vp,useImperativeHandle:iy,useInsertionEffect:ry,useLayoutEffect:sy,useMemo:ly,useReducer:bp,useRef:ey,useState:function(){return bp(ss)},useDebugValue:wp,useDeferredValue:function(i,c){var h=Mt();return st===null?Sp(h,i,c):cy(h,st.memoizedState,i,c)},useTransition:function(){var i=bp(ss)[0],c=Mt().memoizedState;return[typeof i=="boolean"?i:Ol(i),c]},useSyncExternalStore:Bx,useId:fy,useHostTransitionStatus:Np,useFormState:Zx,useActionState:Zx,useOptimistic:function(i,c){var h=Mt();return st!==null?Fx(h,st,i,c):(h.baseState=i,[i,h.queue.dispatch])},useMemoCache:mp,useCacheRefresh:py};yy.useEffectEvent=ny;function kp(i,c,h,m){c=i.memoizedState,h=h(m,c),h=h==null?c:g({},c,h),i.memoizedState=h,i.lanes===0&&(i.updateQueue.baseState=h)}var Ap={enqueueSetState:function(i,c,h){i=i._reactInternals;var m=Fn(),v=Xs(m);v.payload=c,h!=null&&(v.callback=h),c=Qs(i,v,m),c!==null&&(Rn(c,i,m),Rl(c,i,m))},enqueueReplaceState:function(i,c,h){i=i._reactInternals;var m=Fn(),v=Xs(m);v.tag=1,v.payload=c,h!=null&&(v.callback=h),c=Qs(i,v,m),c!==null&&(Rn(c,i,m),Rl(c,i,m))},enqueueForceUpdate:function(i,c){i=i._reactInternals;var h=Fn(),m=Xs(h);m.tag=2,c!=null&&(m.callback=c),c=Qs(i,m,h),c!==null&&(Rn(c,i,h),Rl(c,i,h))}};function vy(i,c,h,m,v,S,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(m,S,T):c.prototype&&c.prototype.isPureReactComponent?!Nl(h,m)||!Nl(v,S):!0}function wy(i,c,h,m){i=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(h,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(h,m),c.state!==i&&Ap.enqueueReplaceState(c,c.state,null)}function li(i,c){var h=c;if("ref"in c){h={};for(var m in c)m!=="ref"&&(h[m]=c[m])}if(i=i.defaultProps){h===c&&(h=g({},h));for(var v in i)h[v]===void 0&&(h[v]=i[v])}return h}function Sy(i){bd(i)}function Cy(i){console.error(i)}function Ny(i){bd(i)}function zd(i,c){try{var h=i.onUncaughtError;h(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function Ey(i,c,h){try{var m=i.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function _p(i,c,h){return h=Xs(h),h.tag=3,h.payload={element:null},h.callback=function(){zd(i,c)},h}function Ty(i){return i=Xs(i),i.tag=3,i}function ky(i,c,h,m){var v=h.type.getDerivedStateFromError;if(typeof v=="function"){var S=m.value;i.payload=function(){return v(S)},i.callback=function(){Ey(c,h,m)}}var T=h.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Ey(c,h,m),typeof v!="function"&&(so===null?so=new Set([this]):so.add(this));var A=m.stack;this.componentDidCatch(m.value,{componentStack:A!==null?A:""})})}function r_(i,c,h,m,v){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=h.alternate,c!==null&&Xi(c,h,v,!0),h=zn.current,h!==null){switch(h.tag){case 31:case 13:return sr===null?Qd():h.alternate===null&&Tt===0&&(Tt=3),h.flags&=-257,h.flags|=65536,h.lanes=v,m===kd?h.flags|=16384:(c=h.updateQueue,c===null?h.updateQueue=new Set([m]):c.add(m),em(i,m,v)),!1;case 22:return h.flags|=65536,m===kd?h.flags|=16384:(c=h.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=c):(h=c.retryQueue,h===null?c.retryQueue=new Set([m]):h.add(m)),em(i,m,v)),!1}throw Error(r(435,h.tag))}return em(i,m,v),Qd(),!1}if($e)return c=zn.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,m!==Kf&&(i=Error(r(422),{cause:m}),kl(er(i,h)))):(m!==Kf&&(c=Error(r(423),{cause:m}),kl(er(c,h))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,m=er(m,h),v=_p(i.stateNode,m,v),op(i,v),Tt!==4&&(Tt=2)),!1;var S=Error(r(520),{cause:m});if(S=er(S,h),Gl===null?Gl=[S]:Gl.push(S),Tt!==4&&(Tt=2),c===null)return!0;m=er(m,h),h=c;do{switch(h.tag){case 3:return h.flags|=65536,i=v&-v,h.lanes|=i,i=_p(h.stateNode,m,i),op(h,i),!1;case 1:if(c=h.type,S=h.stateNode,(h.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(so===null||!so.has(S))))return h.flags|=65536,v&=-v,h.lanes|=v,v=Ty(v),ky(v,i,h,m),op(h,v),!1}h=h.return}while(h!==null);return!1}var jp=Error(r(461)),Ot=!1;function rn(i,c,h,m){c.child=i===null?Mx(c,null,h,m):ii(c,i.child,h,m)}function Ay(i,c,h,m,v){h=h.render;var S=c.ref;if("ref"in m){var T={};for(var A in m)A!=="ref"&&(T[A]=m[A])}else T=m;return ni(c),m=up(i,c,h,T,S,v),A=hp(),i!==null&&!Ot?(fp(i,c,v),is(i,c,v)):($e&&A&&Gf(c),c.flags|=1,rn(i,c,m,v),c.child)}function _y(i,c,h,m,v){if(i===null){var S=h.type;return typeof S=="function"&&!Vf(S)&&S.defaultProps===void 0&&h.compare===null?(c.tag=15,c.type=S,jy(i,c,S,m,v)):(i=wd(h.type,null,m,c,c.mode,v),i.ref=c.ref,i.return=c,c.child=i)}if(S=i.child,!Bp(i,v)){var T=S.memoizedProps;if(h=h.compare,h=h!==null?h:Nl,h(T,m)&&i.ref===c.ref)return is(i,c,v)}return c.flags|=1,i=Zr(S,m),i.ref=c.ref,i.return=c,c.child=i}function jy(i,c,h,m,v){if(i!==null){var S=i.memoizedProps;if(Nl(S,m)&&i.ref===c.ref)if(Ot=!1,c.pendingProps=m=S,Bp(i,v))(i.flags&131072)!==0&&(Ot=!0);else return c.lanes=i.lanes,is(i,c,v)}return Mp(i,c,h,m,v)}function My(i,c,h,m){var v=m.children,S=i!==null?i.memoizedState:null;if(i===null&&c.stateNode===null&&(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((c.flags&128)!==0){if(S=S!==null?S.baseLanes|h:h,i!==null){for(m=c.child=i.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~S}else m=0,c.child=null;return Ry(i,c,S,h,m)}if((h&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},i!==null&&Ed(c,S!==null?S.cachePool:null),S!==null?Dx(c,S):ap(),Px(c);else return m=c.lanes=536870912,Ry(i,c,S!==null?S.baseLanes|h:h,h,m)}else S!==null?(Ed(c,S.cachePool),Dx(c,S),eo(),c.memoizedState=null):(i!==null&&Ed(c,null),ap(),eo());return rn(i,c,v,h),c.child}function Ul(i,c){return i!==null&&i.tag===22||c.stateNode!==null||(c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.sibling}function Ry(i,c,h,m,v){var S=tp();return S=S===null?null:{parent:Dt._currentValue,pool:S},c.memoizedState={baseLanes:h,cachePool:S},i!==null&&Ed(c,null),ap(),Px(c),i!==null&&Xi(i,c,m,!0),c.childLanes=v,null}function qd(i,c){return c=Vd({mode:c.mode,children:c.children},i.mode),c.ref=i.ref,i.child=c,c.return=i,c}function Iy(i,c,h){return ii(c,i.child,null,h),i=qd(c,c.pendingProps),i.flags|=2,qn(c),c.memoizedState=null,i}function s_(i,c,h){var m=c.pendingProps,v=(c.flags&128)!==0;if(c.flags&=-129,i===null){if($e){if(m.mode==="hidden")return i=qd(c,m),c.lanes=536870912,Ul(null,i);if(cp(c),(i=ht)?(i=$v(i,rr),i=i!==null&&i.data==="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Gs!==null?{id:Or,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},h=gx(i),h.return=c,c.child=h,tn=c,ht=null)):i=null,i===null)throw Ks(c);return c.lanes=536870912,null}return qd(c,m)}var S=i.memoizedState;if(S!==null){var T=S.dehydrated;if(cp(c),v)if(c.flags&256)c.flags&=-257,c=Iy(i,c,h);else if(c.memoizedState!==null)c.child=i.child,c.flags|=128,c=null;else throw Error(r(558));else if(Ot||Xi(i,c,h,!1),v=(h&i.childLanes)!==0,Ot||v){if(m=at,m!==null&&(T=cl(m,h),T!==0&&T!==S.retryLane))throw S.retryLane=T,Qo(i,T),Rn(m,i,T),jp;Qd(),c=Iy(i,c,h)}else i=S.treeContext,ht=or(T.nextSibling),tn=c,$e=!0,Js=null,rr=!1,i!==null&&yx(c,i),c=qd(c,m),c.flags|=4096;return c}return i=Zr(i.child,{mode:m.mode,children:m.children}),i.ref=c.ref,c.child=i,i.return=c,i}function Hd(i,c){var h=c.ref;if(h===null)i!==null&&i.ref!==null&&(c.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(r(284));(i===null||i.ref!==h)&&(c.flags|=4194816)}}function Mp(i,c,h,m,v){return ni(c),h=up(i,c,h,m,void 0,v),m=hp(),i!==null&&!Ot?(fp(i,c,v),is(i,c,v)):($e&&m&&Gf(c),c.flags|=1,rn(i,c,h,v),c.child)}function Dy(i,c,h,m,v,S){return ni(c),c.updateQueue=null,h=Lx(c,m,h,v),Ox(i),m=hp(),i!==null&&!Ot?(fp(i,c,S),is(i,c,S)):($e&&m&&Gf(c),c.flags|=1,rn(i,c,h,S),c.child)}function Py(i,c,h,m,v){if(ni(c),c.stateNode===null){var S=Ji,T=h.contextType;typeof T=="object"&&T!==null&&(S=nn(T)),S=new h(m,S),c.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Ap,c.stateNode=S,S._reactInternals=c,S=c.stateNode,S.props=m,S.state=c.memoizedState,S.refs={},rp(c),T=h.contextType,S.context=typeof T=="object"&&T!==null?nn(T):Ji,S.state=c.memoizedState,T=h.getDerivedStateFromProps,typeof T=="function"&&(kp(c,h,T,m),S.state=c.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(T=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),T!==S.state&&Ap.enqueueReplaceState(S,S.state,null),Dl(c,m,S,v),Il(),S.state=c.memoizedState),typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(i===null){S=c.stateNode;var A=c.memoizedProps,I=li(h,A);S.props=I;var V=S.context,Y=h.contextType;T=Ji,typeof Y=="object"&&Y!==null&&(T=nn(Y));var ee=h.getDerivedStateFromProps;Y=typeof ee=="function"||typeof S.getSnapshotBeforeUpdate=="function",A=c.pendingProps!==A,Y||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(A||V!==T)&&wy(c,S,m,T),Ys=!1;var $=c.memoizedState;S.state=$,Dl(c,m,S,v),Il(),V=c.memoizedState,A||$!==V||Ys?(typeof ee=="function"&&(kp(c,h,ee,m),V=c.memoizedState),(I=Ys||vy(c,h,I,m,$,V,T))?(Y||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(c.flags|=4194308)):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=V),S.props=m,S.state=V,S.context=T,m=I):(typeof S.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{S=c.stateNode,sp(i,c),T=c.memoizedProps,Y=li(h,T),S.props=Y,ee=c.pendingProps,$=S.context,V=h.contextType,I=Ji,typeof V=="object"&&V!==null&&(I=nn(V)),A=h.getDerivedStateFromProps,(V=typeof A=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(T!==ee||$!==I)&&wy(c,S,m,I),Ys=!1,$=c.memoizedState,S.state=$,Dl(c,m,S,v),Il();var J=c.memoizedState;T!==ee||$!==J||Ys||i!==null&&i.dependencies!==null&&Cd(i.dependencies)?(typeof A=="function"&&(kp(c,h,A,m),J=c.memoizedState),(Y=Ys||vy(c,h,Y,m,$,J,I)||i!==null&&i.dependencies!==null&&Cd(i.dependencies))?(V||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(m,J,I),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(m,J,I)),typeof S.componentDidUpdate=="function"&&(c.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof S.componentDidUpdate!="function"||T===i.memoizedProps&&$===i.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&$===i.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=J),S.props=m,S.state=J,S.context=I,m=Y):(typeof S.componentDidUpdate!="function"||T===i.memoizedProps&&$===i.memoizedState||(c.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&$===i.memoizedState||(c.flags|=1024),m=!1)}return S=m,Hd(i,c),m=(c.flags&128)!==0,S||m?(S=c.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:S.render(),c.flags|=1,i!==null&&m?(c.child=ii(c,i.child,null,v),c.child=ii(c,null,h,v)):rn(i,c,h,v),c.memoizedState=S.state,i=c.child):i=is(i,c,v),i}function Oy(i,c,h,m){return ei(),c.flags|=256,rn(i,c,h,m),c.child}var Rp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ip(i){return{baseLanes:i,cachePool:Ex()}}function Dp(i,c,h){return i=i!==null?i.childLanes&~h:0,c&&(i|=Vn),i}function Ly(i,c,h){var m=c.pendingProps,v=!1,S=(c.flags&128)!==0,T;if((T=S)||(T=i!==null&&i.memoizedState===null?!1:(jt.current&2)!==0),T&&(v=!0,c.flags&=-129),T=(c.flags&32)!==0,c.flags&=-33,i===null){if($e){if(v?Zs(c):eo(),(i=ht)?(i=$v(i,rr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(c.memoizedState={dehydrated:i,treeContext:Gs!==null?{id:Or,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},h=gx(i),h.return=c,c.child=h,tn=c,ht=null)):i=null,i===null)throw Ks(c);return gm(i)?c.lanes=32:c.lanes=536870912,null}var A=m.children;return m=m.fallback,v?(eo(),v=c.mode,A=Vd({mode:"hidden",children:A},v),m=Zo(m,v,h,null),A.return=c,m.return=c,A.sibling=m,c.child=A,m=c.child,m.memoizedState=Ip(h),m.childLanes=Dp(i,T,h),c.memoizedState=Rp,Ul(null,m)):(Zs(c),Pp(c,A))}var I=i.memoizedState;if(I!==null&&(A=I.dehydrated,A!==null)){if(S)c.flags&256?(Zs(c),c.flags&=-257,c=Op(i,c,h)):c.memoizedState!==null?(eo(),c.child=i.child,c.flags|=128,c=null):(eo(),A=m.fallback,v=c.mode,m=Vd({mode:"visible",children:m.children},v),A=Zo(A,v,h,null),A.flags|=2,m.return=c,A.return=c,m.sibling=A,c.child=m,ii(c,i.child,null,h),m=c.child,m.memoizedState=Ip(h),m.childLanes=Dp(i,T,h),c.memoizedState=Rp,c=Ul(null,m));else if(Zs(c),gm(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var V=T.dgst;T=V,m=Error(r(419)),m.stack="",m.digest=T,kl({value:m,source:null,stack:null}),c=Op(i,c,h)}else if(Ot||Xi(i,c,h,!1),T=(h&i.childLanes)!==0,Ot||T){if(T=at,T!==null&&(m=cl(T,h),m!==0&&m!==I.retryLane))throw I.retryLane=m,Qo(i,m),Rn(T,i,m),jp;mm(A)||Qd(),c=Op(i,c,h)}else mm(A)?(c.flags|=192,c.child=i.child,c=null):(i=I.treeContext,ht=or(A.nextSibling),tn=c,$e=!0,Js=null,rr=!1,i!==null&&yx(c,i),c=Pp(c,m.children),c.flags|=4096);return c}return v?(eo(),A=m.fallback,v=c.mode,I=i.child,V=I.sibling,m=Zr(I,{mode:"hidden",children:m.children}),m.subtreeFlags=I.subtreeFlags&65011712,V!==null?A=Zr(V,A):(A=Zo(A,v,h,null),A.flags|=2),A.return=c,m.return=c,m.sibling=A,c.child=m,Ul(null,m),m=c.child,A=i.child.memoizedState,A===null?A=Ip(h):(v=A.cachePool,v!==null?(I=Dt._currentValue,v=v.parent!==I?{parent:I,pool:I}:v):v=Ex(),A={baseLanes:A.baseLanes|h,cachePool:v}),m.memoizedState=A,m.childLanes=Dp(i,T,h),c.memoizedState=Rp,Ul(i.child,m)):(Zs(c),h=i.child,i=h.sibling,h=Zr(h,{mode:"visible",children:m.children}),h.return=c,h.sibling=null,i!==null&&(T=c.deletions,T===null?(c.deletions=[i],c.flags|=16):T.push(i)),c.child=h,c.memoizedState=null,h)}function Pp(i,c){return c=Vd({mode:"visible",children:c},i.mode),c.return=i,i.child=c}function Vd(i,c){return i=Un(22,i,null,c),i.lanes=0,i}function Op(i,c,h){return ii(c,i.child,null,h),i=Pp(c,c.pendingProps.children),i.flags|=2,c.memoizedState=null,i}function By(i,c,h){i.lanes|=c;var m=i.alternate;m!==null&&(m.lanes|=c),Xf(i.return,c,h)}function Lp(i,c,h,m,v,S){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:v,treeForkCount:S}:(T.isBackwards=c,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=h,T.tailMode=v,T.treeForkCount=S)}function Uy(i,c,h){var m=c.pendingProps,v=m.revealOrder,S=m.tail;m=m.children;var T=jt.current,A=(T&2)!==0;if(A?(T=T&1|2,c.flags|=128):T&=1,K(jt,T),rn(i,c,m,h),m=$e?Tl:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=c.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&By(i,h,c);else if(i.tag===19)By(i,h,c);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===c)break e;for(;i.sibling===null;){if(i.return===null||i.return===c)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(h=c.child,v=null;h!==null;)i=h.alternate,i!==null&&Md(i)===null&&(v=h),h=h.sibling;h=v,h===null?(v=c.child,c.child=null):(v=h.sibling,h.sibling=null),Lp(c,!1,v,h,S,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,v=c.child,c.child=null;v!==null;){if(i=v.alternate,i!==null&&Md(i)===null){c.child=v;break}i=v.sibling,v.sibling=h,h=v,v=i}Lp(c,!0,h,null,S,m);break;case"together":Lp(c,!1,null,null,void 0,m);break;default:c.memoizedState=null}return c.child}function is(i,c,h){if(i!==null&&(c.dependencies=i.dependencies),ro|=c.lanes,(h&c.childLanes)===0)if(i!==null){if(Xi(i,c,h,!1),(h&c.childLanes)===0)return null}else return null;if(i!==null&&c.child!==i.child)throw Error(r(153));if(c.child!==null){for(i=c.child,h=Zr(i,i.pendingProps),c.child=h,h.return=c;i.sibling!==null;)i=i.sibling,h=h.sibling=Zr(i,i.pendingProps),h.return=c;h.sibling=null}return c.child}function Bp(i,c){return(i.lanes&c)!==0?!0:(i=i.dependencies,!!(i!==null&&Cd(i)))}function o_(i,c,h){switch(c.tag){case 3:Re(c,c.stateNode.containerInfo),Ws(c,Dt,i.memoizedState.cache),ei();break;case 27:case 5:Zt(c);break;case 4:Re(c,c.stateNode.containerInfo);break;case 10:Ws(c,c.type,c.memoizedProps.value);break;case 31:if(c.memoizedState!==null)return c.flags|=128,cp(c),null;break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(Zs(c),c.flags|=128,null):(h&c.child.childLanes)!==0?Ly(i,c,h):(Zs(c),i=is(i,c,h),i!==null?i.sibling:null);Zs(c);break;case 19:var v=(i.flags&128)!==0;if(m=(h&c.childLanes)!==0,m||(Xi(i,c,h,!1),m=(h&c.childLanes)!==0),v){if(m)return Uy(i,c,h);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),K(jt,jt.current),m)break;return null;case 22:return c.lanes=0,My(i,c,h,c.pendingProps);case 24:Ws(c,Dt,i.memoizedState.cache)}return is(i,c,h)}function zy(i,c,h){if(i!==null)if(i.memoizedProps!==c.pendingProps)Ot=!0;else{if(!Bp(i,h)&&(c.flags&128)===0)return Ot=!1,o_(i,c,h);Ot=(i.flags&131072)!==0}else Ot=!1,$e&&(c.flags&1048576)!==0&&xx(c,Tl,c.index);switch(c.lanes=0,c.tag){case 16:e:{var m=c.pendingProps;if(i=si(c.elementType),c.type=i,typeof i=="function")Vf(i)?(m=li(i,m),c.tag=1,c=Py(null,c,i,m,h)):(c.tag=0,c=Mp(null,c,i,m,h));else{if(i!=null){var v=i.$$typeof;if(v===P){c.tag=11,c=Ay(null,c,i,m,h);break e}else if(v===D){c.tag=14,c=_y(null,c,i,m,h);break e}}throw c=me(i)||i,Error(r(306,c,""))}}return c;case 0:return Mp(i,c,c.type,c.pendingProps,h);case 1:return m=c.type,v=li(m,c.pendingProps),Py(i,c,m,v,h);case 3:e:{if(Re(c,c.stateNode.containerInfo),i===null)throw Error(r(387));m=c.pendingProps;var S=c.memoizedState;v=S.element,sp(i,c),Dl(c,m,null,h);var T=c.memoizedState;if(m=T.cache,Ws(c,Dt,m),m!==S.cache&&Qf(c,[Dt],h,!0),Il(),m=T.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:T.cache},c.updateQueue.baseState=S,c.memoizedState=S,c.flags&256){c=Oy(i,c,m,h);break e}else if(m!==v){v=er(Error(r(424)),c),kl(v),c=Oy(i,c,m,h);break e}else{switch(i=c.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ht=or(i.firstChild),tn=c,$e=!0,Js=null,rr=!0,h=Mx(c,null,m,h),c.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ei(),m===v){c=is(i,c,h);break e}rn(i,c,m,h)}c=c.child}return c;case 26:return Hd(i,c),i===null?(h=Xv(c.type,null,c.pendingProps,null))?c.memoizedState=h:$e||(h=c.type,i=c.pendingProps,m=ou(Ae.current).createElement(h),m[Gt]=c,m[un]=i,sn(m,h,i),It(m),c.stateNode=m):c.memoizedState=Xv(c.type,i.memoizedProps,c.pendingProps,i.memoizedState),null;case 27:return Zt(c),i===null&&$e&&(m=c.stateNode=Kv(c.type,c.pendingProps,Ae.current),tn=c,rr=!0,v=ht,lo(c.type)?(bm=v,ht=or(m.firstChild)):ht=v),rn(i,c,c.pendingProps.children,h),Hd(i,c),i===null&&(c.flags|=4194304),c.child;case 5:return i===null&&$e&&((v=m=ht)&&(m=P_(m,c.type,c.pendingProps,rr),m!==null?(c.stateNode=m,tn=c,ht=or(m.firstChild),rr=!1,v=!0):v=!1),v||Ks(c)),Zt(c),v=c.type,S=c.pendingProps,T=i!==null?i.memoizedProps:null,m=S.children,hm(v,S)?m=null:T!==null&&hm(v,T)&&(c.flags|=32),c.memoizedState!==null&&(v=up(i,c,YA,null,null,h),ec._currentValue=v),Hd(i,c),rn(i,c,m,h),c.child;case 6:return i===null&&$e&&((i=h=ht)&&(h=O_(h,c.pendingProps,rr),h!==null?(c.stateNode=h,tn=c,ht=null,i=!0):i=!1),i||Ks(c)),null;case 13:return Ly(i,c,h);case 4:return Re(c,c.stateNode.containerInfo),m=c.pendingProps,i===null?c.child=ii(c,null,m,h):rn(i,c,m,h),c.child;case 11:return Ay(i,c,c.type,c.pendingProps,h);case 7:return rn(i,c,c.pendingProps,h),c.child;case 8:return rn(i,c,c.pendingProps.children,h),c.child;case 12:return rn(i,c,c.pendingProps.children,h),c.child;case 10:return m=c.pendingProps,Ws(c,c.type,m.value),rn(i,c,m.children,h),c.child;case 9:return v=c.type._context,m=c.pendingProps.children,ni(c),v=nn(v),m=m(v),c.flags|=1,rn(i,c,m,h),c.child;case 14:return _y(i,c,c.type,c.pendingProps,h);case 15:return jy(i,c,c.type,c.pendingProps,h);case 19:return Uy(i,c,h);case 31:return s_(i,c,h);case 22:return My(i,c,h,c.pendingProps);case 24:return ni(c),m=nn(Dt),i===null?(v=tp(),v===null&&(v=at,S=Zf(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=h),v=S),c.memoizedState={parent:m,cache:v},rp(c),Ws(c,Dt,v)):((i.lanes&h)!==0&&(sp(i,c),Dl(c,null,null,h),Il()),v=i.memoizedState,S=c.memoizedState,v.parent!==m?(v={parent:m,cache:m},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Ws(c,Dt,m)):(m=S.cache,Ws(c,Dt,m),m!==v.cache&&Qf(c,[Dt],h,!0))),rn(i,c,c.pendingProps.children,h),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function as(i){i.flags|=4}function Up(i,c,h,m,v){if((c=(i.mode&32)!==0)&&(c=!1),c){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if(fv())i.flags|=8192;else throw oi=kd,np}else i.flags&=-16777217}function qy(i,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!n1(c))if(fv())i.flags|=8192;else throw oi=kd,np}function Fd(i,c){c!==null&&(i.flags|=4),i.flags&16384&&(c=i.tag!==22?vf():536870912,i.lanes|=c,ca|=c)}function zl(i,c){if(!$e)switch(i.tailMode){case"hidden":c=i.tail;for(var h=null;c!==null;)c.alternate!==null&&(h=c),c=c.sibling;h===null?i.tail=null:h.sibling=null;break;case"collapsed":h=i.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c||i.tail===null?i.tail=null:i.tail.sibling=null:m.sibling=null}}function ft(i){var c=i.alternate!==null&&i.alternate.child===i.child,h=0,m=0;if(c)for(var v=i.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=m,i.childLanes=h,c}function i_(i,c,h){var m=c.pendingProps;switch(Jf(c),c.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(c),null;case 1:return ft(c),null;case 3:return h=c.stateNode,m=null,i!==null&&(m=i.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ns(Dt),_e(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(i===null||i.child===null)&&(Yi(c)?as(c):i===null||i.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,Wf())),ft(c),null;case 26:var v=c.type,S=c.memoizedState;return i===null?(as(c),S!==null?(ft(c),qy(c,S)):(ft(c),Up(c,v,null,m,h))):S?S!==i.memoizedState?(as(c),ft(c),qy(c,S)):(ft(c),c.flags&=-16777217):(i=i.memoizedProps,i!==m&&as(c),ft(c),Up(c,v,i,m,h)),null;case 27:if(Ct(c),h=Ae.current,v=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==m&&as(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return ft(c),null}i=ie.current,Yi(c)?vx(c):(i=Kv(v,m,h),c.stateNode=i,as(c))}return ft(c),null;case 5:if(Ct(c),v=c.type,i!==null&&c.stateNode!=null)i.memoizedProps!==m&&as(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return ft(c),null}if(S=ie.current,Yi(c))vx(c);else{var T=ou(Ae.current);switch(S){case 1:S=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:S=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":S=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":S=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":S=T.createElement("div"),S.innerHTML="<script><\/script>",S=S.removeChild(S.firstChild);break;case"select":S=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?S.multiple=!0:m.size&&(S.size=m.size);break;default:S=typeof m.is=="string"?T.createElement(v,{is:m.is}):T.createElement(v)}}S[Gt]=c,S[un]=m;e:for(T=c.child;T!==null;){if(T.tag===5||T.tag===6)S.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===c)break e;for(;T.sibling===null;){if(T.return===null||T.return===c)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}c.stateNode=S;e:switch(sn(S,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&as(c)}}return ft(c),Up(c,c.type,i===null?null:i.memoizedProps,c.pendingProps,h),null;case 6:if(i&&c.stateNode!=null)i.memoizedProps!==m&&as(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(i=Ae.current,Yi(c)){if(i=c.stateNode,h=c.memoizedProps,m=null,v=tn,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}i[Gt]=c,i=!!(i.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||Lv(i.nodeValue,h)),i||Ks(c,!0)}else i=ou(i).createTextNode(m),i[Gt]=c,c.stateNode=i}return ft(c),null;case 31:if(h=c.memoizedState,i===null||i.memoizedState!==null){if(m=Yi(c),h!==null){if(i===null){if(!m)throw Error(r(318));if(i=c.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Gt]=c}else ei(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ft(c),i=!1}else h=Wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=h),i=!0;if(!i)return c.flags&256?(qn(c),c):(qn(c),null);if((c.flags&128)!==0)throw Error(r(558))}return ft(c),null;case 13:if(m=c.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=Yi(c),m!==null&&m.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Gt]=c}else ei(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;ft(c),v=!1}else v=Wf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(qn(c),c):(qn(c),null)}return qn(c),(c.flags&128)!==0?(c.lanes=h,c):(h=m!==null,i=i!==null&&i.memoizedState!==null,h&&(m=c.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),S=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(S=m.memoizedState.cachePool.pool),S!==v&&(m.flags|=2048)),h!==i&&h&&(c.child.flags|=8192),Fd(c,c.updateQueue),ft(c),null);case 4:return _e(),i===null&&am(c.stateNode.containerInfo),ft(c),null;case 10:return ns(c.type),ft(c),null;case 19:if(B(jt),m=c.memoizedState,m===null)return ft(c),null;if(v=(c.flags&128)!==0,S=m.rendering,S===null)if(v)zl(m,!1);else{if(Tt!==0||i!==null&&(i.flags&128)!==0)for(i=c.child;i!==null;){if(S=Md(i),S!==null){for(c.flags|=128,zl(m,!1),i=S.updateQueue,c.updateQueue=i,Fd(c,i),c.subtreeFlags=0,i=h,h=c.child;h!==null;)mx(h,i),h=h.sibling;return K(jt,jt.current&1|2),$e&&es(c,m.treeForkCount),c.child}i=i.sibling}m.tail!==null&&dn()>Wd&&(c.flags|=128,v=!0,zl(m,!1),c.lanes=4194304)}else{if(!v)if(i=Md(S),i!==null){if(c.flags|=128,v=!0,i=i.updateQueue,c.updateQueue=i,Fd(c,i),zl(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!$e)return ft(c),null}else 2*dn()-m.renderingStartTime>Wd&&h!==536870912&&(c.flags|=128,v=!0,zl(m,!1),c.lanes=4194304);m.isBackwards?(S.sibling=c.child,c.child=S):(i=m.last,i!==null?i.sibling=S:c.child=S,m.last=S)}return m.tail!==null?(i=m.tail,m.rendering=i,m.tail=i.sibling,m.renderingStartTime=dn(),i.sibling=null,h=jt.current,K(jt,v?h&1|2:h&1),$e&&es(c,m.treeForkCount),i):(ft(c),null);case 22:case 23:return qn(c),lp(),m=c.memoizedState!==null,i!==null?i.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(h&536870912)!==0&&(c.flags&128)===0&&(ft(c),c.subtreeFlags&6&&(c.flags|=8192)):ft(c),h=c.updateQueue,h!==null&&Fd(c,h.retryQueue),h=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==h&&(c.flags|=2048),i!==null&&B(ri),null;case 24:return h=null,i!==null&&(h=i.memoizedState.cache),c.memoizedState.cache!==h&&(c.flags|=2048),ns(Dt),ft(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function a_(i,c){switch(Jf(c),c.tag){case 1:return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 3:return ns(Dt),_e(),i=c.flags,(i&65536)!==0&&(i&128)===0?(c.flags=i&-65537|128,c):null;case 26:case 27:case 5:return Ct(c),null;case 31:if(c.memoizedState!==null){if(qn(c),c.alternate===null)throw Error(r(340));ei()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 13:if(qn(c),i=c.memoizedState,i!==null&&i.dehydrated!==null){if(c.alternate===null)throw Error(r(340));ei()}return i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 19:return B(jt),null;case 4:return _e(),null;case 10:return ns(c.type),null;case 22:case 23:return qn(c),lp(),i!==null&&B(ri),i=c.flags,i&65536?(c.flags=i&-65537|128,c):null;case 24:return ns(Dt),null;case 25:return null;default:return null}}function Hy(i,c){switch(Jf(c),c.tag){case 3:ns(Dt),_e();break;case 26:case 27:case 5:Ct(c);break;case 4:_e();break;case 31:c.memoizedState!==null&&qn(c);break;case 13:qn(c);break;case 19:B(jt);break;case 10:ns(c.type);break;case 22:case 23:qn(c),lp(),i!==null&&B(ri);break;case 24:ns(Dt)}}function ql(i,c){try{var h=c.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var v=m.next;h=v;do{if((h.tag&i)===i){m=void 0;var S=h.create,T=h.inst;m=S(),T.destroy=m}h=h.next}while(h!==v)}}catch(A){nt(c,c.return,A)}}function to(i,c,h){try{var m=c.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var S=v.next;m=S;do{if((m.tag&i)===i){var T=m.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,v=c;var I=h,V=A;try{V()}catch(Y){nt(v,I,Y)}}}m=m.next}while(m!==S)}}catch(Y){nt(c,c.return,Y)}}function Vy(i){var c=i.updateQueue;if(c!==null){var h=i.stateNode;try{Ix(c,h)}catch(m){nt(i,i.return,m)}}}function Fy(i,c,h){h.props=li(i.type,i.memoizedProps),h.state=i.memoizedState;try{h.componentWillUnmount()}catch(m){nt(i,c,m)}}function Hl(i,c){try{var h=i.ref;if(h!==null){switch(i.tag){case 26:case 27:case 5:var m=i.stateNode;break;case 30:m=i.stateNode;break;default:m=i.stateNode}typeof h=="function"?i.refCleanup=h(m):h.current=m}}catch(v){nt(i,c,v)}}function Br(i,c){var h=i.ref,m=i.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(v){nt(i,c,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(v){nt(i,c,v)}else h.current=null}function $y(i){var c=i.type,h=i.memoizedProps,m=i.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(v){nt(i,i.return,v)}}function zp(i,c,h){try{var m=i.stateNode;__(m,i.type,h,c),m[un]=c}catch(v){nt(i,i.return,v)}}function Gy(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&lo(i.type)||i.tag===4}function qp(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Gy(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&lo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Hp(i,c,h){var m=i.tag;if(m===5||m===6)i=i.stateNode,c?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(i,c):(c=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,c.appendChild(i),h=h._reactRootContainer,h!=null||c.onclick!==null||(c.onclick=xr));else if(m!==4&&(m===27&&lo(i.type)&&(h=i.stateNode,c=null),i=i.child,i!==null))for(Hp(i,c,h),i=i.sibling;i!==null;)Hp(i,c,h),i=i.sibling}function $d(i,c,h){var m=i.tag;if(m===5||m===6)i=i.stateNode,c?h.insertBefore(i,c):h.appendChild(i);else if(m!==4&&(m===27&&lo(i.type)&&(h=i.stateNode),i=i.child,i!==null))for($d(i,c,h),i=i.sibling;i!==null;)$d(i,c,h),i=i.sibling}function Jy(i){var c=i.stateNode,h=i.memoizedProps;try{for(var m=i.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);sn(c,m,h),c[Gt]=i,c[un]=h}catch(S){nt(i,i.return,S)}}var ls=!1,Lt=!1,Vp=!1,Ky=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function l_(i,c){if(i=i.containerInfo,dm=hu,i=ix(i),Of(i)){if("selectionStart"in i)var h={start:i.selectionStart,end:i.selectionEnd};else e:{h=(h=i.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var v=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{h.nodeType,S.nodeType}catch{h=null;break e}var T=0,A=-1,I=-1,V=0,Y=0,ee=i,$=null;t:for(;;){for(var J;ee!==h||v!==0&&ee.nodeType!==3||(A=T+v),ee!==S||m!==0&&ee.nodeType!==3||(I=T+m),ee.nodeType===3&&(T+=ee.nodeValue.length),(J=ee.firstChild)!==null;)$=ee,ee=J;for(;;){if(ee===i)break t;if($===h&&++V===v&&(A=T),$===S&&++Y===m&&(I=T),(J=ee.nextSibling)!==null)break;ee=$,$=ee.parentNode}ee=J}h=A===-1||I===-1?null:{start:A,end:I}}else h=null}h=h||{start:0,end:0}}else h=null;for(um={focusedElem:i,selectionRange:h},hu=!1,Jt=c;Jt!==null;)if(c=Jt,i=c.child,(c.subtreeFlags&1028)!==0&&i!==null)i.return=c,Jt=i;else for(;Jt!==null;){switch(c=Jt,S=c.alternate,i=c.flags,c.tag){case 0:if((i&4)!==0&&(i=c.updateQueue,i=i!==null?i.events:null,i!==null))for(h=0;h<i.length;h++)v=i[h],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&S!==null){i=void 0,h=c,v=S.memoizedProps,S=S.memoizedState,m=h.stateNode;try{var pe=li(h.type,v);i=m.getSnapshotBeforeUpdate(pe,S),m.__reactInternalSnapshotBeforeUpdate=i}catch(Te){nt(h,h.return,Te)}}break;case 3:if((i&1024)!==0){if(i=c.stateNode.containerInfo,h=i.nodeType,h===9)pm(i);else if(h===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":pm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=c.sibling,i!==null){i.return=c.return,Jt=i;break}Jt=c.return}}function Wy(i,c,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:ds(i,h),m&4&&ql(5,h);break;case 1:if(ds(i,h),m&4)if(i=h.stateNode,c===null)try{i.componentDidMount()}catch(T){nt(h,h.return,T)}else{var v=li(h.type,c.memoizedProps);c=c.memoizedState;try{i.componentDidUpdate(v,c,i.__reactInternalSnapshotBeforeUpdate)}catch(T){nt(h,h.return,T)}}m&64&&Vy(h),m&512&&Hl(h,h.return);break;case 3:if(ds(i,h),m&64&&(i=h.updateQueue,i!==null)){if(c=null,h.child!==null)switch(h.child.tag){case 27:case 5:c=h.child.stateNode;break;case 1:c=h.child.stateNode}try{Ix(i,c)}catch(T){nt(h,h.return,T)}}break;case 27:c===null&&m&4&&Jy(h);case 26:case 5:ds(i,h),c===null&&m&4&&$y(h),m&512&&Hl(h,h.return);break;case 12:ds(i,h);break;case 31:ds(i,h),m&4&&Qy(i,h);break;case 13:ds(i,h),m&4&&Zy(i,h),m&64&&(i=h.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(h=b_.bind(null,h),L_(i,h))));break;case 22:if(m=h.memoizedState!==null||ls,!m){c=c!==null&&c.memoizedState!==null||Lt,v=ls;var S=Lt;ls=m,(Lt=c)&&!S?us(i,h,(h.subtreeFlags&8772)!==0):ds(i,h),ls=v,Lt=S}break;case 30:break;default:ds(i,h)}}function Yy(i){var c=i.alternate;c!==null&&(i.alternate=null,Yy(c)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(c=i.stateNode,c!==null&&Fo(c)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var gt=null,An=!1;function cs(i,c,h){for(h=h.child;h!==null;)Xy(i,c,h),h=h.sibling}function Xy(i,c,h){if(Ye&&typeof Ye.onCommitFiberUnmount=="function")try{Ye.onCommitFiberUnmount(Qe,h)}catch{}switch(h.tag){case 26:Lt||Br(h,c),cs(i,c,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Lt||Br(h,c);var m=gt,v=An;lo(h.type)&&(gt=h.stateNode,An=!1),cs(i,c,h),Xl(h.stateNode),gt=m,An=v;break;case 5:Lt||Br(h,c);case 6:if(m=gt,v=An,gt=null,cs(i,c,h),gt=m,An=v,gt!==null)if(An)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(h.stateNode)}catch(S){nt(h,c,S)}else try{gt.removeChild(h.stateNode)}catch(S){nt(h,c,S)}break;case 18:gt!==null&&(An?(i=gt,Vv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,h.stateNode),ba(i)):Vv(gt,h.stateNode));break;case 4:m=gt,v=An,gt=h.stateNode.containerInfo,An=!0,cs(i,c,h),gt=m,An=v;break;case 0:case 11:case 14:case 15:to(2,h,c),Lt||to(4,h,c),cs(i,c,h);break;case 1:Lt||(Br(h,c),m=h.stateNode,typeof m.componentWillUnmount=="function"&&Fy(h,c,m)),cs(i,c,h);break;case 21:cs(i,c,h);break;case 22:Lt=(m=Lt)||h.memoizedState!==null,cs(i,c,h),Lt=m;break;default:cs(i,c,h)}}function Qy(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{ba(i)}catch(h){nt(c,c.return,h)}}}function Zy(i,c){if(c.memoizedState===null&&(i=c.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{ba(i)}catch(h){nt(c,c.return,h)}}function c_(i){switch(i.tag){case 31:case 13:case 19:var c=i.stateNode;return c===null&&(c=i.stateNode=new Ky),c;case 22:return i=i.stateNode,c=i._retryCache,c===null&&(c=i._retryCache=new Ky),c;default:throw Error(r(435,i.tag))}}function Gd(i,c){var h=c_(i);c.forEach(function(m){if(!h.has(m)){h.add(m);var v=x_.bind(null,i,m);m.then(v,v)}})}function _n(i,c){var h=c.deletions;if(h!==null)for(var m=0;m<h.length;m++){var v=h[m],S=i,T=c,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(lo(A.type)){gt=A.stateNode,An=!1;break e}break;case 5:gt=A.stateNode,An=!1;break e;case 3:case 4:gt=A.stateNode.containerInfo,An=!0;break e}A=A.return}if(gt===null)throw Error(r(160));Xy(S,T,v),gt=null,An=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(c.subtreeFlags&13886)for(c=c.child;c!==null;)ev(c,i),c=c.sibling}var wr=null;function ev(i,c){var h=i.alternate,m=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:_n(c,i),jn(i),m&4&&(to(3,i,i.return),ql(3,i),to(5,i,i.return));break;case 1:_n(c,i),jn(i),m&512&&(Lt||h===null||Br(h,h.return)),m&64&&ls&&(i=i.updateQueue,i!==null&&(m=i.callbacks,m!==null&&(h=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var v=wr;if(_n(c,i),jn(i),m&512&&(Lt||h===null||Br(h,h.return)),m&4){var S=h!==null?h.memoizedState:null;if(m=i.memoizedState,h===null)if(m===null)if(i.stateNode===null){e:{m=i.type,h=i.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":S=v.getElementsByTagName("title")[0],(!S||S[Ls]||S[Gt]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(m),v.head.insertBefore(S,v.querySelector("head > title"))),sn(S,m,h),S[Gt]=i,It(S),m=S;break e;case"link":var T=e1("link","href",v).get(m+(h.href||""));if(T){for(var A=0;A<T.length;A++)if(S=T[A],S.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&S.getAttribute("rel")===(h.rel==null?null:h.rel)&&S.getAttribute("title")===(h.title==null?null:h.title)&&S.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){T.splice(A,1);break t}}S=v.createElement(m),sn(S,m,h),v.head.appendChild(S);break;case"meta":if(T=e1("meta","content",v).get(m+(h.content||""))){for(A=0;A<T.length;A++)if(S=T[A],S.getAttribute("content")===(h.content==null?null:""+h.content)&&S.getAttribute("name")===(h.name==null?null:h.name)&&S.getAttribute("property")===(h.property==null?null:h.property)&&S.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&S.getAttribute("charset")===(h.charSet==null?null:h.charSet)){T.splice(A,1);break t}}S=v.createElement(m),sn(S,m,h),v.head.appendChild(S);break;default:throw Error(r(468,m))}S[Gt]=i,It(S),m=S}i.stateNode=m}else t1(v,i.type,i.stateNode);else i.stateNode=Zv(v,m,i.memoizedProps);else S!==m?(S===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):S.count--,m===null?t1(v,i.type,i.stateNode):Zv(v,m,i.memoizedProps)):m===null&&i.stateNode!==null&&zp(i,i.memoizedProps,h.memoizedProps)}break;case 27:_n(c,i),jn(i),m&512&&(Lt||h===null||Br(h,h.return)),h!==null&&m&4&&zp(i,i.memoizedProps,h.memoizedProps);break;case 5:if(_n(c,i),jn(i),m&512&&(Lt||h===null||Br(h,h.return)),i.flags&32){v=i.stateNode;try{Vs(v,"")}catch(pe){nt(i,i.return,pe)}}m&4&&i.stateNode!=null&&(v=i.memoizedProps,zp(i,v,h!==null?h.memoizedProps:v)),m&1024&&(Vp=!0);break;case 6:if(_n(c,i),jn(i),m&4){if(i.stateNode===null)throw Error(r(162));m=i.memoizedProps,h=i.stateNode;try{h.nodeValue=m}catch(pe){nt(i,i.return,pe)}}break;case 3:if(lu=null,v=wr,wr=iu(c.containerInfo),_n(c,i),wr=v,jn(i),m&4&&h!==null&&h.memoizedState.isDehydrated)try{ba(c.containerInfo)}catch(pe){nt(i,i.return,pe)}Vp&&(Vp=!1,tv(i));break;case 4:m=wr,wr=iu(i.stateNode.containerInfo),_n(c,i),jn(i),wr=m;break;case 12:_n(c,i),jn(i);break;case 31:_n(c,i),jn(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Gd(i,m)));break;case 13:_n(c,i),jn(i),i.child.flags&8192&&i.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Kd=dn()),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Gd(i,m)));break;case 22:v=i.memoizedState!==null;var I=h!==null&&h.memoizedState!==null,V=ls,Y=Lt;if(ls=V||v,Lt=Y||I,_n(c,i),Lt=Y,ls=V,jn(i),m&8192)e:for(c=i.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(h===null||I||ls||Lt||ci(i)),h=null,c=i;;){if(c.tag===5||c.tag===26){if(h===null){I=h=c;try{if(S=I.stateNode,v)T=S.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=I.stateNode;var ee=I.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(pe){nt(I,I.return,pe)}}}else if(c.tag===6){if(h===null){I=c;try{I.stateNode.nodeValue=v?"":I.memoizedProps}catch(pe){nt(I,I.return,pe)}}}else if(c.tag===18){if(h===null){I=c;try{var J=I.stateNode;v?Fv(J,!0):Fv(I.stateNode,!1)}catch(pe){nt(I,I.return,pe)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===i)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===i)break e;for(;c.sibling===null;){if(c.return===null||c.return===i)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=i.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Gd(i,h))));break;case 19:_n(c,i),jn(i),m&4&&(m=i.updateQueue,m!==null&&(i.updateQueue=null,Gd(i,m)));break;case 30:break;case 21:break;default:_n(c,i),jn(i)}}function jn(i){var c=i.flags;if(c&2){try{for(var h,m=i.return;m!==null;){if(Gy(m)){h=m;break}m=m.return}if(h==null)throw Error(r(160));switch(h.tag){case 27:var v=h.stateNode,S=qp(i);$d(i,S,v);break;case 5:var T=h.stateNode;h.flags&32&&(Vs(T,""),h.flags&=-33);var A=qp(i);$d(i,A,T);break;case 3:case 4:var I=h.stateNode.containerInfo,V=qp(i);Hp(i,V,I);break;default:throw Error(r(161))}}catch(Y){nt(i,i.return,Y)}i.flags&=-3}c&4096&&(i.flags&=-4097)}function tv(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var c=i;tv(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),i=i.sibling}}function ds(i,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)Wy(i,c.alternate,c),c=c.sibling}function ci(i){for(i=i.child;i!==null;){var c=i;switch(c.tag){case 0:case 11:case 14:case 15:to(4,c,c.return),ci(c);break;case 1:Br(c,c.return);var h=c.stateNode;typeof h.componentWillUnmount=="function"&&Fy(c,c.return,h),ci(c);break;case 27:Xl(c.stateNode);case 26:case 5:Br(c,c.return),ci(c);break;case 22:c.memoizedState===null&&ci(c);break;case 30:ci(c);break;default:ci(c)}i=i.sibling}}function us(i,c,h){for(h=h&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,v=i,S=c,T=S.flags;switch(S.tag){case 0:case 11:case 15:us(v,S,h),ql(4,S);break;case 1:if(us(v,S,h),m=S,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(V){nt(m,m.return,V)}if(m=S,v=m.updateQueue,v!==null){var A=m.stateNode;try{var I=v.shared.hiddenCallbacks;if(I!==null)for(v.shared.hiddenCallbacks=null,v=0;v<I.length;v++)Rx(I[v],A)}catch(V){nt(m,m.return,V)}}h&&T&64&&Vy(S),Hl(S,S.return);break;case 27:Jy(S);case 26:case 5:us(v,S,h),h&&m===null&&T&4&&$y(S),Hl(S,S.return);break;case 12:us(v,S,h);break;case 31:us(v,S,h),h&&T&4&&Qy(v,S);break;case 13:us(v,S,h),h&&T&4&&Zy(v,S);break;case 22:S.memoizedState===null&&us(v,S,h),Hl(S,S.return);break;case 30:break;default:us(v,S,h)}c=c.sibling}}function Fp(i,c){var h=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(h=i.memoizedState.cachePool.pool),i=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(i=c.memoizedState.cachePool.pool),i!==h&&(i!=null&&i.refCount++,h!=null&&Al(h))}function $p(i,c){i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&Al(i))}function Sr(i,c,h,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)nv(i,c,h,m),c=c.sibling}function nv(i,c,h,m){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Sr(i,c,h,m),v&2048&&ql(9,c);break;case 1:Sr(i,c,h,m);break;case 3:Sr(i,c,h,m),v&2048&&(i=null,c.alternate!==null&&(i=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==i&&(c.refCount++,i!=null&&Al(i)));break;case 12:if(v&2048){Sr(i,c,h,m),i=c.stateNode;try{var S=c.memoizedProps,T=S.id,A=S.onPostCommit;typeof A=="function"&&A(T,c.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(I){nt(c,c.return,I)}}else Sr(i,c,h,m);break;case 31:Sr(i,c,h,m);break;case 13:Sr(i,c,h,m);break;case 23:break;case 22:S=c.stateNode,T=c.alternate,c.memoizedState!==null?S._visibility&2?Sr(i,c,h,m):Vl(i,c):S._visibility&2?Sr(i,c,h,m):(S._visibility|=2,ia(i,c,h,m,(c.subtreeFlags&10256)!==0||!1)),v&2048&&Fp(T,c);break;case 24:Sr(i,c,h,m),v&2048&&$p(c.alternate,c);break;default:Sr(i,c,h,m)}}function ia(i,c,h,m,v){for(v=v&&((c.subtreeFlags&10256)!==0||!1),c=c.child;c!==null;){var S=i,T=c,A=h,I=m,V=T.flags;switch(T.tag){case 0:case 11:case 15:ia(S,T,A,I,v),ql(8,T);break;case 23:break;case 22:var Y=T.stateNode;T.memoizedState!==null?Y._visibility&2?ia(S,T,A,I,v):Vl(S,T):(Y._visibility|=2,ia(S,T,A,I,v)),v&&V&2048&&Fp(T.alternate,T);break;case 24:ia(S,T,A,I,v),v&&V&2048&&$p(T.alternate,T);break;default:ia(S,T,A,I,v)}c=c.sibling}}function Vl(i,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var h=i,m=c,v=m.flags;switch(m.tag){case 22:Vl(h,m),v&2048&&Fp(m.alternate,m);break;case 24:Vl(h,m),v&2048&&$p(m.alternate,m);break;default:Vl(h,m)}c=c.sibling}}var Fl=8192;function aa(i,c,h){if(i.subtreeFlags&Fl)for(i=i.child;i!==null;)rv(i,c,h),i=i.sibling}function rv(i,c,h){switch(i.tag){case 26:aa(i,c,h),i.flags&Fl&&i.memoizedState!==null&&W_(h,wr,i.memoizedState,i.memoizedProps);break;case 5:aa(i,c,h);break;case 3:case 4:var m=wr;wr=iu(i.stateNode.containerInfo),aa(i,c,h),wr=m;break;case 22:i.memoizedState===null&&(m=i.alternate,m!==null&&m.memoizedState!==null?(m=Fl,Fl=16777216,aa(i,c,h),Fl=m):aa(i,c,h));break;default:aa(i,c,h)}}function sv(i){var c=i.alternate;if(c!==null&&(i=c.child,i!==null)){c.child=null;do c=i.sibling,i.sibling=null,i=c;while(i!==null)}}function $l(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];Jt=m,iv(m,i)}sv(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ov(i),i=i.sibling}function ov(i){switch(i.tag){case 0:case 11:case 15:$l(i),i.flags&2048&&to(9,i,i.return);break;case 3:$l(i);break;case 12:$l(i);break;case 22:var c=i.stateNode;i.memoizedState!==null&&c._visibility&2&&(i.return===null||i.return.tag!==13)?(c._visibility&=-3,Jd(i)):$l(i);break;default:$l(i)}}function Jd(i){var c=i.deletions;if((i.flags&16)!==0){if(c!==null)for(var h=0;h<c.length;h++){var m=c[h];Jt=m,iv(m,i)}sv(i)}for(i=i.child;i!==null;){switch(c=i,c.tag){case 0:case 11:case 15:to(8,c,c.return),Jd(c);break;case 22:h=c.stateNode,h._visibility&2&&(h._visibility&=-3,Jd(c));break;default:Jd(c)}i=i.sibling}}function iv(i,c){for(;Jt!==null;){var h=Jt;switch(h.tag){case 0:case 11:case 15:to(8,h,c);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Al(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,Jt=m;else e:for(h=i;Jt!==null;){m=Jt;var v=m.sibling,S=m.return;if(Yy(m),m===h){Jt=null;break e}if(v!==null){v.return=S,Jt=v;break e}Jt=S}}}var d_={getCacheForType:function(i){var c=nn(Dt),h=c.data.get(i);return h===void 0&&(h=i(),c.data.set(i,h)),h},cacheSignal:function(){return nn(Dt).controller.signal}},u_=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,qe=null,Ve=0,tt=0,Hn=null,no=!1,la=!1,Gp=!1,hs=0,Tt=0,ro=0,di=0,Jp=0,Vn=0,ca=0,Gl=null,Mn=null,Kp=!1,Kd=0,av=0,Wd=1/0,Yd=null,so=null,Ht=0,oo=null,da=null,fs=0,Wp=0,Yp=null,lv=null,Jl=0,Xp=null;function Fn(){return(Xe&2)!==0&&Ve!==0?Ve&-Ve:q.T!==null?rm():td()}function cv(){if(Vn===0)if((Ve&536870912)===0||$e){var i=Ho;Ho<<=1,(Ho&3932160)===0&&(Ho=262144),Vn=i}else Vn=536870912;return i=zn.current,i!==null&&(i.flags|=32),Vn}function Rn(i,c,h){(i===at&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(ua(i,0),io(i,Ve,Vn,!1)),mr(i,h),((Xe&2)===0||i!==at)&&(i===at&&((Xe&2)===0&&(di|=h),Tt===4&&io(i,Ve,Vn,!1)),Ur(i))}function dv(i,c,h){if((Xe&6)!==0)throw Error(r(327));var m=!h&&(c&127)===0&&(c&i.expiredLanes)===0||Vo(i,c),v=m?p_(i,c):Zp(i,c,!0),S=m;do{if(v===0){la&&!m&&io(i,c,0,!1);break}else{if(h=i.current.alternate,S&&!h_(h)){v=Zp(i,c,!1),S=!1;continue}if(v===2){if(S=c,i.errorRecoveryDisabledLanes&S)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){c=T;e:{var A=i;v=Gl;var I=A.current.memoizedState.isDehydrated;if(I&&(ua(A,T).flags|=256),T=Zp(A,T,!1),T!==2){if(Gp&&!I){A.errorRecoveryDisabledLanes|=S,di|=S,v=4;break e}S=Mn,Mn=v,S!==null&&(Mn===null?Mn=S:Mn.push.apply(Mn,S))}v=T}if(S=!1,v!==2)continue}}if(v===1){ua(i,0),io(i,c,0,!0);break}e:{switch(m=i,S=v,S){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:io(m,c,Vn,!no);break e;case 2:Mn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(v=Kd+300-dn(),10<v)){if(io(m,c,Vn,!no),al(m,0,!0)!==0)break e;fs=c,m.timeoutHandle=qv(uv.bind(null,m,h,Mn,Yd,Kp,c,Vn,di,ca,no,S,"Throttled",-0,0),v);break e}uv(m,h,Mn,Yd,Kp,c,Vn,di,ca,no,S,null,-0,0)}}break}while(!0);Ur(i)}function uv(i,c,h,m,v,S,T,A,I,V,Y,ee,$,J){if(i.timeoutHandle=-1,ee=c.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:xr},rv(c,S,ee);var pe=(S&62914560)===S?Kd-dn():(S&4194048)===S?av-dn():0;if(pe=Y_(ee,pe),pe!==null){fs=S,i.cancelPendingCommit=pe(yv.bind(null,i,c,S,h,m,v,T,A,I,Y,ee,null,$,J)),io(i,S,T,!V);return}}yv(i,c,S,h,m,v,T,A,I)}function h_(i){for(var c=i;;){var h=c.tag;if((h===0||h===11||h===15)&&c.flags&16384&&(h=c.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var v=h[m],S=v.getSnapshot;v=v.value;try{if(!Bn(S(),v))return!1}catch{return!1}}if(h=c.child,c.subtreeFlags&16384&&h!==null)h.return=c,c=h;else{if(c===i)break;for(;c.sibling===null;){if(c.return===null||c.return===i)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function io(i,c,h,m){c&=~Jp,c&=~di,i.suspendedLanes|=c,i.pingedLanes&=~c,m&&(i.warmLanes|=c),m=i.expirationTimes;for(var v=c;0<v;){var S=31-Ze(v),T=1<<S;m[S]=-1,v&=~T}h!==0&&ll(i,h,c)}function Xd(){return(Xe&6)===0?(Kl(0),!1):!0}function Qp(){if(qe!==null){if(tt===0)var i=qe.return;else i=qe,ts=ti=null,pp(i),ta=null,jl=0,i=qe;for(;i!==null;)Hy(i.alternate,i),i=i.return;qe=null}}function ua(i,c){var h=i.timeoutHandle;h!==-1&&(i.timeoutHandle=-1,R_(h)),h=i.cancelPendingCommit,h!==null&&(i.cancelPendingCommit=null,h()),fs=0,Qp(),at=i,qe=h=Zr(i.current,null),Ve=c,tt=0,Hn=null,no=!1,la=Vo(i,c),Gp=!1,ca=Vn=Jp=di=ro=Tt=0,Mn=Gl=null,Kp=!1,(c&8)!==0&&(c|=c&32);var m=i.entangledLanes;if(m!==0)for(i=i.entanglements,m&=c;0<m;){var v=31-Ze(m),S=1<<v;c|=i[v],m&=~S}return hs=c,xd(),h}function hv(i,c){De=null,q.H=Bl,c===ea||c===Td?(c=Ax(),tt=3):c===np?(c=Ax(),tt=4):tt=c===jp?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Hn=c,qe===null&&(Tt=1,zd(i,er(c,i.current)))}function fv(){var i=zn.current;return i===null?!0:(Ve&4194048)===Ve?sr===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===sr:!1}function pv(){var i=q.H;return q.H=Bl,i===null?Bl:i}function mv(){var i=q.A;return q.A=d_,i}function Qd(){Tt=4,no||(Ve&4194048)!==Ve&&zn.current!==null||(la=!0),(ro&134217727)===0&&(di&134217727)===0||at===null||io(at,Ve,Vn,!1)}function Zp(i,c,h){var m=Xe;Xe|=2;var v=pv(),S=mv();(at!==i||Ve!==c)&&(Yd=null,ua(i,c)),c=!1;var T=Tt;e:do try{if(tt!==0&&qe!==null){var A=qe,I=Hn;switch(tt){case 8:Qp(),T=6;break e;case 3:case 2:case 9:case 6:zn.current===null&&(c=!0);var V=tt;if(tt=0,Hn=null,ha(i,A,I,V),h&&la){T=0;break e}break;default:V=tt,tt=0,Hn=null,ha(i,A,I,V)}}f_(),T=Tt;break}catch(Y){hv(i,Y)}while(!0);return c&&i.shellSuspendCounter++,ts=ti=null,Xe=m,q.H=v,q.A=S,qe===null&&(at=null,Ve=0,xd()),T}function f_(){for(;qe!==null;)gv(qe)}function p_(i,c){var h=Xe;Xe|=2;var m=pv(),v=mv();at!==i||Ve!==c?(Yd=null,Wd=dn()+500,ua(i,c)):la=Vo(i,c);e:do try{if(tt!==0&&qe!==null){c=qe;var S=Hn;t:switch(tt){case 1:tt=0,Hn=null,ha(i,c,S,1);break;case 2:case 9:if(Tx(S)){tt=0,Hn=null,bv(c);break}c=function(){tt!==2&&tt!==9||at!==i||(tt=7),Ur(i)},S.then(c,c);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:Tx(S)?(tt=0,Hn=null,bv(c)):(tt=0,Hn=null,ha(i,c,S,7));break;case 5:var T=null;switch(qe.tag){case 26:T=qe.memoizedState;case 5:case 27:var A=qe;if(T?n1(T):A.stateNode.complete){tt=0,Hn=null;var I=A.sibling;if(I!==null)qe=I;else{var V=A.return;V!==null?(qe=V,Zd(V)):qe=null}break t}}tt=0,Hn=null,ha(i,c,S,5);break;case 6:tt=0,Hn=null,ha(i,c,S,6);break;case 8:Qp(),Tt=6;break e;default:throw Error(r(462))}}m_();break}catch(Y){hv(i,Y)}while(!0);return ts=ti=null,q.H=m,q.A=v,Xe=h,qe!==null?0:(at=null,Ve=0,xd(),Tt)}function m_(){for(;qe!==null&&!Ui();)gv(qe)}function gv(i){var c=zy(i.alternate,i,hs);i.memoizedProps=i.pendingProps,c===null?Zd(i):qe=c}function bv(i){var c=i,h=c.alternate;switch(c.tag){case 15:case 0:c=Dy(h,c,c.pendingProps,c.type,void 0,Ve);break;case 11:c=Dy(h,c,c.pendingProps,c.type.render,c.ref,Ve);break;case 5:pp(c);default:Hy(h,c),c=qe=mx(c,hs),c=zy(h,c,hs)}i.memoizedProps=i.pendingProps,c===null?Zd(i):qe=c}function ha(i,c,h,m){ts=ti=null,pp(c),ta=null,jl=0;var v=c.return;try{if(r_(i,v,c,h,Ve)){Tt=1,zd(i,er(h,i.current)),qe=null;return}}catch(S){if(v!==null)throw qe=v,S;Tt=1,zd(i,er(h,i.current)),qe=null;return}c.flags&32768?($e||m===1?i=!0:la||(Ve&536870912)!==0?i=!1:(no=i=!0,(m===2||m===9||m===3||m===6)&&(m=zn.current,m!==null&&m.tag===13&&(m.flags|=16384))),xv(c,i)):Zd(c)}function Zd(i){var c=i;do{if((c.flags&32768)!==0){xv(c,no);return}i=c.return;var h=i_(c.alternate,c,hs);if(h!==null){qe=h;return}if(c=c.sibling,c!==null){qe=c;return}qe=c=i}while(c!==null);Tt===0&&(Tt=5)}function xv(i,c){do{var h=a_(i.alternate,i);if(h!==null){h.flags&=32767,qe=h;return}if(h=i.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!c&&(i=i.sibling,i!==null)){qe=i;return}qe=i=h}while(i!==null);Tt=6,qe=null}function yv(i,c,h,m,v,S,T,A,I){i.cancelPendingCommit=null;do eu();while(Ht!==0);if((Xe&6)!==0)throw Error(r(327));if(c!==null){if(c===i.current)throw Error(r(177));if(S=c.lanes|c.childLanes,S|=qf,wf(i,h,S,T,A,I),i===at&&(qe=at=null,Ve=0),da=c,oo=i,fs=h,Wp=S,Yp=v,lv=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,y_($r,function(){return Nv(),null})):(i.callbackNode=null,i.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=q.T,q.T=null,v=W.p,W.p=2,T=Xe,Xe|=4;try{l_(i,c,h)}finally{Xe=T,W.p=v,q.T=m}}Ht=1,vv(),wv(),Sv()}}function vv(){if(Ht===1){Ht=0;var i=oo,c=da,h=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||h){h=q.T,q.T=null;var m=W.p;W.p=2;var v=Xe;Xe|=4;try{ev(c,i);var S=um,T=ix(i.containerInfo),A=S.focusedElem,I=S.selectionRange;if(T!==A&&A&&A.ownerDocument&&ox(A.ownerDocument.documentElement,A)){if(I!==null&&Of(A)){var V=I.start,Y=I.end;if(Y===void 0&&(Y=V),"selectionStart"in A)A.selectionStart=V,A.selectionEnd=Math.min(Y,A.value.length);else{var ee=A.ownerDocument||document,$=ee&&ee.defaultView||window;if($.getSelection){var J=$.getSelection(),pe=A.textContent.length,Te=Math.min(I.start,pe),it=I.end===void 0?Te:Math.min(I.end,pe);!J.extend&&Te>it&&(T=it,it=Te,Te=T);var U=sx(A,Te),L=sx(A,it);if(U&&L&&(J.rangeCount!==1||J.anchorNode!==U.node||J.anchorOffset!==U.offset||J.focusNode!==L.node||J.focusOffset!==L.offset)){var H=ee.createRange();H.setStart(U.node,U.offset),J.removeAllRanges(),Te>it?(J.addRange(H),J.extend(L.node,L.offset)):(H.setEnd(L.node,L.offset),J.addRange(H))}}}}for(ee=[],J=A;J=J.parentNode;)J.nodeType===1&&ee.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var Q=ee[A];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}hu=!!dm,um=dm=null}finally{Xe=v,W.p=m,q.T=h}}i.current=c,Ht=2}}function wv(){if(Ht===2){Ht=0;var i=oo,c=da,h=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||h){h=q.T,q.T=null;var m=W.p;W.p=2;var v=Xe;Xe|=4;try{Wy(i,c.alternate,c)}finally{Xe=v,W.p=m,q.T=h}}Ht=3}}function Sv(){if(Ht===4||Ht===3){Ht=0,Uo();var i=oo,c=da,h=fs,m=lv;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Ht=5:(Ht=0,da=oo=null,Cv(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(so=null),Jr(h),c=c.stateNode,Ye&&typeof Ye.onCommitFiberRoot=="function")try{Ye.onCommitFiberRoot(Qe,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=q.T,v=W.p,W.p=2,q.T=null;try{for(var S=i.onRecoverableError,T=0;T<m.length;T++){var A=m[T];S(A.value,{componentStack:A.stack})}}finally{q.T=c,W.p=v}}(fs&3)!==0&&eu(),Ur(i),v=i.pendingLanes,(h&261930)!==0&&(v&42)!==0?i===Xp?Jl++:(Jl=0,Xp=i):Jl=0,Kl(0)}}function Cv(i,c){(i.pooledCacheLanes&=c)===0&&(c=i.pooledCache,c!=null&&(i.pooledCache=null,Al(c)))}function eu(){return vv(),wv(),Sv(),Nv()}function Nv(){if(Ht!==5)return!1;var i=oo,c=Wp;Wp=0;var h=Jr(fs),m=q.T,v=W.p;try{W.p=32>h?32:h,q.T=null,h=Yp,Yp=null;var S=oo,T=fs;if(Ht=0,da=oo=null,fs=0,(Xe&6)!==0)throw Error(r(331));var A=Xe;if(Xe|=4,ov(S.current),nv(S,S.current,T,h),Xe=A,Kl(0,!1),Ye&&typeof Ye.onPostCommitFiberRoot=="function")try{Ye.onPostCommitFiberRoot(Qe,S)}catch{}return!0}finally{W.p=v,q.T=m,Cv(i,c)}}function Ev(i,c,h){c=er(h,c),c=_p(i.stateNode,c,2),i=Qs(i,c,2),i!==null&&(mr(i,2),Ur(i))}function nt(i,c,h){if(i.tag===3)Ev(i,i,h);else for(;c!==null;){if(c.tag===3){Ev(c,i,h);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(so===null||!so.has(m))){i=er(h,i),h=Ty(2),m=Qs(c,h,2),m!==null&&(ky(h,m,c,i),mr(m,2),Ur(m));break}}c=c.return}}function em(i,c,h){var m=i.pingCache;if(m===null){m=i.pingCache=new u_;var v=new Set;m.set(c,v)}else v=m.get(c),v===void 0&&(v=new Set,m.set(c,v));v.has(h)||(Gp=!0,v.add(h),i=g_.bind(null,i,c,h),c.then(i,i))}function g_(i,c,h){var m=i.pingCache;m!==null&&m.delete(c),i.pingedLanes|=i.suspendedLanes&h,i.warmLanes&=~h,at===i&&(Ve&h)===h&&(Tt===4||Tt===3&&(Ve&62914560)===Ve&&300>dn()-Kd?(Xe&2)===0&&ua(i,0):Jp|=h,ca===Ve&&(ca=0)),Ur(i)}function Tv(i,c){c===0&&(c=vf()),i=Qo(i,c),i!==null&&(mr(i,c),Ur(i))}function b_(i){var c=i.memoizedState,h=0;c!==null&&(h=c.retryLane),Tv(i,h)}function x_(i,c){var h=0;switch(i.tag){case 31:case 13:var m=i.stateNode,v=i.memoizedState;v!==null&&(h=v.retryLane);break;case 19:m=i.stateNode;break;case 22:m=i.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),Tv(i,h)}function y_(i,c){return Ir(i,c)}var tu=null,fa=null,tm=!1,nu=!1,nm=!1,ao=0;function Ur(i){i!==fa&&i.next===null&&(fa===null?tu=fa=i:fa=fa.next=i),nu=!0,tm||(tm=!0,w_())}function Kl(i,c){if(!nm&&nu){nm=!0;do for(var h=!1,m=tu;m!==null;){if(i!==0){var v=m.pendingLanes;if(v===0)var S=0;else{var T=m.suspendedLanes,A=m.pingedLanes;S=(1<<31-Ze(42|i)+1)-1,S&=v&~(T&~A),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(h=!0,jv(m,S))}else S=Ve,S=al(m,m===at?S:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(S&3)===0||Vo(m,S)||(h=!0,jv(m,S));m=m.next}while(h);nm=!1}}function v_(){kv()}function kv(){nu=tm=!1;var i=0;ao!==0&&M_()&&(i=ao);for(var c=dn(),h=null,m=tu;m!==null;){var v=m.next,S=Av(m,c);S===0?(m.next=null,h===null?tu=v:h.next=v,v===null&&(fa=h)):(h=m,(i!==0||(S&3)!==0)&&(nu=!0)),m=v}Ht!==0&&Ht!==5||Kl(i),ao!==0&&(ao=0)}function Av(i,c){for(var h=i.suspendedLanes,m=i.pingedLanes,v=i.expirationTimes,S=i.pendingLanes&-62914561;0<S;){var T=31-Ze(S),A=1<<T,I=v[T];I===-1?((A&h)===0||(A&m)!==0)&&(v[T]=qb(A,c)):I<=c&&(i.expiredLanes|=A),S&=~A}if(c=at,h=Ve,h=al(i,i===c?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m=i.callbackNode,h===0||i===c&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return m!==null&&m!==null&&$t(m),i.callbackNode=null,i.callbackPriority=0;if((h&3)===0||Vo(i,h)){if(c=h&-h,c===i.callbackPriority)return c;switch(m!==null&&$t(m),Jr(h)){case 2:case 8:h=zi;break;case 32:h=$r;break;case 268435456:h=xe;break;default:h=$r}return m=_v.bind(null,i),h=Ir(h,m),i.callbackPriority=c,i.callbackNode=h,c}return m!==null&&m!==null&&$t(m),i.callbackPriority=2,i.callbackNode=null,2}function _v(i,c){if(Ht!==0&&Ht!==5)return i.callbackNode=null,i.callbackPriority=0,null;var h=i.callbackNode;if(eu()&&i.callbackNode!==h)return null;var m=Ve;return m=al(i,i===at?m:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),m===0?null:(dv(i,m,c),Av(i,dn()),i.callbackNode!=null&&i.callbackNode===h?_v.bind(null,i):null)}function jv(i,c){if(eu())return null;dv(i,c,!0)}function w_(){I_(function(){(Xe&6)!==0?Ir(Ds,v_):kv()})}function rm(){if(ao===0){var i=Qi;i===0&&(i=qo,qo<<=1,(qo&261888)===0&&(qo=256)),ao=i}return ao}function Mv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Hi(""+i)}function Rv(i,c){var h=c.ownerDocument.createElement("input");return h.name=c.name,h.value=c.value,i.id&&h.setAttribute("form",i.id),c.parentNode.insertBefore(h,c),i=new FormData(i),h.parentNode.removeChild(h),i}function S_(i,c,h,m,v){if(c==="submit"&&h&&h.stateNode===v){var S=Mv((v[un]||null).action),T=m.submitter;T&&(c=(c=T[un]||null)?Mv(c.formAction):T.getAttribute("formAction"),c!==null&&(S=c,T=null));var A=new pd("action","action",null,m,v);i.push({event:A,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ao!==0){var I=T?Rv(v,T):new FormData(v);Cp(h,{pending:!0,data:I,method:v.method,action:S},null,I)}}else typeof S=="function"&&(A.preventDefault(),I=T?Rv(v,T):new FormData(v),Cp(h,{pending:!0,data:I,method:v.method,action:S},S,I))},currentTarget:v}]})}}for(var sm=0;sm<zf.length;sm++){var om=zf[sm],C_=om.toLowerCase(),N_=om[0].toUpperCase()+om.slice(1);vr(C_,"on"+N_)}vr(cx,"onAnimationEnd"),vr(dx,"onAnimationIteration"),vr(ux,"onAnimationStart"),vr("dblclick","onDoubleClick"),vr("focusin","onFocus"),vr("focusout","onBlur"),vr(zA,"onTransitionRun"),vr(qA,"onTransitionStart"),vr(HA,"onTransitionCancel"),vr(hx,"onTransitionEnd"),qs("onMouseEnter",["mouseout","mouseover"]),qs("onMouseLeave",["mouseout","mouseover"]),qs("onPointerEnter",["pointerout","pointerover"]),qs("onPointerLeave",["pointerout","pointerover"]),Yr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Yr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Yr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Yr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Yr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Wl));function Iv(i,c){c=(c&4)!==0;for(var h=0;h<i.length;h++){var m=i[h],v=m.event;m=m.listeners;e:{var S=void 0;if(c)for(var T=m.length-1;0<=T;T--){var A=m[T],I=A.instance,V=A.currentTarget;if(A=A.listener,I!==S&&v.isPropagationStopped())break e;S=A,v.currentTarget=V;try{S(v)}catch(Y){bd(Y)}v.currentTarget=null,S=I}else for(T=0;T<m.length;T++){if(A=m[T],I=A.instance,V=A.currentTarget,A=A.listener,I!==S&&v.isPropagationStopped())break e;S=A,v.currentTarget=V;try{S(v)}catch(Y){bd(Y)}v.currentTarget=null,S=I}}}}function He(i,c){var h=c[Os];h===void 0&&(h=c[Os]=new Set);var m=i+"__bubble";h.has(m)||(Dv(c,i,2,!1),h.add(m))}function im(i,c,h){var m=0;c&&(m|=4),Dv(h,i,m,c)}var ru="_reactListening"+Math.random().toString(36).slice(2);function am(i){if(!i[ru]){i[ru]=!0,Dr.forEach(function(h){h!=="selectionchange"&&(E_.has(h)||im(h,!1,i),im(h,!0,i))});var c=i.nodeType===9?i:i.ownerDocument;c===null||c[ru]||(c[ru]=!0,im("selectionchange",!1,c))}}function Dv(i,c,h,m){switch(c1(c)){case 2:var v=Z_;break;case 8:v=e5;break;default:v=Sm}h=v.bind(null,c,h,i),v=void 0,!X||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),m?v!==void 0?i.addEventListener(c,h,{capture:!0,passive:v}):i.addEventListener(c,h,!0):v!==void 0?i.addEventListener(c,h,{passive:v}):i.addEventListener(c,h,!1)}function lm(i,c,h,m,v){var S=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var A=m.stateNode.containerInfo;if(A===v)break;if(T===4)for(T=m.return;T!==null;){var I=T.tag;if((I===3||I===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;A!==null;){if(T=Bs(A),T===null)return;if(I=T.tag,I===5||I===6||I===26||I===27){m=S=T;continue e}A=A.parentNode}}m=m.return}xl(function(){var V=S,Y=bl(h),ee=[];e:{var $=fx.get(i);if($!==void 0){var J=pd,pe=i;switch(i){case"keypress":if(Qr(h)===0)break e;case"keydown":case"keyup":J=xA;break;case"focusin":pe="focus",J=Mf;break;case"focusout":pe="blur",J=Mf;break;case"beforeblur":case"afterblur":J=Mf;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Hb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=iA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=wA;break;case cx:case dx:case ux:J=cA;break;case hx:J=CA;break;case"scroll":case"scrollend":J=sA;break;case"wheel":J=EA;break;case"copy":case"cut":case"paste":J=uA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Fb;break;case"toggle":case"beforetoggle":J=kA}var Te=(c&4)!==0,it=!Te&&(i==="scroll"||i==="scrollend"),U=Te?$!==null?$+"Capture":null:$;Te=[];for(var L=V,H;L!==null;){var Q=L;if(H=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||H===null||U===null||(Q=Jo(L,U),Q!=null&&Te.push(Yl(L,Q,H))),it)break;L=L.return}0<Te.length&&($=new J($,pe,null,h,Y),ee.push({event:$,listeners:Te}))}}if((c&7)===0){e:{if($=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",$&&h!==gl&&(pe=h.relatedTarget||h.fromElement)&&(Bs(pe)||pe[qt]))break e;if((J||$)&&($=Y.window===Y?Y:($=Y.ownerDocument)?$.defaultView||$.parentWindow:window,J?(pe=h.relatedTarget||h.toElement,J=V,pe=pe?Bs(pe):null,pe!==null&&(it=o(pe),Te=pe.tag,pe!==it||Te!==5&&Te!==27&&Te!==6)&&(pe=null)):(J=null,pe=V),J!==pe)){if(Te=Hb,Q="onMouseLeave",U="onMouseEnter",L="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Fb,Q="onPointerLeave",U="onPointerEnter",L="pointer"),it=J==null?$:Us(J),H=pe==null?$:Us(pe),$=new Te(Q,L+"leave",J,h,Y),$.target=it,$.relatedTarget=H,Q=null,Bs(Y)===V&&(Te=new Te(U,L+"enter",pe,h,Y),Te.target=H,Te.relatedTarget=it,Q=Te),it=Q,J&&pe)t:{for(Te=T_,U=J,L=pe,H=0,Q=U;Q;Q=Te(Q))H++;Q=0;for(var Se=L;Se;Se=Te(Se))Q++;for(;0<H-Q;)U=Te(U),H--;for(;0<Q-H;)L=Te(L),Q--;for(;H--;){if(U===L||L!==null&&U===L.alternate){Te=U;break t}U=Te(U),L=Te(L)}Te=null}else Te=null;J!==null&&Pv(ee,$,J,Te,!1),pe!==null&&it!==null&&Pv(ee,it,pe,Te,!0)}}e:{if($=V?Us(V):window,J=$.nodeName&&$.nodeName.toLowerCase(),J==="select"||J==="input"&&$.type==="file")var Je=Qb;else if(Yb($))if(Zb)Je=LA;else{Je=PA;var ge=DA}else J=$.nodeName,!J||J.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?V&&ml(V.elementType)&&(Je=Qb):Je=OA;if(Je&&(Je=Je(i,V))){Xb(ee,Je,h,Y);break e}ge&&ge(i,$,V),i==="focusout"&&V&&$.type==="number"&&V.memoizedProps.value!=null&&pl($,"number",$.value)}switch(ge=V?Us(V):window,i){case"focusin":(Yb(ge)||ge.contentEditable==="true")&&(Fi=ge,Lf=V,El=null);break;case"focusout":El=Lf=Fi=null;break;case"mousedown":Bf=!0;break;case"contextmenu":case"mouseup":case"dragend":Bf=!1,ax(ee,h,Y);break;case"selectionchange":if(UA)break;case"keydown":case"keyup":ax(ee,h,Y)}var Oe;if(If)e:{switch(i){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Vi?Kb(i,h)&&(Fe="onCompositionEnd"):i==="keydown"&&h.keyCode===229&&(Fe="onCompositionStart");Fe&&($b&&h.locale!=="ko"&&(Vi||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Vi&&(Oe=Qn()):(ce=Y,Nt="value"in ce?ce.value:ce.textContent,Vi=!0)),ge=su(V,Fe),0<ge.length&&(Fe=new Vb(Fe,i,null,h,Y),ee.push({event:Fe,listeners:ge}),Oe?Fe.data=Oe:(Oe=Wb(h),Oe!==null&&(Fe.data=Oe)))),(Oe=_A?jA(i,h):MA(i,h))&&(Fe=su(V,"onBeforeInput"),0<Fe.length&&(ge=new Vb("onBeforeInput","beforeinput",null,h,Y),ee.push({event:ge,listeners:Fe}),ge.data=Oe)),S_(ee,i,V,h,Y)}Iv(ee,c)})}function Yl(i,c,h){return{instance:i,listener:c,currentTarget:h}}function su(i,c){for(var h=c+"Capture",m=[];i!==null;){var v=i,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=Jo(i,h),v!=null&&m.unshift(Yl(i,v,S)),v=Jo(i,c),v!=null&&m.push(Yl(i,v,S))),i.tag===3)return m;i=i.return}return[]}function T_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Pv(i,c,h,m,v){for(var S=c._reactName,T=[];h!==null&&h!==m;){var A=h,I=A.alternate,V=A.stateNode;if(A=A.tag,I!==null&&I===m)break;A!==5&&A!==26&&A!==27||V===null||(I=V,v?(V=Jo(h,S),V!=null&&T.unshift(Yl(h,V,I))):v||(V=Jo(h,S),V!=null&&T.push(Yl(h,V,I)))),h=h.return}T.length!==0&&i.push({event:c,listeners:T})}var k_=/\r\n?/g,A_=/\u0000|\uFFFD/g;function Ov(i){return(typeof i=="string"?i:""+i).replace(k_,`
`).replace(A_,"")}function Lv(i,c){return c=Ov(c),Ov(i)===c}function ot(i,c,h,m,v,S){switch(h){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Vs(i,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Vs(i,""+m);break;case"className":Go(i,"class",m);break;case"tabIndex":Go(i,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Go(i,h,m);break;case"style":hd(i,m,S);break;case"data":if(c!=="object"){Go(i,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||h!=="href")){i.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(h);break}m=Hi(""+m),i.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){i.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(h==="formAction"?(c!=="input"&&ot(i,c,"name",v.name,v,null),ot(i,c,"formEncType",v.formEncType,v,null),ot(i,c,"formMethod",v.formMethod,v,null),ot(i,c,"formTarget",v.formTarget,v,null)):(ot(i,c,"encType",v.encType,v,null),ot(i,c,"method",v.method,v,null),ot(i,c,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){i.removeAttribute(h);break}m=Hi(""+m),i.setAttribute(h,m);break;case"onClick":m!=null&&(i.onclick=xr);break;case"onScroll":m!=null&&He("scroll",i);break;case"onScrollEnd":m!=null&&He("scrollend",i);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=h}}break;case"multiple":i.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":i.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){i.removeAttribute("xlink:href");break}h=Hi(""+m),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(h,""+m):i.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(h,""):i.removeAttribute(h);break;case"capture":case"download":m===!0?i.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?i.setAttribute(h,m):i.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?i.setAttribute(h,m):i.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?i.removeAttribute(h):i.setAttribute(h,m);break;case"popover":He("beforetoggle",i),He("toggle",i),Pr(i,"popover",m);break;case"xlinkActuate":br(i,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":br(i,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":br(i,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":br(i,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":br(i,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":br(i,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":br(i,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":br(i,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":br(i,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Pr(i,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=kf.get(h)||h,Pr(i,h,m))}}function cm(i,c,h,m,v,S){switch(h){case"style":hd(i,m,S);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(h=m.__html,h!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=h}}break;case"children":typeof m=="string"?Vs(i,m):(typeof m=="number"||typeof m=="bigint")&&Vs(i,""+m);break;case"onScroll":m!=null&&He("scroll",i);break;case"onScrollEnd":m!=null&&He("scrollend",i);break;case"onClick":m!=null&&(i.onclick=xr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!re.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(v=h.endsWith("Capture"),c=h.slice(2,v?h.length-7:void 0),S=i[un]||null,S=S!=null?S[h]:null,typeof S=="function"&&i.removeEventListener(c,S,v),typeof m=="function")){typeof S!="function"&&S!==null&&(h in i?i[h]=null:i.hasAttribute(h)&&i.removeAttribute(h)),i.addEventListener(c,m,v);break e}h in i?i[h]=m:m===!0?i.setAttribute(h,""):Pr(i,h,m)}}}function sn(i,c,h){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":He("error",i),He("load",i);var m=!1,v=!1,S;for(S in h)if(h.hasOwnProperty(S)){var T=h[S];if(T!=null)switch(S){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(i,c,S,T,h,null)}}v&&ot(i,c,"srcSet",h.srcSet,h,null),m&&ot(i,c,"src",h.src,h,null);return;case"input":He("invalid",i);var A=S=T=v=null,I=null,V=null;for(m in h)if(h.hasOwnProperty(m)){var Y=h[m];if(Y!=null)switch(m){case"name":v=Y;break;case"type":T=Y;break;case"checked":I=Y;break;case"defaultChecked":V=Y;break;case"value":S=Y;break;case"defaultValue":A=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,c));break;default:ot(i,c,m,Y,h,null)}}ld(i,S,A,I,V,T,v,!1);return;case"select":He("invalid",i),m=T=S=null;for(v in h)if(h.hasOwnProperty(v)&&(A=h[v],A!=null))switch(v){case"value":S=A;break;case"defaultValue":T=A;break;case"multiple":m=A;default:ot(i,c,v,A,h,null)}c=S,h=T,i.multiple=!!m,c!=null?Hs(i,!!m,c,!1):h!=null&&Hs(i,!!m,h,!0);return;case"textarea":He("invalid",i),S=v=m=null;for(T in h)if(h.hasOwnProperty(T)&&(A=h[T],A!=null))switch(T){case"value":m=A;break;case"defaultValue":v=A;break;case"children":S=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:ot(i,c,T,A,h,null)}dd(i,m,v,S);return;case"option":for(I in h)if(h.hasOwnProperty(I)&&(m=h[I],m!=null))switch(I){case"selected":i.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ot(i,c,I,m,h,null)}return;case"dialog":He("beforetoggle",i),He("toggle",i),He("cancel",i),He("close",i);break;case"iframe":case"object":He("load",i);break;case"video":case"audio":for(m=0;m<Wl.length;m++)He(Wl[m],i);break;case"image":He("error",i),He("load",i);break;case"details":He("toggle",i);break;case"embed":case"source":case"link":He("error",i),He("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in h)if(h.hasOwnProperty(V)&&(m=h[V],m!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(i,c,V,m,h,null)}return;default:if(ml(c)){for(Y in h)h.hasOwnProperty(Y)&&(m=h[Y],m!==void 0&&cm(i,c,Y,m,h,void 0));return}}for(A in h)h.hasOwnProperty(A)&&(m=h[A],m!=null&&ot(i,c,A,m,h,null))}function __(i,c,h,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,T=null,A=null,I=null,V=null,Y=null;for(J in h){var ee=h[J];if(h.hasOwnProperty(J)&&ee!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":I=ee;default:m.hasOwnProperty(J)||ot(i,c,J,null,m,ee)}}for(var $ in m){var J=m[$];if(ee=h[$],m.hasOwnProperty($)&&(J!=null||ee!=null))switch($){case"type":S=J;break;case"name":v=J;break;case"checked":V=J;break;case"defaultChecked":Y=J;break;case"value":T=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,c));break;default:J!==ee&&ot(i,c,$,J,m,ee)}}fl(i,T,A,I,V,Y,S,v);return;case"select":J=T=A=$=null;for(S in h)if(I=h[S],h.hasOwnProperty(S)&&I!=null)switch(S){case"value":break;case"multiple":J=I;default:m.hasOwnProperty(S)||ot(i,c,S,null,m,I)}for(v in m)if(S=m[v],I=h[v],m.hasOwnProperty(v)&&(S!=null||I!=null))switch(v){case"value":$=S;break;case"defaultValue":A=S;break;case"multiple":T=S;default:S!==I&&ot(i,c,v,S,m,I)}c=A,h=T,m=J,$!=null?Hs(i,!!h,$,!1):!!m!=!!h&&(c!=null?Hs(i,!!h,c,!0):Hs(i,!!h,h?[]:"",!1));return;case"textarea":J=$=null;for(A in h)if(v=h[A],h.hasOwnProperty(A)&&v!=null&&!m.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:ot(i,c,A,null,m,v)}for(T in m)if(v=m[T],S=h[T],m.hasOwnProperty(T)&&(v!=null||S!=null))switch(T){case"value":$=v;break;case"defaultValue":J=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==S&&ot(i,c,T,v,m,S)}cd(i,$,J);return;case"option":for(var pe in h)if($=h[pe],h.hasOwnProperty(pe)&&$!=null&&!m.hasOwnProperty(pe))switch(pe){case"selected":i.selected=!1;break;default:ot(i,c,pe,null,m,$)}for(I in m)if($=m[I],J=h[I],m.hasOwnProperty(I)&&$!==J&&($!=null||J!=null))switch(I){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(i,c,I,$,m,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in h)$=h[Te],h.hasOwnProperty(Te)&&$!=null&&!m.hasOwnProperty(Te)&&ot(i,c,Te,null,m,$);for(V in m)if($=m[V],J=h[V],m.hasOwnProperty(V)&&$!==J&&($!=null||J!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,c));break;default:ot(i,c,V,$,m,J)}return;default:if(ml(c)){for(var it in h)$=h[it],h.hasOwnProperty(it)&&$!==void 0&&!m.hasOwnProperty(it)&&cm(i,c,it,void 0,m,$);for(Y in m)$=m[Y],J=h[Y],!m.hasOwnProperty(Y)||$===J||$===void 0&&J===void 0||cm(i,c,Y,$,m,J);return}}for(var U in h)$=h[U],h.hasOwnProperty(U)&&$!=null&&!m.hasOwnProperty(U)&&ot(i,c,U,null,m,$);for(ee in m)$=m[ee],J=h[ee],!m.hasOwnProperty(ee)||$===J||$==null&&J==null||ot(i,c,ee,$,m,J)}function Bv(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function j_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,c=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var v=h[m],S=v.transferSize,T=v.initiatorType,A=v.duration;if(S&&A&&Bv(T)){for(T=0,A=v.responseEnd,m+=1;m<h.length;m++){var I=h[m],V=I.startTime;if(V>A)break;var Y=I.transferSize,ee=I.initiatorType;Y&&Bv(ee)&&(I=I.responseEnd,T+=Y*(I<A?1:(A-V)/(I-V)))}if(--m,c+=8*(S+T)/(v.duration/1e3),i++,10<i)break}}if(0<i)return c/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var dm=null,um=null;function ou(i){return i.nodeType===9?i:i.ownerDocument}function Uv(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function zv(i,c){if(i===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&c==="foreignObject"?0:i}function hm(i,c){return i==="textarea"||i==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var fm=null;function M_(){var i=window.event;return i&&i.type==="popstate"?i===fm?!1:(fm=i,!0):(fm=null,!1)}var qv=typeof setTimeout=="function"?setTimeout:void 0,R_=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(i){return Hv.resolve(null).then(i).catch(D_)}:qv;function D_(i){setTimeout(function(){throw i})}function lo(i){return i==="head"}function Vv(i,c){var h=c,m=0;do{var v=h.nextSibling;if(i.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"||h==="/&"){if(m===0){i.removeChild(v),ba(c);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")Xl(i.ownerDocument.documentElement);else if(h==="head"){h=i.ownerDocument.head,Xl(h);for(var S=h.firstChild;S;){var T=S.nextSibling,A=S.nodeName;S[Ls]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&S.rel.toLowerCase()==="stylesheet"||h.removeChild(S),S=T}}else h==="body"&&Xl(i.ownerDocument.body);h=v}while(h);ba(c)}function Fv(i,c){var h=i;i=0;do{var m=h.nextSibling;if(h.nodeType===1?c?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(c?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(i===0)break;i--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||i++;h=m}while(h)}function pm(i){var c=i.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var h=c;switch(c=c.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":pm(h),Fo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}i.removeChild(h)}}function P_(i,c,h,m){for(;i.nodeType===1;){var v=h;if(i.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(m){if(!i[Ls])switch(c){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(S=i.getAttribute("rel"),S==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(S!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(S=i.getAttribute("src"),(S!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(c==="input"&&i.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===S)return i}else return i;if(i=or(i.nextSibling),i===null)break}return null}function O_(i,c,h){if(c==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!h||(i=or(i.nextSibling),i===null))return null;return i}function $v(i,c){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=or(i.nextSibling),i===null))return null;return i}function mm(i){return i.data==="$?"||i.data==="$~"}function gm(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function L_(i,c){var h=i.ownerDocument;if(i.data==="$~")i._reactRetry=c;else if(i.data!=="$?"||h.readyState!=="loading")c();else{var m=function(){c(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),i._reactRetry=m}}function or(i){for(;i!=null;i=i.nextSibling){var c=i.nodeType;if(c===1||c===3)break;if(c===8){if(c=i.data,c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"||c==="F!"||c==="F")break;if(c==="/$"||c==="/&")return null}}return i}var bm=null;function Gv(i){i=i.nextSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="/$"||h==="/&"){if(c===0)return or(i.nextSibling);c--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||c++}i=i.nextSibling}return null}function Jv(i){i=i.previousSibling;for(var c=0;i;){if(i.nodeType===8){var h=i.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(c===0)return i;c--}else h!=="/$"&&h!=="/&"||c++}i=i.previousSibling}return null}function Kv(i,c,h){switch(c=ou(h),i){case"html":if(i=c.documentElement,!i)throw Error(r(452));return i;case"head":if(i=c.head,!i)throw Error(r(453));return i;case"body":if(i=c.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Xl(i){for(var c=i.attributes;c.length;)i.removeAttributeNode(c[0]);Fo(i)}var ir=new Map,Wv=new Set;function iu(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ps=W.d;W.d={f:B_,r:U_,D:z_,C:q_,L:H_,m:V_,X:$_,S:F_,M:G_};function B_(){var i=ps.f(),c=Xd();return i||c}function U_(i){var c=Wr(i);c!==null&&c.tag===5&&c.type==="form"?hy(c):ps.r(i)}var pa=typeof document>"u"?null:document;function Yv(i,c,h){var m=pa;if(m&&typeof c=="string"&&c){var v=Tn(c);v='link[rel="'+i+'"][href="'+v+'"]',typeof h=="string"&&(v+='[crossorigin="'+h+'"]'),Wv.has(v)||(Wv.add(v),i={rel:i,crossOrigin:h,href:c},m.querySelector(v)===null&&(c=m.createElement("link"),sn(c,"link",i),It(c),m.head.appendChild(c)))}}function z_(i){ps.D(i),Yv("dns-prefetch",i,null)}function q_(i,c){ps.C(i,c),Yv("preconnect",i,c)}function H_(i,c,h){ps.L(i,c,h);var m=pa;if(m&&i&&c){var v='link[rel="preload"][as="'+Tn(c)+'"]';c==="image"&&h&&h.imageSrcSet?(v+='[imagesrcset="'+Tn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(v+='[imagesizes="'+Tn(h.imageSizes)+'"]')):v+='[href="'+Tn(i)+'"]';var S=v;switch(c){case"style":S=ma(i);break;case"script":S=ga(i)}ir.has(S)||(i=g({rel:"preload",href:c==="image"&&h&&h.imageSrcSet?void 0:i,as:c},h),ir.set(S,i),m.querySelector(v)!==null||c==="style"&&m.querySelector(Ql(S))||c==="script"&&m.querySelector(Zl(S))||(c=m.createElement("link"),sn(c,"link",i),It(c),m.head.appendChild(c)))}}function V_(i,c){ps.m(i,c);var h=pa;if(h&&i){var m=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+Tn(m)+'"][href="'+Tn(i)+'"]',S=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=ga(i)}if(!ir.has(S)&&(i=g({rel:"modulepreload",href:i},c),ir.set(S,i),h.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Zl(S)))return}m=h.createElement("link"),sn(m,"link",i),It(m),h.head.appendChild(m)}}}function F_(i,c,h){ps.S(i,c,h);var m=pa;if(m&&i){var v=zs(m).hoistableStyles,S=ma(i);c=c||"default";var T=v.get(S);if(!T){var A={loading:0,preload:null};if(T=m.querySelector(Ql(S)))A.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":c},h),(h=ir.get(S))&&xm(i,h);var I=T=m.createElement("link");It(I),sn(I,"link",i),I._p=new Promise(function(V,Y){I.onload=V,I.onerror=Y}),I.addEventListener("load",function(){A.loading|=1}),I.addEventListener("error",function(){A.loading|=2}),A.loading|=4,au(T,c,m)}T={type:"stylesheet",instance:T,count:1,state:A},v.set(S,T)}}}function $_(i,c){ps.X(i,c);var h=pa;if(h&&i){var m=zs(h).hoistableScripts,v=ga(i),S=m.get(v);S||(S=h.querySelector(Zl(v)),S||(i=g({src:i,async:!0},c),(c=ir.get(v))&&ym(i,c),S=h.createElement("script"),It(S),sn(S,"link",i),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(v,S))}}function G_(i,c){ps.M(i,c);var h=pa;if(h&&i){var m=zs(h).hoistableScripts,v=ga(i),S=m.get(v);S||(S=h.querySelector(Zl(v)),S||(i=g({src:i,async:!0,type:"module"},c),(c=ir.get(v))&&ym(i,c),S=h.createElement("script"),It(S),sn(S,"link",i),h.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},m.set(v,S))}}function Xv(i,c,h,m){var v=(v=Ae.current)?iu(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(c=ma(h.href),h=zs(v).hoistableStyles,m=h.get(c),m||(m={type:"style",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){i=ma(h.href);var S=zs(v).hoistableStyles,T=S.get(i);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(i,T),(S=v.querySelector(Ql(i)))&&!S._p&&(T.instance=S,T.state.loading=5),ir.has(i)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},ir.set(i,h),S||J_(v,i,h,T.state))),c&&m===null)throw Error(r(528,""));return T}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=h.async,h=h.src,typeof h=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ga(h),h=zs(v).hoistableScripts,m=h.get(c),m||(m={type:"script",instance:null,count:0,state:null},h.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function ma(i){return'href="'+Tn(i)+'"'}function Ql(i){return'link[rel="stylesheet"]['+i+"]"}function Qv(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function J_(i,c,h,m){i.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=i.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),sn(c,"link",h),It(c),i.head.appendChild(c))}function ga(i){return'[src="'+Tn(i)+'"]'}function Zl(i){return"script[async]"+i}function Zv(i,c,h){if(c.count++,c.instance===null)switch(c.type){case"style":var m=i.querySelector('style[data-href~="'+Tn(h.href)+'"]');if(m)return c.instance=m,It(m),m;var v=g({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(i.ownerDocument||i).createElement("style"),It(m),sn(m,"style",v),au(m,h.precedence,i),c.instance=m;case"stylesheet":v=ma(h.href);var S=i.querySelector(Ql(v));if(S)return c.state.loading|=4,c.instance=S,It(S),S;m=Qv(h),(v=ir.get(v))&&xm(m,v),S=(i.ownerDocument||i).createElement("link"),It(S);var T=S;return T._p=new Promise(function(A,I){T.onload=A,T.onerror=I}),sn(S,"link",m),c.state.loading|=4,au(S,h.precedence,i),c.instance=S;case"script":return S=ga(h.src),(v=i.querySelector(Zl(S)))?(c.instance=v,It(v),v):(m=h,(v=ir.get(S))&&(m=g({},h),ym(m,v)),i=i.ownerDocument||i,v=i.createElement("script"),It(v),sn(v,"link",m),i.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,au(m,h.precedence,i));return c.instance}function au(i,c,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,S=v,T=0;T<m.length;T++){var A=m[T];if(A.dataset.precedence===c)S=A;else if(S!==v)break}S?S.parentNode.insertBefore(i,S.nextSibling):(c=h.nodeType===9?h.head:h,c.insertBefore(i,c.firstChild))}function xm(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.title==null&&(i.title=c.title)}function ym(i,c){i.crossOrigin==null&&(i.crossOrigin=c.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=c.referrerPolicy),i.integrity==null&&(i.integrity=c.integrity)}var lu=null;function e1(i,c,h){if(lu===null){var m=new Map,v=lu=new Map;v.set(h,m)}else v=lu,m=v.get(h),m||(m=new Map,v.set(h,m));if(m.has(i))return m;for(m.set(i,null),h=h.getElementsByTagName(i),v=0;v<h.length;v++){var S=h[v];if(!(S[Ls]||S[Gt]||i==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var T=S.getAttribute(c)||"";T=i+T;var A=m.get(T);A?A.push(S):m.set(T,[S])}}return m}function t1(i,c,h){i=i.ownerDocument||i,i.head.insertBefore(h,c==="title"?i.querySelector("head > title"):null)}function K_(i,c,h){if(h===1||c.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return i=c.disabled,typeof c.precedence=="string"&&i==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function n1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function W_(i,c,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var v=ma(m.href),S=c.querySelector(Ql(v));if(S){c=S._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(i.count++,i=cu.bind(i),c.then(i,i)),h.state.loading|=4,h.instance=S,It(S);return}S=c.ownerDocument||c,m=Qv(m),(v=ir.get(v))&&xm(m,v),S=S.createElement("link"),It(S);var T=S;T._p=new Promise(function(A,I){T.onload=A,T.onerror=I}),sn(S,"link",m),h.instance=S}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(i.count++,h=cu.bind(i),c.addEventListener("load",h),c.addEventListener("error",h))}}var vm=0;function Y_(i,c){return i.stylesheets&&i.count===0&&uu(i,i.stylesheets),0<i.count||0<i.imgCount?function(h){var m=setTimeout(function(){if(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend){var S=i.unsuspend;i.unsuspend=null,S()}},6e4+c);0<i.imgBytes&&vm===0&&(vm=62500*j_());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&uu(i,i.stylesheets),i.unsuspend)){var S=i.unsuspend;i.unsuspend=null,S()}},(i.imgBytes>vm?50:800)+c);return i.unsuspend=h,function(){i.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function cu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uu(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var du=null;function uu(i,c){i.stylesheets=null,i.unsuspend!==null&&(i.count++,du=new Map,c.forEach(X_,i),du=null,cu.call(i))}function X_(i,c){if(!(c.state.loading&4)){var h=du.get(i);if(h)var m=h.get(null);else{h=new Map,du.set(i,h);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var T=v[S];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(h.set(T.dataset.precedence,T),m=T)}m&&h.set(null,m)}v=c.instance,T=v.getAttribute("data-precedence"),S=h.get(T)||m,S===m&&h.set(null,v),h.set(T,v),this.count++,m=cu.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),S?S.parentNode.insertBefore(v,S.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),c.state.loading|=4}}var ec={$$typeof:j,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function Q_(i,c,h,m,v,S,T,A,I){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ed(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.hiddenUpdates=ed(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=I,this.incompleteTransitions=new Map}function r1(i,c,h,m,v,S,T,A,I,V,Y,ee){return i=new Q_(i,c,h,T,I,V,Y,ee,A),c=1,S===!0&&(c|=24),S=Un(3,null,null,c),i.current=S,S.stateNode=i,c=Zf(),c.refCount++,i.pooledCache=c,c.refCount++,S.memoizedState={element:m,isDehydrated:h,cache:c},rp(S),i}function s1(i){return i?(i=Ji,i):Ji}function o1(i,c,h,m,v,S){v=s1(v),m.context===null?m.context=v:m.pendingContext=v,m=Xs(c),m.payload={element:h},S=S===void 0?null:S,S!==null&&(m.callback=S),h=Qs(i,m,c),h!==null&&(Rn(h,i,c),Rl(h,i,c))}function i1(i,c){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var h=i.retryLane;i.retryLane=h!==0&&h<c?h:c}}function wm(i,c){i1(i,c),(i=i.alternate)&&i1(i,c)}function a1(i){if(i.tag===13||i.tag===31){var c=Qo(i,67108864);c!==null&&Rn(c,i,67108864),wm(i,67108864)}}function l1(i){if(i.tag===13||i.tag===31){var c=Fn();c=dl(c);var h=Qo(i,c);h!==null&&Rn(h,i,c),wm(i,c)}}var hu=!0;function Z_(i,c,h,m){var v=q.T;q.T=null;var S=W.p;try{W.p=2,Sm(i,c,h,m)}finally{W.p=S,q.T=v}}function e5(i,c,h,m){var v=q.T;q.T=null;var S=W.p;try{W.p=8,Sm(i,c,h,m)}finally{W.p=S,q.T=v}}function Sm(i,c,h,m){if(hu){var v=Cm(m);if(v===null)lm(i,c,m,fu,h),d1(i,m);else if(n5(v,i,c,h,m))m.stopPropagation();else if(d1(i,m),c&4&&-1<t5.indexOf(i)){for(;v!==null;){var S=Wr(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var T=Ps(S.pendingLanes);if(T!==0){var A=S;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var I=1<<31-Ze(T);A.entanglements[1]|=I,T&=~I}Ur(S),(Xe&6)===0&&(Wd=dn()+500,Kl(0))}}break;case 31:case 13:A=Qo(S,2),A!==null&&Rn(A,S,2),Xd(),wm(S,2)}if(S=Cm(m),S===null&&lm(i,c,m,fu,h),S===v)break;v=S}v!==null&&m.stopPropagation()}else lm(i,c,m,null,h)}}function Cm(i){return i=bl(i),Nm(i)}var fu=null;function Nm(i){if(fu=null,i=Bs(i),i!==null){var c=o(i);if(c===null)i=null;else{var h=c.tag;if(h===13){if(i=a(c),i!==null)return i;i=null}else if(h===31){if(i=d(c),i!==null)return i;i=null}else if(h===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;i=null}else c!==i&&(i=null)}}return fu=i,null}function c1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(zo()){case Ds:return 2;case zi:return 8;case $r:case ol:return 32;case xe:return 268435456;default:return 32}default:return 32}}var Em=!1,co=null,uo=null,ho=null,tc=new Map,nc=new Map,fo=[],t5="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d1(i,c){switch(i){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":tc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":nc.delete(c.pointerId)}}function rc(i,c,h,m,v,S){return i===null||i.nativeEvent!==S?(i={blockedOn:c,domEventName:h,eventSystemFlags:m,nativeEvent:S,targetContainers:[v]},c!==null&&(c=Wr(c),c!==null&&a1(c)),i):(i.eventSystemFlags|=m,c=i.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),i)}function n5(i,c,h,m,v){switch(c){case"focusin":return co=rc(co,i,c,h,m,v),!0;case"dragenter":return uo=rc(uo,i,c,h,m,v),!0;case"mouseover":return ho=rc(ho,i,c,h,m,v),!0;case"pointerover":var S=v.pointerId;return tc.set(S,rc(tc.get(S)||null,i,c,h,m,v)),!0;case"gotpointercapture":return S=v.pointerId,nc.set(S,rc(nc.get(S)||null,i,c,h,m,v)),!0}return!1}function u1(i){var c=Bs(i.target);if(c!==null){var h=o(c);if(h!==null){if(c=h.tag,c===13){if(c=a(h),c!==null){i.blockedOn=c,ul(i.priority,function(){l1(h)});return}}else if(c===31){if(c=d(h),c!==null){i.blockedOn=c,ul(i.priority,function(){l1(h)});return}}else if(c===3&&h.stateNode.current.memoizedState.isDehydrated){i.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}i.blockedOn=null}function pu(i){if(i.blockedOn!==null)return!1;for(var c=i.targetContainers;0<c.length;){var h=Cm(i.nativeEvent);if(h===null){h=i.nativeEvent;var m=new h.constructor(h.type,h);gl=m,h.target.dispatchEvent(m),gl=null}else return c=Wr(h),c!==null&&a1(c),i.blockedOn=h,!1;c.shift()}return!0}function h1(i,c,h){pu(i)&&h.delete(c)}function r5(){Em=!1,co!==null&&pu(co)&&(co=null),uo!==null&&pu(uo)&&(uo=null),ho!==null&&pu(ho)&&(ho=null),tc.forEach(h1),nc.forEach(h1)}function mu(i,c){i.blockedOn===c&&(i.blockedOn=null,Em||(Em=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,r5)))}var gu=null;function f1(i){gu!==i&&(gu=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){gu===i&&(gu=null);for(var c=0;c<i.length;c+=3){var h=i[c],m=i[c+1],v=i[c+2];if(typeof m!="function"){if(Nm(m||h)===null)continue;break}var S=Wr(h);S!==null&&(i.splice(c,3),c-=3,Cp(S,{pending:!0,data:v,method:h.method,action:m},m,v))}}))}function ba(i){function c(I){return mu(I,i)}co!==null&&mu(co,i),uo!==null&&mu(uo,i),ho!==null&&mu(ho,i),tc.forEach(c),nc.forEach(c);for(var h=0;h<fo.length;h++){var m=fo[h];m.blockedOn===i&&(m.blockedOn=null)}for(;0<fo.length&&(h=fo[0],h.blockedOn===null);)u1(h),h.blockedOn===null&&fo.shift();if(h=(i.ownerDocument||i).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var v=h[m],S=h[m+1],T=v[un]||null;if(typeof S=="function")T||f1(h);else if(T){var A=null;if(S&&S.hasAttribute("formAction")){if(v=S,T=S[un]||null)A=T.formAction;else if(Nm(v)!==null)continue}else A=T.action;typeof A=="function"?h[m+1]=A:(h.splice(m,3),m-=3),f1(h)}}}function p1(){function i(S){S.canIntercept&&S.info==="react-transition"&&S.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function c(){v!==null&&(v(),v=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var S=navigation.currentEntry;S&&S.url!=null&&navigation.navigate(S.url,{state:S.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",c),navigation.addEventListener("navigateerror",c),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",c),navigation.removeEventListener("navigateerror",c),v!==null&&(v(),v=null)}}}function Tm(i){this._internalRoot=i}bu.prototype.render=Tm.prototype.render=function(i){var c=this._internalRoot;if(c===null)throw Error(r(409));var h=c.current,m=Fn();o1(h,m,i,c,null,null)},bu.prototype.unmount=Tm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var c=i.containerInfo;o1(i.current,2,null,i,null,null),Xd(),c[qt]=null}};function bu(i){this._internalRoot=i}bu.prototype.unstable_scheduleHydration=function(i){if(i){var c=td();i={blockedOn:null,target:i,priority:c};for(var h=0;h<fo.length&&c!==0&&c<fo[h].priority;h++);fo.splice(h,0,i),h===0&&u1(i)}};var m1=e.version;if(m1!=="19.2.0")throw Error(r(527,m1,"19.2.0"));W.findDOMNode=function(i){var c=i._reactInternals;if(c===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=f(c),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var s5={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xu.isDisabled&&xu.supportsFiber)try{Qe=xu.inject(s5),Ye=xu}catch{}}return oc.createRoot=function(i,c){if(!s(i))throw Error(r(299));var h=!1,m="",v=Sy,S=Cy,T=Ny;return c!=null&&(c.unstable_strictMode===!0&&(h=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(S=c.onCaughtError),c.onRecoverableError!==void 0&&(T=c.onRecoverableError)),c=r1(i,1,!1,null,null,h,m,null,v,S,T,p1),i[qt]=c.current,am(i),new Tm(c)},oc.hydrateRoot=function(i,c,h){if(!s(i))throw Error(r(299));var m=!1,v="",S=Sy,T=Cy,A=Ny,I=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(v=h.identifierPrefix),h.onUncaughtError!==void 0&&(S=h.onUncaughtError),h.onCaughtError!==void 0&&(T=h.onCaughtError),h.onRecoverableError!==void 0&&(A=h.onRecoverableError),h.formState!==void 0&&(I=h.formState)),c=r1(i,1,!0,c,h??null,m,v,I,S,T,A,p1),c.context=s1(null),h=c.current,m=Fn(),m=dl(m),v=Xs(m),v.callback=null,Qs(h,v,m),h=m,c.current.lanes=h,mr(c,h),Ur(c),i[qt]=c.current,am(i),new bu(c)},oc.version="19.2.0",oc}var E1;function m5(){if(E1)return _m.exports;E1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),_m.exports=p5(),_m.exports}var g5=m5();const b5=Gc(g5),Mr=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Ts=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),Kh=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),T1=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 9l-7 7-7-7"})}),OC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16M4 18h16"})}),Qa=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Im=({logoUrl:t,onLogoClick:e,onConsultantClick:n,cartItems:r,onCartClick:s,collections:o,onNavigate:a,currentCustomer:d,onLogout:u})=>{const[f,p]=R.useState(!1),[g,x]=R.useState(!1),[w,C]=R.useState(!1),E=r&&r.length>0?r.reduce((_,j)=>_+j.quantity,0):0,N=[{name:"Categorias",action:()=>x(!g),dropdown:!0},{name:"Ofertas",href:"#offers"},{name:"Mais Vendidos",href:"#bestsellers"}],k=o.map(_=>({name:_.title,id:_.id}));return l.jsx("header",{className:"bg-[rgb(var(--color-brand-gray))] backdrop-blur-sm border-b border-[rgb(var(--color-brand-gold))]/[.30] sticky top-0 z-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsx("button",{onClick:e,className:"flex-shrink-0",children:t?l.jsx("img",{src:t,alt:"RS Prlipsi Logo",className:"h-10 max-w-[120px] object-contain"}):l.jsx("span",{className:"text-3xl font-display text-[rgb(var(--color-brand-gold))]",children:"RS Prlipsi"})}),l.jsx("div",{className:"hidden lg:flex flex-grow max-w-xl mx-8",children:l.jsxs("div",{className:"relative w-full",children:[l.jsx("input",{type:"text",placeholder:"Buscar produtos...",className:"w-full bg-[rgb(var(--color-brand-dark))]/[.50] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-full py-2 pl-12 pr-4 text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] focus:outline-none focus:border-[rgb(var(--color-brand-gold))] transition-colors"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]})}),l.jsx("nav",{className:"hidden lg:flex items-center space-x-6",children:N.map(_=>l.jsxs("div",{className:"relative",children:[_.dropdown?l.jsxs("button",{onClick:_.action,onBlur:()=>setTimeout(()=>x(!1),200),className:"flex items-center gap-1 text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:[_.name,l.jsx(T1,{className:`w-4 h-4 transition-transform ${g?"rotate-180":""}`})]}):l.jsx("a",{href:_.href,className:"text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:_.name}),_.dropdown&&g&&l.jsx("div",{className:"absolute top-full mt-4 w-48 bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gold))]/[.20] rounded-md shadow-lg animate-fade-in-down",children:k.map(j=>l.jsx("button",{onClick:()=>a("collectionView",o.find(P=>P.id===j.id)),className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))]",children:j.name},j.id))})]},_.name))}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"relative hidden sm:block",children:[l.jsx("button",{onBlur:()=>setTimeout(()=>C(!1),200),onClick:()=>C(!w),className:"text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:l.jsx(Ts,{className:"h-6 w-6"})}),w&&l.jsx("div",{className:"absolute top-full right-0 mt-4 w-56 bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gold))]/[.20] rounded-md shadow-lg animate-fade-in-down",children:d?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"px-4 py-3 border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"Logado como"}),l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))] truncate",children:d.name})]}),l.jsx("button",{onClick:()=>{a("customerAccount"),C(!1)},className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))]",children:"Minha Conta"}),l.jsx("button",{onClick:()=>{a("customerWishlist"),C(!1)},className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))]",children:"Lista de Desejos"}),l.jsx("button",{onClick:()=>window.location.href="/loja",className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))] border-t border-[rgb(var(--color-brand-gray-light))]",children:"Painel do Lojista"}),l.jsx("button",{onClick:u,className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))] border-t border-[rgb(var(--color-brand-gray-light))]",children:"Sair"})]}):l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>{a("customerLogin"),C(!1)},className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))]",children:"Entrar"}),l.jsx("button",{onClick:()=>{a("customerRegister"),C(!1)},className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))]",children:"Cadastre-se"}),l.jsx("button",{onClick:()=>window.location.href="/loja",className:"block text-left w-full px-4 py-2 text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))] border-t border-[rgb(var(--color-brand-gray-light))]",children:"Painel do Lojista"})]})})]}),l.jsxs("button",{onClick:s,className:"relative text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:[l.jsx(Kh,{className:"h-6 w-6"}),E>0&&l.jsx("span",{className:"absolute -top-2 -right-2 bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:E})]}),l.jsx("button",{onClick:()=>p(!f),className:"lg:hidden text-[rgb(var(--color-brand-text-light))]",children:f?l.jsx(Qa,{className:"h-6 w-6"}):l.jsx(OC,{className:"h-6 w-6"})})]})]}),f&&l.jsx("div",{className:"lg:hidden py-4 border-t border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("nav",{className:"flex flex-col space-y-4",children:[N.map(_=>l.jsxs("div",{children:[_.dropdown?l.jsxs("button",{onClick:_.action,className:"w-full text-left flex items-center gap-1 text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:[_.name,l.jsx(T1,{className:`w-4 h-4 transition-transform ${g?"rotate-180":""}`})]}):l.jsx("a",{href:_.href,onClick:()=>p(!1),className:"text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:_.name}),_.dropdown&&g&&l.jsx("div",{className:"pl-4 mt-2 space-y-2",children:k.map(j=>l.jsx("button",{onClick:()=>{a("collectionView",o.find(P=>P.id===j.id)),p(!1)},className:"block text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]",children:j.name},j.id))})]},_.name)),l.jsx("button",{onClick:()=>window.location.href="/loja",className:"text-left text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:"Painel do Lojista"})]})})]})})},x5=({content:t})=>{const e=(n,r)=>{n.preventDefault();const s=document.getElementById(r);s&&s.scrollIntoView({behavior:"smooth"})};return l.jsxs(l.Fragment,{children:[l.jsx("style",{children:`
        .hero-section {
          background-image: url('${t.mobileImage}');
        }
        @media (min-width: 768px) {
          .hero-section {
            background-image: url('${t.desktopImage}');
          }
        }
      `}),l.jsxs("section",{className:"hero-section relative h-[60vh] md:h-[70vh] flex items-center justify-center text-center bg-cover bg-center",children:[l.jsx("div",{className:"absolute inset-0 bg-[rgb(var(--color-brand-dark))]/[.60]"}),l.jsxs("div",{className:"relative z-10 px-4",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold font-display text-[rgb(var(--color-brand-text-light))] drop-shadow-lg",children:t.title}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg md:text-xl text-[rgb(var(--color-brand-text-light))]",children:t.subtitle}),l.jsx("div",{className:"mt-8 flex justify-center",children:l.jsx("a",{href:"#featured-products",onClick:n=>e(n,"featured-products"),className:"bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] font-bold py-3 px-8 rounded-full text-lg hover:bg-[rgb(var(--color-success))] transition-transform transform hover:scale-105",children:"Compre Agora"})})]})]})]})},Da=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.007 5.404.433c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.433 2.082-5.007z",clipRule:"evenodd"})}),k0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})}),jc=({product:t,onClick:e,wishlist:n,onToggleWishlist:r})=>{const s=n.includes(t.id),o=a=>{a.stopPropagation(),r(t.id)};return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))]/[.50] backdrop-blur-sm border border-[rgb(var(--color-brand-gold))]/[.20] rounded-lg overflow-hidden shadow-lg hover:shadow-[rgb(var(--color-brand-gold))]/[.10] transition-shadow duration-300 cursor-pointer group",onClick:e,role:"button",tabIndex:0,onKeyPress:a=>a.key==="Enter"&&e(),children:[l.jsxs("div",{className:"relative overflow-hidden",children:[l.jsx("img",{src:t.images[0],alt:t.name,className:"w-full h-56 object-cover group-hover:scale-105 transition-transform duration-300"}),l.jsx("button",{onClick:o,className:"absolute top-2 right-2 z-10 p-2 bg-[rgb(var(--color-brand-dark))]/[.40] rounded-full text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))] transition-colors","aria-label":"Adicionar  lista de desejos",children:l.jsx(k0,{className:`w-6 h-6 transition-all ${s?"text-[rgb(var(--color-brand-gold))] fill-current":""}`})}),l.jsx("div",{className:"absolute top-0 left-0 bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] px-3 py-1 text-sm font-bold rounded-br-lg",children:t.type})]}),l.jsxs("div",{className:"p-4",children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:t.seller}),l.jsx("h3",{className:"text-lg font-bold text-[rgb(var(--color-brand-text-light))] mt-1 truncate group-hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:t.name}),l.jsxs("div",{className:"flex items-center mt-2",children:[l.jsx("div",{className:"flex items-center",children:[...Array(5)].map((a,d)=>l.jsx(Da,{className:`h-5 w-5 ${d<Math.round(t.rating)?"text-[rgb(var(--color-brand-gold))]":"text-[rgb(var(--color-brand-gray-light))]"}`},d))}),l.jsxs("span",{className:"text-[rgb(var(--color-brand-text-dim))] text-sm ml-2",children:["(",t.reviewCount,")"]})]}),l.jsxs("div",{className:"mt-4 flex justify-between items-center",children:[l.jsx("p",{className:"text-xl font-semibold text-[rgb(var(--color-brand-gold))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.currency}).format(t.price)}),l.jsx("button",{className:"bg-transparent border border-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-gold))] text-sm font-bold py-1 px-3 rounded-full hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))] transition-colors",children:"Ver Mais"})]})]})]})},y5=({onProductClick:t,products:e,wishlist:n,onToggleWishlist:r})=>{const s=e.filter(o=>o.status==="Ativo").slice(0,4);return l.jsx("section",{id:"featured-products",className:"py-16 sm:py-24 bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display text-[rgb(var(--color-brand-text-light))]",children:"Produtos em Destaque"}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-[rgb(var(--color-brand-text-dim))]",children:"Explore nossa seleo de produtos de alta qualidade dos melhores vendedores."})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:s.map(o=>l.jsx(jc,{product:o,onClick:()=>t(o),wishlist:n,onToggleWishlist:r},o.id))})]})})},v5=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M20 4H4v2h16V4zm1 10v-2l-1-5H4l-1 5v2h1v6h10v-6h4v6h2v-6h1zm-9 4H6v-4h6v4z"})}),w5=({onConsultantClick:t,onBecomeSellerClick:e})=>l.jsx("section",{id:"cta-section",className:"py-12 sm:py-16 bg-[rgb(var(--color-brand-gray))]",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("div",{className:"grid grid-cols-1 gap-8 items-stretch",children:l.jsxs("div",{className:"bg-gradient-to-br from-[rgb(var(--color-brand-gray))] to-[rgb(var(--color-brand-dark))] p-8 rounded-lg border-2 border-[rgb(var(--color-brand-gold))]/[.30] flex flex-col items-center text-center shadow-2xl",children:[l.jsx("div",{className:"bg-[rgb(var(--color-brand-gold))]/[.10] p-3 rounded-full border-2 border-[rgb(var(--color-brand-gold))]/[.30]",children:l.jsx(v5,{className:"h-10 w-10 text-[rgb(var(--color-brand-gold))]"})}),l.jsx("h3",{className:"mt-5 text-2xl font-bold font-display text-[rgb(var(--color-brand-text-light))]",children:"Seja um Lojista"}),l.jsx("p",{className:"mt-3 text-[rgb(var(--color-brand-text-dim))] max-w-md",children:"Junte-se ao nosso marketplace. Construa sua marca, alcance milhes de clientes e faa seu negcio crescer com nossas ferramentas poderosas."}),l.jsx("button",{onClick:e,className:"mt-6 bg-transparent border-2 border-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-gold))] font-bold py-2 px-6 rounded-full text-base hover:bg-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-brand-dark))] transition-colors",children:"Comece a Vender"})]})})})}),LC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.879V14.89H8.313v-2.91h2.125v-2.207c0-2.103 1.25-3.245 3.162-3.245.897 0 1.8.165 1.8.165v2.468h-1.265c-1.03 0-1.35.613-1.35 1.325v1.562h2.79l-.45 2.91h-2.34v7.028C18.343 21.128 22 16.991 22 12z"})}),S5=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919C8.416 2.175 8.796 2.163 12 2.163zm0 1.802c-3.116 0-3.472.012-4.695.068-2.61.12-3.648 1.15-3.768 3.768-.056 1.223-.067 1.57-.067 4.695s.011 3.472.067 4.695c.12 2.61 1.158 3.648 3.768 3.768 1.223.056 1.57.067 4.695.067s3.472-.011 4.695-.067c2.61-.12 3.648-1.158 3.768-3.768.056-1.223.067-1.57.067-4.695s-.011-3.472-.067-4.695c-.12-2.61-1.158-3.648-3.768-3.768C15.472 3.977 15.116 3.965 12 3.965zM12 6.837c-2.843 0-5.163 2.32-5.163 5.163s2.32 5.163 5.163 5.163 5.163-2.32 5.163-5.163S14.843 6.837 12 6.837zm0 8.529c-1.856 0-3.366-1.51-3.366-3.366s1.51-3.366 3.366-3.366 3.366 1.51 3.366 3.366-1.51 3.366-3.366 3.366zm4.65-6.39c-.664 0-1.2.536-1.2 1.2s.536 1.2 1.2 1.2 1.2-.536 1.2-1.2-.536-1.2-1.2-1.2z"})}),BC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M22.46 6c-.77.35-1.6.58-2.46.67.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.22-1.95-.55v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.68 14.37 20.68 8.43c0-.21 0-.42-.01-.63.84-.6 1.56-1.36 2.14-2.23z"})}),UC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19 3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h14zm-11 5H5v11h3V8zm-1.5-2.25a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zM18 8h-2.5c-1.93 0-3.5 1.57-3.5 3.5V19h3v-5.5c0-.825.675-1.5 1.5-1.5s1.5.675 1.5 1.5V19h3v-6.5c0-3.038-2.462-5.5-5.5-5.5z"})}),C5={facebook:LC,instagram:S5,twitter:BC,linkedin:UC},Dm=({logoUrl:t,content:e,onConsultantClick:n,onNavigate:r,currentCustomer:s})=>{const o=a=>{a.preventDefault();const d=document.getElementById("featured-products");d?d.scrollIntoView({behavior:"smooth"}):(r("home"),setTimeout(()=>{var u;(u=document.getElementById("featured-products"))==null||u.scrollIntoView({behavior:"smooth"})},100))};return l.jsx("footer",{className:"bg-[rgb(var(--color-brand-gray))] border-t border-[rgb(var(--color-brand-gold))]/[.30] text-[rgb(var(--color-brand-text-dim))]",children:l.jsxs("div",{className:"container mx-auto px-4 py-12",children:[l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-5 gap-8",children:[l.jsxs("div",{className:"col-span-2 lg:col-span-1",children:[t?l.jsx("img",{src:t,alt:"RS Prlipsi Logo",className:"h-12 max-w-[150px] object-contain"}):l.jsx("h3",{className:"text-2xl font-display text-[rgb(var(--color-brand-gold))]",children:"RS Prlipsi"}),l.jsx("p",{className:"mt-4 text-sm",children:e.description})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-[rgb(var(--color-brand-text-light))] tracking-wider",children:"Para Compradores"}),l.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:e.buyerLinks.map(a=>l.jsx("li",{children:a.label==="Rastrear Pedidos"?l.jsx("button",{onClick:()=>r("orderLookup"),className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):a.label==="Sua Conta"?l.jsx("button",{onClick:()=>r(s?"customerAccount":"customerLogin"),className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):a.url==="#featured-products"?l.jsx("button",{onClick:o,className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):l.jsx("a",{href:a.url,className:"hover:text-[rgb(var(--color-brand-gold))]",children:a.label})},a.label))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-[rgb(var(--color-brand-text-light))] tracking-wider",children:"Para Vendedores"}),l.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:e.sellerLinks.map(a=>l.jsx("li",{children:a.isAction?l.jsx("button",{onClick:n,className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):a.label==="Ferramentas de Marketing"?l.jsx("button",{onClick:()=>r("communication"),className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):a.label==="Seja um Lojista"?l.jsx("button",{onClick:()=>r("sellerRegistration"),className:"text-left hover:text-[rgb(var(--color-brand-gold))] transition-colors",children:a.label}):l.jsx("a",{href:a.url,className:"hover:text-[rgb(var(--color-brand-gold))]",children:a.label})},a.label))})]}),e.companyLinks.length>0&&l.jsxs("div",{children:[l.jsx("h4",{className:"font-bold text-[rgb(var(--color-brand-text-light))] tracking-wider",children:"Empresa"}),l.jsx("ul",{className:"mt-4 space-y-2 text-sm",children:e.companyLinks.map(a=>l.jsx("li",{children:l.jsx("a",{href:a.url,className:"hover:text-[rgb(var(--color-brand-gold))]",children:a.label})},a.label))})]}),l.jsxs("div",{className:"col-span-2 md:col-span-1",children:[l.jsx("h4",{className:"font-bold text-[rgb(var(--color-brand-text-light))] tracking-wider",children:"Siga-nos"}),l.jsx("div",{className:"flex mt-4 space-x-4",children:e.socialLinks.map(a=>{const d=C5[a.platform.toLowerCase()];return d?l.jsx("a",{href:a.url,className:"hover:text-[rgb(var(--color-brand-gold))]",target:"_blank",rel:"noopener noreferrer","aria-label":a.platform,children:l.jsx(d,{className:"h-6 w-6 currentColor"})},a.platform):null})})]})]}),l.jsxs("div",{className:"mt-12 border-t border-[rgb(var(--color-brand-gray-light))] pt-8 text-sm",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 text-center md:text-left",children:l.jsxs("div",{className:"lg:col-span-1",children:[l.jsx("h4",{className:"font-bold text-[rgb(var(--color-brand-text-light))] tracking-wider mb-2",children:"Informaes"}),l.jsx("p",{children:e.businessAddress}),l.jsx("p",{children:e.contactEmail}),l.jsxs("p",{children:["CNPJ: ",e.cnpj]})]})}),l.jsx("div",{className:"mt-8 border-t border-[rgb(var(--color-brand-gray-light))] pt-8 text-center",children:l.jsxs("p",{children:[" ",new Date().getFullYear()," RS Prlipsi. Todos os Direitos Reservados."]})})]})]})})},N5=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M12 2.25c-4.97 0-9 4.03-9 9v1.5c0 .34.03.67.08.99.1.66.27 1.3.52 1.91.24.6.56 1.16.94 1.68.82 1.09 1.88 2.01 3.09 2.76.84.52 1.76.92 2.74 1.19.04.01.08.02.12.03.04.01.08.02.12.03C11.601 21.96 11.79 22 12 22s.399-.04.59-.11c.04-.01.08-.02.12-.03.04-.01.08-.02.12-.03.98-.27 1.9-.67 2.74-1.19 1.21-.75 2.27-1.67 3.09-2.76.38-.52.7-1.08.94-1.68.25-.61.42-1.25.52-1.91.05-.32.08-.65.08-.99v-1.5c0-4.97-4.03-9-9-9zm-1.03 13.28a.75.75 0 001.06 0l4.5-4.5a.75.75 0 10-1.06-1.06L11.25 13.94l-2.72-2.72a.75.75 0 00-1.06 1.06l3.25 3.25z",clipRule:"evenodd"})}),E5=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0011.664 0l3.181-3.183m-4.991-2.696L7.985 9.348m0 0L2.985 4.356m5 4.992L16.023 4.356m0 0L21.015 9.348"})}),T5=({product:t,collections:e,onBack:n,onAddToCart:r,onNavigate:s,reviews:o,onReviewSubmit:a,wishlist:d,onToggleWishlist:u,questions:f,onQuestionSubmit:p,onAnswerSubmit:g})=>{const[x,w]=R.useState(1),[C,E]=R.useState(t.images[0]),[N,k]=R.useState("description"),[_,j]=R.useState(()=>{const ne={};return t.options.forEach(oe=>{ne[oe.name]=oe.values[0]}),ne}),P=R.useMemo(()=>!t.variants||t.variants.length===0?{id:"default",options:{},price:t.price,inventory:t.inventory,sku:t.sku}:t.variants.find(ne=>Object.entries(_).every(([oe,me])=>ne.options[oe]===me)),[_,t]),z=d.includes(t.id),O=(ne,oe)=>{j(me=>({...me,[ne]:oe}))},D=ne=>{w(oe=>Math.max(1,oe+ne))},te=()=>{P?r(t,x,P):alert("Por favor, selecione uma opo vlida.")},G=t.collectionId?e.find(ne=>ne.id===t.collectionId):null,le=P?P.inventory<=0:t.inventory<=0,Ne=f.filter(ne=>ne.productId===t.id);return l.jsx("section",{className:"py-12 sm:py-16 bg-[rgb(var(--color-brand-dark))] text-[rgb(var(--color-brand-text-light))]",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsx("button",{onClick:n,className:"text-sm text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))] mb-6",children:" Voltar aos produtos"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[l.jsxs("div",{children:[l.jsx("div",{className:"aspect-square bg-[rgb(var(--color-brand-gray))]/[.50] rounded-lg overflow-hidden mb-4 border border-[rgb(var(--color-brand-gray-light))]",children:l.jsx("img",{src:C,alt:t.name,className:"w-full h-full object-cover"})}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:t.images.map((ne,oe)=>l.jsx("button",{onClick:()=>E(ne),className:`aspect-square rounded-md overflow-hidden border-2 ${C===ne?"border-[rgb(var(--color-brand-gold))]":"border-transparent hover:border-[rgb(var(--color-brand-gray-light))]"}`,children:l.jsx("img",{src:ne,alt:`${t.name} - thumbnail ${oe+1}`,className:"w-full h-full object-cover"})},oe))})]}),l.jsxs("div",{children:[G&&l.jsx("button",{onClick:()=>s("collectionView",G),className:"text-[rgb(var(--color-brand-gold))] font-semibold mb-1 hover:underline",children:G.title}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-display text-[rgb(var(--color-brand-text-light))]",children:t.name}),l.jsxs("div",{className:"flex items-center mt-3",children:[l.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ne,oe)=>l.jsx(Da,{className:`h-5 w-5 ${oe<Math.round(t.rating)?"text-[rgb(var(--color-brand-gold))]":"text-[rgb(var(--color-brand-gray-light))]"}`},oe))}),l.jsxs("span",{className:"text-[rgb(var(--color-brand-text-dim))] text-sm ml-2",children:["(",t.reviewCount," avaliaes)"]})]}),l.jsx("p",{className:"text-3xl md:text-4xl font-light text-[rgb(var(--color-brand-gold))] my-4",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.currency}).format((P==null?void 0:P.price)||t.price)}),l.jsx("div",{className:"prose prose-invert max-w-none text-[rgb(var(--color-brand-text-dim))] mb-6",children:l.jsx("p",{children:t.shortDescription})}),t.options&&t.options.length>0&&l.jsx("div",{className:"space-y-4 mb-6",children:t.options.map(ne=>l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))] mb-2",children:ne.name}),l.jsx("div",{className:"flex flex-wrap gap-2",children:ne.values.map(oe=>l.jsx("button",{onClick:()=>O(ne.name,oe),className:`px-4 py-2 text-sm rounded-full border-2 transition-colors ${_[ne.name]===oe?"bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] border-[rgb(var(--color-brand-gold))]":"bg-[rgb(var(--color-brand-dark))] border-[rgb(var(--color-brand-gray-light))] hover:border-[rgb(var(--color-brand-gray))]"}`,children:oe},oe))})]},ne.id))}),l.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center border border-[rgb(var(--color-brand-gray-light))] rounded-full",children:[l.jsx("button",{onClick:()=>D(-1),className:"px-4 py-2 text-xl text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-l-full",children:"-"}),l.jsx("span",{className:"px-4 text-lg font-semibold",children:x}),l.jsx("button",{onClick:()=>D(1),className:"px-4 py-2 text-xl text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-r-full",children:"+"})]}),l.jsx("button",{onClick:te,disabled:le,className:"flex-grow bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] font-bold py-3 px-8 rounded-full text-lg hover:bg-[rgb(var(--color-success))] transition-transform transform hover:scale-105 disabled:bg-[rgb(var(--color-brand-gray-light))] disabled:cursor-not-allowed",children:le?"Esgotado":"Adicionar ao Carrinho"}),l.jsx("button",{onClick:()=>u(t.id),className:"p-3 border border-[rgb(var(--color-brand-gray-light))] rounded-full text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))]","aria-label":"Adicionar  lista de desejos",children:l.jsx(k0,{className:`w-6 h-6 transition-all ${z?"text-[rgb(var(--color-brand-gold))] fill-current":""}`})})]}),l.jsxs("div",{className:"mt-6 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-3 text-sm text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx(N5,{className:"w-6 h-6 text-[rgb(var(--color-success))]"}),l.jsxs("span",{children:["Compra ",l.jsx("strong",{children:"100% segura"})," e verificada."]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-sm text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx(E5,{className:"w-6 h-6 text-[rgb(var(--color-info))]"}),l.jsxs("span",{children:["Garantia de devoluo de ",l.jsx("strong",{children:"7 dias"}),"."]})]})]})]})]}),l.jsxs("div",{className:"mt-16 border-t border-[rgb(var(--color-brand-gray-light))] pt-12",children:[l.jsx("div",{className:"border-b border-[rgb(var(--color-brand-gray-light))] mb-8",children:l.jsxs("nav",{className:"-mb-px flex space-x-8","aria-label":"Tabs",children:[l.jsx("button",{onClick:()=>k("description"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${N==="description"?"border-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-gold))]":"border-transparent text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))]"}`,children:"Descrio"}),l.jsxs("button",{onClick:()=>k("reviews"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${N==="reviews"?"border-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-gold))]":"border-transparent text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))]"}`,children:["Avaliaes (",t.reviewCount,")"]}),l.jsxs("button",{onClick:()=>k("qa"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm ${N==="qa"?"border-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-gold))]":"border-transparent text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))]"}`,children:["Perguntas (",Ne.length,")"]})]})}),l.jsxs("div",{children:[N==="description"&&l.jsx("div",{className:"prose prose-invert max-w-none text-[rgb(var(--color-brand-text-dim))]",dangerouslySetInnerHTML:{__html:t.description}}),N==="reviews"&&l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex items-center",children:[...Array(5)].map((ne,oe)=>l.jsx(Da,{className:`w-5 h-5 ${oe<Math.round(t.rating)?"text-[rgb(var(--color-brand-gold))]":"text-gray-600"}`,filled:oe<Math.round(t.rating)},oe))}),l.jsx("span",{className:"text-2xl font-bold",children:t.rating.toFixed(1)}),l.jsxs("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:["(",t.reviewCount," avaliaes)"]})]}),o.length===0?l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Seja o primeiro a avaliar este produto!"}):l.jsx("div",{className:"space-y-4",children:o.map(ne=>l.jsxs("div",{className:"border-b border-[rgb(var(--color-brand-gray-light))] pb-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("div",{className:"flex",children:[...Array(5)].map((oe,me)=>l.jsx(Da,{className:`w-4 h-4 ${me<ne.rating?"text-[rgb(var(--color-brand-gold))]":"text-gray-600"}`,filled:me<ne.rating},me))}),l.jsx("span",{className:"font-semibold",children:ne.author}),l.jsx("span",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:new Date(ne.createdAt).toLocaleDateString()})]}),ne.title&&l.jsx("h4",{className:"font-bold mb-1",children:ne.title}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:ne.text})]},ne.id))})]}),N==="qa"&&l.jsx("div",{className:"space-y-6",children:f.length===0?l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Nenhuma pergunta ainda. Seja o primeiro a perguntar!"}):l.jsx("div",{className:"space-y-4",children:f.map(ne=>l.jsxs("div",{className:"border-b border-[rgb(var(--color-brand-gray-light))] pb-4",children:[l.jsxs("p",{className:"font-semibold mb-2",children:["P: ",ne.text]}),l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] mb-2",children:["Por ",ne.author," em ",new Date(ne.createdAt).toLocaleDateString()]}),ne.answers&&ne.answers.length>0&&l.jsx("div",{className:"ml-6 mt-3 space-y-2",children:ne.answers.map(oe=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))]/30 p-3 rounded",children:[l.jsxs("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:["R: ",oe.text]}),l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:["Por ",oe.author," em ",new Date(oe.createdAt).toLocaleDateString()]})]},oe.id))})]},ne.id))})})]})]})]})})},Mo=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.432 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),qa=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 001.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.45 10.45 0 0112 4.5c4.756 0 8.773 3.162 10.065 7.498a10.523 10.523 0 01-4.293 5.774M6.228 6.228L3 3m3.228 3.228l3.65 3.65m7.894 7.894L21 21m-3.228-3.228l-3.65-3.65m0 0a3 3 0 10-4.243-4.243m4.243 4.243l-4.243-4.243"})}),k1=({onLoginSuccess:t,onBackToHome:e})=>{const[n,r]=R.useState("rsprolipsioficial@gmail.com"),[s,o]=R.useState("Yannis784512@"),[a,d]=R.useState(""),[u,f]=R.useState(!1),p=g=>{if(g.preventDefault(),d(""),n==="rsprolipsioficial@gmail.com"&&s==="Yannis784512@"){const x={id:"admin-001",name:"RS Prlipsi",email:"rsprolipsioficial@gmail.com"};localStorage.setItem("currentCustomer",JSON.stringify(x)),t()}else d("E-mail ou senha invlidos.")};return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-[rgb(var(--color-brand-dark))] py-12",children:l.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gold))]/[.30] rounded-lg shadow-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center font-display text-[rgb(var(--color-brand-gold))]",children:"Acesso Restrito"}),l.jsx("p",{className:"mt-2 text-center text-[rgb(var(--color-brand-text-dim))]",children:"Faa login para acessar os painis de gerenciamento."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"E-mail"}),l.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:g=>r(g.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-[rgb(var(--color-brand-gray-light))] bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] rounded-md focus:outline-none focus:ring-[rgb(var(--color-brand-gold))] focus:border-[rgb(var(--color-brand-gold))] sm:text-sm",placeholder:"E-mail"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),l.jsx("input",{id:"password",name:"password",type:u?"text":"password",autoComplete:"current-password",required:!0,value:s,onChange:g=>o(g.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-[rgb(var(--color-brand-gray-light))] bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] rounded-md focus:outline-none focus:ring-[rgb(var(--color-brand-gold))] focus:border-[rgb(var(--color-brand-gold))] sm:text-sm pr-10",placeholder:"Senha"}),l.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute inset-y-0 right-0 px-3 flex items-center text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]","aria-label":u?"Esconder senha":"Mostrar senha",children:u?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]})]}),a&&l.jsx("p",{className:"text-[rgb(var(--color-error))] text-sm text-center !mt-4",children:a}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-md text-[rgb(var(--color-brand-dark))] bg-[rgb(var(--color-brand-gold))] hover:bg-[rgb(var(--color-warning))] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[rgb(var(--color-brand-dark))] focus:ring-[rgb(var(--color-brand-gold))] transition-colors mt-6",children:"Entrar"})})]}),l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:e,className:"font-medium text-sm text-[rgb(var(--color-brand-gold))] hover:text-[rgb(var(--color-warning))]",children:"Voltar para a loja"})})]})})},Mi=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),k5=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"})}),zC=({banners:t,className:e})=>{const[n,r]=R.useState(0),s=()=>{const d=n===0?t.length-1:n-1;r(d)},o=R.useCallback(()=>{if(t.length===0)return;const d=n===t.length-1?0:n+1;r(d)},[n,t]);return R.useEffect(()=>{if(t.length>1){const a=setInterval(o,5e3);return()=>clearInterval(a)}},[t,o]),!t||t.length===0?null:l.jsxs("section",{className:`relative w-full overflow-hidden bg-gray-900 group ${e||"h-[300px] md:h-[400px]"}`,children:[l.jsx("div",{className:"w-full h-full flex transition-transform duration-700 ease-in-out",style:{transform:`translateX(-${n*100}%)`},children:t.map(a=>l.jsx("a",{href:a.link,className:"w-full h-full flex-shrink-0","aria-label":`Banner ${a.id}`,children:l.jsxs("picture",{className:"w-full h-full",children:[l.jsx("source",{media:"(min-width: 768px)",srcSet:a.desktopImage}),l.jsx("img",{src:a.mobileImage,alt:`Banner ${a.id}`,className:"w-full h-full object-cover"})]})},a.id))}),t.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:s,className:"absolute top-1/2 left-4 -translate-y-1/2 z-10 p-2 bg-black/40 text-white rounded-full hover:bg-black/70 transition-opacity opacity-0 group-hover:opacity-100","aria-label":"Slide anterior",children:l.jsx(Mi,{className:"w-6 h-6"})}),l.jsx("button",{onClick:o,className:"absolute top-1/2 right-4 -translate-y-1/2 z-10 p-2 bg-black/40 text-white rounded-full hover:bg-black/70 transition-opacity opacity-0 group-hover:opacity-100","aria-label":"Prximo slide",children:l.jsx(k5,{className:"w-6 h-6"})}),l.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-10 flex space-x-2",children:t.map((a,d)=>l.jsx("button",{onClick:()=>r(d),className:`w-3 h-3 rounded-full transition-colors ${n===d?"bg-yellow-500":"bg-gray-400/50 hover:bg-gray-200/80"}`,"aria-label":`Ir para o slide ${d+1}`},d))})]})]})},Ha=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})}),Va=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a2.25 2.25 0 01-2.25 2.25h-1.5a2.25 2.25 0 01-2.25-2.25v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75l3 3m0 0l3-3m-3 3v-7.5"})]}),qC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-4.663M12 3.375c-1.109 0-2.168.25-3.126.688a4.5 4.5 0 00-6.136 5.862c.39.856.86 1.66 1.417 2.416a9.337 9.337 0 00.728 1.106c.638.92 1.446 1.73 2.378 2.422a9.337 9.337 0 001.082.728c.16.09.322.178.487.264l.002.001c.164.086.33.17.498.252a9.35 9.35 0 002.16-.952 4.125 4.125 0 00.158-6.422l-.001-.001a4.125 4.125 0 00-3.23-1.622z"})}),A0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 013.375-3.375h9.75a3.375 3.375 0 013.375 3.375v1.875m-17.25 4.5h15M5.25 6H9m0 0a2.25 2.25 0 012.25 2.25v.75"})}),Wh=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.125-.504 1.125-1.125V14.25m-17.25 4.5v-1.875a3.375 3.375 0 013.375-3.375h9.75a3.375 3.375 0 013.375 3.375v1.875m-17.25 4.5h15M5.25 6H9m0 0a2.25 2.25 0 012.25 2.25v.75",strokeLinecap:"round",strokeLinejoin:"round"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12H9m12 0h-2.25"})]}),HC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418"})}),VC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.321l5.584.41a.563.563 0 01.31.95l-4.236 3.823a.563.563 0 00-.182.51l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 21.03a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.51l-4.236-3.823a.563.563 0 01.31-.95l5.584-.41a.563.563 0 00.475-.321L11.48 3.5z"})}),_0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9a9.75 9.75 0 011.316-5.322A4.5 4.5 0 0112 9.75a4.5 4.5 0 015.184 3.678 9.75 9.75 0 011.316 5.322zM21 15.75a9.75 9.75 0 00-3.375-7.234 4.502 4.502 0 00-1.096-1.096A9.75 9.75 0 0012 3c-1.605 0-3.113.42-4.418 1.157a4.502 4.502 0 00-1.096 1.096A9.75 9.75 0 003 15.75m18 0v2.25c0 .621-.504 1.125-1.125 1.125H4.125A1.125 1.125 0 013 18v-2.25m18 0A12.03 12.03 0 0012 9.75c-2.493 0-4.815.73-6.75 2.006"})}),j0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 18v-6m18 0V9M3 12V9m18 3a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 12m18 0a2.25 2.25 0 01-2.25 2.25H5.25A2.25 2.25 0 013 12m15-3H6a2.25 2.25 0 00-2.25 2.25v.75"})}),M0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})}),FC=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),$C=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10 20h4V4h-4v16zm-6 0h4v-8H4v8zM16 9v11h4V9h-4z"})}),R0=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),Cs=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 100 15 7.5 7.5 0 000-15z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 10.5h.008v.008h-.008V10.5z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a8.966 8.966 0 01-5.982-2.275M12 3a8.966 8.966 0 015.982 2.275"})]}),Yh=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),I0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 005.454-1.31A8.967 8.967 0 0118 9.75v-.7V9A6 6 0 006 9v.75a8.967 8.967 0 01-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 01-5.714 0m5.714 0a3 3 0 11-5.714 0"})}),GC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z"})}),JC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zM4 19.235v-.11a6.375 6.375 0 0112.75 0v.109A12.318 12.318 0 0110.374 21c-2.331 0-4.512-.645-6.374-1.766z"})}),KC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),Mc={AffiliateIcon:qC,DistributionIcon:A0,TruckIcon:Wh,GlobalIcon:HC,StarOutlineIcon:VC,TrophyIcon:_0,WalletIcon:j0,OrdersIcon:M0,ProductsIcon:FC,AnalyticsIcon:$C,TagIcon:R0,MegaphoneIcon:Cs,LinkChainIcon:Yh,UserIcon:Ts,BellIcon:I0,ShoppingBagIcon:GC,UserPlusIcon:JC,ShoppingCartIcon:Kh},A5={consultantStore:"Painel do Consultor",manageProducts:"Produtos",addEditProduct:"Adicionar/Editar Produto",editDropshippingProduct:"Editar Produto Dropshipping",manageInventory:"Gerenciar Estoque",manageOrders:"Pedidos",orderDetail:"Detalhes do Pedido",manageReturns:"Gerenciar Devolues",returnDetail:"Detalhes da Devoluo",manageDropshippingOrders:"Pedidos Dropshipping",managePromotions:"Cupons de Desconto",addEditCoupon:"Adicionar/Editar Cupom",addEditMarketingPixel:"Adicionar/Editar Pixel",storeEditor:"Aparncia da Loja",virtualOfficeDropshipping:"Produtos Dropshipping",virtualOfficeAffiliateLinks:"Links de Afiliado",virtualOfficePixels:"Pixels de Marketing",virtualOfficeLinkShortener:"Encurtador de Link",bannerDashboard:"Banners do Painel",dashboardEditor:"Editor do Painel",storeBannerEditor:"Banners da Loja",managePayments:"Configuraes de Pagamento",manageShipping:"Configuraes de Frete",compensationPlan:"Plano de Compensao",manageCollections:"Colees",addEditCollection:"Adicionar/Editar Coleo",dropshippingCatalog:"Catlogo Dropshipping",manageAffiliates:"Programa de Afiliados",walletOverview:"WalletPay - Viso Geral",walletReports:"WalletPay - Extrato e Relatrios",walletTransfers:"WalletPay - Transferncias",walletCharges:"WalletPay - Cobranas",walletSettings:"WalletPay - Configuraes",userProfileEditor:"Meu Perfil",manageAnnouncements:"Gerenciar Comunicados",addEditAnnouncement:"Adicionar/Editar Comunicado",manageTrainings:"Gerenciar Treinamentos",addEditTraining:"Adicionar/Editar Treinamento",manageMarketingAssets:"Gerenciar Materiais de Marketing",addEditMarketingAsset:"Adicionar/Editar Material de Marketing"},_5=({profile:t,visibleFields:e})=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4",children:[l.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[l.jsx("img",{src:t.avatarUrl,alt:t.name,className:"w-16 h-16 rounded-full"}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-lg text-[rgb(var(--color-brand-text-light))]",children:t.name}),(e==null?void 0:e.id)&&l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:["ID: ",t.id]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(e==null?void 0:e.graduation)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Graduao:"})}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-[rgb(var(--color-brand-gold))]",children:t.graduation})})]}),(e==null?void 0:e.accountStatus)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Status da Conta:"})}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-[rgb(var(--color-info))]",children:t.accountStatus})})]}),(e==null?void 0:e.monthlyActivity)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Atividade Mensal:"})}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-[rgb(var(--color-info))]",children:t.monthlyActivity})})]}),(e==null?void 0:e.category)&&l.jsxs(l.Fragment,{children:[l.jsx("div",{children:l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Categoria:"})}),l.jsx("div",{children:l.jsx("span",{className:"font-bold text-[rgb(var(--color-brand-gold))]",children:t.category})})]})]})]}),j5=({referral:t,affiliate:e})=>{const[n,r]=vn.useState(null),s=o=>{navigator.clipboard.writeText(o==="referral"?t:e),r(o),setTimeout(()=>r(null),2e3)};return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Link de Indicao"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",readOnly:!0,value:t,className:"w-full bg-[rgb(var(--color-brand-gray))]/[.50] text-[rgb(var(--color-brand-text-dim))] text-sm rounded-md px-2 py-1 border border-[rgb(var(--color-brand-gray-light))]"}),l.jsx("button",{onClick:()=>s("referral"),className:"p-2 bg-[rgb(var(--color-brand-gray))] rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:n==="referral"?l.jsx(Va,{className:"w-5 h-5 text-[rgb(var(--color-success))]"}):l.jsx(Ha,{className:"w-5 h-5"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Link de Afiliado"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",readOnly:!0,value:e,className:"w-full bg-[rgb(var(--color-brand-gray))]/[.50] text-[rgb(var(--color-brand-text-dim))] text-sm rounded-md px-2 py-1 border border-[rgb(var(--color-brand-gray-light))]"}),l.jsx("button",{onClick:()=>s("affiliate"),className:"p-2 bg-[rgb(var(--color-brand-gray))] rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:n==="affiliate"?l.jsx(Va,{className:"w-5 h-5 text-[rgb(var(--color-success))]"}):l.jsx(Ha,{className:"w-5 h-5"})})]})]})]})},M5=({component:t,tiers:e})=>{const{title:n,value:r=0,max:s=100}=t,o=s>0?r/s*100:0,a=Math.min(o,100),d=e.find(g=>g.name===t.startLabel),u=e.find(g=>g.name===t.endLabel),f=t.startIcon?Mc[t.startIcon]:null,p=t.endIcon?Mc[t.endIcon]:null;return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h4",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:n}),l.jsxs("span",{className:"font-bold text-[rgb(var(--color-brand-gold))] text-sm",children:[o.toFixed(0),"%"]})]}),l.jsx("div",{className:"relative h-4 bg-[rgb(var(--color-brand-gray))] rounded-full overflow-hidden",children:l.jsx("div",{className:"absolute h-4 bg-[rgb(var(--color-brand-gold))] rounded-full",style:{width:`${a}%`}})}),l.jsxs("div",{className:"flex justify-between items-center mt-1 text-[rgb(var(--color-brand-gold))]",children:[d!=null&&d.pinImageUrl?l.jsx("img",{src:d.pinImageUrl,alt:d==null?void 0:d.name,className:"w-8 h-8 object-contain",title:t.startLabel}):f?l.jsx(f,{className:"w-6 h-6",title:t.startLabel}):l.jsx("div",{className:"w-8 h-8"}),u!=null&&u.pinImageUrl?l.jsx("img",{src:u.pinImageUrl,alt:u==null?void 0:u.name,className:"w-8 h-8 object-contain",title:t.endLabel}):p?l.jsx(p,{className:"w-6 h-6",title:t.endLabel}):l.jsx("div",{className:"w-8 h-8"})]})]})},R5=({card:t,value:e})=>{const n=Mc[t.icon];return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4 flex items-center gap-3",children:[n&&l.jsx("div",{className:"p-2 bg-[rgb(var(--color-brand-gold))]/[.10] rounded-full",children:l.jsx(n,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase",children:t.title}),l.jsx("p",{className:"text-xl font-bold text-[rgb(var(--color-brand-text-light))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)})]})]})},I5=({component:t})=>{var e;return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))]",children:t.title}),(e=t.content)==null?void 0:e.map((n,r)=>l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:n.title}),l.jsxs("span",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:[n.progress,"%"]})]}),l.jsx("div",{className:"relative h-4 bg-[rgb(var(--color-brand-gray))] rounded-full overflow-hidden",children:l.jsx("div",{className:"absolute h-4 bg-[rgb(var(--color-brand-gold))] rounded-full",style:{width:`${n.progress}%`}})})]},r))]})},D5=({title:t,items:e})=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4",children:t||"Atividade da Rede"}),l.jsx("ul",{className:"space-y-4",children:e.map(n=>{const r=Mc[n.icon];return l.jsxs("li",{className:"flex items-start gap-3 border-l border-[rgb(var(--color-brand-gold))] pl-3 border-b border-[rgb(var(--color-brand-gray-light))] pb-4 last:border-b-0",children:[l.jsx("div",{className:"p-1.5 bg-[rgb(var(--color-brand-gray))] rounded-full mt-1",children:r&&l.jsx(r,{className:"w-5 h-5 text-[rgb(var(--color-brand-gold))]"})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",dangerouslySetInnerHTML:{__html:n.text}}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:n.timestamp})]})]},n.id)})})]}),P5=({component:t,onNavigate:e})=>{const n=t.icon?Mc[t.icon]:Yh,r=Object.keys(A5).includes(t.url||""),s=o=>{r&&t.url&&(o.preventDefault(),e(t.url))};return l.jsxs("a",{href:r?"#":t.url||"#",onClick:s,className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4 flex items-center gap-4 hover:bg-[rgb(var(--color-brand-gray))]/[.50] transition-colors",children:[l.jsx("div",{className:"p-2 bg-[rgb(var(--color-brand-gold))]/[.10] rounded-full",children:l.jsx(n,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})}),l.jsx("h4",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:t.title})]})},O5=({title:t,data:e})=>{const[n,r]=R.useState(null),s=R.useRef(null),o=150,a=400,d=40,u=20,f=Math.ceil(Math.max(...e.map(x=>x.bonus),0)/100)*100||100,p=(x,w,C)=>{if(!s.current)return;const E=s.current.getBoundingClientRect();r({x:x.clientX-E.left,y:x.clientY-E.top-10,content:`${w}: R$ ${C.toFixed(2)}`})},g=[0,f/2,f].map(x=>({value:x,y:o-o*(x/f)}));return l.jsxs("div",{ref:s,className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 relative",children:[l.jsx("style",{children:`
                @keyframes grow-bar { from { transform: scaleY(0); } to { transform: scaleY(1); } }
                .bar-rect { transform-origin: bottom; animation: grow-bar 0.5s ease-out forwards; transition: filter 0.2s ease-in-out; }
                .bar-rect:hover { filter: brightness(1.2); }
            `}),l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4 flex items-center gap-2",children:[l.jsx(KC,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"}),t]}),l.jsxs("div",{className:"relative h-[180px]",children:[l.jsxs("svg",{viewBox:`0 0 ${a} ${o+u}`,width:"100%",height:"100%",children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"0%",stopColor:"rgb(var(--color-brand-gold))"}),l.jsx("stop",{offset:"100%",stopColor:"rgb(var(--color-warning))"})]})}),g.map(({value:x,y:w})=>l.jsxs("g",{children:[l.jsx("text",{x:d-8,y:w+4,textAnchor:"end",fill:"rgb(var(--color-brand-text-dim))",fontSize:"10",children:x}),l.jsx("line",{x1:d,x2:a,y1:w,y2:w,stroke:"rgb(var(--color-brand-gray-light))",strokeWidth:"0.5",strokeDasharray:"2,2"})]},x)),l.jsx("g",{transform:`translate(${d}, 0)`,children:e.map((x,w)=>{const C=(a-d)/e.length,E=C*.5,N=f>0?x.bonus/f*o:0,k=w*C+(C-E)/2;return l.jsxs("g",{children:[l.jsx("rect",{className:"bar-rect",x:k,y:o-N,width:E,height:N,fill:"url(#barGradient)",rx:"2",onMouseMove:_=>p(_,x.day,x.bonus),onMouseOut:()=>r(null),style:{animationDelay:`${w*70}ms`}}),l.jsx("text",{x:k+E/2,y:o+15,textAnchor:"middle",fill:"rgb(var(--color-brand-text-dim))",fontSize:"12",children:x.day})]},w)})})]}),n&&l.jsx("div",{className:"absolute bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] text-xs rounded-md py-1 px-2 pointer-events-none transform -translate-x-1/2 -translate-y-full shadow-lg",style:{left:n.x,top:n.y},children:n.content})]})]})},Pm=(t,e)=>{switch(t.type){case"userInfo":return l.jsx(_5,{profile:e.userProfile,visibleFields:t.visibleFields});case"referralLinks":return l.jsx(j5,{referral:e.userProfile.referralLink,affiliate:e.userProfile.affiliateLink});case"qualificationProgress":return l.jsx(M5,{component:t,tiers:e.compensationSettings.tiers});case"adminBanner":return l.jsx(zC,{banners:e.banners,className:"h-full rounded-lg overflow-hidden"});case"bonusCards":return l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.settings.cards.map(n=>{const r=e.bonuses[n.dataKey]||0;return l.jsx(R5,{card:n,value:r},n.id)})});case"incentivesProgram":return l.jsx(I5,{component:t});case"networkActivity":return l.jsx(D5,{title:t.title,items:e.networkActivity});case"shortcut":return l.jsx(P5,{component:t,onNavigate:e.onNavigate});case"performanceChart":return l.jsx(O5,{title:t.title,data:e.weeklyBonuses});default:return null}},A1=(t,e)=>{var g;if(!e||e.length===0)return{currentTier:null,nextTier:null,value:0,max:100,startLabel:"N/A",endLabel:"N/A"};const n=[...e].sort((x,w)=>x.pointsRequired-w.pointsRequired),r=n.slice().reverse().find(x=>t>=x.pointsRequired),s=r?n.findIndex(x=>x.id===r.id):-1,o=s>-1?n[s+1]:n[0],a=s>0?n[s-1].pointsRequired:0,d=r?r.name:"Iniciante",u=o?o.name:r?r.name:"N/A",f=o?o.pointsRequired-a:r?r.pointsRequired-a:((g=n[0])==null?void 0:g.pointsRequired)||100;return{value:t-a,max:f,startLabel:d,endLabel:u}},_1=t=>{const{settings:e,userPoints:n,monthlyUserPoints:r,compensationSettings:s}=t,o=R.useMemo(()=>{const p=JSON.parse(JSON.stringify(e)),g=A1(n,s.tiers),x=A1(r,s.tiers);return p.components=p.components.map(w=>{if(w.type==="qualificationProgress"){if(w.id==="comp-qual-current"||w.id==="comp-qual-next")return{...w,...g};if(w.id==="comp-qual-month")return{...w,...x}}return w}),p},[e,n,r,s]),a=o.components.find(p=>p.type==="adminBanner"&&p.enabled),d=o.components.filter(p=>p.column==="left"&&p.enabled),u=o.components.filter(p=>p.column==="right"&&p.enabled&&p.type!=="adminBanner"),f={...t,settings:o};return l.jsxs("div",{className:"space-y-6",children:[a&&l.jsx("div",{className:"h-[250px]",children:Pm(a,f)},a.id),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsx("div",{className:"lg:col-span-1 space-y-6",children:d.map(p=>l.jsx("div",{children:Pm(p,f)},p.id))}),l.jsx("div",{className:"lg:col-span-2 space-y-6",children:u.map(p=>l.jsx("div",{children:Pm(p,f)},p.id))})]})]})},cn=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.067-2.09 1.02-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Xh=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),j1=({products:t,onNavigate:e,onProductDelete:n})=>{const[r,s]=R.useState(""),[o,a]=R.useState([]),d=R.useMemo(()=>t.filter(p=>p.name.toLowerCase().includes(r.toLowerCase())||p.sku&&p.sku.toLowerCase().includes(r.toLowerCase())),[t,r]),u=p=>{p.target.checked?a(d.map(g=>g.id)):a([])},f=p=>{a(g=>g.includes(p)?g.filter(x=>x!==p):[...g,p])};return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))] flex justify-end",children:[" ",l.jsxs("div",{className:"relative max-w-lg flex-grow",children:[" ",l.jsx("input",{type:"text",placeholder:"Buscar produtos por nome ou SKU",value:r,onChange:p=>s(p.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 pl-10 pr-4 text-[rgb(var(--color-brand-text-light))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]}),l.jsx("button",{onClick:()=>e("addEditProduct"),className:"ml-4 text-sm font-bold bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-success))] transition-colors whitespace-nowrap",children:"+ Adicionar Produto"})]}),o.length>0&&l.jsx("div",{className:"p-4 bg-[rgb(var(--color-brand-gray))]/[.50]",children:l.jsxs("button",{onClick:()=>n(o),className:"flex items-center gap-2 text-sm text-[rgb(var(--color-error))] hover:text-[rgb(var(--color-error))]/[.80]",children:[l.jsx(cn,{className:"w-5 h-5"}),"Excluir ",o.length," produto(s)"]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"p-4",children:l.jsx("input",{type:"checkbox",onChange:u,checked:o.length>0&&o.length===d.length})}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Produto"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Estoque"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Preo"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Aes"})]})}),l.jsx("tbody",{children:d.map(p=>l.jsxs("tr",{className:"border-b border-[rgb(var(--color-brand-gray-light))] hover:bg-[rgb(var(--color-brand-gray))]/[.50]",children:[l.jsx("td",{className:"w-4 p-4",children:l.jsx("input",{type:"checkbox",checked:o.includes(p.id),onChange:()=>f(p.id)})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:p.images[0],alt:p.name,className:"w-10 h-10 object-cover rounded"}),l.jsx("button",{onClick:()=>e("addEditProduct",p),className:"font-medium text-[rgb(var(--color-brand-text-light))] hover:text-[rgb(var(--color-brand-gold))]",children:p.name})]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${p.status==="Ativo"?"bg-[rgb(var(--color-success))]/[.20] text-[rgb(var(--color-success))]":"bg-[rgb(var(--color-brand-gray-light))]/[.20] text-[rgb(var(--color-brand-text-dim))]"}`,children:p.status})}),l.jsx("td",{className:"px-6 py-4",children:p.inventory}),l.jsx("td",{className:"px-6 py-4",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:p.currency}).format(p.price)}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("button",{onClick:()=>e("addEditProduct",p),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]",children:l.jsx(Xh,{className:"w-5 h-5"})})})]},p.id))})]})})]})},WC=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),Dn=({currentImage:t,onImageUpload:e,placeholderText:n,aspectRatio:r="video"})=>{const[s,o]=R.useState(!1),a=R.useRef(null),d=r==="square"?"aspect-square":"aspect-video",u=w=>{if(w&&w[0]){const C=URL.createObjectURL(w[0]);e(C)}},f=w=>{w.preventDefault(),o(!0)},p=w=>{w.preventDefault(),o(!1)},g=w=>{w.preventDefault(),o(!1),w.dataTransfer.files&&w.dataTransfer.files.length>0&&(u(w.dataTransfer.files),w.dataTransfer.clearData())},x=()=>{t.startsWith("blob:")&&URL.revokeObjectURL(t),e("")};return t?l.jsxs("div",{className:`relative group ${d}`,children:[l.jsx("img",{src:t,alt:"Preview",className:"w-full h-full object-cover rounded-md"}),l.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:l.jsx("button",{type:"button",onClick:x,className:"bg-red-600 text-white rounded-full p-2",children:l.jsx(Qa,{className:"w-5 h-5"})})})]}):l.jsxs("div",{onDragOver:f,onDragLeave:p,onDrop:g,onClick:()=>{var w;return(w=a.current)==null?void 0:w.click()},className:`border-2 border-dashed border-gray-700 rounded-lg p-6 text-center cursor-pointer transition-colors flex flex-col items-center justify-center ${d} ${s?"border-yellow-500 bg-gray-800/50":"hover:border-gray-600"}`,children:[l.jsx("input",{type:"file",ref:a,onChange:w=>u(w.target.files),accept:"image/*",className:"hidden"}),l.jsx(WC,{className:"w-8 h-8 text-gray-500 mb-2"}),l.jsx("p",{className:"text-gray-400 text-sm",children:n})]})};var L5=PC();const B5=Gc(L5);var Om={exports:{}},Lm={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var M1;function U5(){if(M1)return Lm;M1=1;var t=Jc();function e(g,x){return g===x&&(g!==0||1/g===1/x)||g!==g&&x!==x}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,s=t.useEffect,o=t.useLayoutEffect,a=t.useDebugValue;function d(g,x){var w=x(),C=r({inst:{value:w,getSnapshot:x}}),E=C[0].inst,N=C[1];return o(function(){E.value=w,E.getSnapshot=x,u(E)&&N({inst:E})},[g,w,x]),s(function(){return u(E)&&N({inst:E}),g(function(){u(E)&&N({inst:E})})},[g]),a(w),w}function u(g){var x=g.getSnapshot;g=g.value;try{var w=x();return!n(g,w)}catch{return!0}}function f(g,x){return x()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:d;return Lm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,Lm}var R1;function YC(){return R1||(R1=1,Om.exports=U5()),Om.exports}var XC=YC();function on(t){this.content=t}on.prototype={constructor:on,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),o=r.content.slice();return s==-1?o.push(n||t,e):(o[s+1]=e,n&&(o[s]=n)),new on(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new on(n)},addToStart:function(t,e){return new on([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new on(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),o=r.find(t);return s.splice(o==-1?s.length:o,0,e,n),new on(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=on.from(t),t.size?new on(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=on.from(t),t.size?new on(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=on.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};on.from=function(t){if(t instanceof on)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new on(e)};function QC(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let a=0;s.text[a]==o.text[a];a++)n++;return n}if(s.content.size||o.content.size){let a=QC(s.content,o.content,n+1);if(a!=null)return a}n+=s.nodeSize}}function ZC(t,e,n,r){for(let s=t.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let a=t.child(--s),d=e.child(--o),u=a.nodeSize;if(a==d){n-=u,r-=u;continue}if(!a.sameMarkup(d))return{a:n,b:r};if(a.isText&&a.text!=d.text){let f=0,p=Math.min(a.text.length,d.text.length);for(;f<p&&a.text[a.text.length-f-1]==d.text[d.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(a.content.size||d.content.size){let f=ZC(a.content,d.content,n-1,r-1);if(f)return f}n-=u,r-=u}}class se{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,o){for(let a=0,d=0;d<n;a++){let u=this.content[a],f=d+u.nodeSize;if(f>e&&r(u,s+d,o||null,a)!==!1&&u.content.size){let p=d+1;u.nodesBetween(Math.max(0,e-p),Math.min(u.content.size,n-p),r,s+p)}d=f}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let o="",a=!0;return this.nodesBetween(e,n,(d,u)=>{let f=d.isText?d.text.slice(Math.max(e,u)-u,n-u):d.isLeaf?s?typeof s=="function"?s(d):s:d.type.spec.leafText?d.type.spec.leafText(d):"":"";d.isBlock&&(d.isLeaf&&f||d.isTextblock)&&r&&(a?a=!1:o+=r),o+=f},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new se(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let o=0,a=0;a<n;o++){let d=this.content[o],u=a+d.nodeSize;u>e&&((a<e||u>n)&&(d.isText?d=d.cut(Math.max(0,e-a),Math.min(d.text.length,n-a)):d=d.cut(Math.max(0,e-a-1),Math.min(d.content.size,n-a-1))),r.push(d),s+=d.nodeSize),a=u}return new se(r,s)}cutByIndex(e,n){return e==n?se.empty:e==0&&n==this.content.length?this:new se(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new se(s,o)}addToStart(e){return new se([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new se(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return QC(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return ZC(this,e,n,r)}findIndex(e){if(e==0)return yu(0,e);if(e==this.size)return yu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=e)return o==e?yu(n+1,o):yu(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return se.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new se(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return se.empty;let n,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(n||(n=e.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new se(n||e,r)}static from(e){if(!e)return se.empty;if(e instanceof se)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new se([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}se.empty=new se([],0);const Bm={index:0,offset:0};function yu(t,e){return Bm.index=t,Bm.offset=e,Bm}function Wu(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Wu(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Wu(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let lt=class Ag{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Wu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Ag.none;if(e instanceof Ag)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};lt.none=[];class Yu extends Error{}class ue{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=tN(this.content,e+this.openStart,n);return r&&new ue(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ue(eN(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ue.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ue(se.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new ue(e,r,s)}}ue.empty=new ue(se.empty,0,0);function eN(t,e,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r),{index:a,offset:d}=t.findIndex(n);if(s==e||o.isText){if(d!=n&&!t.child(a).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=a)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(eN(o.content,e-s-1,n-s-1)))}function tN(t,e,n,r){let{index:s,offset:o}=t.findIndex(e),a=t.maybeChild(s);if(o==e||a.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let d=tN(a.content,e-o-1,n,a);return d&&t.replaceChild(s,a.copy(d))}function z5(t,e,n){if(n.openStart>t.depth)throw new Yu("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Yu("Inconsistent open depths");return nN(t,e,n,0)}function nN(t,e,n,r){let s=t.index(r),o=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let a=nN(t,e,n,r+1);return o.copy(o.content.replaceChild(s,a))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let a=t.parent,d=a.content;return ki(a,d.cut(0,t.parentOffset).append(n.content).append(d.cut(e.parentOffset)))}else{let{start:a,end:d}=q5(n,t);return ki(o,sN(t,a,d,e,r))}else return ki(o,Xu(t,e,r))}function rN(t,e){if(!e.type.compatibleContent(t.type))throw new Yu("Cannot join "+e.type.name+" onto "+t.type.name)}function _g(t,e,n){let r=t.node(n);return rN(r,e.node(n)),r}function Ti(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function gc(t,e,n,r){let s=(e||t).node(n),o=0,a=e?e.index(n):s.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(Ti(t.nodeAfter,r),o++));for(let d=o;d<a;d++)Ti(s.child(d),r);e&&e.depth==n&&e.textOffset&&Ti(e.nodeBefore,r)}function ki(t,e){return t.type.checkContent(e),t.copy(e)}function sN(t,e,n,r,s){let o=t.depth>s&&_g(t,e,s+1),a=r.depth>s&&_g(n,r,s+1),d=[];return gc(null,t,s,d),o&&a&&e.index(s)==n.index(s)?(rN(o,a),Ti(ki(o,sN(t,e,n,r,s+1)),d)):(o&&Ti(ki(o,Xu(t,e,s+1)),d),gc(e,n,s,d),a&&Ti(ki(a,Xu(n,r,s+1)),d)),gc(r,null,s,d),new se(d)}function Xu(t,e,n){let r=[];if(gc(null,t,n,r),t.depth>n){let s=_g(t,e,n+1);Ti(ki(s,Xu(t,e,n+1)),r)}return gc(e,null,n,r),new se(r)}function q5(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)s=e.node(o).copy(se.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class Rc{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return lt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let d=r;r=s,s=d}let o=r.marks;for(var a=0;a<o.length;a++)o[a].type.spec.inclusive===!1&&(!s||!o[a].isInSet(s.marks))&&(o=o[a--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Qu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let a=e;;){let{index:d,offset:u}=a.content.findIndex(o),f=o-u;if(r.push(a,d,s+u),!f||(a=a.child(d),a.isText))break;o=f-1,s+=u+1}return new Rc(n,r,o)}static resolveCached(e,n){let r=I1.get(e);if(r)for(let o=0;o<r.elts.length;o++){let a=r.elts[o];if(a.pos==n)return a}else I1.set(e,r=new H5);let s=r.elts[r.i]=Rc.resolve(e,n);return r.i=(r.i+1)%V5,s}}class H5{constructor(){this.elts=[],this.i=0}}const V5=12,I1=new WeakMap;class Qu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const F5=Object.create(null);class jr{constructor(e,n,r,s=lt.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||se.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Wu(this.attrs,n||e.defaultAttrs||F5)&&lt.sameSet(this.marks,r||lt.none)}copy(e=null){return e==this.content?this:new jr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new jr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ue.empty;let s=this.resolve(e),o=this.resolve(n),a=r?0:s.sharedDepth(n),d=s.start(a),f=s.node(a).content.cut(s.pos-d,o.pos-d);return new ue(f,s.depth-a,o.depth-a)}replace(e,n,r){return z5(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return Rc.resolveCached(this,e)}resolveNoCache(e){return Rc.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),oN(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=se.empty,s=0,o=r.childCount){let a=this.contentMatchAt(e).matchFragment(r,s,o),d=a&&a.matchFragment(this.content,n);if(!d||!d.validEnd)return!1;for(let u=s;u<o;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),a=o&&o.matchFragment(this.content,n);return a?a.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=lt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!lt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=se.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}}jr.prototype.text=void 0;class Zu extends jr{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):oN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Zu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Zu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function oN(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class Ri{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new $5(e,n);if(r.next==null)return Ri.empty;let s=iN(r);r.next&&r.err("Unexpected trailing text");let o=Q5(X5(s));return Z5(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function o(a,d){let u=a.matchFragment(e,r);if(u&&(!n||u.validEnd))return se.from(d.map(f=>f.createAndFill()));for(let f=0;f<a.next.length;f++){let{type:p,next:g}=a.next[f];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(g)==-1){s.push(g);let x=o(g,d.concat(p));if(x)return x}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let a=[];for(let d=s;d.type;d=d.via)a.push(d.type);return a.reverse()}for(let a=0;a<o.next.length;a++){let{type:d,next:u}=o.next[a];!d.isLeaf&&!d.hasRequiredAttrs()&&!(d.name in n)&&(!s.type||u.validEnd)&&(r.push({match:d.contentMatch,type:d,via:s}),n[d.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let a=0;a<r.next.length;a++)o+=(a?", ":"")+r.next[a].type.name+"->"+e.indexOf(r.next[a].next);return o}).join(`
`)}}Ri.empty=new Ri(!0);class $5{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function iN(t){let e=[];do e.push(G5(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function G5(t){let e=[];do e.push(J5(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function J5(t){let e=Y5(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=K5(t,e);else break;return e}function D1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function K5(t,e){let n=D1(t),r=n;return t.eat(",")&&(t.next!="}"?r=D1(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function W5(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let o in n){let a=n[o];a.isInGroup(e)&&s.push(a)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function Y5(t){if(t.eat("(")){let e=iN(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=W5(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function X5(t){let e=[[]];return s(o(t,0),n()),e;function n(){return e.push([])-1}function r(a,d,u){let f={term:u,to:d};return e[a].push(f),f}function s(a,d){a.forEach(u=>u.to=d)}function o(a,d){if(a.type=="choice")return a.exprs.reduce((u,f)=>u.concat(o(f,d)),[]);if(a.type=="seq")for(let u=0;;u++){let f=o(a.exprs[u],d);if(u==a.exprs.length-1)return f;s(f,d=n())}else if(a.type=="star"){let u=n();return r(d,u),s(o(a.expr,u),u),[r(u)]}else if(a.type=="plus"){let u=n();return s(o(a.expr,d),u),s(o(a.expr,u),u),[r(u)]}else{if(a.type=="opt")return[r(d)].concat(o(a.expr,d));if(a.type=="range"){let u=d;for(let f=0;f<a.min;f++){let p=n();s(o(a.expr,u),p),u=p}if(a.max==-1)s(o(a.expr,u),u);else for(let f=a.min;f<a.max;f++){let p=n();r(u,p),s(o(a.expr,u),p),u=p}return[r(u)]}else{if(a.type=="name")return[r(d,void 0,a.value)];throw new Error("Unknown expr type")}}}}function aN(t,e){return e-t}function P1(t,e){let n=[];return r(e),n.sort(aN);function r(s){let o=t[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let a=0;a<o.length;a++){let{term:d,to:u}=o[a];!d&&n.indexOf(u)==-1&&r(u)}}}function Q5(t){let e=Object.create(null);return n(P1(t,0));function n(r){let s=[];r.forEach(a=>{t[a].forEach(({term:d,to:u})=>{if(!d)return;let f;for(let p=0;p<s.length;p++)s[p][0]==d&&(f=s[p][1]);P1(t,u).forEach(p=>{f||s.push([d,f=[]]),f.indexOf(p)==-1&&f.push(p)})})});let o=e[r.join(",")]=new Ri(r.indexOf(t.length-1)>-1);for(let a=0;a<s.length;a++){let d=s[a][1].sort(aN);o.next.push({type:s[a][0],next:e[d.join(",")]||n(d)})}return o}}function Z5(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],o=!s.validEnd,a=[];for(let d=0;d<s.next.length;d++){let{type:u,next:f}=s.next[d];a.push(u.name),o&&!(u.isText||u.hasRequiredAttrs())&&(o=!1),r.indexOf(f)==-1&&r.push(f)}o&&e.err("Only non-generatable nodes ("+a.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function lN(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function cN(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let o=t[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function dN(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let o=t[s];o.validate&&o.validate(e[s])}}function uN(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new tj(t,r,e[r]);return n}let O1=class hN{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=uN(e,r.attrs),this.defaultAttrs=lN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ri.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:cN(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jr(this,this.computeAttrs(e),se.from(n),lt.setFrom(r))}createChecked(e=null,n,r){return n=se.from(n),this.checkContent(n),new jr(this,this.computeAttrs(e),n,lt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=se.from(n),n.size){let a=this.contentMatch.fillBefore(n);if(!a)return null;n=a.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(se.empty,!0);return o?new jr(this,e,n.append(o),lt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){dN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:lt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,a)=>r[o]=new hN(o,n,a));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ej(t,e,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class tj{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ej(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Qh{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=uN(e,s.attrs),this.excluded=null;let o=lN(this.attrs);this.instance=o?new lt(this,o):null}create(e=null){return!e&&this.instance?this.instance:new lt(this,cN(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((o,a)=>r[o]=new Qh(o,s++,n,a)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){dN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class fN{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=on.from(e.nodes),n.marks=on.from(e.marks||{}),this.nodes=O1.compile(this.spec.nodes,this),this.marks=Qh.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],a=o.spec.content||"",d=o.spec.marks;if(o.contentMatch=r[a]||(r[a]=Ri.parse(a,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=d=="_"?null:d?L1(this,d.split(" ")):d==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],a=o.spec.excludes;o.excluded=a==null?[o]:a==""?[]:L1(this,a.split(" "))}this.nodeFromJSON=s=>jr.fromJSON(this,s),this.markFromJSON=s=>lt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof O1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new Zu(r,r.defaultAttrs,e,lt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function L1(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],o=t.marks[s],a=o;if(o)n.push(o);else for(let d in t.marks){let u=t.marks[d];(s=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(s)>-1)&&n.push(a=u)}if(!a)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function nj(t){return t.tag!=null}function rj(t){return t.style!=null}class ko{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(nj(s))this.tags.push(s);else if(rj(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new U1(this,n,!1);return r.addAll(e,lt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new U1(this,n,!0);return r.addAll(e,lt.none,n.from,n.to),ue.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(ij(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let a=o.getAttrs(e);if(a===!1)continue;o.attrs=a||void 0}return o}}}matchStyle(e,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let a=this.styles[o],d=a.style;if(!(d.indexOf(e)!=0||a.context&&!r.matchesContext(a.context)||d.length>e.length&&(d.charCodeAt(e.length)!=61||d.slice(e.length+1)!=n))){if(a.getAttrs){let u=a.getAttrs(n);if(u===!1)continue;a.attrs=u||void 0}return a}}}static schemaRules(e){let n=[];function r(s){let o=s.priority==null?50:s.priority,a=0;for(;a<n.length;a++){let d=n[a];if((d.priority==null?50:d.priority)<o)break}n.splice(a,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(a=>{r(a=z1(a)),a.mark||a.ignore||a.clearMark||(a.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(a=>{r(a=z1(a)),a.node||a.ignore||a.mark||(a.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new ko(e,ko.schemaRules(e)))}}const pN={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},sj={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mN={ol:!0,ul:!0},Ic=1,jg=2,bc=4;function B1(t,e,n){return e!=null?(e?Ic:0)|(e==="full"?jg:0):t&&t.whitespace=="pre"?Ic|jg:n&~bc}class vu{constructor(e,n,r,s,o,a){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=a,this.content=[],this.activeMarks=lt.none,this.match=o||(a&bc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(se.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Ic)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=se.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(se.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!pN.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class U1{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,a=B1(null,n.preserveWhitespace,0)|(r?bc:0);s?o=new vu(s.type,s.attrs,lt.none,!0,n.topMatch||s.type.contentMatch,a):r?o=new vu(null,null,lt.none,!0,null,a):o=new vu(e.schema.topNodeType,null,lt.none,!0,null,a),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,o=s.options&jg?"full":this.localPreserveWS||(s.options&Ic)>0,{schema:a}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(a.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(a.linebreakReplacement.create())){let d=r.split(/\r?\n|\r/);for(let u=0;u<d.length;u++)u&&this.insertNode(a.linebreakReplacement.create(),n,!0),d[u]&&this.insertNode(a.text(d[u]),n,!/\S/.test(d[u]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let d=s.content[s.content.length-1],u=e.previousSibling;(!d||u&&u.nodeName=="BR"||d.isText&&/[ \t\r\n\u000c]$/.test(d.text))&&(r=r.slice(1))}r&&this.insertNode(a.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let a=e.nodeName.toLowerCase(),d;mN.hasOwnProperty(a)&&this.parser.normalizeLists&&oj(e);let u=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(d=this.parser.matchTag(e,this,r));e:if(u?u.ignore:sj.hasOwnProperty(a))this.findInside(e),this.ignoreFallback(e,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(e=u.skip);let f,p=this.needsBlock;if(pN.hasOwnProperty(a))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),f=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let g=u&&u.skip?n:this.readStyles(e,n);g&&this.addAll(e,g),f&&this.sync(o),this.needsBlock=p}else{let f=this.readStyles(e,n);f&&this.addElementByRule(e,u,f,u.consuming===!1?d:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],a=r.getPropertyValue(o);if(a)for(let d=void 0;;){let u=this.parser.matchStyle(o,a,this,d);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(f=>!u.clearMark(f)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)d=u;else break}}return n}addElementByRule(e,n,r,s){let o,a;if(n.node)if(a=this.parser.schema.nodes[n.node],a.isLeaf)this.insertNode(a.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let u=this.enter(a,n.attrs||null,r,n.preserveWhitespace);u&&(o=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let d=this.top;if(a&&a.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=e;typeof n.contentElement=="string"?u=e.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(e):n.contentElement&&(u=n.contentElement),this.findAround(e,u,!0),this.addAll(u,r),this.findAround(e,u,!1)}o&&this.sync(d)&&this.open--}addAll(e,n,r,s){let o=r||0;for(let a=r?e.childNodes[r]:e.firstChild,d=s==null?null:e.childNodes[s];a!=d;a=a.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(a,n);this.findAtPoint(e,o)}findPlace(e,n,r){let s,o;for(let a=this.open,d=0;a>=0;a--){let u=this.nodes[a],f=u.findWrapping(e);if(f&&(!s||s.length>f.length+d)&&(s=f,o=u,!f.length))break;if(u.solid){if(r)break;d+=2}}if(!s)return null;this.sync(o);for(let a=0;a<s.length;a++)n=this.enterInner(s[a],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let a=lt.none;for(let d of s.concat(e.marks))(o.type?o.type.allowsMarkType(d.type):q1(d.type,e.type))&&(a=d.addToSet(a));return o.content.push(e.mark(a)),!0}return!1}enter(e,n,r,s){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,s)),o}enterInner(e,n,r,s=!1,o){this.closeExtra();let a=this.top;a.match=a.match&&a.match.matchType(e);let d=B1(e,o,a.options);a.options&bc&&a.content.length==0&&(d|=bc);let u=lt.none;return r=r.filter(f=>(a.type?a.type.allowsMarkType(f.type):q1(f.type,e))?(u=f.addToSet(u),!1):!0),this.nodes.push(new vu(e,n,u,s,null,d)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ic)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),a=(d,u)=>{for(;d>=0;d--){let f=n[d];if(f==""){if(d==n.length-1||d==0)continue;for(;u>=o;u--)if(a(d-1,u))return!0;return!1}else{let p=u>0||u==0&&s?this.nodes[u].type:r&&u>=o?r.node(u-o).type:null;if(!p||p.name!=f&&!p.isInGroup(f))return!1;u--}}return!0};return a(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function oj(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&mN.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function ij(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function z1(t){let e={};for(let n in t)e[n]=t[n];return e}function q1(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let o=[],a=d=>{o.push(d);for(let u=0;u<d.edgeCount;u++){let{type:f,next:p}=d.edge(u);if(f==e||o.indexOf(p)<0&&a(p))return!0}};if(a(s.contentMatch))return!0}}class Li{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Um(n).createDocumentFragment());let s=r,o=[];return e.forEach(a=>{if(o.length||a.marks.length){let d=0,u=0;for(;d<o.length&&u<a.marks.length;){let f=a.marks[u];if(!this.marks[f.type.name]){u++;continue}if(!f.eq(o[d][0])||f.type.spec.spanning===!1)break;d++,u++}for(;d<o.length;)s=o.pop()[1];for(;u<a.marks.length;){let f=a.marks[u++],p=this.serializeMark(f,a.isInline,n);p&&(o.push([f,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(a,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Hu(Um(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Hu(Um(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Hu(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Li(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=H1(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return H1(e.marks)}}function H1(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Um(t){return t.document||window.document}const V1=new WeakMap;function aj(t){let e=V1.get(t);return e===void 0&&V1.set(t,e=lj(t)),e}function lj(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Hu(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=aj(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let a=s.indexOf(" ");a>0&&(n=s.slice(0,a),s=s.slice(a+1));let d,u=n?t.createElementNS(n,s):t.createElement(s),f=e[1],p=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){p=2;for(let g in f)if(f[g]!=null){let x=g.indexOf(" ");x>0?u.setAttributeNS(g.slice(0,x),g.slice(x+1),f[g]):g=="style"&&u.style?u.style.cssText=f[g]:u.setAttribute(g,f[g])}}for(let g=p;g<e.length;g++){let x=e[g];if(x===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:w,contentDOM:C}=Hu(t,x,n,r);if(u.appendChild(w),C){if(d)throw new RangeError("Multiple content holes");d=C}}}return{dom:u,contentDOM:d}}const gN=65535,bN=Math.pow(2,16);function cj(t,e){return t+e*bN}function F1(t){return t&gN}function dj(t){return(t-(t&gN))/bN}const xN=1,yN=2,Vu=4,vN=8;class Mg{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&vN)>0}get deletedBefore(){return(this.delInfo&(xN|Vu))>0}get deletedAfter(){return(this.delInfo&(yN|Vu))>0}get deletedAcross(){return(this.delInfo&Vu)>0}}class Gn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Gn.empty)return Gn.empty}recover(e){let n=0,r=F1(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+dj(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,o=this.inverted?2:1,a=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?s:0);if(u>e)break;let f=this.ranges[d+o],p=this.ranges[d+a],g=u+f;if(e<=g){let x=f?e==u?-1:e==g?1:n:n,w=u+s+(x<0?0:p);if(r)return w;let C=e==(n<0?u:g)?null:cj(d/3,e-u),E=e==u?yN:e==g?xN:Vu;return(n<0?e!=u:e!=g)&&(E|=vN),new Mg(w,E,C)}s+=p-f}return r?e+s:new Mg(e+s,0,null)}touches(e,n){let r=0,s=F1(n),o=this.inverted?2:1,a=this.inverted?1:2;for(let d=0;d<this.ranges.length;d+=3){let u=this.ranges[d]-(this.inverted?r:0);if(u>e)break;let f=this.ranges[d+o],p=u+f;if(e<=p&&d==s*3)return!0;r+=this.ranges[d+a]-f}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let a=this.ranges[s],d=a-(this.inverted?o:0),u=a+(this.inverted?0:o),f=this.ranges[s+n],p=this.ranges[s+r];e(d,d+f,u,u+p),o+=p-f}}invert(){return new Gn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Gn.empty:new Gn(e<0?[0,-e,0]:[0,0,e])}}Gn.empty=new Gn([]);class Dc{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Dc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Dc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let o=this.from;o<this.to;o++){let a=this._maps[o],d=a.mapResult(e,n);if(d.recover!=null){let u=this.getMirror(o);if(u!=null&&u>o&&u<this.to){o=u,e=this._maps[u].recover(d.recover);continue}}s|=d.delInfo,e=d.pos}return r?e:new Mg(e,s,null)}}const zm=Object.create(null);class xn{getMap(){return Gn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=zm[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in zm)throw new RangeError("Duplicate use of step JSON ID "+e);return zm[e]=n,n.prototype.jsonID=e,n}}class Ut{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ut(e,null)}static fail(e){return new Ut(null,e)}static fromReplace(e,n,r,s){try{return Ut.ok(e.replace(n,r,s))}catch(o){if(o instanceof Yu)return Ut.fail(o.message);throw o}}}function D0(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let o=t.child(s);o.content.size&&(o=o.copy(D0(o.content,e,o))),o.isInline&&(o=e(o,n,s)),r.push(o)}return se.fromArray(r)}class No extends xn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new ue(D0(n.content,(a,d)=>!a.isAtom||!d.type.allowsMarkType(this.mark.type)?a:a.mark(this.mark.addToSet(a.marks)),s),n.openStart,n.openEnd);return Ut.fromReplace(e,this.from,this.to,o)}invert(){return new Ar(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new No(n.pos,r.pos,this.mark)}merge(e){return e instanceof No&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new No(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new No(n.from,n.to,e.markFromJSON(n.mark))}}xn.jsonID("addMark",No);class Ar extends xn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ue(D0(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Ut.fromReplace(e,this.from,this.to,r)}invert(){return new No(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ar(n.pos,r.pos,this.mark)}merge(e){return e instanceof Ar&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ar(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ar(n.from,n.to,e.markFromJSON(n.mark))}}xn.jsonID("removeMark",Ar);class Eo extends xn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ut.fromReplace(e,this.pos,this.pos+1,new ue(se.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new Eo(this.pos,n.marks[s]);return new Eo(this.pos,this.mark)}}return new Ii(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Eo(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Eo(n.pos,e.markFromJSON(n.mark))}}xn.jsonID("addNodeMark",Eo);class Ii extends xn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ut.fromReplace(e,this.pos,this.pos+1,new ue(se.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Eo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ii(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ii(n.pos,e.markFromJSON(n.mark))}}xn.jsonID("removeNodeMark",Ii);class Wt extends xn{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&Rg(e,this.from,this.to)?Ut.fail("Structure replace would overwrite content"):Ut.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Gn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Wt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Wt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Wt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Wt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ue.empty:new ue(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Wt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Wt(n.from,n.to,ue.fromJSON(e,n.slice),!!n.structure)}}xn.jsonID("replace",Wt);class Yt extends xn{constructor(e,n,r,s,o,a,d=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=a,this.structure=d}apply(e){if(this.structure&&(Rg(e,this.from,this.gapFrom)||Rg(e,this.gapTo,this.to)))return Ut.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ut.fromReplace(e,this.from,this.to,r):Ut.fail("Content does not fit in gap")}getMap(){return new Gn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Yt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new Yt(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Yt(n.from,n.to,n.gapFrom,n.gapTo,ue.fromJSON(e,n.slice),n.insert,!!n.structure)}}xn.jsonID("replaceAround",Yt);function Rg(t,e,n){let r=t.resolve(e),s=n-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let a=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!a||a.isLeaf)return!0;a=a.firstChild,s--}}return!1}function uj(t,e,n,r){let s=[],o=[],a,d;t.doc.nodesBetween(e,n,(u,f,p)=>{if(!u.isInline)return;let g=u.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let x=Math.max(f,e),w=Math.min(f+u.nodeSize,n),C=r.addToSet(g);for(let E=0;E<g.length;E++)g[E].isInSet(C)||(a&&a.to==x&&a.mark.eq(g[E])?a.to=w:s.push(a=new Ar(x,w,g[E])));d&&d.to==x?d.to=w:o.push(d=new No(x,w,r))}}),s.forEach(u=>t.step(u)),o.forEach(u=>t.step(u))}function hj(t,e,n,r){let s=[],o=0;t.doc.nodesBetween(e,n,(a,d)=>{if(!a.isInline)return;o++;let u=null;if(r instanceof Qh){let f=a.marks,p;for(;p=r.isInSet(f);)(u||(u=[])).push(p),f=p.removeFromSet(f)}else r?r.isInSet(a.marks)&&(u=[r]):u=a.marks;if(u&&u.length){let f=Math.min(d+a.nodeSize,n);for(let p=0;p<u.length;p++){let g=u[p],x;for(let w=0;w<s.length;w++){let C=s[w];C.step==o-1&&g.eq(s[w].style)&&(x=C)}x?(x.to=f,x.step=o):s.push({style:g,from:Math.max(d,e),to:f,step:o})}}}),s.forEach(a=>t.step(new Ar(a.from,a.to,a.style)))}function P0(t,e,n,r=n.contentMatch,s=!0){let o=t.doc.nodeAt(e),a=[],d=e+1;for(let u=0;u<o.childCount;u++){let f=o.child(u),p=d+f.nodeSize,g=r.matchType(f.type);if(!g)a.push(new Wt(d,p,ue.empty));else{r=g;for(let x=0;x<f.marks.length;x++)n.allowsMarkType(f.marks[x].type)||t.step(new Ar(d,p,f.marks[x]));if(s&&f.isText&&n.whitespace!="pre"){let x,w=/\r?\n|\r/g,C;for(;x=w.exec(f.text);)C||(C=new ue(se.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),a.push(new Wt(d+x.index,d+x.index+x[0].length,C))}}d=p}if(!r.validEnd){let u=r.fillBefore(se.empty,!0);t.replace(d,d,new ue(u,0,0))}for(let u=a.length-1;u>=0;u--)t.step(a[u])}function fj(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Za(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth;;--r){let s=t.$from.node(r),o=t.$from.index(r),a=t.$to.indexAfter(r);if(r<t.depth&&s.canReplace(o,a,n))return r;if(r==0||s.type.spec.isolating||!fj(s,o,a))break}return null}function pj(t,e,n){let{$from:r,$to:s,depth:o}=e,a=r.before(o+1),d=s.after(o+1),u=a,f=d,p=se.empty,g=0;for(let C=o,E=!1;C>n;C--)E||r.index(C)>0?(E=!0,p=se.from(r.node(C).copy(p)),g++):u--;let x=se.empty,w=0;for(let C=o,E=!1;C>n;C--)E||s.after(C+1)<s.end(C)?(E=!0,x=se.from(s.node(C).copy(x)),w++):f++;t.step(new Yt(u,f,a,d,new ue(p.append(x),g,w),p.size-g,!0))}function O0(t,e,n=null,r=t){let s=mj(t,e),o=s&&gj(r,e);return o?s.map($1).concat({type:e,attrs:n}).concat(o.map($1)):null}function $1(t){return{type:t,attrs:null}}function mj(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let a=o.length?o[0]:e;return n.canReplaceWith(r,s,a)?o:null}function gj(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.child(r),a=e.contentMatch.findWrapping(o.type);if(!a)return null;let u=(a.length?a[a.length-1]:e).contentMatch;for(let f=r;u&&f<s;f++)u=u.matchType(n.child(f).type);return!u||!u.validEnd?null:a}function bj(t,e,n){let r=se.empty;for(let a=n.length-1;a>=0;a--){if(r.size){let d=n[a].type.contentMatch.matchFragment(r);if(!d||!d.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=se.from(n[a].type.create(n[a].attrs,r))}let s=e.start,o=e.end;t.step(new Yt(s,o,s,o,new ue(r,0,0),n.length,!0))}function xj(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(a,d)=>{let u=typeof s=="function"?s(a):s;if(a.isTextblock&&!a.hasMarkup(r,u)&&yj(t.doc,t.mapping.slice(o).map(d),r)){let f=null;if(r.schema.linebreakReplacement){let w=r.whitespace=="pre",C=!!r.contentMatch.matchType(r.schema.linebreakReplacement);w&&!C?f=!1:!w&&C&&(f=!0)}f===!1&&SN(t,a,d,o),P0(t,t.mapping.slice(o).map(d,1),r,void 0,f===null);let p=t.mapping.slice(o),g=p.map(d,1),x=p.map(d+a.nodeSize,1);return t.step(new Yt(g,x,g+1,x-1,new ue(se.from(r.create(u,null,a.marks)),0,0),1,!0)),f===!0&&wN(t,a,d,o),!1}})}function wN(t,e,n,r){e.forEach((s,o)=>{if(s.isText){let a,d=/\r?\n|\r/g;for(;a=d.exec(s.text);){let u=t.mapping.slice(r).map(n+1+o+a.index);t.replaceWith(u,u+1,e.type.schema.linebreakReplacement.create())}}})}function SN(t,e,n,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let a=t.mapping.slice(r).map(n+1+o);t.replaceWith(a,a+1,e.type.schema.text(`
`))}})}function yj(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function vj(t,e,n,r,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let a=n.create(r,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,a);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Yt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ue(se.from(a),0,0),1,!0))}function Ns(t,e,n=1,r){let s=t.resolve(e),o=s.depth-n,a=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!a.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let f=s.depth-1,p=n-2;f>o;f--,p--){let g=s.node(f),x=s.index(f);if(g.type.spec.isolating)return!1;let w=g.content.cutByIndex(x,g.childCount),C=r&&r[p+1];C&&(w=w.replaceChild(0,C.type.create(C.attrs)));let E=r&&r[p]||g;if(!g.canReplace(x+1,g.childCount)||!E.type.validContent(w))return!1}let d=s.indexAfter(o),u=r&&r[0];return s.node(o).canReplaceWith(d,d,u?u.type:s.node(o+1).type)}function wj(t,e,n=1,r){let s=t.doc.resolve(e),o=se.empty,a=se.empty;for(let d=s.depth,u=s.depth-n,f=n-1;d>u;d--,f--){o=se.from(s.node(d).copy(o));let p=r&&r[f];a=se.from(p?p.type.create(p.attrs,a):s.node(d).copy(a))}t.step(new Wt(e,e,new ue(o.append(a),n,n),!0))}function Po(t,e){let n=t.resolve(e),r=n.index();return CN(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Sj(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),a=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(a),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function CN(t,e){return!!(t&&e&&!t.isLeaf&&Sj(t,e))}function Zh(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let o,a,d=r.index(s);if(s==r.depth?(o=r.nodeBefore,a=r.nodeAfter):n>0?(o=r.node(s+1),d++,a=r.node(s).maybeChild(d)):(o=r.node(s).maybeChild(d-1),a=r.node(s+1)),o&&!o.isTextblock&&CN(o,a)&&r.node(s).canReplace(d,d+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function Cj(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,o=t.doc.resolve(e-n),a=o.node().type;if(s&&a.inlineContent){let p=a.whitespace=="pre",g=!!a.contentMatch.matchType(s);p&&!g?r=!1:!p&&g&&(r=!0)}let d=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);SN(t,p.node(),p.before(),d)}a.inlineContent&&P0(t,e+n-1,a,o.node().contentMatchAt(o.index()),r==null);let u=t.mapping.slice(d),f=u.map(e-n);if(t.step(new Wt(f,u.map(e+n,-1),ue.empty,!0)),r===!0){let p=t.doc.resolve(f);wN(t,p.node(),p.before(),t.steps.length)}return t}function Nj(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function NN(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let a=r.depth;a>=0;a--){let d=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,u=r.index(a)+(d>0?1:0),f=r.node(a),p=!1;if(o==1)p=f.canReplace(u,u,s);else{let g=f.contentMatchAt(u).findWrapping(s.firstChild.type);p=g&&f.canReplaceWith(u,u,g[0])}if(p)return d==0?r.pos:d<0?r.before(a+1):r.after(a+1)}return null}function ef(t,e,n=e,r=ue.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),o=t.resolve(n);return EN(s,o,r)?new Wt(e,n,r):new Ej(s,o,r).fit()}function EN(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Ej{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=se.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=se.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,a=r.depth,d=s.depth;for(;a&&d&&o.childCount==1;)o=o.firstChild.content,a--,d--;let u=new ue(o,a,d);return e>-1?new Yt(r.pos,e,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new Wt(r.pos,s.pos,u):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=qm(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let a=s.firstChild;for(let d=this.depth;d>=0;d--){let{type:u,match:f}=this.frontier[d],p,g=null;if(n==1&&(a?f.matchType(a.type)||(g=f.fillBefore(se.from(a),!1)):o&&u.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:d,parent:o,inject:g};if(n==2&&a&&(p=f.findWrapping(a.type)))return{sliceDepth:r,frontierDepth:d,parent:o,wrap:p};if(o&&f.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=qm(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ue(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=qm(e,n);if(s.childCount<=1&&n>0){let o=e.size-n<=n+s.size;this.unplaced=new ue(uc(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ue(uc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let E=0;E<o.length;E++)this.openFrontierNode(o[E]);let a=this.unplaced,d=r?r.content:a.content,u=a.openStart-e,f=0,p=[],{match:g,type:x}=this.frontier[n];if(s){for(let E=0;E<s.childCount;E++)p.push(s.child(E));g=g.matchFragment(s)}let w=d.size+e-(a.content.size-a.openEnd);for(;f<d.childCount;){let E=d.child(f),N=g.matchType(E.type);if(!N)break;f++,(f>1||u==0||E.content.size)&&(g=N,p.push(TN(E.mark(x.allowedMarks(E.marks)),f==1?u:0,f==d.childCount?w:-1)))}let C=f==d.childCount;C||(w=-1),this.placed=hc(this.placed,n,se.from(p)),this.frontier[n].match=g,C&&w<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,N=d;E<w;E++){let k=N.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),N=k.content}this.unplaced=C?e==0?ue.empty:new ue(uc(a.content,e-1,1),e-1,w<0?a.openEnd:e-1):new ue(uc(a.content,e,f),a.openStart,a.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Hm(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),a=Hm(e,n,s,r,o);if(a){for(let d=n-1;d>=0;d--){let{match:u,type:f}=this.frontier[d],p=Hm(e,d,f,u,!0);if(!p||p.childCount)continue e}return{depth:n,fit:a,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=hc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=hc(this.placed,this.depth,se.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(se.empty,!0);n.childCount&&(this.placed=hc(this.placed,this.frontier.length,n))}}function uc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(uc(t.firstChild.content,e-1,n)))}function hc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(hc(t.lastChild.content,e-1,n)))}function qm(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function TN(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,TN(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(se.empty,!0)))),t.copy(r)}function Hm(t,e,n,r,s){let o=t.node(e),a=s?t.indexAfter(e):t.index(e);if(a==o.childCount&&!n.compatibleContent(o.type))return null;let d=r.fillBefore(o.content,!0,a);return d&&!Tj(n,o.content,a)?d:null}function Tj(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function kj(t){return t.spec.defining||t.spec.definingForContent}function Aj(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(EN(s,o,r))return t.step(new Wt(e,n,r));let a=AN(s,t.doc.resolve(n));a[a.length-1]==0&&a.pop();let d=-(s.depth+1);a.unshift(d);for(let x=s.depth,w=s.pos-1;x>0;x--,w--){let C=s.node(x).type.spec;if(C.defining||C.definingAsContext||C.isolating)break;a.indexOf(x)>-1?d=x:s.before(x)==w&&a.splice(1,0,-x)}let u=a.indexOf(d),f=[],p=r.openStart;for(let x=r.content,w=0;;w++){let C=x.firstChild;if(f.push(C),w==r.openStart)break;x=C.content}for(let x=p-1;x>=0;x--){let w=f[x],C=kj(w.type);if(C&&!w.sameMarkup(s.node(Math.abs(d)-1)))p=x;else if(C||!w.type.isTextblock)break}for(let x=r.openStart;x>=0;x--){let w=(x+p+1)%(r.openStart+1),C=f[w];if(C)for(let E=0;E<a.length;E++){let N=a[(E+u)%a.length],k=!0;N<0&&(k=!1,N=-N);let _=s.node(N-1),j=s.index(N-1);if(_.canReplaceWith(j,j,C.type,C.marks))return t.replace(s.before(N),k?o.after(N):n,new ue(kN(r.content,0,r.openStart,w),w,r.openEnd))}}let g=t.steps.length;for(let x=a.length-1;x>=0&&(t.replace(e,n,r),!(t.steps.length>g));x--){let w=a[x];w<0||(e=s.before(w),n=o.after(w))}}function kN(t,e,n,r,s){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(kN(o.content,e+1,n,r,o)))}if(e>r){let o=s.contentMatchAt(0),a=o.fillBefore(t).append(t);t=a.append(o.matchFragment(a).fillBefore(se.empty,!0))}return t}function _j(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=Nj(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new ue(se.from(r),0,0))}function jj(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),o=AN(r,s);for(let a=0;a<o.length;a++){let d=o[a],u=a==o.length-1;if(u&&d==0||r.node(d).type.contentMatch.validEnd)return t.delete(r.start(d),s.end(d));if(d>0&&(u||r.node(d-1).canReplace(r.index(d-1),s.indexAfter(d-1))))return t.delete(r.before(d),s.after(d))}for(let a=1;a<=r.depth&&a<=s.depth;a++)if(e-r.start(a)==r.depth-a&&n>r.end(a)&&s.end(a)-n!=s.depth-a&&r.start(a-1)==s.start(a-1)&&r.node(a-1).canReplace(r.index(a-1),s.index(a-1)))return t.delete(r.before(a),n);t.delete(e,n)}function AN(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let o=t.start(s);if(o<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&n.push(s)}return n}class Pa extends xn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ut.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Ut.fromReplace(e,this.pos,this.pos+1,new ue(se.from(s),0,n.isLeaf?0:1))}getMap(){return Gn.empty}invert(e){return new Pa(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Pa(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Pa(n.pos,n.attr,n.value)}}xn.jsonID("attr",Pa);class Pc extends xn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Ut.ok(r)}getMap(){return Gn.empty}invert(e){return new Pc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Pc(n.attr,n.value)}}xn.jsonID("docAttr",Pc);let Fa=class extends Error{};Fa=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};Fa.prototype=Object.create(Error.prototype);Fa.prototype.constructor=Fa;Fa.prototype.name="TransformError";class _N{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Dc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new Fa(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ue.empty){let s=ef(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new ue(se.from(r),0,0))}delete(e,n){return this.replace(e,n,ue.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Aj(this,e,n,r),this}replaceRangeWith(e,n,r){return _j(this,e,n,r),this}deleteRange(e,n){return jj(this,e,n),this}lift(e,n){return pj(this,e,n),this}join(e,n=1){return Cj(this,e,n),this}wrap(e,n){return bj(this,e,n),this}setBlockType(e,n=e,r,s=null){return xj(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return vj(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Pa(e,n,r)),this}setDocAttribute(e,n){return this.step(new Pc(e,n)),this}addNodeMark(e,n){return this.step(new Eo(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof lt)n.isInSet(r.marks)&&this.step(new Ii(e,n));else{let s=r.marks,o,a=[];for(;o=n.isInSet(s);)a.push(new Ii(e,o)),s=o.removeFromSet(s);for(let d=a.length-1;d>=0;d--)this.step(a[d])}return this}split(e,n=1,r){return wj(this,e,n,r),this}addMark(e,n,r){return uj(this,e,n,r),this}removeMark(e,n,r){return hj(this,e,n,r),this}clearIncompatible(e,n,r){return P0(this,e,n,r),this}}const Vm=Object.create(null);class Be{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new Mj(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ue.empty){let r=n.content.lastChild,s=null;for(let d=0;d<n.openEnd;d++)s=r,r=r.lastChild;let o=e.steps.length,a=this.ranges;for(let d=0;d<a.length;d++){let{$from:u,$to:f}=a[d],p=e.mapping.slice(o);e.replaceRange(p.map(u.pos),p.map(f.pos),d?ue.empty:n),d==0&&K1(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:a,$to:d}=s[o],u=e.mapping.slice(r),f=u.map(a.pos),p=u.map(d.pos);o?e.deleteRange(f,p):(e.replaceRangeWith(f,p,n),K1(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new je(e):Ea(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let a=n<0?Ea(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Ea(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(a)return a}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Yn(e.node(0))}static atStart(e){return Ea(e,e,0,0,1)||new Yn(e)}static atEnd(e){return Ea(e,e,e.content.size,e.childCount,-1)||new Yn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Vm[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Vm)throw new RangeError("Duplicate use of selection JSON ID "+e);return Vm[e]=n,n.prototype.jsonID=e,n}getBookmark(){return je.between(this.$anchor,this.$head).getBookmark()}}Be.prototype.visible=!0;class Mj{constructor(e,n){this.$from=e,this.$to=n}}let G1=!1;function J1(t){!G1&&!t.parent.inlineContent&&(G1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class je extends Be{constructor(e,n=e){J1(e),J1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Be.near(r);let s=e.resolve(n.map(this.anchor));return new je(s.parent.inlineContent?s:r,r)}replace(e,n=ue.empty){if(super.replace(e,n),n==ue.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof je&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tf(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new je(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=Be.findFrom(n,r,!0)||Be.findFrom(n,-r,!0);if(o)n=o.$head;else return Be.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Be.findFrom(e,-r,!0)||Be.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new je(e,n)}}Be.jsonID("text",je);class tf{constructor(e,n){this.anchor=e,this.head=n}map(e){return new tf(e.map(this.anchor),e.map(this.head))}resolve(e){return je.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ee extends Be{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=e.resolve(s);return r?Be.near(o):new Ee(o)}content(){return new ue(se.from(this.node),0,0)}eq(e){return e instanceof Ee&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new L0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ee(e.resolve(n.anchor))}static create(e,n){return new Ee(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ee.prototype.visible=!1;Be.jsonID("node",Ee);class L0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new tf(r,r):new L0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ee.isSelectable(r)?new Ee(n):Be.near(n)}}class Yn extends Be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ue.empty){if(n==ue.empty){e.delete(0,e.doc.content.size);let r=Be.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Yn(e)}map(e){return new Yn(e)}eq(e){return e instanceof Yn}getBookmark(){return Rj}}Be.jsonID("all",Yn);const Rj={map(){return this},resolve(t){return new Yn(t)}};function Ea(t,e,n,r,s,o=!1){if(e.inlineContent)return je.create(t,n);for(let a=r-(s>0?0:1);s>0?a<e.childCount:a>=0;a+=s){let d=e.child(a);if(d.isAtom){if(!o&&Ee.isSelectable(d))return Ee.create(t,n-(s<0?d.nodeSize:0))}else{let u=Ea(t,d,n+s,s<0?d.childCount:0,s,o);if(u)return u}n+=d.nodeSize*s}return null}function K1(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Wt||s instanceof Yt))return;let o=t.mapping.maps[r],a;o.forEach((d,u,f,p)=>{a==null&&(a=p)}),t.setSelection(Be.near(t.doc.resolve(a),n))}const W1=1,wu=2,Y1=4;class Ij extends _N{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|W1)&~wu,this.storedMarks=null,this}get selectionSet(){return(this.updated&W1)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wu,this}ensureMarks(e){return lt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||lt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let a=this.doc.resolve(n);o=r==n?a.marks():a.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Be.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Y1,this}get scrolledIntoView(){return(this.updated&Y1)>0}}function X1(t,e){return!e||!t?t:t.bind(e)}class fc{constructor(e,n,r){this.name=e,this.init=X1(n.init,r),this.apply=X1(n.apply,r)}}const Dj=[new fc("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new fc("selection",{init(t,e){return t.selection||Be.atStart(e.doc)},apply(t){return t.selection}}),new fc("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new fc("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Fm{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=Dj.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new fc(r.key,r.spec.state,r))})}}class Ma{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let a=0;a<this.config.plugins.length;a++){let d=this.config.plugins[a];if(d.spec.appendTransaction){let u=s?s[a].n:0,f=s?s[a].state:this,p=u<n.length&&d.spec.appendTransaction.call(d,u?n.slice(u):n,f,r);if(p&&r.filterTransaction(p,a)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let g=0;g<this.config.plugins.length;g++)s.push(g<a?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),o=!0}s&&(s[a]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ma(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Ij(this)}static create(e){let n=new Fm(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ma(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new Fm(this.schema,e.plugins),r=n.fields,s=new Ma(n);for(let o=0;o<r.length;o++){let a=r[o].name;s[a]=this.hasOwnProperty(a)?this[a]:r[o].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Fm(e.schema,e.plugins),o=new Ma(s);return s.fields.forEach(a=>{if(a.name=="doc")o.doc=jr.fromJSON(e.schema,n.doc);else if(a.name=="selection")o.selection=Be.fromJSON(o.doc,n.selection);else if(a.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let d in r){let u=r[d],f=u.spec.state;if(u.key==a.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,d)){o[a.name]=f.fromJSON.call(u,e,n[d],o);return}}o[a.name]=a.init(e,o)}}),o}}function jN(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=jN(s,e,{})),n[r]=s}return n}class _t{constructor(e){this.spec=e,this.props={},e.props&&jN(e.props,this,this.props),this.key=e.key?e.key.key:MN("plugin")}getState(e){return e[this.key]}}const $m=Object.create(null);function MN(t){return t in $m?t+"$"+ ++$m[t]:($m[t]=0,t+"$")}class Qt{constructor(e="key"){this.key=MN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const B0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function RN(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const IN=(t,e,n)=>{let r=RN(t,n);if(!r)return!1;let s=U0(r);if(!s){let a=r.blockRange(),d=a&&Za(a);return d==null?!1:(e&&e(t.tr.lift(a,d).scrollIntoView()),!0)}let o=s.nodeBefore;if(HN(t,s,e,-1))return!0;if(r.parent.content.size==0&&($a(o,"end")||Ee.isSelectable(o)))for(let a=r.depth;;a--){let d=ef(t.doc,r.before(a),r.after(a),ue.empty);if(d&&d.slice.size<d.to-d.from){if(e){let u=t.tr.step(d);u.setSelection($a(o,"end")?Be.findFrom(u.doc.resolve(u.mapping.map(s.pos,-1)),-1):Ee.create(u.doc,s.pos-o.nodeSize)),e(u.scrollIntoView())}return!0}if(a==1||r.node(a-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},Pj=(t,e,n)=>{let r=RN(t,n);if(!r)return!1;let s=U0(r);return s?DN(t,s,e):!1},Oj=(t,e,n)=>{let r=ON(t,n);if(!r)return!1;let s=z0(r);return s?DN(t,s,e):!1};function DN(t,e,n){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let a=e.nodeAfter,d=a,u=e.pos+1;for(;!d.isTextblock;u++){if(d.type.spec.isolating)return!1;let p=d.firstChild;if(!p)return!1;d=p}let f=ef(t.doc,o,u,ue.empty);if(!f||f.from!=o||f instanceof Wt&&f.slice.size>=u-o)return!1;if(n){let p=t.tr.step(f);p.setSelection(je.create(p.doc,o)),n(p.scrollIntoView())}return!0}function $a(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const PN=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=U0(r)}let a=o&&o.nodeBefore;return!a||!Ee.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,o.pos-a.nodeSize)).scrollIntoView()),!0)};function U0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ON(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const LN=(t,e,n)=>{let r=ON(t,n);if(!r)return!1;let s=z0(r);if(!s)return!1;let o=s.nodeAfter;if(HN(t,s,e,1))return!0;if(r.parent.content.size==0&&($a(o,"start")||Ee.isSelectable(o))){let a=ef(t.doc,r.before(),r.after(),ue.empty);if(a&&a.slice.size<a.to-a.from){if(e){let d=t.tr.step(a);d.setSelection($a(o,"start")?Be.findFrom(d.doc.resolve(d.mapping.map(s.pos)),1):Ee.create(d.doc,d.mapping.map(s.pos))),e(d.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},BN=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=z0(r)}let a=o&&o.nodeAfter;return!a||!Ee.isSelectable(a)?!1:(e&&e(t.tr.setSelection(Ee.create(t.doc,o.pos)).scrollIntoView()),!0)};function z0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Lj=(t,e)=>{let n=t.selection,r=n instanceof Ee,s;if(r){if(n.node.isTextblock||!Po(t.doc,n.from))return!1;s=n.from}else if(s=Zh(t.doc,n.from,-1),s==null)return!1;if(e){let o=t.tr.join(s);r&&o.setSelection(Ee.create(o.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},Bj=(t,e)=>{let n=t.selection,r;if(n instanceof Ee){if(n.node.isTextblock||!Po(t.doc,n.to))return!1;r=n.to}else if(r=Zh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},Uj=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),o=s&&Za(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)},UN=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function q0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const zj=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),a=q0(s.contentMatchAt(o));if(!a||!s.canReplaceWith(o,o,a))return!1;if(e){let d=n.after(),u=t.tr.replaceWith(d,d,a.createAndFill());u.setSelection(Be.near(u.doc.resolve(d),1)),e(u.scrollIntoView())}return!0},zN=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Yn||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=q0(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let a=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,d=t.tr.insert(a,o.createAndFill());d.setSelection(je.create(d.doc,a+1)),e(d.scrollIntoView())}return!0},qN=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ns(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&Za(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function qj(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Ee&&e.selection.node.isBlock)return!r.parentOffset||!Ns(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],a,d,u=!1,f=!1;for(let w=r.depth;;w--)if(r.node(w).isBlock){u=r.end(w)==r.pos+(r.depth-w),f=r.start(w)==r.pos-(r.depth-w),d=q0(r.node(w-1).contentMatchAt(r.indexAfter(w-1))),o.unshift(u&&d?{type:d}:null),a=w;break}else{if(w==1)return!1;o.unshift(null)}let p=e.tr;(e.selection instanceof je||e.selection instanceof Yn)&&p.deleteSelection();let g=p.mapping.map(r.pos),x=Ns(p.doc,g,o.length,o);if(x||(o[0]=d?{type:d}:null,x=Ns(p.doc,g,o.length,o)),!x)return!1;if(p.split(g,o.length,o),!u&&f&&r.node(a).type!=d){let w=p.mapping.map(r.before(a)),C=p.doc.resolve(w);d&&r.node(a-1).canReplaceWith(C.index(),C.index()+1,d)&&p.setNodeMarkup(p.mapping.map(r.before(a)),d)}return n&&n(p.scrollIntoView()),!0}}const Hj=qj(),Vj=(t,e)=>{let{$from:n,to:r}=t.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),e&&e(t.tr.setSelection(Ee.create(t.doc,s))),!0)};function Fj(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||Po(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function HN(t,e,n,r){let s=e.nodeBefore,o=e.nodeAfter,a,d,u=s.type.spec.isolating||o.type.spec.isolating;if(!u&&Fj(t,e,n))return!0;let f=!u&&e.parent.canReplace(e.index(),e.index()+1);if(f&&(a=(d=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&d.matchType(a[0]||o.type).validEnd){if(n){let w=e.pos+o.nodeSize,C=se.empty;for(let k=a.length-1;k>=0;k--)C=se.from(a[k].create(null,C));C=se.from(s.copy(C));let E=t.tr.step(new Yt(e.pos-1,w,e.pos,w,new ue(C,1,0),a.length,!0)),N=E.doc.resolve(w+2*a.length);N.nodeAfter&&N.nodeAfter.type==s.type&&Po(E.doc,N.pos)&&E.join(N.pos),n(E.scrollIntoView())}return!0}let p=o.type.spec.isolating||r>0&&u?null:Be.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),x=g&&Za(g);if(x!=null&&x>=e.depth)return n&&n(t.tr.lift(g,x).scrollIntoView()),!0;if(f&&$a(o,"start",!0)&&$a(s,"end")){let w=s,C=[];for(;C.push(w),!w.isTextblock;)w=w.lastChild;let E=o,N=1;for(;!E.isTextblock;E=E.firstChild)N++;if(w.canReplace(w.childCount,w.childCount,E.content)){if(n){let k=se.empty;for(let j=C.length-1;j>=0;j--)k=se.from(C[j].copy(k));let _=t.tr.step(new Yt(e.pos-C.length,e.pos+o.nodeSize,e.pos+N,e.pos+o.nodeSize-N,new ue(k,C.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function VN(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(e.tr.setSelection(je.create(e.doc,t<0?s.start(o):s.end(o)))),!0):!1}}const $j=VN(-1),Gj=VN(1);function Jj(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,a=s.blockRange(o),d=a&&O0(a,t,e);return d?(r&&r(n.tr.wrap(a,d).scrollIntoView()),!0):!1}}function Q1(t,e=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:a},$to:{pos:d}}=n.selection.ranges[o];n.doc.nodesBetween(a,d,(u,f)=>{if(s)return!1;if(!(!u.isTextblock||u.hasMarkup(t,e)))if(u.type==t)s=!0;else{let p=n.doc.resolve(f),g=p.index();s=p.parent.canReplaceWith(g,g+1,t)}})}if(!s)return!1;if(r){let o=n.tr;for(let a=0;a<n.selection.ranges.length;a++){let{$from:{pos:d},$to:{pos:u}}=n.selection.ranges[a];o.setBlockType(d,u,t,e)}r(o.scrollIntoView())}return!0}}function H0(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}H0(B0,IN,PN);H0(B0,LN,BN);H0(UN,zN,qN,Hj);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function Kj(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,a=s.blockRange(o);if(!a)return!1;let d=r?n.tr:null;return Wj(d,a,t,e)?(r&&r(d.scrollIntoView()),!0):!1}}function Wj(t,e,n,r=null){let s=!1,o=e,a=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let u=a.resolve(e.start-2);o=new Qu(u,u,e.depth),e.endIndex<e.parent.childCount&&(e=new Qu(e.$from,a.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let d=O0(o,n,r,e);return d?(t&&Yj(t,e,d,s,n),!0):!1}function Yj(t,e,n,r,s){let o=se.empty;for(let p=n.length-1;p>=0;p--)o=se.from(n[p].type.create(n[p].attrs,o));t.step(new Yt(e.start-(r?2:0),e.end,e.start,e.end,new ue(o,0,0),n.length,!0));let a=0;for(let p=0;p<n.length;p++)n[p].type==s&&(a=p+1);let d=n.length-a,u=e.start+n.length-(r?2:0),f=e.parent;for(let p=e.startIndex,g=e.endIndex,x=!0;p<g;p++,x=!1)!x&&Ns(t.doc,u,d)&&(t.split(u,d),u+=2*d),u+=f.child(p).nodeSize;return t}function Xj(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,a=>a.childCount>0&&a.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?Qj(e,n,t,o):Zj(e,n,o):!0:!1}}function Qj(t,e,n,r){let s=t.tr,o=r.end,a=r.$to.end(r.depth);o<a&&(s.step(new Yt(o-1,a,o,a,new ue(se.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Qu(s.doc.resolve(r.$from.pos),s.doc.resolve(a),r.depth));const d=Za(r);if(d==null)return!1;s.lift(r,d);let u=s.doc.resolve(s.mapping.map(o,-1)-1);return Po(s.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&s.join(u.pos),e(s.scrollIntoView()),!0}function Zj(t,e,n){let r=t.tr,s=n.parent;for(let w=n.end,C=n.endIndex-1,E=n.startIndex;C>E;C--)w-=s.child(C).nodeSize,r.delete(w-1,w+1);let o=r.doc.resolve(n.start),a=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let d=n.startIndex==0,u=n.endIndex==s.childCount,f=o.node(-1),p=o.index(-1);if(!f.canReplace(p+(d?0:1),p+1,a.content.append(u?se.empty:se.from(s))))return!1;let g=o.pos,x=g+a.nodeSize;return r.step(new Yt(g-(d?1:0),x+(u?1:0),g+1,x-1,new ue((d?se.empty:se.from(s.copy(se.empty))).append(u?se.empty:se.from(s.copy(se.empty))),d?0:1,u?0:1),d?0:1)),e(r.scrollIntoView()),!0}function e3(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,f=>f.childCount>0&&f.firstChild.type==t);if(!o)return!1;let a=o.startIndex;if(a==0)return!1;let d=o.parent,u=d.child(a-1);if(u.type!=t)return!1;if(n){let f=u.lastChild&&u.lastChild.type==d.type,p=se.from(f?t.create():null),g=new ue(se.from(t.create(null,se.from(d.type.create(null,p)))),f?3:1,0),x=o.start,w=o.end;n(e.tr.step(new Yt(x-(f?3:1),w,x,w,g,1,!0)).scrollIntoView())}return!0}}const an=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ga=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Ig=null;const vs=function(t,e,n){let r=Ig||(Ig=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},t3=function(){Ig=null},Di=function(t,e,n,r){return n&&(Z1(t,e,n,r,-1)||Z1(t,e,n,r,1))},n3=/^(img|br|input|textarea|hr)$/i;function Z1(t,e,n,r,s){for(var o;;){if(t==n&&e==r)return!0;if(e==(s<0?0:dr(t))){let a=t.parentNode;if(!a||a.nodeType!=1||Kc(t)||n3.test(t.nodeName)||t.contentEditable=="false")return!1;e=an(t)+(s<0?0:1),t=a}else if(t.nodeType==1){let a=t.childNodes[e+(s<0?-1:0)];if(a.nodeType==1&&a.contentEditable=="false")if(!((o=a.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else t=a,e=s<0?dr(t):0}else return!1}}function dr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function r3(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=dr(t)}else if(t.parentNode&&!Kc(t))e=an(t),t=t.parentNode;else return null}}function s3(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Kc(t))e=an(t)+1,t=t.parentNode;else return null}}function o3(t,e,n){for(let r=e==0,s=e==dr(t);r||s;){if(t==n)return!0;let o=an(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,s=s&&o==dr(t)}}function Kc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const nf=function(t){return t.focusNode&&Di(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function xi(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function i3(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function a3(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(dr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(dr(r.startContainer),r.startOffset)}}}const Vr=typeof navigator<"u"?navigator:null,ew=typeof document<"u"?document:null,Oo=Vr&&Vr.userAgent||"",Dg=/Edge\/(\d+)/.exec(Oo),FN=/MSIE \d/.exec(Oo),Pg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Oo),Pn=!!(FN||Pg||Dg),Ao=FN?document.documentMode:Pg?+Pg[1]:Dg?+Dg[1]:0,ur=!Pn&&/gecko\/(\d+)/i.test(Oo);ur&&+(/Firefox\/(\d+)/.exec(Oo)||[0,0])[1];const Og=!Pn&&/Chrome\/(\d+)/.exec(Oo),gn=!!Og,$N=Og?+Og[1]:0,Sn=!Pn&&!!Vr&&/Apple Computer/.test(Vr.vendor),Ja=Sn&&(/Mobile\/\w+/.test(Oo)||!!Vr&&Vr.maxTouchPoints>2),cr=Ja||(Vr?/Mac/.test(Vr.platform):!1),l3=Vr?/Win/.test(Vr.platform):!1,Ss=/Android \d/.test(Oo),Wc=!!ew&&"webkitFontSmoothing"in ew.documentElement.style,c3=Wc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function d3(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function ms(t,e){return typeof t=="number"?t:t[e]}function u3(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function tw(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let a=n||t.dom;a;){if(a.nodeType!=1){a=Ga(a);continue}let d=a,u=d==o.body,f=u?d3(o):u3(d),p=0,g=0;if(e.top<f.top+ms(r,"top")?g=-(f.top-e.top+ms(s,"top")):e.bottom>f.bottom-ms(r,"bottom")&&(g=e.bottom-e.top>f.bottom-f.top?e.top+ms(s,"top")-f.top:e.bottom-f.bottom+ms(s,"bottom")),e.left<f.left+ms(r,"left")?p=-(f.left-e.left+ms(s,"left")):e.right>f.right-ms(r,"right")&&(p=e.right-f.right+ms(s,"right")),p||g)if(u)o.defaultView.scrollBy(p,g);else{let w=d.scrollLeft,C=d.scrollTop;g&&(d.scrollTop+=g),p&&(d.scrollLeft+=p);let E=d.scrollLeft-w,N=d.scrollTop-C;e={left:e.left-E,top:e.top-N,right:e.right-E,bottom:e.bottom-N}}let x=u?"fixed":getComputedStyle(a).position;if(/^(fixed|sticky)$/.test(x))break;a=x=="absolute"?a.offsetParent:Ga(a)}}function h3(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,a=n+1;a<Math.min(innerHeight,e.bottom);a+=5){let d=t.root.elementFromPoint(o,a);if(!d||d==t.dom||!t.dom.contains(d))continue;let u=d.getBoundingClientRect();if(u.top>=n-20){r=d,s=u.top;break}}return{refDOM:r,refTop:s,stack:GN(t.dom)}}function GN(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Ga(r));return e}function f3({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;JN(n,r==0?0:r-e)}function JN(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:o}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let xa=null;function p3(t){if(t.setActive)return t.setActive();if(xa)return t.focus(xa);let e=GN(t);t.focus(xa==null?{get preventScroll(){return xa={preventScroll:!0},!0}}:void 0),xa||(xa=!1,JN(e,0))}function KN(t,e){let n,r=2e8,s,o=0,a=e.top,d=e.top,u,f;for(let p=t.firstChild,g=0;p;p=p.nextSibling,g++){let x;if(p.nodeType==1)x=p.getClientRects();else if(p.nodeType==3)x=vs(p).getClientRects();else continue;for(let w=0;w<x.length;w++){let C=x[w];if(C.top<=a&&C.bottom>=d){a=Math.max(C.bottom,a),d=Math.min(C.top,d);let E=C.left>e.left?C.left-e.left:C.right<e.left?e.left-C.right:0;if(E<r){n=p,r=E,s=E&&n.nodeType==3?{left:C.right<e.left?C.right:C.left,top:e.top}:e,p.nodeType==1&&E&&(o=g+(e.left>=(C.left+C.right)/2?1:0));continue}}else C.top>e.top&&!u&&C.left<=e.left&&C.right>=e.left&&(u=p,f={left:Math.max(C.left,Math.min(C.right,e.left)),top:C.top});!n&&(e.left>=C.right&&e.top>=C.top||e.left>=C.left&&e.top>=C.bottom)&&(o=g+1)}}return!n&&u&&(n=u,s=f,r=0),n&&n.nodeType==3?m3(n,s):!n||r&&n.nodeType==1?{node:t,offset:o}:KN(n,s)}function m3(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=bo(r,1);if(o.top!=o.bottom&&V0(e,o))return{node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function V0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function g3(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function b3(t,e,n){let{node:r,offset:s}=KN(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let a=r.getBoundingClientRect();o=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(r,s,o)}function x3(t,e,n,r){let s=-1;for(let o=e,a=!1;o!=t.dom;){let d=t.docView.nearestDesc(o,!0),u;if(!d)return null;if(d.dom.nodeType==1&&(d.node.isBlock&&d.parent||!d.contentDOM)&&((u=d.dom.getBoundingClientRect()).width||u.height)&&(d.node.isBlock&&d.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(d.dom.nodeName)&&(!a&&u.left>r.left||u.top>r.top?s=d.posBefore:(!a&&u.right<r.left||u.bottom<r.top)&&(s=d.posAfter),a=!0),!d.contentDOM&&s<0&&!d.node.isText))return(d.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?d.posBefore:d.posAfter;o=d.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function WN(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let a=t.childNodes[o];if(a.nodeType==1){let d=a.getClientRects();for(let u=0;u<d.length;u++){let f=d[u];if(V0(e,f))return WN(a,e,f)}}if((o=(o+1)%r)==s)break}return t}function y3(t,e){let n=t.dom.ownerDocument,r,s=0,o=a3(n,e.left,e.top);o&&({node:r,offset:s}=o);let a=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),d;if(!a||!t.dom.contains(a.nodeType!=1?a.parentNode:a)){let f=t.dom.getBoundingClientRect();if(!V0(e,f)||(a=WN(t.dom,e,f),!a))return null}if(Sn)for(let f=a;r&&f;f=Ga(f))f.draggable&&(r=void 0);if(a=g3(a,e),r){if(ur&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let p=r.childNodes[s],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&s++}let f;Wc&&s&&r.nodeType==1&&(f=r.childNodes[s-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?d=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(d=x3(t,r,s,e))}d==null&&(d=b3(t,a,e));let u=t.docView.nearestDesc(a,!0);return{pos:d,inside:u?u.posAtStart-u.border:-1}}function nw(t){return t.top<t.bottom||t.left<t.right}function bo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(nw(r))return r}return Array.prototype.find.call(n,nw)||t.getBoundingClientRect()}const v3=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function YN(t,e,n){let{node:r,offset:s,atom:o}=t.docView.domFromPos(e,n<0?-1:1),a=Wc||ur;if(r.nodeType==3)if(a&&(v3.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let u=bo(vs(r,s,s),n);if(ur&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let f=bo(vs(r,s-1,s-1),-1);if(f.top==u.top){let p=bo(vs(r,s,s+1),-1);if(p.top!=u.top)return ic(p,p.left<f.left)}}return u}else{let u=s,f=s,p=n<0?1:-1;return n<0&&!s?(f++,p=-1):n>=0&&s==r.nodeValue.length?(u--,p=1):n<0?u--:f++,ic(bo(vs(r,u,f),p),p<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==dr(r))){let u=r.childNodes[s-1];if(u.nodeType==1)return Gm(u.getBoundingClientRect(),!1)}if(o==null&&s<dr(r)){let u=r.childNodes[s];if(u.nodeType==1)return Gm(u.getBoundingClientRect(),!0)}return Gm(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==dr(r))){let u=r.childNodes[s-1],f=u.nodeType==3?vs(u,dr(u)-(a?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(f)return ic(bo(f,1),!1)}if(o==null&&s<dr(r)){let u=r.childNodes[s];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let f=u?u.nodeType==3?vs(u,0,a?0:1):u.nodeType==1?u:null:null;if(f)return ic(bo(f,-1),!0)}return ic(bo(r.nodeType==3?vs(r):r,-n),n>=0)}function ic(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Gm(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function XN(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function w3(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return XN(t,e,()=>{let{node:o}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let d=t.docView.nearestDesc(o,!0);if(!d)break;if(d.node.isBlock){o=d.contentDOM||d.dom;break}o=d.dom.parentNode}let a=YN(t,s.pos,1);for(let d=o.firstChild;d;d=d.nextSibling){let u;if(d.nodeType==1)u=d.getClientRects();else if(d.nodeType==3)u=vs(d,0,d.nodeValue.length).getClientRects();else continue;for(let f=0;f<u.length;f++){let p=u[f];if(p.bottom>p.top+1&&(n=="up"?a.top-p.top>(p.bottom-a.top)*2:p.bottom-a.bottom>(a.bottom-p.top)*2))return!1}}return!0})}const S3=/[\u0590-\u08ac]/;function C3(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,a=s==r.parent.content.size,d=t.domSelection();return d?!S3.test(r.parent.textContent)||!d.modify?n=="left"||n=="backward"?o:a:XN(t,e,()=>{let{focusNode:u,focusOffset:f,anchorNode:p,anchorOffset:g}=t.domSelectionRange(),x=d.caretBidiLevel;d.modify("move",n,"character");let w=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:C,focusOffset:E}=t.domSelectionRange(),N=C&&!w.contains(C.nodeType==1?C:C.parentNode)||u==C&&f==E;try{d.collapse(p,g),u&&(u!=p||f!=g)&&d.extend&&d.extend(u,f)}catch{}return x!=null&&(d.caretBidiLevel=x),N}):r.pos==r.start()||r.pos==r.end()}let rw=null,sw=null,ow=!1;function N3(t,e,n){return rw==e&&sw==n?ow:(rw=e,sw=n,ow=n=="up"||n=="down"?w3(t,e,n):C3(t,e,n))}const hr=0,iw=1,wi=2,Fr=3;class Yc{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=hr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,a;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(a)+a.size:this.posAtStart}else{let o,a;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((a=o.pmViewDesc)&&a.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(a):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>an(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),a;if(o&&(!n||o.node))if(r&&(a=o.nodeDOM)&&!(a.nodeType==1?a.contains(e.nodeType==1?e:e.parentNode):a==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let a=0;a<s.children.length;a++){let d=s.children[a];if(d.size){s=d;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let a=this.children[r],d=o+a.size;if(d>e||a instanceof ZN){s=e-o;break}o=d}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof QN&&o.side>=0;r--);if(n<=0){let o,a=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,a=!1);return o&&n&&a&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?an(o.dom)+1:0}}else{let o,a=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,a=!1);return o&&a&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?an(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let a=r,d=0;;d++){let u=this.children[d],f=a+u.size;if(s==-1&&e<=f){let p=a+u.border;if(e>=p&&n<=f-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(e,n,p);e=a;for(let g=d;g>0;g--){let x=this.children[g-1];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(1)){s=an(x.dom)+1;break}e-=x.size}s==-1&&(s=0)}if(s>-1&&(f>n||d==this.children.length-1)){n=f;for(let p=d+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){o=an(g.dom);break}n+=g.size}o==-1&&(o=this.contentDOM.childNodes.length);break}a=f}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let o=Math.min(e,n),a=Math.max(e,n);for(let w=0,C=0;w<this.children.length;w++){let E=this.children[w],N=C+E.size;if(o>C&&a<N)return E.setSelection(e-C-E.border,n-C-E.border,r,s);C=N}let d=this.domFromPos(e,e?-1:1),u=n==e?d:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((ur||Sn)&&e==n){let{node:w,offset:C}=d;if(w.nodeType==3){if(g=!!(C&&w.nodeValue[C-1]==`
`),g&&C==w.nodeValue.length)for(let E=w,N;E;E=E.parentNode){if(N=E.nextSibling){N.nodeName=="BR"&&(d=u={node:N.parentNode,offset:an(N)+1});break}let k=E.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let E=w.childNodes[C-1];g=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(ur&&p.focusNode&&p.focusNode!=u.node&&p.focusNode.nodeType==1){let w=p.focusNode.childNodes[p.focusOffset];w&&w.contentEditable=="false"&&(s=!0)}if(!(s||g&&Sn)&&Di(d.node,d.offset,p.anchorNode,p.anchorOffset)&&Di(u.node,u.offset,p.focusNode,p.focusOffset))return;let x=!1;if((f.extend||e==n)&&!(g&&ur)){f.collapse(d.node,d.offset);try{e!=n&&f.extend(u.node,u.offset),x=!0}catch{}}if(!x){if(e>n){let C=d;d=u,u=C}let w=document.createRange();w.setEnd(u.node,u.offset),w.setStart(d.node,d.offset),f.removeAllRanges(),f.addRange(w)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],a=r+o.size;if(r==a?e<=a&&n>=r:e<a&&n>r){let d=r+o.border,u=a-o.border;if(e>=d&&n<=u){this.dirty=e==r||n==a?wi:iw,e==d&&n==u&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Fr:o.markDirty(e-d,n-d);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?wi:Fr}r=a}this.dirty=wi}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?wi:iw;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class QN extends Yc{constructor(e,n,r,s){let o,a=n.type.toDOM;if(typeof a=="function"&&(a=a(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(a.nodeType!=1){let d=document.createElement("span");d.appendChild(a),a=d}a.contentEditable="false",a.classList.add("ProseMirror-widget")}super(e,[],a,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==hr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class E3 extends Yc{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Pi extends Yc{constructor(e,n,r,s,o){super(e,[],r,s),this.mark=n,this.spec=o}static create(e,n,r,s){let o=s.nodeViews[n.type.name],a=o&&o(n,s,r);return(!a||!a.dom)&&(a=Li.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Pi(e,n,a.dom,a.contentDOM||a.dom,a)}parseRule(){return this.dirty&Fr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Fr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=hr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=hr}}slice(e,n,r){let s=Pi.create(this.parent,this.mark,!0,r),o=this.children,a=this.size;n<a&&(o=Bg(o,n,a,r)),e>0&&(o=Bg(o,0,e,r));for(let d=0;d<o.length;d++)o[d].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class _o extends Yc{constructor(e,n,r,s,o,a,d,u,f){super(e,[],o,a),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=d}static create(e,n,r,s,o,a){let d=o.nodeViews[n.type.name],u,f=d&&d(n,o,()=>{if(!u)return a;if(u.parent)return u.parent.posBeforeChild(u)},r,s),p=f&&f.dom,g=f&&f.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=Li.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let x=p;return p=nE(p,r,n),f?u=new T3(e,n,r,s,p,g||null,x,f,o,a+1):n.isText?new rf(e,n,r,s,p,x,o):new _o(e,n,r,s,p,g||null,x,o,a+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>se.empty)}return e}matchesNode(e,n,r){return this.dirty==hr&&e.eq(this.node)&&eh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,o=e.composing?this.localCompositionInfo(e,n):null,a=o&&o.pos>-1?o:null,d=o&&o.pos<0,u=new A3(this,a&&a.node,e);M3(this.node,this.innerDeco,(f,p,g)=>{f.spec.marks?u.syncToMarks(f.spec.marks,r,e):f.type.side>=0&&!g&&u.syncToMarks(p==this.node.childCount?lt.none:this.node.child(p).marks,r,e),u.placeWidget(f,e,s)},(f,p,g,x)=>{u.syncToMarks(f.marks,r,e);let w;u.findNodeMatch(f,p,g,x)||d&&e.state.selection.from>s&&e.state.selection.to<s+f.nodeSize&&(w=u.findIndexWithChild(o.node))>-1&&u.updateNodeAt(f,p,g,w,e)||u.updateNextNode(f,p,g,e,x,s)||u.addNode(f,p,g,e,s),s+=f.nodeSize}),u.syncToMarks([],r,e),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==wi)&&(a&&this.protectLocalComposition(e,a),eE(this.contentDOM,this.children,e),Ja&&R3(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof je)||r<n||s>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let a=o.nodeValue,d=I3(this.node.content,a,r-n,s-n);return d<0?null:{node:o,pos:d,text:a}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let a=new E3(this,o,n,s);e.input.compositionNodes.push(a),this.children=Bg(this.children,r,r+s.length,e,a)}update(e,n,r,s){return this.dirty==Fr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=hr}updateOuterDeco(e){if(eh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=tE(this.dom,this.nodeDOM,Lg(this.outerDeco,this.node,n),Lg(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function aw(t,e,n,r,s){nE(r,e,t);let o=new _o(void 0,t,e,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class rf extends _o{constructor(e,n,r,s,o,a,d){super(e,n,r,s,o,null,a,d,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Fr||this.dirty!=hr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=hr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=hr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),o=document.createTextNode(s.text);return new rf(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Fr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class ZN extends Yc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==hr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class T3 extends _o{constructor(e,n,r,s,o,a,d,u,f,p){super(e,n,r,s,o,a,d,f,p),this.spec=u}update(e,n,r,s){if(this.dirty==Fr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function eE(t,e,n){let r=t.firstChild,s=!1;for(let o=0;o<e.length;o++){let a=e[o],d=a.dom;if(d.parentNode==t){for(;d!=r;)r=lw(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(d,r);if(a instanceof Pi){let u=r?r.previousSibling:t.lastChild;eE(a.contentDOM,a.children,n),r=u?u.nextSibling:t.firstChild}}for(;r;)r=lw(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const xc=function(t){t&&(this.nodeName=t)};xc.prototype=Object.create(null);const Si=[new xc];function Lg(t,e,n){if(t.length==0)return Si;let r=n?Si[0]:new xc,s=[r];for(let o=0;o<t.length;o++){let a=t[o].type.attrs;if(a){a.nodeName&&s.push(r=new xc(a.nodeName));for(let d in a){let u=a[d];u!=null&&(n&&s.length==1&&s.push(r=new xc(e.isInline?"span":"div")),d=="class"?r.class=(r.class?r.class+" ":"")+u:d=="style"?r.style=(r.style?r.style+";":"")+u:d!="nodeName"&&(r[d]=u))}}}return s}function tE(t,e,n,r){if(n==Si&&r==Si)return e;let s=e;for(let o=0;o<r.length;o++){let a=r[o],d=n[o];if(o){let u;d&&d.nodeName==a.nodeName&&s!=t&&(u=s.parentNode)&&u.nodeName.toLowerCase()==a.nodeName||(u=document.createElement(a.nodeName),u.pmIsDeco=!0,u.appendChild(s),d=Si[0]),s=u}k3(s,d||Si[0],a)}return s}function k3(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&t.classList.add(s[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function nE(t,e,n){return tE(t,t,Si,Lg(e,n,t.nodeType!=1))}function eh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function lw(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class A3{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=_3(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,o=this.stack.length>>1,a=Math.min(o,e.length);for(;s<a&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=hr,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let d=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let f=this.top.children[u];if(f.matchesMark(e[o])&&!this.isLocked(f.dom)){d=u;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let u=Pi.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let o=-1,a;if(s>=this.preMatch.index&&(a=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&a.matchesNode(e,n,r))o=this.top.children.indexOf(a,this.index);else for(let d=this.index,u=Math.min(this.top.children.length,d+5);d<u;d++){let f=this.top.children[d];if(f.matchesNode(e,n,r)&&!this.preMatch.matched.has(f)){o=d;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,s,o){let a=this.top.children[s];return a.dirty==Fr&&a.dom==a.contentDOM&&(a.dirty=wi),a.update(e,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,o,a){for(let d=this.index;d<this.top.children.length;d++){let u=this.top.children[d];if(u instanceof _o){let f=this.preMatch.matched.get(u);if(f!=null&&f!=o)return!1;let p=u.dom,g,x=this.isLocked(p)&&!(e.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==e.text&&u.dirty!=Fr&&eh(n,u.outerDeco));if(!x&&u.update(e,n,r,s))return this.destroyBetween(this.index,d),u.dom!=p&&(this.changed=!0),this.index++,!0;if(!x&&(g=this.recreateWrapper(u,e,n,r,s,a)))return this.destroyBetween(this.index,d),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=wi,g.updateChildren(s,a+1),g.dirty=hr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,o,a){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!eh(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let d=_o.create(this.top,n,r,s,o,a);if(d.contentDOM){d.children=e.children,e.children=[];for(let u of d.children)u.parent=d}return e.destroy(),d}addNode(e,n,r,s,o){let a=_o.create(this.top,e,n,r,s,o);a.contentDOM&&a.updateChildren(s,o+1),this.top.children.splice(this.index++,0,a),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new QN(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Pi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof rf)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Sn||gn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new ZN(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function _3(t,e){let n=e,r=n.children.length,s=t.childCount,o=new Map,a=[];e:for(;s>0;){let d;for(;;)if(r){let f=n.children[r-1];if(f instanceof Pi)n=f,r=f.children.length;else{d=f,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=d.node;if(u){if(u!=t.child(s-1))break;--s,o.set(d,s),a.push(d)}}return{index:s,matched:o,matches:a.reverse()}}function j3(t,e){return t.type.side-e.type.side}function M3(t,e,n,r){let s=e.locals(t),o=0;if(s.length==0){for(let f=0;f<t.childCount;f++){let p=t.child(f);r(p,s,e.forChild(o,p),f),o+=p.nodeSize}return}let a=0,d=[],u=null;for(let f=0;;){let p,g;for(;a<s.length&&s[a].to==o;){let N=s[a++];N.widget&&(p?(g||(g=[p])).push(N):p=N)}if(p)if(g){g.sort(j3);for(let N=0;N<g.length;N++)n(g[N],f,!!u)}else n(p,f,!!u);let x,w;if(u)w=-1,x=u,u=null;else if(f<t.childCount)w=f,x=t.child(f++);else break;for(let N=0;N<d.length;N++)d[N].to<=o&&d.splice(N--,1);for(;a<s.length&&s[a].from<=o&&s[a].to>o;)d.push(s[a++]);let C=o+x.nodeSize;if(x.isText){let N=C;a<s.length&&s[a].from<N&&(N=s[a].from);for(let k=0;k<d.length;k++)d[k].to<N&&(N=d[k].to);N<C&&(u=x.cut(N-o),x=x.cut(0,N-o),C=N,w=-1)}else for(;a<s.length&&s[a].to<C;)a++;let E=x.isInline&&!x.isLeaf?d.filter(N=>!N.inline):d.slice();r(x,E,e.forChild(o,x),w),o=C}}function R3(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function I3(t,e,n,r){for(let s=0,o=0;s<t.childCount&&o<=r;){let a=t.child(s++),d=o;if(o+=a.nodeSize,!a.isText)continue;let u=a.text;for(;s<t.childCount;){let f=t.child(s++);if(o+=f.nodeSize,!f.isText)break;u+=f.text}if(o>=n){if(o>=r&&u.slice(r-e.length-d,r-d)==e)return r-e.length;let f=d<r?u.lastIndexOf(e,r-d-1):-1;if(f>=0&&f+e.length+d>=n)return d+f;if(n==r&&u.length>=r+e.length-d&&u.slice(r-d,r-d+e.length)==e)return r}}return-1}function Bg(t,e,n,r,s){let o=[];for(let a=0,d=0;a<t.length;a++){let u=t[a],f=d,p=d+=u.size;f>=n||p<=e?o.push(u):(f<e&&o.push(u.slice(0,e-f,r)),s&&(o.push(s),s=void 0),p>n&&o.push(u.slice(n-f,u.size,r)))}return o}function F0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),o=s&&s.size==0,a=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(a<0)return null;let d=r.resolve(a),u,f;if(nf(n)){for(u=a;s&&!s.node;)s=s.parent;let g=s.node;if(s&&g.isAtom&&Ee.isSelectable(g)&&s.parent&&!(g.isInline&&o3(n.focusNode,n.focusOffset,s.dom))){let x=s.posBefore;f=new Ee(a==x?d:r.resolve(x))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=a,x=a;for(let w=0;w<n.rangeCount;w++){let C=n.getRangeAt(w);g=Math.min(g,t.docView.posFromDOM(C.startContainer,C.startOffset,1)),x=Math.max(x,t.docView.posFromDOM(C.endContainer,C.endOffset,-1))}if(g<0)return null;[u,a]=x==t.state.selection.anchor?[x,g]:[g,x],d=r.resolve(a)}else u=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let p=r.resolve(u);if(!f){let g=e=="pointer"||t.state.selection.head<d.pos&&!o?1:-1;f=$0(t,p,d,g)}return f}function rE(t){return t.editable?t.hasFocus():oE(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Es(t,e=!1){let n=t.state.selection;if(sE(t,n),!!rE(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&gn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&Di(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)P3(t);else{let{anchor:r,head:s}=n,o,a;cw&&!(n instanceof je)&&(n.$from.parent.inlineContent||(o=dw(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(a=dw(t,n.to))),t.docView.setSelection(r,s,t,e),cw&&(o&&uw(o),a&&uw(a)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&D3(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const cw=Sn||gn&&$N<63;function dw(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(Sn&&s&&s.contentEditable=="false")return Jm(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return Jm(s);if(o)return Jm(o)}}function Jm(t){return t.contentEditable="true",Sn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function uw(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function D3(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!rE(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function P3(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,an(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Pn&&Ao<=11&&(n.disabled=!0,n.disabled=!1)}function sE(t,e){if(e instanceof Ee){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(hw(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else hw(t)}function hw(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function $0(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||je.between(e,n,r)}function fw(t){return t.editable&&!t.hasFocus()?!1:oE(t)}function oE(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function O3(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Di(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Ug(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Be.findFrom(o,e)}function xo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function pw(t,e,n){let r=t.state.selection;if(r instanceof je)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let a=t.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return xo(t,new je(r.$anchor,a))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Ug(t.state,e);return s&&s instanceof Ee?xo(t,s):!1}else if(!(cr&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,a;if(!o||o.isText)return!1;let d=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(a=t.docView.descAt(d))&&!a.contentDOM?Ee.isSelectable(o)?xo(t,new Ee(e<0?t.state.doc.resolve(s.pos-o.nodeSize):s)):Wc?xo(t,new je(t.state.doc.resolve(e<0?d:d+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ee&&r.node.isInline)return xo(t,new je(e>0?r.$to:r.$from));{let s=Ug(t.state,e);return s?xo(t,s):!1}}}function th(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function yc(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ya(t,e){return e<0?L3(t):B3(t)}function L3(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,o,a=!1;for(ur&&n.nodeType==1&&r<th(n)&&yc(n.childNodes[r],-1)&&(a=!0);;)if(r>0){if(n.nodeType!=1)break;{let d=n.childNodes[r-1];if(yc(d,-1))s=n,o=--r;else if(d.nodeType==3)n=d,r=n.nodeValue.length;else break}}else{if(iE(n))break;{let d=n.previousSibling;for(;d&&yc(d,-1);)s=n.parentNode,o=an(d),d=d.previousSibling;if(d)n=d,r=th(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}a?zg(t,n,r):s&&zg(t,s,o)}function B3(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=th(n),o,a;for(;;)if(r<s){if(n.nodeType!=1)break;let d=n.childNodes[r];if(yc(d,1))o=n,a=++r;else break}else{if(iE(n))break;{let d=n.nextSibling;for(;d&&yc(d,1);)o=d.parentNode,a=an(d)+1,d=d.nextSibling;if(d)n=d,r=0,s=th(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&zg(t,o,a)}function iE(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function U3(t,e){for(;t&&e==t.childNodes.length&&!Kc(t);)e=an(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function z3(t,e){for(;t&&!e&&!Kc(t);)e=an(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function zg(t,e,n){if(e.nodeType!=3){let o,a;(a=U3(e,n))?(e=a,n=0):(o=z3(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(nf(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Es(t)},50)}function mw(t,e){let n=t.state.doc.resolve(e);if(!(gn||l3)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),a=(o.top+o.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),a=(o.top+o.bottom)/2;if(a>s.top&&a<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function gw(t,e,n){let r=t.state.selection;if(r instanceof je&&!r.empty||n.indexOf("s")>-1||cr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let a=Ug(t.state,e);if(a&&a instanceof Ee)return xo(t,a)}if(!s.parent.inlineContent){let a=e<0?s:o,d=r instanceof Yn?Be.near(a,e):Be.findFrom(a,e);return d?xo(t,d):!1}return!1}function bw(t,e){if(!(t.state.selection instanceof je))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let a=t.state.tr;return e<0?a.delete(n.pos-o.nodeSize,n.pos):a.delete(n.pos,n.pos+o.nodeSize),t.dispatch(a),!0}return!1}function xw(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function q3(t){if(!Sn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;xw(t,r,"true"),setTimeout(()=>xw(t,r,"false"),20)}return!1}function H3(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function V3(t,e){let n=e.keyCode,r=H3(e);if(n==8||cr&&n==72&&r=="c")return bw(t,-1)||ya(t,-1);if(n==46&&!e.shiftKey||cr&&n==68&&r=="c")return bw(t,1)||ya(t,1);if(n==13||n==27)return!0;if(n==37||cr&&n==66&&r=="c"){let s=n==37?mw(t,t.state.selection.from)=="ltr"?-1:1:-1;return pw(t,s,r)||ya(t,s)}else if(n==39||cr&&n==70&&r=="c"){let s=n==39?mw(t,t.state.selection.from)=="ltr"?1:-1:1;return pw(t,s,r)||ya(t,s)}else{if(n==38||cr&&n==80&&r=="c")return gw(t,-1,r)||ya(t,-1);if(n==40||cr&&n==78&&r=="c")return q3(t)||gw(t,1,r)||ya(t,1);if(r==(cr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function G0(t,e){t.someProp("transformCopied",w=>{e=w(e,t)});let n=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let w=r.firstChild;n.push(w.type.name,w.attrs!=w.type.defaultAttrs?w.attrs:null),r=w.content}let a=t.someProp("clipboardSerializer")||Li.fromSchema(t.state.schema),d=hE(),u=d.createElement("div");u.appendChild(a.serializeFragment(r,{document:d}));let f=u.firstChild,p,g=0;for(;f&&f.nodeType==1&&(p=uE[f.nodeName.toLowerCase()]);){for(let w=p.length-1;w>=0;w--){let C=d.createElement(p[w]);for(;u.firstChild;)C.appendChild(u.firstChild);u.appendChild(C),g++}f=u.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${s} ${o}${g?` -${g}`:""} ${JSON.stringify(n)}`);let x=t.someProp("clipboardTextSerializer",w=>w(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:u,text:x,slice:e}}function aE(t,e,n,r,s){let o=s.parent.type.spec.code,a,d;if(!n&&!e)return null;let u=!!e&&(r||o||!n);if(u){if(t.someProp("transformPastedText",x=>{e=x(e,o||r,t)}),o)return d=new ue(se.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",x=>{d=x(d,t,!0)}),d;let g=t.someProp("clipboardTextParser",x=>x(e,s,r,t));if(g)d=g;else{let x=s.marks(),{schema:w}=t.state,C=Li.fromSchema(w);a=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let N=a.appendChild(document.createElement("p"));E&&N.appendChild(C.serializeNode(w.text(E,x)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),a=J3(n),Wc&&K3(a);let f=a&&a.querySelector("[data-pm-slice]"),p=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let x=a.firstChild;for(;x&&x.nodeType!=1;)x=x.nextSibling;if(!x)break;a=x}if(d||(d=(t.someProp("clipboardParser")||t.someProp("domParser")||ko.fromSchema(t.state.schema)).parseSlice(a,{preserveWhitespace:!!(u||p),context:s,ruleFromNode(x){return x.nodeName=="BR"&&!x.nextSibling&&x.parentNode&&!F3.test(x.parentNode.nodeName)?{ignore:!0}:null}})),p)d=W3(yw(d,+p[1],+p[2]),p[4]);else if(d=ue.maxOpen($3(d.content,s),!0),d.openStart||d.openEnd){let g=0,x=0;for(let w=d.content.firstChild;g<d.openStart&&!w.type.spec.isolating;g++,w=w.firstChild);for(let w=d.content.lastChild;x<d.openEnd&&!w.type.spec.isolating;x++,w=w.lastChild);d=yw(d,g,x)}return t.someProp("transformPasted",g=>{d=g(d,t,u)}),d}const F3=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function $3(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),o,a=[];if(t.forEach(d=>{if(!a)return;let u=s.findWrapping(d.type),f;if(!u)return a=null;if(f=a.length&&o.length&&cE(u,o,d,a[a.length-1],0))a[a.length-1]=f;else{a.length&&(a[a.length-1]=dE(a[a.length-1],o.length));let p=lE(d,u);a.push(p),s=s.matchType(p.type),o=u}}),a)return se.from(a)}return t}function lE(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,se.from(t));return t}function cE(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let o=cE(t,e,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(se.from(lE(n,t,s+1))))}}function dE(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,dE(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(se.empty,!0);return t.copy(n.append(r))}function qg(t,e,n,r,s,o){let a=e<0?t.firstChild:t.lastChild,d=a.content;return t.childCount>1&&(o=0),s<r-1&&(d=qg(d,e,n,r,s+1,o)),s>=n&&(d=e<0?a.contentMatchAt(0).fillBefore(d,o<=s).append(d):d.append(a.contentMatchAt(a.childCount).fillBefore(se.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(d))}function yw(t,e,n){return e<t.openStart&&(t=new ue(qg(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ue(qg(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const uE={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let vw=null;function hE(){return vw||(vw=document.implementation.createHTMLDocument("title"))}let Km=null;function G3(t){let e=window.trustedTypes;return e?(Km||(Km=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Km.createHTML(t)):t}function J3(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=hE().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&uE[r[1].toLowerCase()])&&(t=s.map(o=>"<"+o+">").join("")+t+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=G3(t),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function K3(t){let e=t.querySelectorAll(gn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function W3(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:o,openEnd:a}=t;for(let d=r.length-2;d>=0;d-=2){let u=n.nodes[r[d]];if(!u||u.hasRequiredAttrs())break;s=se.from(u.create(r[d+1],s)),o++,a++}return new ue(s,o,a)}const Cn={},Nn={},Y3={touchstart:!0,touchmove:!0};class X3{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Q3(t){for(let e in Cn){let n=Cn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{e4(t,r)&&!J0(t,r)&&(t.editable||!(r.type in Nn))&&n(t,r)},Y3[e]?{passive:!0}:void 0)}Sn&&t.dom.addEventListener("input",()=>null),Hg(t)}function To(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Z3(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Hg(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>J0(t,r))})}function J0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function e4(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function t4(t,e){!J0(t,e)&&Cn[e.type]&&(t.editable||!(e.type in Nn))&&Cn[e.type](t,e)}Nn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!pE(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ss&&gn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Ja&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,xi(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||V3(t,n)?n.preventDefault():To(t,"key")};Nn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Nn.keypress=(t,e)=>{let n=e;if(pE(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||cr&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof je)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",a=>a(t,r.$from.pos,r.$to.pos,s,o))&&t.dispatch(o()),n.preventDefault()}};function sf(t){return{left:t.clientX,top:t.clientY}}function n4(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function K0(t,e,n,r,s){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let a=o.depth+1;a>0;a--)if(t.someProp(e,d=>a>o.depth?d(t,n,o.nodeAfter,o.before(a),s,!0):d(t,n,o.node(a),o.before(a),s,!1)))return!0;return!1}function Oa(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function r4(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ee.isSelectable(r)?(Oa(t,new Ee(n)),!0):!1}function s4(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Ee&&(r=n.node);let o=t.state.doc.resolve(e);for(let a=o.depth+1;a>0;a--){let d=a>o.depth?o.nodeAfter:o.node(a);if(Ee.isSelectable(d)){r&&n.$from.depth>0&&a>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(a);break}}return s!=null?(Oa(t,Ee.create(t.state.doc,s)),!0):!1}function o4(t,e,n,r,s){return K0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(s?s4(t,n):r4(t,n))}function i4(t,e,n,r){return K0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function a4(t,e,n,r){return K0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||l4(t,n,r)}function l4(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Oa(t,je.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let a=o>s.depth?s.nodeAfter:s.node(o),d=s.before(o);if(a.inlineContent)Oa(t,je.create(r,d+1,d+1+a.content.size));else if(Ee.isSelectable(a))Oa(t,Ee.create(r,d));else continue;return!0}}function W0(t){return nh(t)}const fE=cr?"metaKey":"ctrlKey";Cn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=W0(t),s=Date.now(),o="singleClick";s-t.input.lastClick.time<500&&n4(n,t.input.lastClick)&&!n[fE]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let a=t.posAtCoords(sf(n));a&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new c4(t,a,n,!!r)):(o=="doubleClick"?i4:a4)(t,a.pos,a.inside,n)?n.preventDefault():To(t,"pointer"))};class c4{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[fE],this.allowDefault=r.shiftKey;let o,a;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),a=n.inside;else{let p=e.state.doc.resolve(n.pos);o=p.parent,a=p.depth?p.before():0}const d=s?null:r.target,u=d?e.docView.nearestDesc(d,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:f}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||f instanceof Ee&&f.from<=a&&f.to>a)&&(this.mightDrag={node:o,pos:a,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&ur&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),To(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Es(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(sf(e))),this.updateAllowDefault(e),this.allowDefault||!n?To(this.view,"pointer"):o4(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Sn&&this.mightDrag&&!this.mightDrag.node.isAtom||gn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Oa(this.view,Be.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):To(this.view,"pointer")}move(e){this.updateAllowDefault(e),To(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Cn.touchstart=t=>{t.input.lastTouch=Date.now(),W0(t),To(t,"pointer")};Cn.touchmove=t=>{t.input.lastTouch=Date.now(),To(t,"pointer")};Cn.contextmenu=t=>W0(t);function pE(t,e){return t.composing?!0:Sn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const d4=Ss?5e3:-1;Nn.compositionstart=Nn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof je&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),nh(t,!0),t.markCursor=null;else if(nh(t,!e.selection.empty),ur&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let a=o<0?s.lastChild:s.childNodes[o-1];if(!a)break;if(a.nodeType==3){let d=t.domSelection();d&&d.collapse(a,a.nodeValue.length);break}else s=a,o=-1}}t.input.composing=!0}mE(t,d4)};Nn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,mE(t,20))};function mE(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>nh(t),e))}function gE(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=h4());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function u4(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=r3(e.focusNode,e.focusOffset),r=s3(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let a=n.pmViewDesc;if(!(!a||!a.isText(n.nodeValue)))return r}}return n||r}function h4(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function nh(t,e=!1){if(!(Ss&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),gE(t),e||t.docView&&t.docView.dirty){let n=F0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function f4(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Oc=Pn&&Ao<15||Ja&&c3<604;Cn.copy=Nn.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let o=Oc?null:n.clipboardData,a=r.content(),{dom:d,text:u}=G0(t,a);o?(n.preventDefault(),o.clearData(),o.setData("text/html",d.innerHTML),o.setData("text/plain",u)):f4(t,d),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function p4(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function m4(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Lc(t,r.value,null,s,e):Lc(t,r.textContent,r.innerHTML,s,e)},50)}function Lc(t,e,n,r,s){let o=aE(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",u=>u(t,s,o||ue.empty)))return!0;if(!o)return!1;let a=p4(o),d=a?t.state.tr.replaceSelectionWith(a,r):t.state.tr.replaceSelection(o);return t.dispatch(d.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function bE(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Nn.paste=(t,e)=>{let n=e;if(t.composing&&!Ss)return;let r=Oc?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Lc(t,bE(r),r.getData("text/html"),s,n)?n.preventDefault():m4(t,n)};class xE{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const g4=cr?"altKey":"ctrlKey";function yE(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[g4]}Cn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,o=s.empty?null:t.posAtCoords(sf(n)),a;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Ee?s.to-1:s.to))){if(r&&r.mightDrag)a=Ee.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(a=Ee.create(t.state.doc,g.posBefore))}}let d=(a||t.state.selection).content(),{dom:u,text:f,slice:p}=G0(t,d);(!n.dataTransfer.files.length||!gn||$N>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Oc?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Oc||n.dataTransfer.setData("text/plain",f),t.dragging=new xE(p,yE(t,n),a)};Cn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Nn.dragover=Nn.dragenter=(t,e)=>e.preventDefault();Nn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(sf(n));if(!s)return;let o=t.state.doc.resolve(s.pos),a=r&&r.slice;a?t.someProp("transformPasted",C=>{a=C(a,t,!1)}):a=aE(t,bE(n.dataTransfer),Oc?null:n.dataTransfer.getData("text/html"),!1,o);let d=!!(r&&yE(t,n));if(t.someProp("handleDrop",C=>C(t,n,a||ue.empty,d))){n.preventDefault();return}if(!a)return;n.preventDefault();let u=a?NN(t.state.doc,o.pos,a):o.pos;u==null&&(u=o.pos);let f=t.state.tr;if(d){let{node:C}=r;C?C.replace(f):f.deleteSelection()}let p=f.mapping.map(u),g=a.openStart==0&&a.openEnd==0&&a.content.childCount==1,x=f.doc;if(g?f.replaceRangeWith(p,p,a.content.firstChild):f.replaceRange(p,p,a),f.doc.eq(x))return;let w=f.doc.resolve(p);if(g&&Ee.isSelectable(a.content.firstChild)&&w.nodeAfter&&w.nodeAfter.sameMarkup(a.content.firstChild))f.setSelection(new Ee(w));else{let C=f.mapping.map(u);f.mapping.maps[f.mapping.maps.length-1].forEach((E,N,k,_)=>C=_),f.setSelection($0(t,w,f.doc.resolve(C)))}t.focus(),t.dispatch(f.setMeta("uiEvent","drop"))};Cn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Es(t)},20))};Cn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Cn.beforeinput=(t,e)=>{if(gn&&Ss&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,xi(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Nn)Cn[t]=Nn[t];function Bc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class rh{constructor(e,n){this.toDOM=e,this.spec=n||Ai,this.side=this.spec.side||0}map(e,n,r,s){let{pos:o,deleted:a}=e.mapResult(n.from+s,this.side<0?-1:1);return a?null:new wn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof rh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Bc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jo{constructor(e,n){this.attrs=e,this.spec=n||Ai}map(e,n,r,s){let o=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,a=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=a?null:new wn(o,a,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof jo&&Bc(this.attrs,e.attrs)&&Bc(this.spec,e.spec)}static is(e){return e.type instanceof jo}destroy(){}}class Y0{constructor(e,n){this.attrs=e,this.spec=n||Ai}map(e,n,r,s){let o=e.mapResult(n.from+s,1);if(o.deleted)return null;let a=e.mapResult(n.to+s,-1);return a.deleted||a.pos<=o.pos?null:new wn(o.pos-r,a.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),o;return s==n.from&&!(o=e.child(r)).isText&&s+o.nodeSize==n.to}eq(e){return this==e||e instanceof Y0&&Bc(this.attrs,e.attrs)&&Bc(this.spec,e.spec)}destroy(){}}class wn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new wn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new wn(e,e,new rh(n,r))}static inline(e,n,r,s){return new wn(e,n,new jo(r,s))}static node(e,n,r,s){return new wn(e,n,new Y0(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof jo}get widget(){return this.type instanceof rh}}const Ta=[],Ai={};class vt{constructor(e,n){this.local=e.length?e:Ta,this.children=n.length?n:Ta}static create(e,n){return n.length?sh(n,e,0,Ai):mn}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,o){for(let a=0;a<this.local.length;a++){let d=this.local[a];d.from<=n&&d.to>=e&&(!o||o(d.spec))&&r.push(d.copy(d.from+s,d.to+s))}for(let a=0;a<this.children.length;a+=3)if(this.children[a]<n&&this.children[a+1]>e){let d=this.children[a]+1;this.children[a+2].findInner(e-d,n-d,r,s+d,o)}}map(e,n,r){return this==mn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||Ai)}mapInner(e,n,r,s,o){let a;for(let d=0;d<this.local.length;d++){let u=this.local[d].map(e,r,s);u&&u.type.valid(n,u)?(a||(a=[])).push(u):o.onRemove&&o.onRemove(this.local[d].spec)}return this.children.length?b4(this.children,a||[],e,n,r,s,o):a?new vt(a.sort(_i),Ta):mn}add(e,n){return n.length?this==mn?vt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,o=0;e.forEach((d,u)=>{let f=u+r,p;if(p=wE(n,d,f)){for(s||(s=this.children.slice());o<s.length&&s[o]<u;)o+=3;s[o]==u?s[o+2]=s[o+2].addInner(d,p,f+1):s.splice(o,0,u,u+d.nodeSize,sh(p,d,f+1,Ai)),o+=3}});let a=vE(o?SE(n):n,-r);for(let d=0;d<a.length;d++)a[d].type.valid(e,a[d])||a.splice(d--,1);return new vt(a.length?this.local.concat(a).sort(_i):this.local,s||this.children)}remove(e){return e.length==0||this==mn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let a,d=r[o]+n,u=r[o+1]+n;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>d&&g.to<u&&(e[p]=null,(a||(a=[])).push(g));if(!a)continue;r==this.children&&(r=this.children.slice());let f=r[o+2].removeInner(a,d+1);f!=mn?r[o+2]=f:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,a;o<e.length;o++)if(a=e[o])for(let d=0;d<s.length;d++)s[d].eq(a,n)&&(s==this.local&&(s=this.local.slice()),s.splice(d--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new vt(s,r):mn}forChild(e,n){if(this==mn)return this;if(n.isLeaf)return vt.empty;let r,s;for(let d=0;d<this.children.length;d+=3)if(this.children[d]>=e){this.children[d]==e&&(r=this.children[d+2]);break}let o=e+1,a=o+n.content.size;for(let d=0;d<this.local.length;d++){let u=this.local[d];if(u.from<a&&u.to>o&&u.type instanceof jo){let f=Math.max(o,u.from)-o,p=Math.min(a,u.to)-o;f<p&&(s||(s=[])).push(u.copy(f,p))}}if(s){let d=new vt(s.sort(_i),Ta);return r?new wo([d,r]):d}return r||mn}eq(e){if(this==e)return!0;if(!(e instanceof vt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return X0(this.localsInner(e))}localsInner(e){if(this==mn)return Ta;if(e.inlineContent||!this.local.some(jo.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof jo||n.push(this.local[r]);return n}forEachSet(e){e(this)}}vt.empty=new vt([],[]);vt.removeOverlap=X0;const mn=vt.empty;class wo{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,Ai));return wo.from(r)}forChild(e,n){if(n.isLeaf)return vt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,n);o!=mn&&(o instanceof wo?r=r.concat(o.members):r.push(o))}return wo.from(r)}eq(e){if(!(e instanceof wo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let a=0;a<o.length;a++)n.push(o[a])}}return n?X0(r?n:n.sort(_i)):Ta}static from(e){switch(e.length){case 0:return mn;case 1:return e[0];default:return new wo(e.every(n=>n instanceof vt)?e:e.reduce((n,r)=>n.concat(r instanceof vt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function b4(t,e,n,r,s,o,a){let d=t.slice();for(let f=0,p=o;f<n.maps.length;f++){let g=0;n.maps[f].forEach((x,w,C,E)=>{let N=E-C-(w-x);for(let k=0;k<d.length;k+=3){let _=d[k+1];if(_<0||x>_+p-g)continue;let j=d[k]+p-g;w>=j?d[k+1]=x<=j?-2:-1:x>=p&&N&&(d[k]+=N,d[k+1]+=N)}g+=N}),p=n.maps[f].map(p,-1)}let u=!1;for(let f=0;f<d.length;f+=3)if(d[f+1]<0){if(d[f+1]==-2){u=!0,d[f+1]=-1;continue}let p=n.map(t[f]+o),g=p-s;if(g<0||g>=r.content.size){u=!0;continue}let x=n.map(t[f+1]+o,-1),w=x-s,{index:C,offset:E}=r.content.findIndex(g),N=r.maybeChild(C);if(N&&E==g&&E+N.nodeSize==w){let k=d[f+2].mapInner(n,N,p+1,t[f]+o+1,a);k!=mn?(d[f]=g,d[f+1]=w,d[f+2]=k):(d[f+1]=-2,u=!0)}else u=!0}if(u){let f=x4(d,t,e,n,s,o,a),p=sh(f,r,0,a);e=p.local;for(let g=0;g<d.length;g+=3)d[g+1]<0&&(d.splice(g,3),g-=3);for(let g=0,x=0;g<p.children.length;g+=3){let w=p.children[g];for(;x<d.length&&d[x]<w;)x+=3;d.splice(x,0,p.children[g],p.children[g+1],p.children[g+2])}}return new vt(e.sort(_i),d)}function vE(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new wn(s.from+e,s.to+e,s.type))}return n}function x4(t,e,n,r,s,o,a){function d(u,f){for(let p=0;p<u.local.length;p++){let g=u.local[p].map(r,s,f);g?n.push(g):a.onRemove&&a.onRemove(u.local[p].spec)}for(let p=0;p<u.children.length;p+=3)d(u.children[p+2],u.children[p]+f+1)}for(let u=0;u<t.length;u+=3)t[u+1]==-1&&d(t[u+2],e[u]+o+1);return n}function wE(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let o=0,a;o<t.length;o++)(a=t[o])&&a.from>n&&a.to<r&&((s||(s=[])).push(a),t[o]=null);return s}function SE(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function sh(t,e,n,r){let s=[],o=!1;e.forEach((d,u)=>{let f=wE(t,d,u+n);if(f){o=!0;let p=sh(f,d,n+u+1,r);p!=mn&&s.push(u,u+d.nodeSize,p)}});let a=vE(o?SE(t):t,-n).sort(_i);for(let d=0;d<a.length;d++)a[d].type.valid(e,a[d])||(r.onRemove&&r.onRemove(a[d].spec),a.splice(d--,1));return a.length||s.length?new vt(a,s):mn}function _i(t,e){return t.from-e.from||t.to-e.to}function X0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[s]=o.copy(o.from,r.to),ww(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),ww(e,s,r.copy(o.from,r.to)));break}}}return e}function ww(t,e,n){for(;e<t.length&&_i(n,t[e])>0;)e++;t.splice(e,0,n)}function Wm(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=mn&&e.push(r)}),t.cursorWrapper&&e.push(vt.create(t.state.doc,[t.cursorWrapper.deco])),wo.from(e)}const y4={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},v4=Pn&&Ao<=11;class w4{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class S4{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new w4,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Pn&&Ao<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),v4&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,y4)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(fw(this.view)){if(this.suppressingSelectionUpdates)return Es(this.view);if(Pn&&Ao<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Di(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=Ga(o))n.add(o);for(let o=e.anchorNode;o;o=Ga(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&fw(e)&&!this.ignoreSelectionChange(r),o=-1,a=-1,d=!1,u=[];if(e.editable)for(let p=0;p<n.length;p++){let g=this.registerMutation(n[p],u);g&&(o=o<0?g.from:Math.min(g.from,o),a=a<0?g.to:Math.max(g.to,a),g.typeOver&&(d=!0))}if(ur&&u.length){let p=u.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,x]=p;g.parentNode&&g.parentNode.parentNode==x.parentNode?x.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let x of p){let w=x.parentNode;w&&w.nodeName=="LI"&&(!g||E4(e,g)!=w)&&x.remove()}}}let f=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nf(r)&&(f=F0(e))&&f.eq(Be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Es(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,a),C4(e)),this.handleDOMChange(o,a,d,u),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Es(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(Pn&&Ao<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:x}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(s=g),(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(o=x)}let a=s&&s.parentNode==e.target?an(s)+1:0,d=r.localPosFromDOM(e.target,a,-1),u=o&&o.parentNode==e.target?an(o):e.target.childNodes.length,f=r.localPosFromDOM(e.target,u,1);return{from:d,to:f}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Sw=new WeakMap,Cw=!1;function C4(t){if(!Sw.has(t)&&(Sw.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=ur,Cw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Cw=!0}}function Nw(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,a=t.domAtPos(t.state.selection.anchor);return Di(a.node,a.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function N4(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return Nw(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Nw(t,n):null}function E4(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function T4(t,e,n){let{node:r,fromOffset:s,toOffset:o,from:a,to:d}=t.docView.parseRange(e,n),u=t.domSelectionRange(),f,p=u.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(f=[{node:p,offset:u.anchorOffset}],nf(u)||f.push({node:u.focusNode,offset:u.focusOffset})),gn&&t.input.lastKeyCode===8)for(let N=o;N>s;N--){let k=r.childNodes[N-1],_=k.pmViewDesc;if(k.nodeName=="BR"&&!_){o=N;break}if(!_||_.size)break}let g=t.state.doc,x=t.someProp("domParser")||ko.fromSchema(t.state.schema),w=g.resolve(a),C=null,E=x.parse(r,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:s,to:o,preserveWhitespace:w.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:k4,context:w});if(f&&f[0].pos!=null){let N=f[0].pos,k=f[1]&&f[1].pos;k==null&&(k=N),C={anchor:N+a,head:k+a}}return{doc:E,sel:C,from:a,to:d}}function k4(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Sn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Sn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const A4=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _4(t,e,n,r,s){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let D=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,te=F0(t,D);if(te&&!t.state.selection.eq(te)){if(gn&&Ss&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",le=>le(t,xi(13,"Enter"))))return;let G=t.state.tr.setSelection(te);D=="pointer"?G.setMeta("pointer",!0):D=="key"&&G.scrollIntoView(),o&&G.setMeta("composition",o),t.dispatch(G)}return}let a=t.state.doc.resolve(e),d=a.sharedDepth(n);e=a.before(d+1),n=t.state.doc.resolve(n).after(d+1);let u=t.state.selection,f=T4(t,e,n),p=t.state.doc,g=p.slice(f.from,f.to),x,w;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(x=t.state.selection.to,w="end"):(x=t.state.selection.from,w="start"),t.input.lastKeyCode=null;let C=R4(g.content,f.doc.content,f.from,x,w);if(C&&t.input.domChangeCount++,(Ja&&t.input.lastIOSEnter>Date.now()-225||Ss)&&s.some(D=>D.nodeType==1&&!A4.test(D.nodeName))&&(!C||C.endA>=C.endB)&&t.someProp("handleKeyDown",D=>D(t,xi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!C)if(r&&u instanceof je&&!u.empty&&u.$head.sameParent(u.$anchor)&&!t.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))C={start:u.from,endA:u.to,endB:u.to};else{if(f.sel){let D=Ew(t,t.state.doc,f.sel);if(D&&!D.eq(t.state.selection)){let te=t.state.tr.setSelection(D);o&&te.setMeta("composition",o),t.dispatch(te)}}return}t.state.selection.from<t.state.selection.to&&C.start==C.endB&&t.state.selection instanceof je&&(C.start>t.state.selection.from&&C.start<=t.state.selection.from+2&&t.state.selection.from>=f.from?C.start=t.state.selection.from:C.endA<t.state.selection.to&&C.endA>=t.state.selection.to-2&&t.state.selection.to<=f.to&&(C.endB+=t.state.selection.to-C.endA,C.endA=t.state.selection.to)),Pn&&Ao<=11&&C.endB==C.start+1&&C.endA==C.start&&C.start>f.from&&f.doc.textBetween(C.start-f.from-1,C.start-f.from+1)==" "&&(C.start--,C.endA--,C.endB--);let E=f.doc.resolveNoCache(C.start-f.from),N=f.doc.resolveNoCache(C.endB-f.from),k=p.resolve(C.start),_=E.sameParent(N)&&E.parent.inlineContent&&k.end()>=C.endA;if((Ja&&t.input.lastIOSEnter>Date.now()-225&&(!_||s.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!_&&E.pos<f.doc.content.size&&(!E.sameParent(N)||!E.parent.inlineContent)&&E.pos<N.pos&&!/\S/.test(f.doc.textBetween(E.pos,N.pos,"","")))&&t.someProp("handleKeyDown",D=>D(t,xi(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>C.start&&M4(p,C.start,C.endA,E,N)&&t.someProp("handleKeyDown",D=>D(t,xi(8,"Backspace")))){Ss&&gn&&t.domObserver.suppressSelectionUpdates();return}gn&&C.endB==C.start&&(t.input.lastChromeDelete=Date.now()),Ss&&!_&&E.start()!=N.start()&&N.parentOffset==0&&E.depth==N.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==C.endA&&(C.endB-=2,N=f.doc.resolveNoCache(C.endB-f.from),setTimeout(()=>{t.someProp("handleKeyDown",function(D){return D(t,xi(13,"Enter"))})},20));let j=C.start,P=C.endA,z=D=>{let te=D||t.state.tr.replace(j,P,f.doc.slice(C.start-f.from,C.endB-f.from));if(f.sel){let G=Ew(t,te.doc,f.sel);G&&!(gn&&t.composing&&G.empty&&(C.start!=C.endB||t.input.lastChromeDelete<Date.now()-100)&&(G.head==j||G.head==te.mapping.map(P)-1)||Pn&&G.empty&&G.head==j)&&te.setSelection(G)}return o&&te.setMeta("composition",o),te.scrollIntoView()},O;if(_)if(E.pos==N.pos){Pn&&Ao<=11&&E.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Es(t),20));let D=z(t.state.tr.delete(j,P)),te=p.resolve(C.start).marksAcross(p.resolve(C.endA));te&&D.ensureMarks(te),t.dispatch(D)}else if(C.endA==C.endB&&(O=j4(E.parent.content.cut(E.parentOffset,N.parentOffset),k.parent.content.cut(k.parentOffset,C.endA-k.start())))){let D=z(t.state.tr);O.type=="add"?D.addMark(j,P,O.mark):D.removeMark(j,P,O.mark),t.dispatch(D)}else if(E.parent.child(E.index()).isText&&E.index()==N.index()-(N.textOffset?0:1)){let D=E.parent.textBetween(E.parentOffset,N.parentOffset),te=()=>z(t.state.tr.insertText(D,j,P));t.someProp("handleTextInput",G=>G(t,j,P,D,te))||t.dispatch(te())}else t.dispatch(z());else t.dispatch(z())}function Ew(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:$0(t,e.resolve(n.anchor),e.resolve(n.head))}function j4(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,o=r,a,d,u;for(let p=0;p<r.length;p++)s=r[p].removeFromSet(s);for(let p=0;p<n.length;p++)o=n[p].removeFromSet(o);if(s.length==1&&o.length==0)d=s[0],a="add",u=p=>p.mark(d.addToSet(p.marks));else if(s.length==0&&o.length==1)d=o[0],a="remove",u=p=>p.mark(d.removeFromSet(p.marks));else return null;let f=[];for(let p=0;p<e.childCount;p++)f.push(u(e.child(p)));if(se.from(f).eq(t))return{mark:d,type:a}}function M4(t,e,n,r,s){if(n-e<=s.pos-r.pos||Ym(r,!0,!1)<s.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let d=o.nodeAfter;return d!=null&&n==e+d.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let a=t.resolve(Ym(o,!0,!0));return!a.parent.isTextblock||a.pos>n||Ym(a,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(a.parent.content)}function Ym(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function R4(t,e,n,r,s){let o=t.findDiffStart(e,n);if(o==null)return null;let{a,b:d}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let u=Math.max(0,o-Math.min(a,d));r-=a+u-o}if(a<o&&t.size<e.size){let u=r<=o&&r>=a?o-r:0;o-=u,o&&o<e.size&&Tw(e.textBetween(o-1,o+1))&&(o+=u?1:-1),d=o+(d-a),a=o}else if(d<o){let u=r<=o&&r>=d?o-r:0;o-=u,o&&o<t.size&&Tw(t.textBetween(o-1,o+1))&&(o+=u?1:-1),a=o+(a-d),d=o}return{start:o,endA:a,endB:d}}function Tw(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class CE{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X3,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Mw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_w(this),Aw(this),this.nodeViews=jw(this),this.docView=aw(this.state.doc,kw(this),Wm(this),this.dom,this),this.domObserver=new S4(this,(r,s,o,a)=>_4(this,r,s,o,a)),this.domObserver.start(),Q3(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Hg(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Mw),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,o=!1,a=!1;e.storedMarks&&this.composing&&(gE(this),a=!0),this.state=e;let d=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(d||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let w=jw(this);D4(w,this.nodeViews)&&(this.nodeViews=w,o=!0)}(d||n.handleDOMEvents!=this._props.handleDOMEvents)&&Hg(this),this.editable=_w(this),Aw(this);let u=Wm(this),f=kw(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",g=o||!this.docView.matchesNode(e.doc,f,u);(g||!e.selection.eq(s.selection))&&(a=!0);let x=p=="preserve"&&a&&this.dom.style.overflowAnchor==null&&h3(this);if(a){this.domObserver.stop();let w=g&&(Pn||gn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&I4(s.selection,e.selection);if(g){let C=gn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=u4(this)),(o||!this.docView.update(e.doc,f,u,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=aw(e.doc,f,u,this.dom,this)),C&&!this.trackWrites&&(w=!0)}w||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&O3(this))?Es(this,w):(sE(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():x&&f3(x)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ee){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&tw(this,n.getBoundingClientRect(),e)}else tw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new xE(e.slice,e.move,s<0?void 0:Ee.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let a=0;a<this.directPlugins.length;a++){let d=this.directPlugins[a].props[e];if(d!=null&&(s=n?n(d):d))return s}let o=this.state.plugins;if(o)for(let a=0;a<o.length;a++){let d=o[a].props[e];if(d!=null&&(s=n?n(d):d))return s}}hasFocus(){if(Pn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&p3(this.dom),Es(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return y3(this,e)}coordsAtPos(e,n=1){return YN(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return N3(this,n||this.state,e)}pasteHTML(e,n){return Lc(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lc(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return G0(this,e)}destroy(){this.docView&&(Z3(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Wm(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,t3())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return t4(this,e)}domSelectionRange(){let e=this.domSelection();return e?Sn&&this.root.nodeType===11&&i3(this.dom.ownerDocument)==this.dom&&N4(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}CE.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function kw(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[wn.node(0,t.state.doc.content.size,e)]}function Aw(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:wn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _w(t){return!t.someProp("editable",e=>e(t.state)===!1)}function I4(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function jw(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function D4(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function Mw(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},oh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},P4=typeof navigator<"u"&&/Mac/.test(navigator.platform),O4=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var ln=0;ln<10;ln++)Ro[48+ln]=Ro[96+ln]=String(ln);for(var ln=1;ln<=24;ln++)Ro[ln+111]="F"+ln;for(var ln=65;ln<=90;ln++)Ro[ln]=String.fromCharCode(ln+32),oh[ln]=String.fromCharCode(ln);for(var Xm in Ro)oh.hasOwnProperty(Xm)||(oh[Xm]=Ro[Xm]);function L4(t){var e=P4&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||O4&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?oh:Ro)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const B4=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),U4=typeof navigator<"u"&&/Win/.test(navigator.platform);function z4(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,o,a;for(let d=0;d<e.length-1;d++){let u=e[d];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))B4?a=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function q4(t){let e=Object.create(null);for(let n in t)e[z4(n)]=t[n];return e}function Qm(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function H4(t){return new _t({props:{handleKeyDown:NE(t)}})}function NE(t){let e=q4(t);return function(n,r){let s=L4(r),o,a=e[Qm(s,r)];if(a&&a(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let d=e[Qm(s,r,!1)];if(d&&d(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(U4&&r.ctrlKey&&r.altKey)&&(o=Ro[r.keyCode])&&o!=s){let d=e[Qm(o,r)];if(d&&d(n.state,n.dispatch,n))return!0}}return!1}}var V4=Object.defineProperty,Q0=(t,e)=>{for(var n in e)V4(t,n,{get:e[n],enumerable:!0})};function of(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var af=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([a,d])=>[a,(...f)=>{const p=d(...f)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,a=[],d=!!t,u=t||s.tr,f=()=>(!d&&e&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(u),a.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(n).map(([g,x])=>[g,(...C)=>{const E=this.buildProps(u,e),N=x(...C)(E);return a.push(N),p}])),run:f};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([d,u])=>[d,(...f)=>u(...f)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,a={tr:t,editor:r,view:o,state:of({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([d,u])=>[d,(...f)=>u(...f)(a)]))}};return a}},EE={};Q0(EE,{blur:()=>F4,clearContent:()=>$4,clearNodes:()=>G4,command:()=>J4,createParagraphNear:()=>K4,cut:()=>W4,deleteCurrentNode:()=>Y4,deleteNode:()=>X4,deleteRange:()=>Q4,deleteSelection:()=>Z4,enter:()=>eM,exitCode:()=>tM,extendMarkRange:()=>nM,first:()=>rM,focus:()=>oM,forEach:()=>iM,insertContent:()=>aM,insertContentAt:()=>dM,joinBackward:()=>fM,joinDown:()=>hM,joinForward:()=>pM,joinItemBackward:()=>mM,joinItemForward:()=>gM,joinTextblockBackward:()=>bM,joinTextblockForward:()=>xM,joinUp:()=>uM,keyboardShortcut:()=>vM,lift:()=>wM,liftEmptyBlock:()=>SM,liftListItem:()=>CM,newlineInCode:()=>NM,resetAttributes:()=>EM,scrollIntoView:()=>TM,selectAll:()=>kM,selectNodeBackward:()=>AM,selectNodeForward:()=>_M,selectParentNode:()=>jM,selectTextblockEnd:()=>MM,selectTextblockStart:()=>RM,setContent:()=>IM,setMark:()=>XM,setMeta:()=>QM,setNode:()=>ZM,setNodeSelection:()=>eR,setTextSelection:()=>tR,sinkListItem:()=>nR,splitBlock:()=>rR,splitListItem:()=>sR,toggleList:()=>oR,toggleMark:()=>iR,toggleNode:()=>aR,toggleWrap:()=>lR,undoInputRule:()=>cR,unsetAllMarks:()=>dR,unsetMark:()=>uR,updateAttributes:()=>hR,wrapIn:()=>fR,wrapInList:()=>pR});var F4=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())==null||n.removeAllRanges())}),!0),$4=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),G4=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:a})=>{t.doc.nodesBetween(o.pos,a.pos,(d,u)=>{if(d.type.isText)return;const{doc:f,mapping:p}=e,g=f.resolve(p.map(u)),x=f.resolve(p.map(u+d.nodeSize)),w=g.blockRange(x);if(!w)return;const C=Za(w);if(d.type.isTextblock){const{defaultType:E}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(w.start,E)}(C||C===0)&&e.lift(w,C)})}),!0},J4=t=>e=>t(e),K4=()=>({state:t,dispatch:e})=>zN(t,e),W4=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const a=r.mapping.map(e);return r.insert(a,o.content),r.setSelection(new je(r.doc.resolve(Math.max(a-1,0)))),!0},Y4=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const d=s.before(o),u=s.after(o);t.delete(d,u).scrollIntoView()}return!0}return!1};function zt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var X4=t=>({tr:e,state:n,dispatch:r})=>{const s=zt(t,n.schema),o=e.selection.$anchor;for(let a=o.depth;a>0;a-=1)if(o.node(a).type===s){if(r){const u=o.before(a),f=o.after(a);e.delete(u,f).scrollIntoView()}return!0}return!1},Q4=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},Z4=()=>({state:t,dispatch:e})=>B0(t,e),eM=()=>({commands:t})=>t.keyboardShortcut("Enter"),tM=()=>({state:t,dispatch:e})=>zj(t,e);function Z0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function ih(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:Z0(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function TE(t,e,n={}){return t.find(r=>r.type===e&&ih(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function Rw(t,e,n={}){return!!TE(t,e,n)}function eb(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!TE([...s.node.marks],e,n)))return;let a=s.index,d=t.start()+s.offset,u=a+1,f=d+s.node.nodeSize;for(;a>0&&Rw([...t.parent.child(a-1).marks],e,n);)a-=1,d-=t.parent.child(a).nodeSize;for(;u<t.parent.childCount&&Rw([...t.parent.child(u).marks],e,n);)f+=t.parent.child(u).nodeSize,u+=1;return{from:d,to:f}}function As(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var nM=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=As(t,r.schema),{doc:a,selection:d}=n,{$from:u,from:f,to:p}=d;if(s){const g=eb(u,o,e);if(g&&g.from<=f&&g.to>=p){const x=je.create(a,g.from,g.to);n.setSelection(x)}}return!0},rM=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function kE(t){return t instanceof je}function Ci(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function AE(t,e=null){if(!e)return null;const n=Be.atStart(t),r=Be.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?je.create(t,Ci(0,s,o),Ci(t.content.size,s,o)):je.create(t,Ci(e,s,o),Ci(e,s,o))}function sM(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function tb(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var oM=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const a=()=>{(tb()||sM())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!kE(n.state.selection))return a(),!0;const d=AE(s.doc,t)||n.state.selection,u=n.state.selection.eq(d);return o&&(u||s.setSelection(d),u&&s.storedMarks&&s.setStoredMarks(s.storedMarks),a()),!0},iM=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),aM=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),_E=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&_E(r)}return t};function Su(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return _E(n)}function Uc(t,e,n){if(t instanceof jr||t instanceof se)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return se.fromArray(t.map(d=>e.nodeFromJSON(d)));const a=e.nodeFromJSON(t);return n.errorOnInvalidContent&&a.check(),a}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Uc("",e,n)}if(s){if(n.errorOnInvalidContent){let a=!1,d="";const u=new fN({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(a=!0,d=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?ko.fromSchema(u).parseSlice(Su(t),n.parseOptions):ko.fromSchema(u).parse(Su(t),n.parseOptions),n.errorOnInvalidContent&&a)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${d}`)})}const o=ko.fromSchema(e);return n.slice?o.parseSlice(Su(t),n.parseOptions).content:o.parse(Su(t),n.parseOptions)}return Uc("",e,n)}function lM(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Wt||s instanceof Yt))return;const o=t.mapping.maps[r];let a=0;o.forEach((d,u,f,p)=>{a===0&&(a=p)}),t.setSelection(Be.near(t.doc.resolve(a),n))}var cM=t=>!("type"in t),dM=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var a;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let d;const u=N=>{o.emit("contentError",{editor:o,error:N,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Uc(e,o.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(N){u(N)}try{d=Uc(e,o.schema,{parseOptions:f,errorOnInvalidContent:(a=n.errorOnInvalidContent)!=null?a:o.options.enableContentCheck})}catch(N){return u(N),!1}let{from:p,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},x=!0,w=!0;if((cM(d)?d:[d]).forEach(N=>{N.check(),x=x?N.isText&&N.marks.length===0:!1,w=w?N.isBlock:!1}),p===g&&w){const{parent:N}=r.doc.resolve(p);N.isTextblock&&!N.type.spec.code&&!N.childCount&&(p-=1,g+=1)}let E;if(x){if(Array.isArray(e))E=e.map(N=>N.text||"").join("");else if(e instanceof se){let N="";e.forEach(k=>{k.text&&(N+=k.text)}),E=N}else typeof e=="object"&&e&&e.text?E=e.text:E=e;r.insertText(E,p,g)}else{E=d;const N=r.doc.resolve(p),k=N.node(),_=N.parentOffset===0,j=k.isText||k.isTextblock,P=k.content.size>0;_&&j&&P&&(p=Math.max(0,p-1)),r.replaceWith(p,g,E)}n.updateSelection&&lM(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:E}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:E})}return!0},uM=()=>({state:t,dispatch:e})=>Lj(t,e),hM=()=>({state:t,dispatch:e})=>Bj(t,e),fM=()=>({state:t,dispatch:e})=>IN(t,e),pM=()=>({state:t,dispatch:e})=>LN(t,e),mM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},gM=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Zh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},bM=()=>({state:t,dispatch:e})=>Pj(t,e),xM=()=>({state:t,dispatch:e})=>Oj(t,e);function jE(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function yM(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,a;for(let d=0;d<e.length-1;d+=1){const u=e[d];if(/^(cmd|meta|m)$/i.test(u))a=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))tb()||jE()?a=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),a&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var vM=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=yM(t).split(/-(?!$)/),a=o.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),d=new KeyboardEvent("keydown",{key:a==="Space"?" ":a,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),u=e.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,d))});return u==null||u.steps.forEach(f=>{const p=f.map(r.mapping);p&&s&&r.maybeStep(p)}),!0};function Io(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,a=e?zt(e,t.schema):null,d=[];t.doc.nodesBetween(r,s,(g,x)=>{if(g.isText)return;const w=Math.max(r,x),C=Math.min(s,x+g.nodeSize);d.push({node:g,from:w,to:C})});const u=s-r,f=d.filter(g=>a?a.name===g.node.type.name:!0).filter(g=>ih(g.node.attrs,n,{strict:!1}));return o?!!f.length:f.reduce((g,x)=>g+x.to-x.from,0)>=u}var wM=(t,e={})=>({state:n,dispatch:r})=>{const s=zt(t,n.schema);return Io(n,s,e)?Uj(n,r):!1},SM=()=>({state:t,dispatch:e})=>qN(t,e),CM=t=>({state:e,dispatch:n})=>{const r=zt(t,e.schema);return Xj(r)(e,n)},NM=()=>({state:t,dispatch:e})=>UN(t,e);function lf(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Iw(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var EM=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,a=null;const d=lf(typeof t=="string"?t:t.name,r.schema);return d?(d==="node"&&(o=zt(t,r.schema)),d==="mark"&&(a=As(t,r.schema)),s&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(f,p)=>{o&&o===f.type&&n.setNodeMarkup(p,void 0,Iw(f.attrs,e)),a&&f.marks.length&&f.marks.forEach(g=>{a===g.type&&n.addMark(p,p+f.nodeSize,a.create(Iw(g.attrs,e)))})})}),!0):!1},TM=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),kM=()=>({tr:t,dispatch:e})=>{if(e){const n=new Yn(t.doc);t.setSelection(n)}return!0},AM=()=>({state:t,dispatch:e})=>PN(t,e),_M=()=>({state:t,dispatch:e})=>BN(t,e),jM=()=>({state:t,dispatch:e})=>Vj(t,e),MM=()=>({state:t,dispatch:e})=>Gj(t,e),RM=()=>({state:t,dispatch:e})=>$j(t,e);function Vg(t,e,n={},r={}){return Uc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var IM=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:a,commands:d})=>{const{doc:u}=o;if(r.preserveWhitespace!=="full"){const f=Vg(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return a&&o.replaceWith(0,u.content.size,f).setMeta("preventUpdate",!n),!0}return a&&o.setMeta("preventUpdate",!n),d.insertContentAt({from:0,to:u.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function ME(t,e){const n=As(e,t.schema),{from:r,to:s,empty:o}=t.selection,a=[];o?(t.storedMarks&&a.push(...t.storedMarks),a.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,u=>{a.push(...u.marks)});const d=a.find(u=>u.type.name===n.name);return d?{...d.attrs}:{}}function RE(t,e){const n=new _N(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function DM(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function PM(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function OM(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function cf(t){return e=>OM(e.$from,t)}function Ce(t,e,n){return t.config[e]===void 0&&t.parent?Ce(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ce(t.parent,e,n):null}):t.config[e]}function nb(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ce(e,"addExtensions",n);return r?[e,...nb(r())]:e}).flat(10)}function rb(t,e){const n=Li.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function IE(t){return typeof t=="function"}function rt(t,e=void 0,...n){return IE(t)?e?t.bind(e)(...n):t(...n):t}function LM(t={}){return Object.keys(t).length===0&&t.constructor===Object}function zc(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function DE(t){const e=[],{nodeExtensions:n,markExtensions:r}=zc(t),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(a=>{const d={name:a.name,options:a.options,storage:a.storage,extensions:s},u=Ce(a,"addGlobalAttributes",d);if(!u)return;u().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([x,w])=>{e.push({type:g,name:x,attribute:{...o,...w}})})})})}),s.forEach(a=>{const d={name:a.name,options:a.options,storage:a.storage},u=Ce(a,"addAttributes",d);if(!u)return;const f=u();Object.entries(f).forEach(([p,g])=>{const x={...o,...g};typeof(x==null?void 0:x.default)=="function"&&(x.default=x.default()),x!=null&&x.isRequired&&(x==null?void 0:x.default)===void 0&&delete x.default,e.push({type:a.name,name:p,attribute:x})})}),e}function St(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const d=o?String(o).split(" "):[],u=r[s]?r[s].split(" "):[],f=d.filter(p=>!u.includes(p));r[s]=[...u,...f].join(" ")}else if(s==="style"){const d=o?o.split(";").map(p=>p.trim()).filter(Boolean):[],u=r[s]?r[s].split(";").map(p=>p.trim()).filter(Boolean):[],f=new Map;u.forEach(p=>{const[g,x]=p.split(":").map(w=>w.trim());f.set(g,x)}),d.forEach(p=>{const[g,x]=p.split(":").map(w=>w.trim());f.set(g,x)}),r[s]=Array.from(f.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[s]=o}),r},{})}function ah(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>St(n,r),{})}function BM(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Dw(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,a)=>{const d=a.attribute.parseHTML?a.attribute.parseHTML(n):BM(n.getAttribute(a.name));return d==null?o:{...o,[a.name]:d}},{});return{...r,...s}}}}function Pw(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&LM(n)?!1:n!=null))}function UM(t,e){var n;const r=DE(t),{nodeExtensions:s,markExtensions:o}=zc(t),a=(n=s.find(f=>Ce(f,"topNode")))==null?void 0:n.name,d=Object.fromEntries(s.map(f=>{const p=r.filter(k=>k.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((k,_)=>{const j=Ce(_,"extendNodeSchema",g);return{...k,...j?j(f):{}}},{}),w=Pw({...x,content:rt(Ce(f,"content",g)),marks:rt(Ce(f,"marks",g)),group:rt(Ce(f,"group",g)),inline:rt(Ce(f,"inline",g)),atom:rt(Ce(f,"atom",g)),selectable:rt(Ce(f,"selectable",g)),draggable:rt(Ce(f,"draggable",g)),code:rt(Ce(f,"code",g)),whitespace:rt(Ce(f,"whitespace",g)),linebreakReplacement:rt(Ce(f,"linebreakReplacement",g)),defining:rt(Ce(f,"defining",g)),isolating:rt(Ce(f,"isolating",g)),attrs:Object.fromEntries(p.map(k=>{var _,j;return[k.name,{default:(_=k==null?void 0:k.attribute)==null?void 0:_.default,validate:(j=k==null?void 0:k.attribute)==null?void 0:j.validate}]}))}),C=rt(Ce(f,"parseHTML",g));C&&(w.parseDOM=C.map(k=>Dw(k,p)));const E=Ce(f,"renderHTML",g);E&&(w.toDOM=k=>E({node:k,HTMLAttributes:ah(k,p)}));const N=Ce(f,"renderText",g);return N&&(w.toText=N),[f.name,w]})),u=Object.fromEntries(o.map(f=>{const p=r.filter(N=>N.type===f.name),g={name:f.name,options:f.options,storage:f.storage,editor:e},x=t.reduce((N,k)=>{const _=Ce(k,"extendMarkSchema",g);return{...N,..._?_(f):{}}},{}),w=Pw({...x,inclusive:rt(Ce(f,"inclusive",g)),excludes:rt(Ce(f,"excludes",g)),group:rt(Ce(f,"group",g)),spanning:rt(Ce(f,"spanning",g)),code:rt(Ce(f,"code",g)),attrs:Object.fromEntries(p.map(N=>{var k,_;return[N.name,{default:(k=N==null?void 0:N.attribute)==null?void 0:k.default,validate:(_=N==null?void 0:N.attribute)==null?void 0:_.validate}]}))}),C=rt(Ce(f,"parseHTML",g));C&&(w.parseDOM=C.map(N=>Dw(N,p)));const E=Ce(f,"renderHTML",g);return E&&(w.toDOM=N=>E({mark:N,HTMLAttributes:ah(N,p)})),[f.name,w]}));return new fN({topNode:a,nodes:d,marks:u})}function zM(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function sb(t){return t.sort((n,r)=>{const s=Ce(n,"priority")||100,o=Ce(r,"priority")||100;return s>o?-1:s<o?1:0})}function PE(t){const e=sb(nb(t)),n=zM(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function OE(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:a={}}=n||{};let d="";return t.nodesBetween(r,s,(u,f,p,g)=>{var x;u.isBlock&&f>r&&(d+=o);const w=a==null?void 0:a[u.type.name];if(w)return p&&(d+=w({node:u,pos:f,parent:p,index:g,range:e})),!1;u.isText&&(d+=(x=u==null?void 0:u.text)==null?void 0:x.slice(Math.max(r,f)-f,s-f))}),d}function qM(t,e){const n={from:0,to:t.content.size};return OE(t,n,e)}function LE(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function HM(t,e){const n=zt(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,d=>{o.push(d)});const a=o.reverse().find(d=>d.type.name===n.name);return a?{...a.attrs}:{}}function BE(t,e){const n=lf(typeof e=="string"?e:e.name,t.schema);return n==="node"?HM(t,e):n==="mark"?ME(t,e):{}}function VM(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function FM(t){const e=VM(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,a)=>a!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function UE(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,o)=>{const a=[];if(s.ranges.length)s.forEach((d,u)=>{a.push({from:d,to:u})});else{const{from:d,to:u}=n[o];if(d===void 0||u===void 0)return;a.push({from:d,to:u})}a.forEach(({from:d,to:u})=>{const f=e.slice(o).map(d,-1),p=e.slice(o).map(u),g=e.invert().map(f,-1),x=e.invert().map(p);r.push({oldRange:{from:g,to:x},newRange:{from:f,to:p}})})}),FM(r)}function ob(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),a=eb(o,s.type);a&&r.push({mark:s,...a})}):n.nodesBetween(t,e,(s,o)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(a=>({from:o,to:o+s.nodeSize,mark:a})))}),r}var $M=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let o=r,a=null;for(;o>0&&a===null;){const d=s.node(o);(d==null?void 0:d.type.name)===e?a=d:o-=1}return[a,o]};function Zm(t,e){return e.nodes[t]||e.marks[t]||null}function Fu(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var GM=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,a,d)=>{var u,f;const p=((f=(u=s.type.spec).toText)==null?void 0:f.call(u,{node:s,pos:o,parent:a,index:d}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,r-o))}),n};function Fg(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?As(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(g=>o?o.name===g.type.name:!0).find(g=>ih(g.attrs,n,{strict:!1}));let a=0;const d=[];if(s.forEach(({$from:g,$to:x})=>{const w=g.pos,C=x.pos;t.doc.nodesBetween(w,C,(E,N)=>{if(!E.isText&&!E.marks.length)return;const k=Math.max(w,N),_=Math.min(C,N+E.nodeSize),j=_-k;a+=j,d.push(...E.marks.map(P=>({mark:P,from:k,to:_})))})}),a===0)return!1;const u=d.filter(g=>o?o.name===g.mark.type.name:!0).filter(g=>ih(g.mark.attrs,n,{strict:!1})).reduce((g,x)=>g+x.to-x.from,0),f=d.filter(g=>o?g.mark.type!==o&&g.mark.type.excludes(o):!0).reduce((g,x)=>g+x.to-x.from,0);return(u>0?u+f:u)>=a}function JM(t,e,n={}){if(!e)return Io(t,null,n)||Fg(t,null,n);const r=lf(e,t.schema);return r==="node"?Io(t,e,n):r==="mark"?Fg(t,e,n):!1}var KM=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const o=cf(d=>d.type.name===e)(t.selection);if(!o)return!1;const a=t.doc.resolve(o.pos+1);return s.pos+1===a.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},WM=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Ow(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Lw(t,e){const{nodeExtensions:n}=zc(e),r=n.find(a=>a.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=rt(Ce(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function df(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(df(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function zE(t){return t instanceof Ee}function YM(t,e,n){var r;const{selection:s}=e;let o=null;if(kE(s)&&(o=s.$cursor),o){const d=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(d)||!d.some(f=>f.type.excludes(n)))}const{ranges:a}=s;return a.some(({$from:d,$to:u})=>{let f=d.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(d.pos,u.pos,(p,g,x)=>{if(f)return!1;if(p.isInline){const w=!x||x.type.allowsMarkType(n),C=!!n.isInSet(p.marks)||!p.marks.some(E=>E.type.excludes(n));f=w&&C}return!f}),f})}var XM=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:a,ranges:d}=o,u=As(t,r.schema);if(s)if(a){const f=ME(r,u);n.addStoredMark(u.create({...f,...e}))}else d.forEach(f=>{const p=f.$from.pos,g=f.$to.pos;r.doc.nodesBetween(p,g,(x,w)=>{const C=Math.max(w,p),E=Math.min(w+x.nodeSize,g);x.marks.find(k=>k.type===u)?x.marks.forEach(k=>{u===k.type&&n.addMark(C,E,u.create({...k.attrs,...e}))}):n.addMark(C,E,u.create(e))})});return YM(r,n,u)},QM=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),ZM=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=zt(t,n.schema);let a;return n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:d})=>Q1(o,{...a,...e})(n)?!0:d.clearNodes()).command(({state:d})=>Q1(o,{...a,...e})(d,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},eR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=Ci(t,0,r.content.size),o=Ee.create(r,s);e.setSelection(o)}return!0},tR=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,a=je.atStart(r).from,d=je.atEnd(r).to,u=Ci(s,a,d),f=Ci(o,a,d),p=je.create(r,u,f);e.setSelection(p)}return!0},nR=t=>({state:e,dispatch:n})=>{const r=zt(t,e.schema);return e3(r)(e,n)};function Bw(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e==null?void 0:e.includes(s.type.name));t.tr.ensureMarks(r)}}var rR=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:a}=e,{$from:d,$to:u}=o,f=s.extensionManager.attributes,p=Fu(f,d.node().type.name,d.node().attrs);if(o instanceof Ee&&o.node.isBlock)return!d.parentOffset||!Ns(a,d.pos)?!1:(r&&(t&&Bw(n,s.extensionManager.splittableMarks),e.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;const g=u.parentOffset===u.parent.content.size,x=d.depth===0?void 0:DM(d.node(-1).contentMatchAt(d.indexAfter(-1)));let w=g&&x?[{type:x,attrs:p}]:void 0,C=Ns(e.doc,e.mapping.map(d.pos),1,w);if(!w&&!C&&Ns(e.doc,e.mapping.map(d.pos),1,x?[{type:x}]:void 0)&&(C=!0,w=x?[{type:x,attrs:p}]:void 0),r){if(C&&(o instanceof je&&e.deleteSelection(),e.split(e.mapping.map(d.pos),1,w),x&&!g&&!d.parentOffset&&d.parent.type!==x)){const E=e.mapping.map(d.before()),N=e.doc.resolve(E);d.node(-1).canReplaceWith(N.index(),N.index()+1,x)&&e.setNodeMarkup(e.mapping.map(d.before()),x)}t&&Bw(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return C},sR=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var a;const d=zt(t,r.schema),{$from:u,$to:f}=r.selection,p=r.selection.node;if(p&&p.isBlock||u.depth<2||!u.sameParent(f))return!1;const g=u.node(-1);if(g.type!==d)return!1;const x=o.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==d||u.index(-2)!==u.node(-2).childCount-1)return!1;if(s){let k=se.empty;const _=u.index(-1)?1:u.index(-2)?2:3;for(let te=u.depth-_;te>=u.depth-3;te-=1)k=se.from(u.node(te).copy(k));const j=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,P={...Fu(x,u.node().type.name,u.node().attrs),...e},z=((a=d.contentMatch.defaultType)==null?void 0:a.createAndFill(P))||void 0;k=k.append(se.from(d.createAndFill(null,z)||void 0));const O=u.before(u.depth-(_-1));n.replace(O,u.after(-j),new ue(k,4-_,0));let D=-1;n.doc.nodesBetween(O,n.doc.content.size,(te,G)=>{if(D>-1)return!1;te.isTextblock&&te.content.size===0&&(D=G+1)}),D>-1&&n.setSelection(je.near(n.doc.resolve(D))),n.scrollIntoView()}return!0}const w=f.pos===u.end()?g.contentMatchAt(0).defaultType:null,C={...Fu(x,g.type.name,g.attrs),...e},E={...Fu(x,u.node().type.name,u.node().attrs),...e};n.delete(u.pos,f.pos);const N=w?[{type:d,attrs:C},{type:w,attrs:E}]:[{type:d,attrs:C}];if(!Ns(n.doc,u.pos,2))return!1;if(s){const{selection:k,storedMarks:_}=r,{splittableMarks:j}=o.extensionManager,P=_||k.$to.parentOffset&&k.$from.marks();if(n.split(u.pos,2,N).scrollIntoView(),!P||!s)return!0;const z=P.filter(O=>j.includes(O.type.name));n.ensureMarks(z)}return!0},eg=(t,e)=>{const n=cf(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Po(t.doc,n.pos)&&t.join(n.pos),!0},tg=(t,e)=>{const n=cf(a=>a.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===(s==null?void 0:s.type)&&Po(t.doc,r)&&t.join(r),!0},oR=(t,e,n,r={})=>({editor:s,tr:o,state:a,dispatch:d,chain:u,commands:f,can:p})=>{const{extensions:g,splittableMarks:x}=s.extensionManager,w=zt(t,a.schema),C=zt(e,a.schema),{selection:E,storedMarks:N}=a,{$from:k,$to:_}=E,j=k.blockRange(_),P=N||E.$to.parentOffset&&E.$from.marks();if(!j)return!1;const z=cf(O=>Lw(O.type.name,g))(E);if(j.depth>=1&&z&&j.depth-z.depth<=1){if(z.node.type===w)return f.liftListItem(C);if(Lw(z.node.type.name,g)&&w.validContent(z.node.content)&&d)return u().command(()=>(o.setNodeMarkup(z.pos,w),!0)).command(()=>eg(o,w)).command(()=>tg(o,w)).run()}return!n||!P||!d?u().command(()=>p().wrapInList(w,r)?!0:f.clearNodes()).wrapInList(w,r).command(()=>eg(o,w)).command(()=>tg(o,w)).run():u().command(()=>{const O=p().wrapInList(w,r),D=P.filter(te=>x.includes(te.type.name));return o.ensureMarks(D),O?!0:f.clearNodes()}).wrapInList(w,r).command(()=>eg(o,w)).command(()=>tg(o,w)).run()},iR=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,a=As(t,r.schema);return Fg(r,a,e)?s.unsetMark(a,{extendEmptyMarkRange:o}):s.setMark(a,e)},aR=(t,e,n={})=>({state:r,commands:s})=>{const o=zt(t,r.schema),a=zt(e,r.schema),d=Io(r,o,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),d?s.setNode(a,u):s.setNode(o,{...u,...n})},lR=(t,e={})=>({state:n,commands:r})=>{const s=zt(t,n.schema);return Io(n,s,e)?r.lift(s):r.wrapIn(s,e)},cR=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const a=t.tr,d=o.transform;for(let u=d.steps.length-1;u>=0;u-=1)a.step(d.steps[u].invert(d.docs[u]));if(o.text){const u=a.doc.resolve(o.from).marks();a.replaceWith(o.from,o.to,t.schema.text(o.text,u))}else a.delete(o.from,o.to)}return!0}}return!1},dR=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},uR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:a=!1}=e,{selection:d}=n,u=As(t,r.schema),{$from:f,empty:p,ranges:g}=d;if(!s)return!0;if(p&&a){let{from:x,to:w}=d;const C=(o=f.marks().find(N=>N.type===u))==null?void 0:o.attrs,E=eb(f,u,C);E&&(x=E.from,w=E.to),n.removeMark(x,w,u)}else g.forEach(x=>{n.removeMark(x.$from.pos,x.$to.pos,u)});return n.removeStoredMark(u),!0},hR=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,a=null;const d=lf(typeof t=="string"?t:t.name,r.schema);return d?(d==="node"&&(o=zt(t,r.schema)),d==="mark"&&(a=As(t,r.schema)),s&&n.selection.ranges.forEach(u=>{const f=u.$from.pos,p=u.$to.pos;let g,x,w,C;n.selection.empty?r.doc.nodesBetween(f,p,(E,N)=>{o&&o===E.type&&(w=Math.max(N,f),C=Math.min(N+E.nodeSize,p),g=N,x=E)}):r.doc.nodesBetween(f,p,(E,N)=>{N<f&&o&&o===E.type&&(w=Math.max(N,f),C=Math.min(N+E.nodeSize,p),g=N,x=E),N>=f&&N<=p&&(o&&o===E.type&&n.setNodeMarkup(N,void 0,{...E.attrs,...e}),a&&E.marks.length&&E.marks.forEach(k=>{if(a===k.type){const _=Math.max(N,f),j=Math.min(N+E.nodeSize,p);n.addMark(_,j,a.create({...k.attrs,...e}))}}))}),x&&(g!==void 0&&n.setNodeMarkup(g,void 0,{...x.attrs,...e}),a&&x.marks.length&&x.marks.forEach(E=>{a===E.type&&n.addMark(w,C,a.create({...E.attrs,...e}))}))}),!0):!1},fR=(t,e={})=>({state:n,dispatch:r})=>{const s=zt(t,n.schema);return Jj(s,e)(n,r)},pR=(t,e={})=>({state:n,dispatch:r})=>{const s=zt(t,n.schema);return Kj(s,e)(n,r)},mR=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},uf=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},gR=(t,e)=>{if(Z0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Cu(t){var e;const{editor:n,from:r,to:s,text:o,rules:a,plugin:d}=t,{view:u}=n;if(u.composing)return!1;const f=u.state.doc.resolve(r);if(f.parent.type.spec.code||(e=f.nodeBefore||f.nodeAfter)!=null&&e.marks.find(x=>x.type.spec.code))return!1;let p=!1;const g=GM(f)+o;return a.forEach(x=>{if(p)return;const w=gR(g,x.find);if(!w)return;const C=u.state.tr,E=of({state:u.state,transaction:C}),N={from:r-(w[0].length-o.length),to:s},{commands:k,chain:_,can:j}=new af({editor:n,state:E});x.handler({state:E,range:N,match:w,commands:k,chain:_,can:j})===null||!C.steps.length||(x.undoable&&C.setMeta(d,{transform:C,from:r,to:s,text:o}),u.dispatch(C),p=!0)}),p}function bR(t){const{editor:e,rules:n}=t,r=new _t({state:{init(){return null},apply(s,o,a){const d=s.getMeta(r);if(d)return d;const u=s.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:p}=u;typeof p=="string"?p=p:p=rb(se.from(p),a.schema);const{from:g}=u,x=g+p.length;Cu({editor:e,from:g,to:x,text:p,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,a,d){return Cu({editor:e,from:o,to:a,text:d,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&Cu({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:a}=s.state.selection;return a?Cu({editor:e,from:a.pos,to:a.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function xR(t){return Object.prototype.toString.call(t).slice(8,-1)}function Nu(t){return xR(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function qE(t,e){const n={...t};return Nu(t)&&Nu(e)&&Object.keys(e).forEach(r=>{Nu(e[r])&&Nu(t[r])?n[r]=qE(t[r],e[r]):n[r]=e[r]}),n}var ib=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...rt(Ce(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...rt(Ce(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>qE(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},_s=class HE extends ib{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new HE(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const a=s.marks();if(!!!a.find(f=>(f==null?void 0:f.type.name)===n.name))return!1;const u=a.find(f=>(f==null?void 0:f.type.name)===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function yR(t){return typeof t=="number"}var vR=class{constructor(t){this.find=t.find,this.handler=t.handler}},wR=(t,e,n)=>{if(Z0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function SR(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:a,dropEvent:d}=t,{commands:u,chain:f,can:p}=new af({editor:e,state:n}),g=[];return n.doc.nodesBetween(r,s,(w,C)=>{var E,N,k,_,j;if((N=(E=w.type)==null?void 0:E.spec)!=null&&N.code||!(w.isText||w.isTextblock||w.isInline))return;const P=(j=(_=(k=w.content)==null?void 0:k.size)!=null?_:w.nodeSize)!=null?j:0,z=Math.max(r,C),O=Math.min(s,C+P);if(z>=O)return;const D=w.isText?w.text||"":w.textBetween(z-C,O-C,void 0,"");wR(D,o.find,a).forEach(G=>{if(G.index===void 0)return;const le=z+G.index+1,Ne=le+G[0].length,ne={from:n.tr.mapping.map(le),to:n.tr.mapping.map(Ne)},oe=o.handler({state:n,range:ne,match:G,commands:u,chain:f,can:p,pasteEvent:a,dropEvent:d});g.push(oe)})}),g.every(w=>w!==null)}var Eu=null,CR=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function NR(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,d;try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}const u=({state:p,from:g,to:x,rule:w,pasteEvt:C})=>{const E=p.tr,N=of({state:p,transaction:E});if(!(!SR({editor:e,state:N,from:Math.max(g-1,0),to:x.b-1,rule:w,pasteEvent:C,dropEvent:d})||!E.steps.length)){try{d=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{d=null}return a=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return n.map(p=>new _t({view(g){const x=C=>{var E;r=(E=g.dom.parentElement)!=null&&E.contains(C.target)?g.dom.parentElement:null,r&&(Eu=e)},w=()=>{Eu&&(Eu=null)};return window.addEventListener("dragstart",x),window.addEventListener("dragend",w),{destroy(){window.removeEventListener("dragstart",x),window.removeEventListener("dragend",w)}}},props:{handleDOMEvents:{drop:(g,x)=>{if(o=r===g.dom.parentElement,d=x,!o){const w=Eu;w!=null&&w.isEditable&&setTimeout(()=>{const C=w.state.selection;C&&w.commands.deleteRange({from:C.from,to:C.to})},10)}return!1},paste:(g,x)=>{var w;const C=(w=x.clipboardData)==null?void 0:w.getData("text/html");return a=x,s=!!(C!=null&&C.includes("data-pm-slice")),!1}}},appendTransaction:(g,x,w)=>{const C=g[0],E=C.getMeta("uiEvent")==="paste"&&!s,N=C.getMeta("uiEvent")==="drop"&&!o,k=C.getMeta("applyPasteRules"),_=!!k;if(!E&&!N&&!_)return;if(_){let{text:z}=k;typeof z=="string"?z=z:z=rb(se.from(z),w.schema);const{from:O}=k,D=O+z.length,te=CR(z);return u({rule:p,state:w,from:O,to:{b:D},pasteEvt:te})}const j=x.doc.content.findDiffStart(w.doc.content),P=x.doc.content.findDiffEnd(w.doc.content);if(!(!yR(j)||!P||j===P.b))return u({rule:p,state:w,from:j,to:P,pasteEvt:a})}}))}var hf=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=PE(t),this.schema=UM(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Zm(e.name,this.schema)},r=Ce(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return sb([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Zm(r.name,this.schema)},o=[],a=Ce(r,"addKeyboardShortcuts",s);let d={};if(r.type==="mark"&&Ce(r,"exitable",s)&&(d.ArrowRight=()=>_s.handleExit({editor:t,mark:r})),a){const x=Object.fromEntries(Object.entries(a()).map(([w,C])=>[w,()=>C({editor:t})]));d={...d,...x}}const u=H4(d);o.push(u);const f=Ce(r,"addInputRules",s);if(Ow(r,t.options.enableInputRules)&&f){const x=f();if(x&&x.length){const w=bR({editor:t,rules:x}),C=Array.isArray(w)?w:[w];o.push(...C)}}const p=Ce(r,"addPasteRules",s);if(Ow(r,t.options.enablePasteRules)&&p){const x=p();if(x&&x.length){const w=NR({editor:t,rules:x});o.push(...w)}}const g=Ce(r,"addProseMirrorPlugins",s);if(g){const x=g();o.push(...x)}return o})}get attributes(){return DE(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=zc(this.extensions);return Object.fromEntries(e.filter(n=>!!Ce(n,"addNodeView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:zt(n.name,this.schema)},o=Ce(n,"addNodeView",s);if(!o)return[];const a=o();if(!a)return[];const d=(u,f,p,g,x)=>{const w=ah(u,r);return a({node:u,view:f,getPos:p,decorations:g,innerDecorations:x,editor:t,extension:n,HTMLAttributes:w})};return[n.name,d]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=zc(this.extensions);return Object.fromEntries(e.filter(n=>!!Ce(n,"addMarkView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:As(n.name,this.schema)},o=Ce(n,"addMarkView",s);if(!o)return[];const a=(d,u,f)=>{const p=ah(d,r);return o()({mark:d,view:u,inline:f,editor:t,extension:n,HTMLAttributes:p,updateAttributes:g=>{UR(d,t,g)}})};return[n.name,a]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Zm(e.name,this.schema)};e.type==="mark"&&((n=rt(Ce(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Ce(e,"onBeforeCreate",r),o=Ce(e,"onCreate",r),a=Ce(e,"onUpdate",r),d=Ce(e,"onSelectionUpdate",r),u=Ce(e,"onTransaction",r),f=Ce(e,"onFocus",r),p=Ce(e,"onBlur",r),g=Ce(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),a&&this.editor.on("update",a),d&&this.editor.on("selectionUpdate",d),u&&this.editor.on("transaction",u),f&&this.editor.on("focus",f),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}};hf.resolve=PE;hf.sort=sb;hf.flatten=nb;var ER={};Q0(ER,{ClipboardTextSerializer:()=>FE,Commands:()=>$E,Delete:()=>GE,Drop:()=>JE,Editable:()=>KE,FocusEvents:()=>YE,Keymap:()=>XE,Paste:()=>QE,Tabindex:()=>ZE,focusEventsPluginKey:()=>WE});var ct=class VE extends ib{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new VE(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},FE=ct.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new _t({key:new Qt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,a=Math.min(...o.map(p=>p.$from.pos)),d=Math.max(...o.map(p=>p.$to.pos)),u=LE(n);return OE(r,{from:a,to:d},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),$E=ct.create({name:"commands",addCommands(){return{...EE}}}),GE=ct.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const o=()=>{var a,d,u,f;if((f=(u=(d=(a=this.editor.options.coreExtensionOptions)==null?void 0:a.delete)==null?void 0:d.filterTransaction)==null?void 0:u.call(d,t))!=null?f:t.getMeta("y-sync$"))return;const p=RE(t.before,[t,...e]);UE(p).forEach(w=>{p.mapping.mapResult(w.oldRange.from).deletedAfter&&p.mapping.mapResult(w.oldRange.to).deletedBefore&&p.before.nodesBetween(w.oldRange.from,w.oldRange.to,(C,E)=>{const N=E+C.nodeSize-2,k=w.oldRange.from<=E&&N<=w.oldRange.to;this.editor.emit("delete",{type:"node",node:C,from:E,to:N,newFrom:p.mapping.map(E),newTo:p.mapping.map(N),deletedRange:w.oldRange,newRange:w.newRange,partial:!k,editor:this.editor,transaction:t,combinedTransform:p})})});const x=p.mapping;p.steps.forEach((w,C)=>{var E,N;if(w instanceof Ar){const k=x.slice(C).map(w.from,-1),_=x.slice(C).map(w.to),j=x.invert().map(k,-1),P=x.invert().map(_),z=(E=p.doc.nodeAt(k-1))==null?void 0:E.marks.some(D=>D.eq(w.mark)),O=(N=p.doc.nodeAt(_))==null?void 0:N.marks.some(D=>D.eq(w.mark));this.editor.emit("delete",{type:"mark",mark:w.mark,from:w.from,to:w.to,deletedRange:{from:j,to:P},newRange:{from:k,to:_},partial:!!(O||z),editor:this.editor,transaction:t,combinedTransform:p})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),JE=ct.create({name:"drop",addProseMirrorPlugins(){return[new _t({key:new Qt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),KE=ct.create({name:"editable",addProseMirrorPlugins(){return[new _t({key:new Qt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),WE=new Qt("focusEvents"),YE=ct.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new _t({key:WE,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),XE=ct.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:a})=>[()=>a.undoInputRule(),()=>a.command(({tr:d})=>{const{selection:u,doc:f}=d,{empty:p,$anchor:g}=u,{pos:x,parent:w}=g,C=g.parent.isTextblock&&x>0?d.doc.resolve(x-1):g,E=C.parent.type.spec.isolating,N=g.pos-g.parentOffset,k=E&&C.parent.childCount===1?N===g.pos:Be.atStart(f).from===x;return!p||!w.type.isTextblock||w.textContent.length||!k||k&&g.parent.type.name==="paragraph"?!1:a.clearNodes()}),()=>a.deleteSelection(),()=>a.joinBackward(),()=>a.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:a})=>[()=>a.deleteSelection(),()=>a.deleteCurrentNode(),()=>a.joinForward(),()=>a.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:a})=>[()=>a.newlineInCode(),()=>a.createParagraphNear(),()=>a.liftEmptyBlock(),()=>a.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return tb()||jE()?o:s},addProseMirrorPlugins(){return[new _t({key:new Qt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(E=>E.getMeta("composition")))return;const r=t.some(E=>E.docChanged)&&!e.doc.eq(n.doc),s=t.some(E=>E.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:a,to:d}=e.selection,u=Be.atStart(e.doc).from,f=Be.atEnd(e.doc).to;if(o||!(a===u&&d===f)||!df(n.doc))return;const x=n.tr,w=of({state:n,transaction:x}),{commands:C}=new af({editor:this.editor,state:w});if(C.clearNodes(),!!x.steps.length)return x}})]}}),QE=ct.create({name:"paste",addProseMirrorPlugins(){return[new _t({key:new Qt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),ZE=ct.create({name:"tabindex",addProseMirrorPlugins(){return[new _t({key:new Qt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),TR=class ka{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new ka(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new ka(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new ka(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,a=this.pos+r+(o?0:1);if(a<0||a>this.resolvedPos.doc.nodeSize-2)return;const d=this.resolvedPos.doc.resolve(a);if(!s&&d.depth<=this.depth)return;const u=new ka(d,this.editor,s,s?n:null);s&&(u.actualDepth=this.depth+1),e.push(new ka(d,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,a=Object.keys(n);for(let d=0;d<a.length;d+=1){const u=a[d];if(o[u]!==n[u])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(a=>{r&&s.length>0||(a.node.type.name===e&&o.every(u=>n[u]===a.node.attrs[u])&&s.push(a),!(r&&s.length>0)&&(s=s.concat(a.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},kR=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function AR(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var _R=class extends mR{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:s,moved:o})=>this.options.onDrop(r,s,o)),this.on("paste",({event:r,slice:s})=>this.options.onPaste(r,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=AE(e,this.options.autofocus);this.editorState=Ma.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t!=null&&t.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=AR(kR,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=IE(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;n=n.filter(a=>!a.key.startsWith(o))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[KE,FE.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),$E,YE,XE,ZE,JE,QE,GE].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new hf(r,this)}createCommandManager(){this.commandManager=new af({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Vg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Vg(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){var e;this.editorView=new CE(t,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(f=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(f)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),s=n.includes(t),o=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const a=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),d=a==null?void 0:a.getMeta("focus"),u=a==null?void 0:a.getMeta("blur");d&&this.emit("focus",{editor:this,event:d.event,transaction:a}),u&&this.emit("blur",{editor:this,event:u.event,transaction:a}),!(t.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||o.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return BE(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return JM(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return rb(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return qM(this.state.doc,{blockSeparator:e,textSerializers:{...LE(this.schema),...n}})}get isEmpty(){return df(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new TR(e,this)}get $doc(){return this.$pos(0)}};function Oi(t){return new uf({find:t.find,handler:({state:e,range:n,match:r})=>{const s=rt(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,a=r[r.length-1],d=r[0];if(a){const u=d.search(/\S/),f=n.from+d.indexOf(a),p=f+a.length;if(ob(n.from,n.to,e.doc).filter(w=>w.mark.type.excluded.find(E=>E===t.type&&E!==w.mark.type)).filter(w=>w.to>f).length)return null;p<n.to&&o.delete(p,n.to),f>n.from&&o.delete(n.from+u,f);const x=n.from+u+a.length;o.addMark(n.from+u,x,t.type.create(s||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function eT(t){return new uf({find:t.find,handler:({state:e,range:n,match:r})=>{const s=rt(t.getAttributes,void 0,r)||{},{tr:o}=e,a=n.from;let d=n.to;const u=t.type.create(s);if(r[1]){const f=r[0].lastIndexOf(r[1]);let p=a+f;p>d?p=d:d=p+r[1].length;const g=r[0][r[0].length-1];o.insertText(g,a+r[0].length-1),o.replaceWith(p,d,u)}else if(r[0]){const f=t.type.isInline?a:a-1;o.insert(f,t.type.create(s)).delete(o.mapping.map(a),o.mapping.map(d))}o.scrollIntoView()},undoable:t.undoable})}function $g(t){return new uf({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=rt(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function Ka(t){return new uf({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=rt(t.getAttributes,void 0,r)||{},a=e.tr.delete(n.from,n.to),u=a.doc.resolve(n.from).blockRange(),f=u&&O0(u,t.type,o);if(!f)return null;if(a.wrap(u,f),t.keepMarks&&t.editor){const{selection:g,storedMarks:x}=e,{splittableMarks:w}=t.editor.extensionManager,C=x||g.$to.parentOffset&&g.$from.marks();if(C){const E=C.filter(N=>w.includes(N.type.name));a.ensureMarks(E)}}if(t.keepAttributes){const g=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(g,o).run()}const p=a.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&Po(a.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&a.join(n.from-1)},undoable:t.undoable})}var jR=t=>"touches"in t,MR=class{constructor(t){this.directions=["bottom-left","bottom-right","top-left","top-right"],this.minSize={height:8,width:8},this.preserveAspectRatio=!1,this.classNames={container:"",wrapper:"",handle:"",resizing:""},this.initialWidth=0,this.initialHeight=0,this.aspectRatio=1,this.isResizing=!1,this.activeHandle=null,this.startX=0,this.startY=0,this.startWidth=0,this.startHeight=0,this.isShiftKeyPressed=!1,this.handleMouseMove=a=>{if(!this.isResizing||!this.activeHandle)return;const d=a.clientX-this.startX,u=a.clientY-this.startY;this.handleResize(d,u)},this.handleTouchMove=a=>{if(!this.isResizing||!this.activeHandle)return;const d=a.touches[0];if(!d)return;const u=d.clientX-this.startX,f=d.clientY-this.startY;this.handleResize(u,f)},this.handleMouseUp=()=>{if(!this.isResizing)return;const a=this.element.offsetWidth,d=this.element.offsetHeight;this.onCommit(a,d),this.isResizing=!1,this.activeHandle=null,this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp)},this.handleKeyDown=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!0)},this.handleKeyUp=a=>{a.key==="Shift"&&(this.isShiftKeyPressed=!1)};var e,n,r,s,o;this.node=t.node,this.element=t.element,this.contentElement=t.contentElement,this.getPos=t.getPos,this.onResize=t.onResize,this.onCommit=t.onCommit,this.onUpdate=t.onUpdate,(e=t.options)!=null&&e.min&&(this.minSize={...this.minSize,...t.options.min}),(n=t.options)!=null&&n.max&&(this.maxSize=t.options.max),(r=t==null?void 0:t.options)!=null&&r.directions&&(this.directions=t.options.directions),(s=t.options)!=null&&s.preserveAspectRatio&&(this.preserveAspectRatio=t.options.preserveAspectRatio),(o=t.options)!=null&&o.className&&(this.classNames={container:t.options.className.container||"",wrapper:t.options.className.wrapper||"",handle:t.options.className.handle||"",resizing:t.options.className.resizing||""}),this.wrapper=this.createWrapper(),this.container=this.createContainer(),this.applyInitialSize(),this.attachHandles()}get dom(){return this.container}get contentDOM(){return this.contentElement}update(t,e,n){return t.type!==this.node.type?!1:(this.node=t,this.onUpdate?this.onUpdate(t,e,n):!0)}destroy(){this.isResizing&&(this.container.dataset.resizeState="false",this.classNames.resizing&&this.container.classList.remove(this.classNames.resizing),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("keyup",this.handleKeyUp),this.isResizing=!1,this.activeHandle=null),this.container.remove()}createContainer(){const t=document.createElement("div");return t.dataset.resizeContainer="",t.dataset.node=this.node.type.name,t.style.display="flex",t.style.justifyContent="flex-start",t.style.alignItems="flex-start",this.classNames.container&&(t.className=this.classNames.container),t.appendChild(this.wrapper),t}createWrapper(){const t=document.createElement("div");return t.style.position="relative",t.style.display="block",t.dataset.resizeWrapper="",this.classNames.wrapper&&(t.className=this.classNames.wrapper),t.appendChild(this.element),t}createHandle(t){const e=document.createElement("div");return e.dataset.resizeHandle=t,e.style.position="absolute",this.classNames.handle&&(e.className=this.classNames.handle),e}positionHandle(t,e){const n=e.includes("top"),r=e.includes("bottom"),s=e.includes("left"),o=e.includes("right");n&&(t.style.top="0"),r&&(t.style.bottom="0"),s&&(t.style.left="0"),o&&(t.style.right="0"),(e==="top"||e==="bottom")&&(t.style.left="0",t.style.right="0"),(e==="left"||e==="right")&&(t.style.top="0",t.style.bottom="0")}attachHandles(){this.directions.forEach(t=>{const e=this.createHandle(t);this.positionHandle(e,t),e.addEventListener("mousedown",n=>this.handleResizeStart(n,t)),e.addEventListener("touchstart",n=>this.handleResizeStart(n,t)),this.wrapper.appendChild(e)})}applyInitialSize(){const t=this.node.attrs.width,e=this.node.attrs.height;t?(this.element.style.width=`${t}px`,this.initialWidth=t):this.initialWidth=this.element.offsetWidth,e?(this.element.style.height=`${e}px`,this.initialHeight=e):this.initialHeight=this.element.offsetHeight,this.initialWidth>0&&this.initialHeight>0&&(this.aspectRatio=this.initialWidth/this.initialHeight)}handleResizeStart(t,e){t.preventDefault(),t.stopPropagation(),this.isResizing=!0,this.activeHandle=e,jR(t)?(this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY):(this.startX=t.clientX,this.startY=t.clientY),this.startWidth=this.element.offsetWidth,this.startHeight=this.element.offsetHeight,this.startWidth>0&&this.startHeight>0&&(this.aspectRatio=this.startWidth/this.startHeight),this.getPos(),this.container.dataset.resizeState="true",this.classNames.resizing&&this.container.classList.add(this.classNames.resizing),document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("touchmove",this.handleTouchMove),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",this.handleKeyUp)}handleResize(t,e){if(!this.activeHandle)return;const n=this.preserveAspectRatio||this.isShiftKeyPressed,{width:r,height:s}=this.calculateNewDimensions(this.activeHandle,t,e),o=this.applyConstraints(r,s,n);this.element.style.width=`${o.width}px`,this.element.style.height=`${o.height}px`,this.onResize&&this.onResize(o.width,o.height)}calculateNewDimensions(t,e,n){let r=this.startWidth,s=this.startHeight;const o=t.includes("right"),a=t.includes("left"),d=t.includes("bottom"),u=t.includes("top");return o?r=this.startWidth+e:a&&(r=this.startWidth-e),d?s=this.startHeight+n:u&&(s=this.startHeight-n),(t==="right"||t==="left")&&(r=this.startWidth+(o?e:-e)),(t==="top"||t==="bottom")&&(s=this.startHeight+(d?n:-n)),this.preserveAspectRatio||this.isShiftKeyPressed?this.applyAspectRatio(r,s,t):{width:r,height:s}}applyConstraints(t,e,n){var r,s,o,a;if(!n){let f=Math.max(this.minSize.width,t),p=Math.max(this.minSize.height,e);return(r=this.maxSize)!=null&&r.width&&(f=Math.min(this.maxSize.width,f)),(s=this.maxSize)!=null&&s.height&&(p=Math.min(this.maxSize.height,p)),{width:f,height:p}}let d=t,u=e;return d<this.minSize.width&&(d=this.minSize.width,u=d/this.aspectRatio),u<this.minSize.height&&(u=this.minSize.height,d=u*this.aspectRatio),(o=this.maxSize)!=null&&o.width&&d>this.maxSize.width&&(d=this.maxSize.width,u=d/this.aspectRatio),(a=this.maxSize)!=null&&a.height&&u>this.maxSize.height&&(u=this.maxSize.height,d=u*this.aspectRatio),{width:d,height:u}}applyAspectRatio(t,e,n){const r=n==="left"||n==="right",s=n==="top"||n==="bottom";return r?{width:t,height:t/this.aspectRatio}:s?{width:e*this.aspectRatio,height:e}:{width:t,height:t/this.aspectRatio}}};function RR(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Ee){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}var IR={};Q0(IR,{createAtomBlockMarkdownSpec:()=>DR,createBlockMarkdownSpec:()=>PR,createInlineMarkdownSpec:()=>BR,parseAttributes:()=>ab,parseIndentedBlocks:()=>Gg,renderNestedMarkdownContent:()=>cb,serializeAttributes:()=>lb});function ab(t){if(!(t!=null&&t.trim()))return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,f=>(n.push(f),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const f=s.map(p=>p.trim().slice(1));e.class=f.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const a=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(a)).forEach(([,f,p])=>{var g;const x=parseInt(((g=p.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),w=n[x];w&&(e[f]=w.slice(1,-1))});const u=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return u&&u.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function lb(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function DR(t){const{nodeName:e,name:n,parseAttributes:r=ab,serializeAttributes:s=lb,defaultAttributes:o={},requiredAttributes:a=[],allowedAttributes:d}=t,u=n||e,f=p=>{if(!d)return p;const g={};return d.forEach(x=>{x in p&&(g[x]=p[x])}),g};return{parseMarkdown:(p,g)=>{const x={...o,...p.attributes};return g.createNode(e,x,[])},markdownTokenizer:{name:e,level:"block",start(p){var g;const x=new RegExp(`^:::${u}(?:\\s|$)`,"m"),w=(g=p.match(x))==null?void 0:g.index;return w!==void 0?w:-1},tokenize(p,g,x){const w=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),C=p.match(w);if(!C)return;const E=C[1]||"",N=r(E);if(!a.find(_=>!(_ in N)))return{type:e,raw:C[0],attributes:N}}},renderMarkdown:p=>{const g=f(p.attrs||{}),x=s(g),w=x?` {${x}}`:"";return`:::${u}${w} :::`}}}function PR(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=ab,serializeAttributes:o=lb,defaultAttributes:a={},content:d="block",allowedAttributes:u}=t,f=n||e,p=g=>{if(!u)return g;const x={};return u.forEach(w=>{w in g&&(x[w]=g[w])}),x};return{parseMarkdown:(g,x)=>{let w;if(r){const E=r(g);w=typeof E=="string"?[{type:"text",text:E}]:E}else d==="block"?w=x.parseChildren(g.tokens||[]):w=x.parseInline(g.tokens||[]);const C={...a,...g.attributes};return x.createNode(e,C,w)},markdownTokenizer:{name:e,level:"block",start(g){var x;const w=new RegExp(`^:::${f}`,"m"),C=(x=g.match(w))==null?void 0:x.index;return C!==void 0?C:-1},tokenize(g,x,w){var C;const E=new RegExp(`^:::${f}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),N=g.match(E);if(!N)return;const[k,_=""]=N,j=s(_);let P=1;const z=k.length;let O="";const D=/^:::([\w-]*)(\s.*)?/gm,te=g.slice(z);for(D.lastIndex=0;;){const G=D.exec(te);if(G===null)break;const le=G.index,Ne=G[1];if(!((C=G[2])!=null&&C.endsWith(":::"))){if(Ne)P+=1;else if(P-=1,P===0){const ne=te.slice(0,le);O=ne.trim();const oe=g.slice(0,z+le+G[0].length);let me=[];if(O)if(d==="block")for(me=w.blockTokens(ne),me.forEach(fe=>{fe.text&&(!fe.tokens||fe.tokens.length===0)&&(fe.tokens=w.inlineTokens(fe.text))});me.length>0;){const fe=me[me.length-1];if(fe.type==="paragraph"&&(!fe.text||fe.text.trim()===""))me.pop();else break}else me=w.inlineTokens(O);return{type:e,raw:oe,attributes:j,content:O,tokens:me}}}}}},renderMarkdown:(g,x)=>{const w=p(g.attrs||{}),C=o(w),E=C?` {${C}}`:"",N=x.renderChildren(g.content||[],`

`);return`:::${f}${E}

${N}

:::`}}}function OR(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,o,a]=r;e[s]=o||a,r=n.exec(t)}return e}function LR(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function BR(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=OR,serializeAttributes:o=LR,defaultAttributes:a={},selfClosing:d=!1,allowedAttributes:u}=t,f=n||e,p=x=>{if(!u)return x;const w={};return u.forEach(C=>{C in x&&(w[C]=x[C])}),w},g=f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(x,w)=>{const C={...a,...x.attributes};if(d)return w.createNode(e,C);const E=r?r(x):x.content||"";return E?w.createNode(e,C,[w.createTextNode(E)]):w.createNode(e,C,[])},markdownTokenizer:{name:e,level:"inline",start(x){const w=d?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),C=x.match(w),E=C==null?void 0:C.index;return E!==void 0?E:-1},tokenize(x,w,C){const E=d?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),N=x.match(E);if(!N)return;let k="",_="";if(d){const[,P]=N;_=P}else{const[,P,z]=N;_=P,k=z||""}const j=s(_.trim());return{type:e,raw:N[0],content:k.trim(),attributes:j}}},renderMarkdown:x=>{let w="";r?w=r(x):x.content&&x.content.length>0&&(w=x.content.filter(k=>k.type==="text").map(k=>k.text).join(""));const C=p(x.attrs||{}),E=o(C),N=E?` ${E}`:"";return d?`[${f}${N}]`:`[${f}${N}]${w}[/${f}]`}}}function Gg(t,e,n){var r,s,o,a;const d=t.split(`
`),u=[];let f="",p=0;const g=e.baseIndentSize||2;for(;p<d.length;){const x=d[p],w=x.match(e.itemPattern);if(!w){if(u.length>0)break;if(x.trim()===""){p+=1;continue}else return}const C=e.extractItemData(w),{indentLevel:E,mainContent:N}=C;f=`${f}${x}
`;const k=[N];for(p+=1;p<d.length;){const z=d[p];if(z.trim()===""){const D=d.slice(p+1).findIndex(le=>le.trim()!=="");if(D===-1)break;if((((s=(r=d[p+1+D].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>E){k.push(z),f=`${f}${z}
`,p+=1;continue}else break}if((((a=(o=z.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:a.length)||0)>E)k.push(z),f=`${f}${z}
`,p+=1;else break}let _;const j=k.slice(1);if(j.length>0){const z=j.map(O=>O.slice(E+g)).join(`
`);z.trim()&&(e.customNestedParser?_=e.customNestedParser(z):_=n.blockTokens(z))}const P=e.createToken(C,_);u.push(P)}if(u.length!==0)return{items:u,raw:f.trim()}}function cb(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[o,...a]=t.content,d=e.renderChildren([o]),u=[`${s}${d}`];return a&&a.length>0&&a.forEach(f=>{const p=e.renderChildren([f]);if(p){const g=p.split(`
`).map(x=>x?e.indent(x):"").join(`
`);u.push(g)}}),u.join(`
`)}function UR(t,e,n={}){const{state:r}=e,{doc:s,tr:o}=r,a=t;s.descendants((d,u)=>{const f=o.mapping.map(u),p=o.mapping.map(u)+d.nodeSize;let g=null;if(d.marks.forEach(w=>{if(w!==a)return!1;g=w}),!g)return;let x=!1;if(Object.keys(n).forEach(w=>{n[w]!==g.attrs[w]&&(x=!0)}),x){const w=t.type.create({...t.attrs,...n});o.removeMark(f,p,t.type),o.addMark(f,p,w)}}),o.docChanged&&e.view.dispatch(o)}var On=class tT extends ib{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new tT(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Do(t){return new vR({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=rt(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:a}=e,d=r[r.length-1],u=r[0];let f=n.to;if(d){const p=u.search(/\S/),g=n.from+u.indexOf(d),x=g+d.length;if(ob(n.from,n.to,e.doc).filter(C=>C.mark.type.excluded.find(N=>N===t.type&&N!==C.mark.type)).filter(C=>C.to>g).length)return null;x<n.to&&a.delete(x,n.to),g>n.from&&a.delete(n.from+p,g),f=n.from+p+d.length,a.addMark(n.from+p,f,t.type.create(o||{})),a.removeStoredMark(t.type)}}})}var ng,Uw;function zR(){return Uw||(Uw=1,ng=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,o;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;for(s of e.entries())if(!t(s[1],n.get(s[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(s of e.entries())if(!n.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(e[s]!==n[s])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(o=Object.keys(e),r=o.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[s]))return!1;for(s=r;s--!==0;){var a=o[s];if(!(a==="_owner"&&e.$$typeof)&&!t(e[a],n[a]))return!1}return!0}return e!==e&&n!==n}),ng}var qR=zR();const HR=Gc(qR);var rg={exports:{}},sg={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zw;function VR(){if(zw)return sg;zw=1;var t=Jc(),e=YC();function n(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var r=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,o=t.useRef,a=t.useEffect,d=t.useMemo,u=t.useDebugValue;return sg.useSyncExternalStoreWithSelector=function(f,p,g,x,w){var C=o(null);if(C.current===null){var E={hasValue:!1,value:null};C.current=E}else E=C.current;C=d(function(){function k(O){if(!_){if(_=!0,j=O,O=x(O),w!==void 0&&E.hasValue){var D=E.value;if(w(D,O))return P=D}return P=O}if(D=P,r(j,O))return D;var te=x(O);return w!==void 0&&w(D,te)?(j=O,D):(j=O,P=te)}var _=!1,j,P,z=g===void 0?null:g;return[function(){return k(p())},z===null?void 0:function(){return k(z())}]},[p,g,x,w]);var N=s(f,C[0],C[1]);return a(function(){E.hasValue=!0,E.value=N},[N]),u(N),N},sg}var qw;function FR(){return qw||(qw=1,rg.exports=VR()),rg.exports}var $R=FR(),GR=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},JR=({contentComponent:t})=>{const e=XC.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return l.jsx(l.Fragment,{children:Object.values(e)})};function KR(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:B5.createPortal(r.reactElement,r.element,n)},t.forEach(s=>s())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(s=>s())}}}var WR=class extends vn.Component{constructor(t){var e;super(t),this.editorContentRef=vn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const t=this.props.editor;if(t&&!t.isDestroyed&&t.options.element){if(t.contentComponent)return;const e=this.editorContentRef.current;e.append(t.view.dom),t.setOptions({element:e}),t.contentComponent=KR(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=t.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),t.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.firstChild))return;const n=document.createElement("div");n.append(e.view.dom),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return l.jsxs(l.Fragment,{children:[l.jsx("div",{ref:GR(e,this.editorContentRef),...n}),(t==null?void 0:t.contentComponent)&&l.jsx(JR,{contentComponent:t.contentComponent})]})}},YR=R.forwardRef((t,e)=>{const n=vn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return vn.createElement(WR,{key:n,innerRef:e,...t})}),XR=vn.memo(YR),QR=typeof window<"u"?R.useLayoutEffect:R.useEffect,ZR=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function eI(t){var e;const[n]=R.useState(()=>new ZR(t.editor)),r=$R.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:HR);return QR(()=>n.watch(t.editor),[t.editor,n]),R.useDebugValue(r),r}var tI=!1,Jg=typeof window>"u",nI=Jg||!!(typeof window<"u"&&window.next),rI=class nT{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Jg||nI?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onBeforeCreate)==null?void 0:o.call(s,...r)},onBlur:(...r)=>{var s,o;return(o=(s=this.options.current).onBlur)==null?void 0:o.call(s,...r)},onCreate:(...r)=>{var s,o;return(o=(s=this.options.current).onCreate)==null?void 0:o.call(s,...r)},onDestroy:(...r)=>{var s,o;return(o=(s=this.options.current).onDestroy)==null?void 0:o.call(s,...r)},onFocus:(...r)=>{var s,o;return(o=(s=this.options.current).onFocus)==null?void 0:o.call(s,...r)},onSelectionUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onSelectionUpdate)==null?void 0:o.call(s,...r)},onTransaction:(...r)=>{var s,o;return(o=(s=this.options.current).onTransaction)==null?void 0:o.call(s,...r)},onUpdate:(...r)=>{var s,o;return(o=(s=this.options.current).onUpdate)==null?void 0:o.call(s,...r)},onContentError:(...r)=>{var s,o;return(o=(s=this.options.current).onContentError)==null?void 0:o.call(s,...r)},onDrop:(...r)=>{var s,o;return(o=(s=this.options.current).onDrop)==null?void 0:o.call(s,...r)},onPaste:(...r)=>{var s,o;return(o=(s=this.options.current).onPaste)==null?void 0:o.call(s,...r)},onDelete:(...r)=>{var s,o;return(o=(s=this.options.current).onDelete)==null?void 0:o.call(s,...r)}};return new _R(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,o)=>{var a;return s===((a=n.extensions)==null?void 0:a[o])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?nT.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,s)=>r===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function sI(t={},e=[]){const n=R.useRef(t);n.current=t;const[r]=R.useState(()=>new rI(n)),s=XC.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return R.useDebugValue(s),R.useEffect(r.onRender(e)),eI({editor:s,selector:({transactionNumber:o})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&o===0?0:o+1}),s}var oI=R.createContext({editor:null});oI.Consumer;var iI=R.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),aI=()=>R.useContext(iI);vn.forwardRef((t,e)=>{const{onDragStart:n}=aI(),r=t.as||"div";return l.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});vn.createContext({markViewContentRef:()=>{}});var lh=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},lI=/^\s*>\s$/,cI=On.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return lh("blockquote",{...St(this.options.HTMLAttributes,t),children:lh("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=[];return t.content.forEach(s=>{const a=e.renderChildren(s).split(`
`).map(d=>`> ${d}`).join(`
`);n.push(a)}),n.flatMap(s=>[s,"> "]).slice(0,-1).join(`
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ka({find:lI,type:this.type})]}}),dI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,uI=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,hI=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,fI=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pI=_s.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return lh("strong",{...St(this.options.HTMLAttributes,t),children:lh("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Oi({find:dI,type:this.type}),Oi({find:hI,type:this.type})]},addPasteRules(){return[Do({find:uI,type:this.type}),Do({find:fI,type:this.type})]}}),mI=/(^|[^`])`([^`]+)`(?!`)$/,gI=/(^|[^`])`([^`]+)`(?!`)/g,bI=_s.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",St(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Oi({find:mI,type:this.type})]},addPasteRules(){return[Do({find:gI,type:this.type})]}}),og=4,xI=/^```([a-z]+)?[\s\n]$/,yI=/^~~~([a-z]+)?[\s\n]$/,vI=On.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:og,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(a=>a.startsWith(n)).map(a=>a.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",St(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:og,{state:r}=t,{selection:s}=r,{$from:o,empty:a}=s;if(o.parent.type!==this.type)return!1;const d=" ".repeat(n);return a?t.commands.insertContent(d):t.commands.command(({tr:u})=>{const{from:f,to:p}=s,w=r.doc.textBetween(f,p,`
`,`
`).split(`
`).map(C=>d+C).join(`
`);return u.replaceWith(f,p,r.schema.text(w)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:og,{state:r}=t,{selection:s}=r,{$from:o,empty:a}=s;return o.parent.type!==this.type?!1:a?t.commands.command(({tr:d})=>{var u;const{pos:f}=o,p=o.start(),g=o.end(),w=r.doc.textBetween(p,g,`
`,`
`).split(`
`);let C=0,E=0;const N=f-p;for(let O=0;O<w.length;O+=1){if(E+w[O].length>=N){C=O;break}E+=w[O].length+1}const _=((u=w[C].match(/^ */))==null?void 0:u[0])||"",j=Math.min(_.length,n);if(j===0)return!0;let P=p;for(let O=0;O<C;O+=1)P+=w[O].length+1;return d.delete(P,P+j),f-P<=j&&d.setSelection(je.create(d.doc,P)),!0}):t.commands.command(({tr:d})=>{const{from:u,to:f}=s,x=r.doc.textBetween(u,f,`
`,`
`).split(`
`).map(w=>{var C;const E=((C=w.match(/^ */))==null?void 0:C[0])||"",N=Math.min(E.length,n);return w.slice(N)}).join(`
`);return d.replaceWith(u,f,r.schema.text(x)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,a=r.parent.textContent.endsWith(`

`);return!o||!a?!1:t.chain().command(({tr:d})=>(d.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const d=s.after();return d===void 0?!1:r.nodeAt(d)?t.commands.command(({tr:f})=>(f.setSelection(Be.near(r.resolve(d))),!0)):t.commands.exitCode()}}},addInputRules(){return[$g({find:xI,type:this.type,getAttributes:t=>({language:t[1]})}),$g({find:yI,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new _t({key:new Qt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s==null?void 0:s.mode;if(!n||!o)return!1;const{tr:a,schema:d}=t.state,u=d.text(n.replace(/\r\n?/g,`
`));return a.replaceSelectionWith(this.type.create({language:o},u)),a.selection.$from.parent.type!==this.type&&a.setSelection(je.near(a.doc.resolve(Math.max(0,a.selection.from-2)))),a.setMeta("paste",!0),t.dispatch(a),!0}}})]}}),wI=On.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),SI=On.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",St(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:a}=this.options,{splittableMarks:d}=r.extensionManager,u=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:f,dispatch:p})=>{if(p&&u&&a){const g=u.filter(x=>d.includes(x.type.name));f.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),CI=On.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,St(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>$g({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),NI=On.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",St(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!RR(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return zE(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:a,dispatch:d})=>{if(d){const{$to:u}=a.selection,f=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?a.setSelection(je.create(a.doc,u.pos+1)):u.nodeAfter.isBlock?a.setSelection(Ee.create(a.doc,u.pos)):a.setSelection(je.create(a.doc,u.pos));else{const p=o.schema.nodes[this.options.nextNodeType]||u.parent.type.contentMatch.defaultType,g=p==null?void 0:p.create();g&&(a.insert(f,g),a.setSelection(je.create(a.doc,f+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[eT({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),EI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,TI=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,kI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,AI=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,_I=_s.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",St(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Oi({find:EI,type:this.type}),Oi({find:kI,type:this.type})]},addPasteRules(){return[Do({find:TI,type:this.type}),Do({find:AI,type:this.type})]}});const jI="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",MI="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Kg="numeric",Wg="ascii",Yg="alpha",vc="asciinumeric",pc="alphanumeric",Xg="domain",rT="emoji",RI="scheme",II="slashscheme",ig="whitespace";function DI(t,e){return t in e||(e[t]=[]),e[t]}function Ni(t,e,n){e[Kg]&&(e[vc]=!0,e[pc]=!0),e[Wg]&&(e[vc]=!0,e[Yg]=!0),e[vc]&&(e[pc]=!0),e[Yg]&&(e[pc]=!0),e[pc]&&(e[Xg]=!0),e[rT]&&(e[Xg]=!0);for(const r in e){const s=DI(r,n);s.indexOf(t)<0&&s.push(t)}}function PI(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function In(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}In.groups={};In.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||In.groups;let s;return e&&e.j?s=e:(s=new In(e),n&&r&&Ni(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const o=t.length;if(!o)return s;for(let a=0;a<o-1;a++)s=s.tt(t[a]);return s.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||In.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const o=e;let a,d=s.go(t);if(d?(a=new In,Object.assign(a.j,d.j),a.jr.push.apply(a.jr,d.jr),a.jd=d.jd,a.t=d.t):a=new In,o){if(r)if(a.t&&typeof a.t=="string"){const u=Object.assign(PI(a.t,r),n);Ni(o,u,r)}else n&&Ni(o,n,r);a.t=o}return s.j[t]=a,a}};const Le=(t,e,n,r,s)=>t.ta(e,n,r,s),kt=(t,e,n,r,s)=>t.tr(e,n,r,s),Hw=(t,e,n,r,s)=>t.ts(e,n,r,s),ae=(t,e,n,r,s)=>t.tt(e,n,r,s),ys="WORD",Qg="UWORD",sT="ASCIINUMERICAL",oT="ALPHANUMERICAL",qc="LOCALHOST",Zg="TLD",e0="UTLD",$u="SCHEME",Aa="SLASH_SCHEME",db="NUM",t0="WS",ub="NL",wc="OPENBRACE",Sc="CLOSEBRACE",ch="OPENBRACKET",dh="CLOSEBRACKET",uh="OPENPAREN",hh="CLOSEPAREN",fh="OPENANGLEBRACKET",ph="CLOSEANGLEBRACKET",mh="FULLWIDTHLEFTPAREN",gh="FULLWIDTHRIGHTPAREN",bh="LEFTCORNERBRACKET",xh="RIGHTCORNERBRACKET",yh="LEFTWHITECORNERBRACKET",vh="RIGHTWHITECORNERBRACKET",wh="FULLWIDTHLESSTHAN",Sh="FULLWIDTHGREATERTHAN",Ch="AMPERSAND",Nh="APOSTROPHE",Eh="ASTERISK",yo="AT",Th="BACKSLASH",kh="BACKTICK",Ah="CARET",So="COLON",hb="COMMA",_h="DOLLAR",zr="DOT",jh="EQUALS",fb="EXCLAMATION",lr="HYPHEN",Cc="PERCENT",Mh="PIPE",Rh="PLUS",Ih="POUND",Nc="QUERY",pb="QUOTE",iT="FULLWIDTHMIDDLEDOT",mb="SEMI",qr="SLASH",Ec="TILDE",Dh="UNDERSCORE",aT="EMOJI",Ph="SYM";var lT=Object.freeze({__proto__:null,ALPHANUMERICAL:oT,AMPERSAND:Ch,APOSTROPHE:Nh,ASCIINUMERICAL:sT,ASTERISK:Eh,AT:yo,BACKSLASH:Th,BACKTICK:kh,CARET:Ah,CLOSEANGLEBRACKET:ph,CLOSEBRACE:Sc,CLOSEBRACKET:dh,CLOSEPAREN:hh,COLON:So,COMMA:hb,DOLLAR:_h,DOT:zr,EMOJI:aT,EQUALS:jh,EXCLAMATION:fb,FULLWIDTHGREATERTHAN:Sh,FULLWIDTHLEFTPAREN:mh,FULLWIDTHLESSTHAN:wh,FULLWIDTHMIDDLEDOT:iT,FULLWIDTHRIGHTPAREN:gh,HYPHEN:lr,LEFTCORNERBRACKET:bh,LEFTWHITECORNERBRACKET:yh,LOCALHOST:qc,NL:ub,NUM:db,OPENANGLEBRACKET:fh,OPENBRACE:wc,OPENBRACKET:ch,OPENPAREN:uh,PERCENT:Cc,PIPE:Mh,PLUS:Rh,POUND:Ih,QUERY:Nc,QUOTE:pb,RIGHTCORNERBRACKET:xh,RIGHTWHITECORNERBRACKET:vh,SCHEME:$u,SEMI:mb,SLASH:qr,SLASH_SCHEME:Aa,SYM:Ph,TILDE:Ec,TLD:Zg,UNDERSCORE:Dh,UTLD:e0,UWORD:Qg,WORD:ys,WS:t0});const gs=/[a-z]/,ac=new RegExp("\\p{L}","u"),ag=new RegExp("\\p{Emoji}","u"),bs=/\d/,lg=/\s/,Vw="\r",cg=`
`,OI="",LI="",dg="";let Tu=null,ku=null;function BI(t=[]){const e={};In.groups=e;const n=new In;Tu==null&&(Tu=Fw(jI)),ku==null&&(ku=Fw(MI)),ae(n,"'",Nh),ae(n,"{",wc),ae(n,"}",Sc),ae(n,"[",ch),ae(n,"]",dh),ae(n,"(",uh),ae(n,")",hh),ae(n,"<",fh),ae(n,">",ph),ae(n,"",mh),ae(n,"",gh),ae(n,"",bh),ae(n,"",xh),ae(n,"",yh),ae(n,"",vh),ae(n,"",wh),ae(n,"",Sh),ae(n,"&",Ch),ae(n,"*",Eh),ae(n,"@",yo),ae(n,"`",kh),ae(n,"^",Ah),ae(n,":",So),ae(n,",",hb),ae(n,"$",_h),ae(n,".",zr),ae(n,"=",jh),ae(n,"!",fb),ae(n,"-",lr),ae(n,"%",Cc),ae(n,"|",Mh),ae(n,"+",Rh),ae(n,"#",Ih),ae(n,"?",Nc),ae(n,'"',pb),ae(n,"/",qr),ae(n,";",mb),ae(n,"~",Ec),ae(n,"_",Dh),ae(n,"\\",Th),ae(n,"",iT);const r=kt(n,bs,db,{[Kg]:!0});kt(r,bs,r);const s=kt(r,gs,sT,{[vc]:!0}),o=kt(r,ac,oT,{[pc]:!0}),a=kt(n,gs,ys,{[Wg]:!0});kt(a,bs,s),kt(a,gs,a),kt(s,bs,s),kt(s,gs,s);const d=kt(n,ac,Qg,{[Yg]:!0});kt(d,gs),kt(d,bs,o),kt(d,ac,d),kt(o,bs,o),kt(o,gs),kt(o,ac,o);const u=ae(n,cg,ub,{[ig]:!0}),f=ae(n,Vw,t0,{[ig]:!0}),p=kt(n,lg,t0,{[ig]:!0});ae(n,dg,p),ae(f,cg,u),ae(f,dg,p),kt(f,lg,p),ae(p,Vw),ae(p,cg),kt(p,lg,p),ae(p,dg,p);const g=kt(n,ag,aT,{[rT]:!0});ae(g,"#"),kt(g,ag,g),ae(g,OI,g);const x=ae(g,LI);ae(x,"#"),kt(x,ag,g);const w=[[gs,a],[bs,s]],C=[[gs,null],[ac,d],[bs,o]];for(let E=0;E<Tu.length;E++)mo(n,Tu[E],Zg,ys,w);for(let E=0;E<ku.length;E++)mo(n,ku[E],e0,Qg,C);Ni(Zg,{tld:!0,ascii:!0},e),Ni(e0,{utld:!0,alpha:!0},e),mo(n,"file",$u,ys,w),mo(n,"mailto",$u,ys,w),mo(n,"http",Aa,ys,w),mo(n,"https",Aa,ys,w),mo(n,"ftp",Aa,ys,w),mo(n,"ftps",Aa,ys,w),Ni($u,{scheme:!0,ascii:!0},e),Ni(Aa,{slashscheme:!0,ascii:!0},e),t=t.sort((E,N)=>E[0]>N[0]?1:-1);for(let E=0;E<t.length;E++){const N=t[E][0],_=t[E][1]?{[RI]:!0}:{[II]:!0};N.indexOf("-")>=0?_[Xg]=!0:gs.test(N)?bs.test(N)?_[vc]=!0:_[Wg]=!0:_[Kg]=!0,Hw(n,N,N,_)}return Hw(n,"localhost",qc,{ascii:!0}),n.jd=new In(Ph),{start:n,tokens:Object.assign({groups:e},lT)}}function cT(t,e){const n=UI(e.replace(/[A-Z]/g,d=>d.toLowerCase())),r=n.length,s=[];let o=0,a=0;for(;a<r;){let d=t,u=null,f=0,p=null,g=-1,x=-1;for(;a<r&&(u=d.go(n[a]));)d=u,d.accepts()?(g=0,x=0,p=d):g>=0&&(g+=n[a].length,x++),f+=n[a].length,o+=n[a].length,a++;o-=g,a-=x,f-=g,s.push({t:p.t,v:e.slice(o-f,o),s:o-f,e:o})}return s}function UI(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),o,a=s<55296||s>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(a),r+=a.length}return e}function mo(t,e,n,r,s){let o;const a=e.length;for(let d=0;d<a-1;d++){const u=e[d];t.j[u]?o=t.j[u]:(o=new In(r),o.jr=s.slice(),t.j[u]=o),t=o}return o=new In(n),o.jr=s.slice(),t.j[e[a-1]]=o,o}function Fw(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let o=0;for(;s.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let a=parseInt(t.substring(r,r+o),10);a>0;a--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Hc={defaultProtocol:"http",events:null,format:$w,formatHref:$w,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function gb(t,e=null){let n=Object.assign({},Hc);t&&(n=Object.assign(n,t instanceof gb?t.o:t));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}gb.prototype={o:Hc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Hc[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function $w(t){return t}function dT(t,e){this.t="token",this.v=t,this.tk=e}dT.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Hc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),o=this.toFormattedString(t),a={},d=t.get("className",n,e),u=t.get("target",n,e),f=t.get("rel",n,e),p=t.getObj("attributes",n,e),g=t.getObj("events",n,e);return a.href=r,d&&(a.class=d),u&&(a.target=u),f&&(a.rel=f),p&&Object.assign(a,p),{tagName:s,attributes:a,content:o,eventListeners:g}}};function ff(t,e){class n extends dT{constructor(s,o){super(s,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Gw=ff("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Jw=ff("text"),zI=ff("nl"),Au=ff("url",{isLink:!0,toHref(t=Hc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==qc&&t[1].t===So}}),ar=t=>new In(t);function qI({groups:t}){const e=t.domain.concat([Ch,Eh,yo,Th,kh,Ah,_h,jh,lr,db,Cc,Mh,Rh,Ih,qr,Ph,Ec,Dh]),n=[Nh,So,hb,zr,fb,Cc,Nc,pb,mb,fh,ph,wc,Sc,dh,ch,uh,hh,mh,gh,bh,xh,yh,vh,wh,Sh],r=[Ch,Nh,Eh,Th,kh,Ah,_h,jh,lr,wc,Sc,Cc,Mh,Rh,Ih,Nc,qr,Ph,Ec,Dh],s=ar(),o=ae(s,Ec);Le(o,r,o),Le(o,t.domain,o);const a=ar(),d=ar(),u=ar();Le(s,t.domain,a),Le(s,t.scheme,d),Le(s,t.slashscheme,u),Le(a,r,o),Le(a,t.domain,a);const f=ae(a,yo);ae(o,yo,f),ae(d,yo,f),ae(u,yo,f);const p=ae(o,zr);Le(p,r,o),Le(p,t.domain,o);const g=ar();Le(f,t.domain,g),Le(g,t.domain,g);const x=ae(g,zr);Le(x,t.domain,g);const w=ar(Gw);Le(x,t.tld,w),Le(x,t.utld,w),ae(f,qc,w);const C=ae(g,lr);ae(C,lr,C),Le(C,t.domain,g),Le(w,t.domain,g),ae(w,zr,x),ae(w,lr,C);const E=ae(w,So);Le(E,t.numeric,Gw);const N=ae(a,lr),k=ae(a,zr);ae(N,lr,N),Le(N,t.domain,a),Le(k,r,o),Le(k,t.domain,a);const _=ar(Au);Le(k,t.tld,_),Le(k,t.utld,_),Le(_,t.domain,a),Le(_,r,o),ae(_,zr,k),ae(_,lr,N),ae(_,yo,f);const j=ae(_,So),P=ar(Au);Le(j,t.numeric,P);const z=ar(Au),O=ar();Le(z,e,z),Le(z,n,O),Le(O,e,z),Le(O,n,O),ae(_,qr,z),ae(P,qr,z);const D=ae(d,So),te=ae(u,So),G=ae(te,qr),le=ae(G,qr);Le(d,t.domain,a),ae(d,zr,k),ae(d,lr,N),Le(u,t.domain,a),ae(u,zr,k),ae(u,lr,N),Le(D,t.domain,z),ae(D,qr,z),ae(D,Nc,z),Le(le,t.domain,z),Le(le,e,z),ae(le,qr,z);const Ne=[[wc,Sc],[ch,dh],[uh,hh],[fh,ph],[mh,gh],[bh,xh],[yh,vh],[wh,Sh]];for(let ne=0;ne<Ne.length;ne++){const[oe,me]=Ne[ne],fe=ae(z,oe);ae(O,oe,fe),ae(fe,me,z);const q=ar(Au);Le(fe,e,q);const W=ar();Le(fe,n),Le(q,e,q),Le(q,n,W),Le(W,e,q),Le(W,n,W),ae(q,me,z),ae(W,me,z)}return ae(s,qc,_),ae(s,ub,zI),{start:s,tokens:lT}}function HI(t,e,n){let r=n.length,s=0,o=[],a=[];for(;s<r;){let d=t,u=null,f=null,p=0,g=null,x=-1;for(;s<r&&!(u=d.go(n[s].t));)a.push(n[s++]);for(;s<r&&(f=u||d.go(n[s].t));)u=null,d=f,d.accepts()?(x=0,g=d):x>=0&&x++,s++,p++;if(x<0)s-=p,s<r&&(a.push(n[s]),s++);else{a.length>0&&(o.push(ug(Jw,e,a)),a=[]),s-=x,p-=x;const w=g.t,C=n.slice(s-p,s);o.push(ug(w,e,C))}}return a.length>0&&o.push(ug(Jw,e,a)),o}function ug(t,e,n){const r=n[0].s,s=n[n.length-1].e,o=e.slice(r,s);return new t(o,n)}const VI=typeof console<"u"&&console&&console.warn||(()=>{}),FI="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",mt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function $I(){return In.groups={},mt.scanner=null,mt.parser=null,mt.tokenQueue=[],mt.pluginQueue=[],mt.customSchemes=[],mt.initialized=!1,mt}function Kw(t,e=!1){if(mt.initialized&&VI(`linkifyjs: already initialized - will not register custom scheme "${t}" ${FI}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);mt.customSchemes.push([t,e])}function GI(){mt.scanner=BI(mt.customSchemes);for(let t=0;t<mt.tokenQueue.length;t++)mt.tokenQueue[t][1]({scanner:mt.scanner});mt.parser=qI(mt.scanner.tokens);for(let t=0;t<mt.pluginQueue.length;t++)mt.pluginQueue[t][1]({scanner:mt.scanner,parser:mt.parser});return mt.initialized=!0,mt}function bb(t){return mt.initialized||GI(),HI(mt.parser.start,t,cT(mt.scanner.start,t))}bb.scan=cT;function uT(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new gb(n),s=bb(t),o=[];for(let a=0;a<s.length;a++){const d=s[a];d.isLink&&(!e||d.t===e)&&r.check(d)&&o.push(d.toFormattedObject(r))}return o}var xb="[\0- -\u2029]",JI=new RegExp(xb),KI=new RegExp(`${xb}$`),WI=new RegExp(xb,"g");function YI(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function XI(t){return new _t({key:new Qt("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(f=>f.docChanged)&&!n.doc.eq(r.doc),o=e.some(f=>f.getMeta("preventAutolink"));if(!s||o)return;const{tr:a}=r,d=RE(n.doc,[...e]);if(UE(d).forEach(({newRange:f})=>{const p=PM(r.doc,f,w=>w.isTextblock);let g,x;if(p.length>1)g=p[0],x=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(p.length){const w=r.doc.textBetween(f.from,f.to," "," ");if(!KI.test(w))return;g=p[0],x=r.doc.textBetween(g.pos,f.to,void 0," ")}if(g&&x){const w=x.split(JI).filter(Boolean);if(w.length<=0)return!1;const C=w[w.length-1],E=g.pos+x.lastIndexOf(C);if(!C)return!1;const N=bb(C).map(k=>k.toObject(t.defaultProtocol));if(!YI(N))return!1;N.filter(k=>k.isLink).map(k=>({...k,from:E+k.start+1,to:E+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>t.validate(k.value)).filter(k=>t.shouldAutoLink(k.value)).forEach(k=>{ob(k.from,k.to,r.doc).some(_=>_.mark.type===t.type)||a.addMark(k.from,k.to,t.type.create({href:k.href}))})}}),!!a.steps.length)return a}})}function QI(t){return new _t({key:new Qt("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let a=null;if(r.target instanceof HTMLAnchorElement)a=r.target;else{let p=r.target;const g=[];for(;p.nodeName!=="DIV";)g.push(p),p=p.parentNode;a=g.find(x=>x.nodeName==="A")}if(!a)return!1;const d=BE(e.state,t.type.name),u=(s=a==null?void 0:a.href)!=null?s:d.href,f=(o=a==null?void 0:a.target)!=null?o:d.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),a&&u?(window.open(u,f),!0):!1}}})}function ZI(t){return new _t({key:new Qt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:o}=e,{selection:a}=o,{empty:d}=a;if(d)return!1;let u="";r.content.forEach(p=>{u+=p.textContent});const f=uT(u,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===u);return!u||!f||s!==void 0&&!s(f.href)?!1:t.editor.commands.setMark(t.type,{href:f.href})}}})}function ui(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(WI,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var hT=_s.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Kw(t);return}Kw(t.scheme,t.optionalSlashes)})},onDestroy(){$I()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ui(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ui(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ui(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",St(this.options.HTMLAttributes,t),0]:["a",St(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ui(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ui(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Do({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=uT(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:a=>!!ui(a,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(XI({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!ui(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(QI({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(ZI({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),eD=hT,tD=Object.defineProperty,nD=(t,e)=>{for(var n in e)tD(t,n,{get:e[n],enumerable:!0})},rD="listItem",Ww="textStyle",Yw=/^\s*([-+*])\s$/,fT=On.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",St(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(rD,this.editor.getAttributes(Ww)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ka({find:Yw,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ka({find:Yw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ww),editor:this.editor})),[t]}}),pT=On.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",St(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const a=t.tokens.slice(1),d=e.parseChildren(a);n.push(...d)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>cb(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),sD={};nD(sD,{findListItemPos:()=>Xc,getNextListDepth:()=>yb,handleBackspace:()=>n0,handleDelete:()=>r0,hasListBefore:()=>mT,hasListItemAfter:()=>oD,hasListItemBefore:()=>gT,listItemHasSubList:()=>bT,nextListIsDeeper:()=>xT,nextListIsHigher:()=>yT});var Xc=(t,e)=>{const{$from:n}=e.selection,r=zt(t,e.schema);let s=null,o=n.depth,a=n.pos,d=null;for(;o>0&&d===null;)s=n.node(o),s.type===r?d=o:(o-=1,a-=1);return d===null?null:{$pos:e.doc.resolve(a),depth:d}},yb=(t,e)=>{const n=Xc(t,e);if(!n)return!1;const[,r]=$M(e,t,n.$pos.pos+4);return r},mT=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),o=t.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},gT=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},bT=(t,e,n)=>{if(!n)return!1;const r=zt(t,e.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},n0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Io(t.state,e)&&mT(t.state,e,n)){const{$anchor:d}=t.state.selection,u=t.state.doc.resolve(d.before()-1),f=[];u.node().descendants((x,w)=>{x.type.name===e&&f.push({node:x,pos:w})});const p=f.at(-1);if(!p)return!1;const g=t.state.doc.resolve(u.start()+p.pos+1);return t.chain().cut({from:d.start()-1,to:d.end()+1},g.end()).joinForward().run()}if(!Io(t.state,e)||!WM(t.state))return!1;const r=Xc(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),a=bT(e,t.state,o);return gT(e,t.state)&&!a?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},xT=(t,e)=>{const n=yb(t,e),r=Xc(t,e);return!r||!n?!1:n>r.depth},yT=(t,e)=>{const n=yb(t,e),r=Xc(t,e);return!r||!n?!1:n<r.depth},r0=(t,e)=>{if(!Io(t.state,e)||!KM(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:xT(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():yT(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},oD=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},vT=ct.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&r0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&r0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&n0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&n0(t,n,r)&&(e=!0)}),e}}}}),Xw=/^(\s*)(\d+)\.\s+(.*)$/,iD=/^\s/;function aD(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],o=s.match(Xw);if(!o)break;const[,a,d,u]=o,f=a.length;let p=u,g=n+1;const x=[s];for(;g<t.length;){const w=t[g];if(w.match(Xw))break;if(w.trim()==="")x.push(w),p+=`
`,g+=1;else if(w.match(iD))x.push(w),p+=`
${w.slice(f+2)}`,g+=1;else break}e.push({indent:f,number:parseInt(d,10),content:p.trim(),raw:x.join(`
`)}),r=g,n=g}return[e,r]}function wT(t,e,n){var r;const s=[];let o=0;for(;o<t.length;){const a=t[o];if(a.indent===e){const d=a.content.split(`
`),u=((r=d[0])==null?void 0:r.trim())||"",f=[];u&&f.push({type:"paragraph",raw:u,tokens:n.inlineTokens(u)});const p=d.slice(1).join(`
`).trim();if(p){const w=n.blockTokens(p);f.push(...w)}let g=o+1;const x=[];for(;g<t.length&&t[g].indent>e;)x.push(t[g]),g+=1;if(x.length>0){const w=Math.min(...x.map(E=>E.indent)),C=wT(x,w,n);f.push({type:"list",ordered:!0,start:x[0].number,items:C,raw:x.map(E=>E.raw).join(`
`)})}s.push({type:"list_item",raw:a.raw,tokens:f}),o=g}else o+=1}return s}function lD(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=e.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var cD="listItem",Qw="textStyle",Zw=/^(\d+)\.\s$/,ST=On.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",St(this.options.HTMLAttributes,n),0]:["ol",St(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?lD(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e==null?void 0:e.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[o,a]=aD(s);if(o.length===0)return;const d=wT(o,0,n);return d.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:d,raw:s.slice(0,a).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cD,this.editor.getAttributes(Qw)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ka({find:Zw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ka({find:Zw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Qw)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),dD=/^\s*(\[([( |x])?\])\s$/,uD=On.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",St(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return cb(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),a=document.createElement("span"),d=document.createElement("input"),u=document.createElement("div"),f=p=>{var g,x;d.ariaLabel=((x=(g=this.options.a11y)==null?void 0:g.checkboxLabel)==null?void 0:x.call(g,p,d.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return f(t),o.contentEditable="false",d.type="checkbox",d.addEventListener("mousedown",p=>p.preventDefault()),d.addEventListener("change",p=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){d.checked=!d.checked;return}const{checked:g}=p.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const w=n();if(typeof w!="number")return!1;const C=x.doc.nodeAt(w);return x.setNodeMarkup(w,void 0,{...C==null?void 0:C.attrs,checked:g}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,g)||(d.checked=!d.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,g])=>{s.setAttribute(p,g)}),s.dataset.checked=t.attrs.checked,d.checked=t.attrs.checked,o.append(d,a),s.append(o,u),Object.entries(e).forEach(([p,g])=>{s.setAttribute(p,g)}),{dom:s,contentDOM:u,update:p=>p.type!==this.type?!1:(s.dataset.checked=p.attrs.checked,d.checked=p.attrs.checked,f(p),!0)}}},addInputRules(){return[Ka({find:dD,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),hD=On.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",St(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const a=Gg(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:d=>({indentLevel:d[1].length,mainContent:d[4],checked:d[3].toLowerCase()==="x"}),createToken:(d,u)=>({type:"taskItem",raw:"",mainContent:d.mainContent,indentLevel:d.indentLevel,checked:d.checked,text:d.mainContent,tokens:n.inlineTokens(d.mainContent),nestedTokens:u}),customNestedParser:r},n);return a?[{type:"taskList",raw:a.raw,items:a.items}]:n.blockTokens(o)},s=Gg(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,a)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:a}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});ct.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(fT.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(pT.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(vT.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(ST.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(uD.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(hD.configure(this.options.taskList)),t}});var fD=On.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",St(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),pD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mD=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gD=_s.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",St(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Oi({find:pD,type:this.type})]},addPasteRules(){return[Do({find:mD,type:this.type})]}}),bD=On.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),CT=_s.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",St(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),xD=CT;function yD(t={}){return new _t({view(e){return new vD(e,t)}})}class vD{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=a=>{this[s](a)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),a=o.width/s.offsetWidth,d=o.height/s.offsetHeight;if(n){let g=e.nodeBefore,x=e.nodeAfter;if(g||x){let w=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(w){let C=w.getBoundingClientRect(),E=g?C.bottom:C.top;g&&x&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let N=this.width/2*d;r={left:C.left,right:C.right,top:E-N,bottom:E+N}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),x=this.width/2*a;r={left:g.left-x,right:g.left+x,top:g.top,bottom:g.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,p;if(!u||u==document.body&&getComputedStyle(u).position=="static")f=-pageXOffset,p=-pageYOffset;else{let g=u.getBoundingClientRect(),x=g.width/u.offsetWidth,w=g.height/u.offsetHeight;f=g.left-u.scrollLeft*x,p=g.top-u.scrollTop*w}this.element.style.left=(r.left-f)/a+"px",this.element.style.top=(r.top-p)/d+"px",this.element.style.width=(r.right-r.left)/a+"px",this.element.style.height=(r.bottom-r.top)/d+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!o){let a=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let d=NN(this.editorView.state.doc,a,this.editorView.dragging.slice);d!=null&&(a=d)}this.setCursor(a),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class At extends Be{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return At.valid(r)?new At(r):Be.near(r)}content(){return ue.empty}eq(e){return e instanceof At&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new At(e.resolve(n.pos))}getBookmark(){return new vb(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!wD(e)||!SD(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&At.valid(e))return e;let s=e.pos,o=null;for(let a=e.depth;;a--){let d=e.node(a);if(n>0?e.indexAfter(a)<d.childCount:e.index(a)>0){o=d.child(n>0?e.indexAfter(a):e.index(a)-1);break}else if(a==0)return null;s+=n;let u=e.doc.resolve(s);if(At.valid(u))return u}for(;;){let a=n>0?o.firstChild:o.lastChild;if(!a){if(o.isAtom&&!o.isText&&!Ee.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=a,s+=n;let d=e.doc.resolve(s);if(At.valid(d))return d}return null}}}At.prototype.visible=!1;At.findFrom=At.findGapCursorFrom;Be.jsonID("gapcursor",At);class vb{constructor(e){this.pos=e}map(e){return new vb(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return At.valid(n)?new At(n):Be.near(n)}}function NT(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function wD(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||NT(s.type))return!0;if(s.inlineContent)return!1}}return!0}function SD(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||NT(s.type))return!0;if(s.inlineContent)return!1}}return!0}function CD(){return new _t({props:{decorations:kD,createSelectionBetween(t,e,n){return e.pos==n.pos&&At.valid(n)?new At(n):null},handleClick:ED,handleKeyDown:ND,handleDOMEvents:{beforeinput:TD}}})}const ND=NE({ArrowLeft:_u("horiz",-1),ArrowRight:_u("horiz",1),ArrowUp:_u("vert",-1),ArrowDown:_u("vert",1)});function _u(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let a=r.selection,d=e>0?a.$to:a.$from,u=a.empty;if(a instanceof je){if(!o.endOfTextblock(n)||d.depth==0)return!1;u=!1,d=r.doc.resolve(e>0?d.after():d.before())}let f=At.findGapCursorFrom(d,e,u);return f?(s&&s(r.tr.setSelection(new At(f))),!0):!1}}function ED(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!At.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ee.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new At(r))),!0)}function TD(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof At))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=se.empty;for(let a=r.length-1;a>=0;a--)s=se.from(r[a].createAndFill(null,s));let o=t.state.tr.replace(n.pos,n.pos,new ue(s,0,0));return o.setSelection(je.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function kD(t){if(!(t.selection instanceof At))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",vt.create(t.doc,[wn.widget(t.selection.head,e,{key:"gapcursor"})])}var Oh=200,Xt=function(){};Xt.prototype.append=function(e){return e.length?(e=Xt.from(e),!this.length&&e||e.length<Oh&&this.leafAppend(e)||this.length<Oh&&e.leafPrepend(this)||this.appendInner(e)):this};Xt.prototype.prepend=function(e){return e.length?Xt.from(e).append(this):this};Xt.prototype.appendInner=function(e){return new AD(this,e)};Xt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Xt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Xt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Xt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Xt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,a){return s.push(e(o,a))},n,r),s};Xt.from=function(e){return e instanceof Xt?e:e&&e.length?new ET(e):Xt.empty};var ET=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,a,d){for(var u=o;u<a;u++)if(s(this.values[u],d+u)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,a,d){for(var u=o-1;u>=a;u--)if(s(this.values[u],d+u)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Oh)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Oh)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Xt);Xt.empty=new ET([]);var AD=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,a){var d=this.left.length;if(s<d&&this.left.forEachInner(r,s,Math.min(o,d),a)===!1||o>d&&this.right.forEachInner(r,Math.max(s-d,0),Math.min(this.length,o)-d,a+d)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,a){var d=this.left.length;if(s>d&&this.right.forEachInvertedInner(r,s-d,Math.max(o,d)-d,a+d)===!1||o<d&&this.left.forEachInvertedInner(r,Math.min(s,d),o,a)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Xt);const _D=500;class kr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let a=e.tr,d,u,f=[],p=[];return this.items.forEach((g,x)=>{if(!g.step){s||(s=this.remapping(r,x+1),o=s.maps.length),o--,p.push(g);return}if(s){p.push(new Hr(g.map));let w=g.step.map(s.slice(o)),C;w&&a.maybeStep(w).doc&&(C=a.mapping.maps[a.mapping.maps.length-1],f.push(new Hr(C,void 0,void 0,f.length+p.length))),o--,C&&s.appendMap(C,o)}else a.maybeStep(g.step);if(g.selection)return d=s?g.selection.map(s.slice(o)):g.selection,u=new kr(this.items.slice(0,r).append(p.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:a,selection:d}}addTransform(e,n,r,s){let o=[],a=this.eventCount,d=this.items,u=!s&&d.length?d.get(d.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),x=new Hr(e.mapping.maps[p],g,n),w;(w=u&&u.merge(x))&&(x=w,p?o.pop():d=d.slice(0,d.length-1)),o.push(x),n&&(a++,n=void 0),s||(u=x)}let f=a-r.depth;return f>MD&&(d=jD(d,f),a-=f),new kr(d.append(o),a)}remapping(e,n){let r=new Dc;return this.items.forEach((s,o)=>{let a=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,a)},e,n),r}addMaps(e){return this.eventCount==0?this:new kr(this.items.append(e.map(n=>new Hr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=e.mapping,a=e.steps.length,d=this.eventCount;this.items.forEach(x=>{x.selection&&d--},s);let u=n;this.items.forEach(x=>{let w=o.getMirror(--u);if(w==null)return;a=Math.min(a,w);let C=o.maps[w];if(x.step){let E=e.steps[w].invert(e.docs[w]),N=x.selection&&x.selection.map(o.slice(u+1,w));N&&d++,r.push(new Hr(C,E,N))}else r.push(new Hr(C))},s);let f=[];for(let x=n;x<a;x++)f.push(new Hr(o.maps[x]));let p=this.items.slice(0,s).append(f).append(r),g=new kr(p,d);return g.emptyItemCount()>_D&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],o=0;return this.items.forEach((a,d)=>{if(d>=e)s.push(a),a.selection&&o++;else if(a.step){let u=a.step.map(n.slice(r)),f=u&&u.getMap();if(r--,f&&n.appendMap(f,r),u){let p=a.selection&&a.selection.map(n.slice(r));p&&o++;let g=new Hr(f.invert(),u,p),x,w=s.length-1;(x=s.length&&s[w].merge(g))?s[w]=x:s.push(g)}}else a.map&&r--},this.items.length,0),new kr(Xt.from(s.reverse()),o)}}kr.empty=new kr(Xt.empty,0);function jD(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class Hr{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Hr(n.getMap().invert(),n,this.selection)}}}class vo{constructor(e,n,r,s,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const MD=20;function RD(t,e,n,r){let s=n.getMeta(ji),o;if(s)return s.historyState;n.getMeta(PD)&&(t=new vo(t.done,t.undone,null,0,-1));let a=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(a&&a.getMeta(ji))return a.getMeta(ji).redo?new vo(t.done.addTransform(n,void 0,r,Gu(e)),t.undone,e2(n.mapping.maps),t.prevTime,t.prevComposition):new vo(t.done,t.undone.addTransform(n,void 0,r,Gu(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(a&&a.getMeta("addToHistory")===!1)){let d=n.getMeta("composition"),u=t.prevTime==0||!a&&t.prevComposition!=d&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ID(n,t.prevRanges)),f=a?hg(t.prevRanges,n.mapping):e2(n.mapping.maps);return new vo(t.done.addTransform(n,u?e.selection.getBookmark():void 0,r,Gu(e)),kr.empty,f,n.time,d??t.prevComposition)}else return(o=n.getMeta("rebased"))?new vo(t.done.rebased(n,o),t.undone.rebased(n,o),hg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new vo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),hg(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ID(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(n=!0)}),n}function e2(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,o,a)=>e.push(o,a));return e}function hg(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),o=e.map(t[r+1],-1);s<=o&&n.push(s,o)}return n}function DD(t,e,n){let r=Gu(e),s=ji.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let a=o.selection.resolve(o.transform.doc),d=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),u=new vo(n?d:o.remaining,n?o.remaining:d,null,0,-1);return o.transform.setSelection(a).setMeta(ji,{redo:n,historyState:u})}let fg=!1,t2=null;function Gu(t){let e=t.plugins;if(t2!=e){fg=!1,t2=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){fg=!0;break}}return fg}const ji=new Qt("history"),PD=new Qt("closeHistory");function OD(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new _t({key:ji,state:{init(){return new vo(kr.empty,kr.empty,null,0,-1)},apply(e,n,r){return RD(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?kT:r=="historyRedo"?AT:null;return s?(n.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function TT(t,e){return(n,r)=>{let s=ji.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let o=DD(s,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const kT=TT(!1,!0),AT=TT(!0,!0);ct.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc;if(((t==null?void 0:t.mode)||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=(t==null?void 0:t.node)||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new _t({key:new Qt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const a=o-s,d=0,u=a;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(d,u);return t=!0,f}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const d=e.selection.$head.pos,u=o-r,f=d-u,p=d;return e.deleteRange(f,p),!(this.storage.characters({node:e.doc})>r)}})]}});var LD=ct.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[yD(this.options)]}});ct.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new _t({key:new Qt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,o=[];if(!n||!r)return vt.create(t,[]);let a=0;this.options.mode==="deepest"&&t.descendants((u,f)=>{if(u.isText)return;if(!(s>=f&&s<=f+u.nodeSize-1))return!1;a+=1});let d=0;return t.descendants((u,f)=>{if(u.isText||!(s>=f&&s<=f+u.nodeSize-1))return!1;if(d+=1,this.options.mode==="deepest"&&a-d>0||this.options.mode==="shallowest"&&d>1)return this.options.mode==="deepest";o.push(wn.node(f,f+u.nodeSize,{class:this.options.className}))}),vt.create(t,o)}}})]}});var BD=ct.create({name:"gapCursor",addProseMirrorPlugins(){return[CD()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=rt(Ce(t,"allowGapCursor",n)))!=null?e:null}}});ct.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new _t({key:new Qt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((a,d)=>{const u=r>=d&&r<=d+a.nodeSize,f=!a.isLeaf&&df(a);if((u||!this.options.showOnlyCurrent)&&f){const p=[this.options.emptyNodeClass];o&&p.push(this.options.emptyEditorClass);const g=wn.node(d,d+a.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:a,pos:d,hasAnchor:u}):this.options.placeholder});s.push(g)}return this.options.includeChildren}),vt.create(t,s)}}})]}});ct.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new _t({key:new Qt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||zE(n.selection)||t.view.dragging?null:vt.create(n.doc,[wn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function n2({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||(e==null?void 0:e.type)===t}var UD=ct.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Qt(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new _t({key:e,appendTransaction:(s,o,a)=>{const{doc:d,tr:u,schema:f}=a,p=e.getState(a),g=d.content.size,x=f.nodes[n];if(p)return u.insert(g,x.create())},state:{init:(s,o)=>{const a=o.tr.doc.lastChild;return!n2({node:a,types:r})},apply:(s,o)=>{if(!s.docChanged)return o;const a=s.doc.lastChild;return!n2({node:a,types:r})}}})]}}),zD=ct.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>kT(t,e),redo:()=>({state:t,dispatch:e})=>AT(t,e)}},addProseMirrorPlugins(){return[OD(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),qD=ct.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(pI.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(cI.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(fT.configure(this.options.bulletList)),this.options.code!==!1&&s.push(bI.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(vI.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(wI.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(LD.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(BD.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(SI.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(CI.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(zD.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(NI.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(_I.configure(this.options.italic)),this.options.listItem!==!1&&s.push(pT.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(vT.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(hT.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(ST.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(fD.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(gD.configure(this.options.strike)),this.options.text!==!1&&s.push(bD.configure(this.options.text)),this.options.underline!==!1&&s.push(CT.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(UD.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),HD=qD,VD=20,_T=(t,e=0)=>{const n=[];return!t.children.length||e>VD||Array.from(t.children).forEach(r=>{r.tagName==="SPAN"?n.push(r):r.children.length&&n.push(..._T(r,e+1))}),n},FD=t=>{if(!t.children.length)return;const e=_T(t);e&&e.forEach(n=>{var r,s;const o=n.getAttribute("style"),a=(s=(r=n.parentElement)==null?void 0:r.closest("span"))==null?void 0:s.getAttribute("style");n.setAttribute("style",`${a};${o}`)})},jT=_s.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&FD(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",St(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleTextStyle:t=>({commands:e})=>e.toggleMark(this.name,t),removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(o=>!!o))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),$D=ct.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),d=o.slice(1).join(":").trim();if(a==="background-color")return d.replace(/['"]+/g,"")}}}return(e=t.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.backgroundColor?{style:`background-color: ${t.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:t=>({chain:e})=>e().setMark("textStyle",{backgroundColor:t}).run(),unsetBackgroundColor:()=>({chain:t})=>t().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),MT=ct.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;const n=t.getAttribute("style");if(n){const r=n.split(";").map(s=>s.trim()).filter(Boolean);for(let s=r.length-1;s>=0;s-=1){const o=r[s].split(":");if(o.length>=2){const a=o[0].trim().toLowerCase(),d=o.slice(1).join(":").trim();if(a==="color")return d.replace(/['"]+/g,"")}}}return(e=t.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),GD=ct.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:t=>t.style.fontFamily,renderHTML:t=>t.fontFamily?{style:`font-family: ${t.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:t=>({chain:e})=>e().setMark("textStyle",{fontFamily:t}).run(),unsetFontFamily:()=>({chain:t})=>t().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),JD=ct.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize,renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),KD=ct.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:t=>t.style.lineHeight,renderHTML:t=>t.lineHeight?{style:`line-height: ${t.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:t=>({chain:e})=>e().setMark("textStyle",{lineHeight:t}).run(),unsetLineHeight:()=>({chain:t})=>t().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});ct.create({name:"textStyleKit",addExtensions(){const t=[];return this.options.backgroundColor!==!1&&t.push($D.configure(this.options.backgroundColor)),this.options.color!==!1&&t.push(MT.configure(this.options.color)),this.options.fontFamily!==!1&&t.push(GD.configure(this.options.fontFamily)),this.options.fontSize!==!1&&t.push(JD.configure(this.options.fontSize)),this.options.lineHeight!==!1&&t.push(KD.configure(this.options.lineHeight)),this.options.textStyle!==!1&&t.push(jT.configure(this.options.textStyle)),t}});var WD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,YD=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,XD=_s.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",St(this.options.HTMLAttributes,t),0]},renderMarkdown:(t,e)=>`==${e.renderChildren(t)}==`,parseMarkdown:(t,e)=>e.applyMark("highlight",e.parseInline(t.tokens||[])),markdownTokenizer:{name:"highlight",level:"inline",start:t=>t.indexOf("=="),tokenize(t,e,n){const s=/^(==)([^=]+)(==)/.exec(t);if(s){const o=s[2].trim(),a=n.inlineTokens(o);return{type:"highlight",raw:s[0],text:o,tokens:a}}}},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Oi({find:WD,type:this.type})]},addPasteRules(){return[Do({find:YD,type:this.type})]}}),QD=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,ZD=On.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{},resize:!1}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",St(this.options.HTMLAttributes,t)]},parseMarkdown:(t,e)=>e.createNode("image",{src:t.href,title:t.title,alt:t.text}),renderMarkdown:t=>{var e,n,r,s,o,a;const d=(n=(e=t.attrs)==null?void 0:e.src)!=null?n:"",u=(s=(r=t.attrs)==null?void 0:r.alt)!=null?s:"",f=(a=(o=t.attrs)==null?void 0:o.title)!=null?a:"";return f?`![${u}](${d} "${f}")`:`![${u}](${d})`},addNodeView(){if(!this.options.resize||!this.options.resize.enabled||typeof document>"u"||!this.editor.isEditable)return null;const{directions:t,minWidth:e,minHeight:n,alwaysPreserveAspectRatio:r}=this.options.resize;return({node:s,getPos:o,HTMLAttributes:a})=>{const d=document.createElement("img");Object.entries(a).forEach(([p,g])=>{if(g!=null)switch(p){case"width":case"height":break;default:d.setAttribute(p,g);break}}),d.src=a.src;const u=new MR({element:d,node:s,getPos:o,onResize:(p,g)=>{d.style.width=`${p}px`,d.style.height=`${g}px`},onCommit:(p,g)=>{const x=o();x!==void 0&&this.editor.chain().setNodeSelection(x).updateAttributes(this.name,{width:p,height:g}).run()},onUpdate:(p,g,x)=>p.type===s.type,options:{directions:t,min:{width:e,height:n},preserveAspectRatio:r===!0}}),f=u.dom;return f.style.visibility="hidden",f.style.pointerEvents="none",d.onload=()=>{f.style.visibility="",f.style.pointerEvents=""},u}},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[eT({find:QD,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),eP=ZD,tP=ct.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),nP=tP;const rP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"})}),sP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"})}),oP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zM5 19v2h14v-2H5z"})}),iP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10 19h4v-3h-4v3zM5 4v3h5v3h4V7h5V4H5zM3 14h18v-2H3v2z"})}),aP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M7 5h14v2H7V5zm0 6h14v2H7v-2zm0 6h14v2H7v-2zM4 17.27L2.27 15.54 2 15.77V13h3v1h-1.23l1.73 1.73L4 17.27zM4.25 10H2V4h3v1H3.25v2.5h1V8.5H2v.5h2.25V10z"})}),lP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"})}),cP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h11.25m-11.25 5.25h16.5"})}),dP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M6 12h12m-9 5.25h6"})}),uP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M8.25 12h11.25M3.75 17.25h16.5"})}),hP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),fP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M6 17h3l2-4V7H5v6h3l-2 4zm8 0h3l2-4V7h-6v6h3l-2 4z"})}),pP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})}),mP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.96 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"})}),gP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"})}),bP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"})}),xP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M11 3L5.5 17h2.25l1.12-3h6.25l1.12 3h2.25L13 3h-2zm-1.38 9L12 5.67 14.38 12H9.62z"})}),yP=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:[l.jsx("path",{d:"M15.24 13.16l-2.2-2.2-1.41 1.41 2.2 2.2-2.35 2.35-1.41-1.41-2.2 2.2 3.76 3.76 2.2-2.2-1.41-1.41z"}),l.jsx("path",{d:"M19.78 4.22a.996.996 0 00-1.41 0l-1.83 1.83 2.83 2.83 1.83-1.83a.996.996 0 000-1.41l-1.42-1.42zM15.54 5.64L5.64 15.54 4.22 14.12 14.12 4.22l1.42 1.42zM2.12 15.54l5.29 5.29 1.41-1.41-5.29-5.29-1.41 1.41z"})]}),vP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"})}),wP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})}),SP=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5"})}),CP=({editor:t,openLinkModal:e})=>{const n=R.useRef(null);if(!t)return null;const r=R.useCallback(()=>{var a;(a=n.current)==null||a.click()},[]),s=a=>{var f;const d=(f=a.target.files)==null?void 0:f[0];if(!d||!t)return;if(!d.type.startsWith("image/")){alert("Por favor, selecione um arquivo de imagem (JPG, PNG, GIF, etc.).");return}const u=new FileReader;u.onload=p=>{var x;const g=(x=p.target)==null?void 0:x.result;g&&t.chain().focus().setImage({src:g,alt:"Imagem na descrio"}).run()},u.onerror=()=>{alert("Ocorreu um erro ao ler o arquivo.")},u.readAsDataURL(d),a.target&&(a.target.value="")},o=({onClick:a,isActive:d,children:u,title:f})=>l.jsx("button",{type:"button",onClick:a,title:f,className:`p-2 rounded-md transition-colors flex flex-col items-center justify-center ${d?"bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))]":"text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gray))]"}`,children:u});return l.jsxs("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsx("input",{type:"file",ref:n,onChange:s,accept:"image/*",className:"hidden"}),l.jsx(o,{onClick:()=>t.chain().focus().undo().run(),title:"Desfazer",children:l.jsx(pP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().redo().run(),title:"Refazer",children:l.jsx(mP,{className:"w-5 h-5"})}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsxs("select",{onChange:a=>{const d=a.target.value,u=parseInt(d,10);u===0?t.chain().focus().setParagraph().run():t.chain().focus().toggleHeading({level:u}).run()},value:t.isActive("heading",{level:1})?"1":t.isActive("heading",{level:2})?"2":t.isActive("heading",{level:3})?"3":"0",className:"bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] text-[rgb(var(--color-brand-text-light))] py-2 px-2 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] transition-colors text-sm font-semibold focus:outline-none focus:border-[rgb(var(--color-brand-gold))]",children:[l.jsx("option",{value:"0",children:"Pargrafo"}),l.jsx("option",{value:"1",children:"Ttulo 1"}),l.jsx("option",{value:"2",children:"Ttulo 2"}),l.jsx("option",{value:"3",children:"Ttulo 3"})]}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleBold().run(),isActive:t.isActive("bold"),title:"Negrito",children:l.jsx(rP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleItalic().run(),isActive:t.isActive("italic"),title:"Itlico",children:l.jsx(sP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleUnderline().run(),isActive:t.isActive("underline"),title:"Sublinhado",children:l.jsx(oP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleStrike().run(),isActive:t.isActive("strike"),title:"Tachado",children:l.jsx(iP,{className:"w-5 h-5"})}),l.jsxs("div",{className:"relative",children:[l.jsxs(o,{onClick:()=>{},isActive:t.isActive("textStyle"),title:"Cor do Texto",children:[l.jsx(xP,{className:"w-5 h-5"}),l.jsx("div",{className:"w-full h-1 rounded-full mt-1 border border-[rgb(var(--color-brand-gray))] ",style:{backgroundColor:t.getAttributes("textStyle").color||"currentColor"}})]}),l.jsx("input",{type:"color",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onInput:a=>t.chain().focus().setColor(a.target.value).run(),value:t.getAttributes("textStyle").color||"#FFFFFF"})]}),l.jsxs("div",{className:"relative",children:[l.jsxs(o,{onClick:()=>{},isActive:t.isActive("highlight"),title:"Cor de Destaque",children:[l.jsx(yP,{className:"w-5 h-5"}),l.jsx("div",{className:"w-full h-1 rounded-full mt-1 border border-[rgb(var(--color-brand-gray))]",style:{backgroundColor:t.getAttributes("highlight").color||"rgb(var(--color-brand-gold))"}})]}),l.jsx("input",{type:"color",className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",onInput:a=>t.chain().focus().toggleHighlight({color:a.target.value}).run(),value:t.getAttributes("highlight").color||"rgb(var(--color-brand-gold))"})]}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("left").run(),isActive:t.isActive({textAlign:"left"}),title:"Alinhar  Esquerda",children:l.jsx(cP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("center").run(),isActive:t.isActive({textAlign:"center"}),title:"Centralizar",children:l.jsx(dP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("right").run(),isActive:t.isActive({textAlign:"right"}),title:"Alinhar  Direita",children:l.jsx(uP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().setTextAlign("justify").run(),isActive:t.isActive({textAlign:"justify"}),title:"Justificar",children:l.jsx(hP,{className:"w-5 h-5"})}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsx(o,{onClick:e,isActive:t.isActive("link"),title:"Adicionar Link",children:l.jsx(vP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:r,title:"Adicionar Imagem/GIF",children:l.jsx(wP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().setHorizontalRule().run(),title:"Linha Horizontal",children:l.jsx(SP,{className:"w-5 h-5"})}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsx(o,{onClick:()=>t.chain().focus().toggleBulletList().run(),isActive:t.isActive("bulletList"),title:"Lista com Marcadores",children:l.jsx(lP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleOrderedList().run(),isActive:t.isActive("orderedList"),title:"Lista Numerada",children:l.jsx(aP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleBlockquote().run(),isActive:t.isActive("blockquote"),title:"Citao",children:l.jsx(fP,{className:"w-5 h-5"})}),l.jsx(o,{onClick:()=>t.chain().focus().toggleCodeBlock().run(),isActive:t.isActive("codeBlock"),title:"Bloco de Cdigo",children:l.jsx(gP,{className:"w-5 h-5"})}),l.jsx("div",{className:"border-l border-[rgb(var(--color-brand-gray-light))] mx-1 h-6 self-center"}),l.jsx(o,{onClick:()=>t.chain().focus().unsetAllMarks().clearNodes().run(),title:"Limpar Formato",children:l.jsx(bP,{className:"w-5 h-5"})})]})},RT=({value:t,onChange:e})=>{const n=sI({extensions:[HD.configure({heading:{levels:[1,2,3]}}),xD,eD.configure({openOnClick:!1,autolink:!0}),nP.configure({types:["heading","paragraph"]}),jT,MT,XD.configure({multicolor:!0}),eP],content:t,onUpdate:({editor:p})=>{e(p.getHTML())},editorProps:{attributes:{class:"focus:outline-none"}}}),[r,s]=R.useState(!1),[o,a]=R.useState(""),d=R.useCallback(()=>{if(!n)return;const p=n.getAttributes("link").href||"";a(p),s(!0)},[n]),u=R.useCallback(()=>{s(!1),a("")},[]),f=R.useCallback(()=>{if(n){if(o){let p=o;!/^https?:\/\//i.test(o)&&!/^mailto:/i.test(o)&&(p=`https://${o}`),n.chain().focus().extendMarkRange("link").setLink({href:p}).run()}else n.chain().focus().extendMarkRange("link").unsetLink().run();u()}},[n,o,u]);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md focus-within:border-[rgb(var(--color-brand-gold))] transition-colors",children:[l.jsx("style",{children:`
                .ProseMirror {
                    color: rgb(var(--color-brand-text-light));
                }
                .ProseMirror blockquote {
                    border-left: 3px solid rgb(var(--color-brand-gold)); /* amber-500 */
                    padding-left: 1rem;
                    margin-left: 0.5rem;
                    font-style: italic;
                    color: rgb(var(--color-brand-text-dim)); /* gray-300 */
                }
                .ProseMirror ul, .ProseMirror ol {
                    padding-left: 1.5rem;
                }
                .ProseMirror a {
                    color: rgb(var(--color-info)); /* A golden-green for links */
                    text-decoration: underline;
                    cursor: pointer;
                }
                .ProseMirror code {
                    background-color: rgba(255, 255, 255, 0.1);
                    padding: 0.2em 0.4em;
                    border-radius: 5px;
                    color: #f3f4f6;
                }
                .ProseMirror pre {
                    background-color: rgb(var(--color-brand-dark)); /* gray-900 */
                    padding: 1rem;
                    border-radius: 0.5rem;
                    color: rgb(var(--color-brand-text-dim));
                    font-family: monospace;
                }
                 .ProseMirror mark {
                    border-radius: 2px;
                    padding: 0.1em 0.2em;
                 }
                 .ProseMirror img {
                    max-width: 100%;
                    height: auto;
                    border-radius: 8px;
                    margin-top: 1rem;
                    margin-bottom: 1rem;
                 }
            `}),l.jsx(CP,{editor:n,openLinkModal:d}),l.jsx("div",{className:"min-h-[200px] cursor-text p-4",children:l.jsx(XR,{editor:n})}),r&&l.jsx("div",{className:"fixed inset-0 bg-[rgb(var(--color-brand-dark))]/[.70] z-[101] flex items-center justify-center p-4",onClick:u,children:l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gold))]/[.30] rounded-lg shadow-2xl p-6 w-full max-w-md space-y-4",onClick:p=>p.stopPropagation(),children:[l.jsx("h3",{className:"text-lg font-bold text-[rgb(var(--color-brand-text-light))]",children:"Adicionar / Editar Link"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"link-url",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-dim))] mb-1",children:"URL"}),l.jsx("input",{id:"link-url",type:"url",value:o,onChange:p=>a(p.target.value),autoFocus:!0,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))] focus:outline-none focus:border-[rgb(var(--color-brand-gold))]",placeholder:"https://exemplo.com",onKeyDown:p=>{p.key==="Enter"&&(p.preventDefault(),f())}})]}),l.jsxs("div",{className:"flex justify-end gap-4 pt-2",children:[l.jsx("button",{type:"button",onClick:u,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"Cancelar"}),l.jsx("button",{type:"button",onClick:f,className:"text-sm font-bold bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-success))]",children:"Salvar"})]})]})})]})},wt=({checked:t,onChange:e,labelId:n})=>l.jsxs("label",{htmlFor:n,className:"relative inline-flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",id:n,checked:t,onChange:r=>e(r.target.checked),className:"sr-only peer"}),l.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-yellow-500"})]}),Lh=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 8.25h9m-9 3H12m-2.25 3h5.25"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21v-4.5a3.75 3.75 0 013.75-3.75h9a3.75 3.75 0 013.75 3.75v4.5"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75v-6a3 3 0 013-3h9a3 3 0 013 3v6"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 3.75v-1.5a1.5 1.5 0 011.5-1.5h.008a1.5 1.5 0 011.5 1.5v1.5"})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let NP,EP;function TP(){return{geminiUrl:NP,vertexUrl:EP}}function kP(t,e,n,r){var s,o;if(!(t!=null&&t.baseUrl)){const a=TP();return e?(s=a.vertexUrl)!==null&&s!==void 0?s:n:(o=a.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class js{}function de(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const o=e[s];return o!=null?String(o):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function y(t,e,n){for(let o=0;o<e.length-1;o++){const a=e[o];if(a.endsWith("[]")){const d=a.slice(0,-2);if(!(d in t))if(Array.isArray(n))t[d]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(t[d])){const u=t[d];if(Array.isArray(n))for(let f=0;f<u.length;f++){const p=u[f];y(p,e.slice(o+1),n[f])}else for(const f of u)y(f,e.slice(o+1),n)}return}else if(a.endsWith("[0]")){const d=a.slice(0,-3);d in t||(t[d]=[{}]);const u=t[d];y(u[0],e.slice(o+1),n);return}(!t[a]||typeof t[a]!="object")&&(t[a]={}),t=t[a]}const r=e[e.length-1],s=t[r];if(s!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===s)return;if(typeof s=="object"&&typeof n=="object"&&s!==null&&n!==null)Object.assign(s,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function b(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2);if(o in t){const a=t[o];return Array.isArray(a)?a.map(d=>b(d,e.slice(r+1),n)):n}else return n}else t=t[s]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function AP(t,e){for(const[n,r]of Object.entries(e)){const s=n.split("."),o=r.split("."),a=new Set;let d=-1;for(let u=0;u<s.length;u++)if(s[u]==="*"){d=u;break}if(d!==-1&&o.length>d)for(let u=d;u<o.length;u++){const f=o[u];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&a.add(f)}s0(t,s,o,0,a)}}function s0(t,e,n,r,s){if(r>=e.length||typeof t!="object"||t===null)return;const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2),d=t;if(a in d&&Array.isArray(d[a]))for(const u of d[a])s0(u,e,n,r+1,s)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const a=t,d=Object.keys(a).filter(f=>!f.startsWith("_")&&!s.has(f)),u={};for(const f of d)u[f]=a[f];for(const[f,p]of Object.entries(u)){const g=[];for(const x of n.slice(r))x==="*"?g.push(f):g.push(x);y(a,g,p)}for(const f of d)delete a[f]}}else{const a=t;o in a&&s0(a[o],e,n,r+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wb(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _P(t){const e={},n=b(t,["operationName"]);n!=null&&y(e,["operationName"],n);const r=b(t,["resourceName"]);return r!=null&&y(e,["_url","resourceName"],r),e}function jP(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response","generateVideoResponse"]);return a!=null&&y(e,["response"],RP(a)),e}function MP(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response"]);return a!=null&&y(e,["response"],IP(a)),e}function RP(t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>DP(a))),y(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=b(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function IP(t){const e={},n=b(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>PP(a))),y(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=b(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function DP(t){const e={},n=b(t,["video"]);return n!=null&&y(e,["video"],qP(n)),e}function PP(t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],HP(n)),e}function OP(t){const e={},n=b(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function LP(t){const e={},n=b(t,["operationName"]);return n!=null&&y(e,["_url","operationName"],n),e}function BP(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response"]);return a!=null&&y(e,["response"],UP(a)),e}function UP(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&y(e,["parent"],r);const s=b(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function IT(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response"]);return a!=null&&y(e,["response"],zP(a)),e}function zP(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&y(e,["parent"],r);const s=b(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function qP(t){const e={},n=b(t,["uri"]);n!=null&&y(e,["uri"],n);const r=b(t,["encodedVideo"]);r!=null&&y(e,["videoBytes"],wb(r));const s=b(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function HP(t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],wb(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var r2;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(r2||(r2={}));var s2;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(s2||(s2={}));var o2;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(o2||(o2={}));var Kt;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(Kt||(Kt={}));var i2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(i2||(i2={}));var a2;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(a2||(a2={}));var l2;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(l2||(l2={}));var c2;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(c2||(c2={}));var d2;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(d2||(d2={}));var u2;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(u2||(u2={}));var h2;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(h2||(h2={}));var f2;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(f2||(f2={}));var p2;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(p2||(p2={}));var m2;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(m2||(m2={}));var g2;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(g2||(g2={}));var b2;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(b2||(b2={}));var x2;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(x2||(x2={}));var y2;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(y2||(y2={}));var Bh;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Bh||(Bh={}));var v2;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(v2||(v2={}));var w2;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(w2||(w2={}));var S2;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(S2||(S2={}));var o0;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(o0||(o0={}));var C2;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(C2||(C2={}));var N2;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(N2||(N2={}));var E2;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(E2||(E2={}));var T2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(T2||(T2={}));var k2;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(k2||(k2={}));var A2;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(A2||(A2={}));var _2;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(_2||(_2={}));var j2;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(j2||(j2={}));var M2;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(M2||(M2={}));var R2;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(R2||(R2={}));var I2;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(I2||(I2={}));var D2;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(D2||(D2={}));var P2;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(P2||(P2={}));var O2;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(O2||(O2={}));var L2;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(L2||(L2={}));var B2;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(B2||(B2={}));var U2;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(U2||(U2={}));var z2;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING"})(z2||(z2={}));var q2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(q2||(q2={}));var H2;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(H2||(H2={}));var V2;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(V2||(V2={}));var F2;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(F2||(F2={}));var $2;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})($2||($2={}));var G2;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(G2||(G2={}));var J2;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(J2||(J2={}));var K2;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(K2||(K2={}));var W2;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(W2||(W2={}));var Y2;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Y2||(Y2={}));var X2;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(X2||(X2={}));var Ra;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Ra||(Ra={}));class i0{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class lc{get text(){var e,n,r,s,o,a,d,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",p=!1;const g=[];for(const x of(u=(d=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&u!==void 0?u:[]){for(const[w,C]of Object.entries(x))w!=="text"&&w!=="thought"&&(C!==null||C!==void 0)&&g.push(w);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;p=!0,f+=x.text}}return g.length>0&&console.warn(`there are non-text parts ${g} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?f:void 0}get data(){var e,n,r,s,o,a,d,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const p=[];for(const g of(u=(d=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)!==null&&u!==void 0?u:[]){for(const[x,w]of Object.entries(g))x!=="inlineData"&&(w!==null||w!==void 0)&&p.push(x);g.inlineData&&typeof g.inlineData.data=="string"&&(f+=atob(g.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,n,r,s,o,a,d,u;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(u=(d=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,n,r,s,o,a,d,u,f;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(u=(d=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(g=>g.executableCode).map(g=>g.executableCode).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,n,r,s,o,a,d,u,f;if(((s=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(u=(d=(a=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content)===null||d===void 0?void 0:d.parts)===null||u===void 0?void 0:u.filter(g=>g.codeExecutionResult).map(g=>g.codeExecutionResult).filter(g=>g!==void 0);if((p==null?void 0:p.length)!==0)return(f=p==null?void 0:p[0])===null||f===void 0?void 0:f.output}}class Q2{}class Z2{}class VP{}class FP{}class $P{}class GP{}class eS{}class tS{}class nS{}class JP{}class Uh{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Uh;let s;const o=e;return n?s=MP(o):s=jP(o),Object.assign(r,s),r}}class rS{}class sS{}class oS{}class KP{}class WP{}class YP{}class Sb{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Sb,o=BP(e);return Object.assign(r,o),r}}class XP{}class QP{}class ZP{}class iS{}class e6{get text(){var e,n,r;let s="",o=!1;const a=[];for(const d of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[u,f]of Object.entries(d))u!=="text"&&u!=="thought"&&f!==null&&a.push(u);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;o=!0,s+=d.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?s:void 0}get data(){var e,n,r;let s="";const o=[];for(const a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[d,u]of Object.entries(a))d!=="inlineData"&&u!==null&&o.push(d);a.inlineData&&typeof a.inlineData.data=="string"&&(s+=atob(a.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class t6{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cb{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new Cb,o=IT(e);return Object.assign(r,o),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function We(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function DT(t,e){const n=We(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function PT(t){return Array.isArray(t)?t.map(e=>zh(e)):[zh(t)]}function zh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function OT(t){const e=zh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function LT(t){const e=zh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aS(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function BT(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>aS(e)):[aS(t)]}function a0(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function lS(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function cS(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function bn(t){if(t==null)throw new Error("ContentUnion is required");return a0(t)?t:{role:"user",parts:BT(t)}}function Nb(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=bn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=bn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>bn(n)):[bn(e)]}function fr(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(lS(t)||cS(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(t)]}const e=[],n=[],r=a0(t[0]);for(const s of t){const o=a0(s);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(s);else{if(lS(s)||cS(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(s)}}return r||e.push({role:"user",parts:BT(n)}),e}function n6(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(Kt).includes(n[0].toUpperCase())?n[0].toUpperCase():Kt.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(Kt).includes(r.toUpperCase())?r.toUpperCase():Kt.TYPE_UNSPECIFIED})}}function La(t){const e={},n=["items"],r=["anyOf"],s=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&n6(t.type,e);for(const[a,d]of Object.entries(t))if(d!=null)if(a=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Kt).includes(d.toUpperCase())?d.toUpperCase():Kt.TYPE_UNSPECIFIED}else if(n.includes(a))e[a]=La(d);else if(r.includes(a)){const u=[];for(const f of d){if(f.type=="null"){e.nullable=!0;continue}u.push(La(f))}e[a]=u}else if(s.includes(a)){const u={};for(const[f,p]of Object.entries(d))u[f]=La(p);e[a]=u}else{if(a==="additionalProperties")continue;e[a]=d}return e}function Eb(t){return La(t)}function Tb(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function kb(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function el(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=La(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=La(e.response));return t}function tl(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function r6(t,e,n,r=1){const s=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:s?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:s?`${n}/${e}`:e}function Ms(t,e){if(typeof e!="string")throw new Error("name must be a string");return r6(t,e,"cachedContents")}function UT(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Lo(t){return wb(t)}function s6(t){return t!=null&&typeof t=="object"&&"name"in t}function o6(t){return t!=null&&typeof t=="object"&&"video"in t}function i6(t){return t!=null&&typeof t=="object"&&"uri"in t}function zT(t){var e;let n;if(s6(t)&&(n=t.name),!(i6(t)&&(n=t.uri,n===void 0))&&!(o6(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const s=n.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${n}`);n=s[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function qT(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function HT(t){for(const e of["models","tunedModels","publisherModels"])if(a6(t,e))return t[e];return[]}function a6(t,e){return t!==null&&typeof t=="object"&&e in t}function l6(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function c6(t,e={}){const n=[],r=new Set;for(const s of t){const o=s.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);const a=l6(s,e);a.functionDeclarations&&n.push(...a.functionDeclarations)}return{functionDeclarations:n}}function VT(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,s=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(s>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function d6(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function FT(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const s=n.inlinedResponses;if(!Array.isArray(s)||s.length===0)return t;let o=!1;for(const a of s){if(typeof a!="object"||a===null)continue;const u=a.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function nl(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function $T(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function u6(t){const e={},n=b(t,["responsesFile"]);n!=null&&y(e,["fileName"],n);const r=b(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>H6(a))),y(e,["inlinedResponses"],o)}const s=b(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["inlinedEmbedContentResponses"],o)}return e}function h6(t){const e={},n=b(t,["predictionsFormat"]);n!=null&&y(e,["format"],n);const r=b(t,["gcsDestination","outputUriPrefix"]);r!=null&&y(e,["gcsUri"],r);const s=b(t,["bigqueryDestination","outputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function f6(t){const e={},n=b(t,["format"]);n!=null&&y(e,["predictionsFormat"],n);const r=b(t,["gcsUri"]);r!=null&&y(e,["gcsDestination","outputUriPrefix"],r);const s=b(t,["bigqueryUri"]);if(s!=null&&y(e,["bigqueryDestination","outputUri"],s),b(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(b(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Ju(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata","displayName"]);r!=null&&y(e,["displayName"],r);const s=b(t,["metadata","state"]);s!=null&&y(e,["state"],$T(s));const o=b(t,["metadata","createTime"]);o!=null&&y(e,["createTime"],o);const a=b(t,["metadata","endTime"]);a!=null&&y(e,["endTime"],a);const d=b(t,["metadata","updateTime"]);d!=null&&y(e,["updateTime"],d);const u=b(t,["metadata","model"]);u!=null&&y(e,["model"],u);const f=b(t,["metadata","output"]);return f!=null&&y(e,["dest"],u6(FT(f))),e}function l0(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["displayName"]);r!=null&&y(e,["displayName"],r);const s=b(t,["state"]);s!=null&&y(e,["state"],$T(s));const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["createTime"]);a!=null&&y(e,["createTime"],a);const d=b(t,["startTime"]);d!=null&&y(e,["startTime"],d);const u=b(t,["endTime"]);u!=null&&y(e,["endTime"],u);const f=b(t,["updateTime"]);f!=null&&y(e,["updateTime"],f);const p=b(t,["model"]);p!=null&&y(e,["model"],p);const g=b(t,["inputConfig"]);g!=null&&y(e,["src"],p6(g));const x=b(t,["outputConfig"]);x!=null&&y(e,["dest"],h6(FT(x)));const w=b(t,["completionStats"]);return w!=null&&y(e,["completionStats"],w),e}function p6(t){const e={},n=b(t,["instancesFormat"]);n!=null&&y(e,["format"],n);const r=b(t,["gcsSource","uris"]);r!=null&&y(e,["gcsUri"],r);const s=b(t,["bigquerySource","inputUri"]);return s!=null&&y(e,["bigqueryUri"],s),e}function m6(t,e){const n={};if(b(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(b(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=b(e,["fileName"]);r!=null&&y(n,["fileName"],r);const s=b(e,["inlinedRequests"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>q6(t,a))),y(n,["requests","requests"],o)}return n}function g6(t){const e={},n=b(t,["format"]);n!=null&&y(e,["instancesFormat"],n);const r=b(t,["gcsUri"]);r!=null&&y(e,["gcsSource","uris"],r);const s=b(t,["bigqueryUri"]);if(s!=null&&y(e,["bigquerySource","inputUri"],s),b(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(b(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function b6(t){const e={},n=b(t,["data"]);if(n!=null&&y(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function x6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function y6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function v6(t){const e={},n=b(t,["content"]);n!=null&&y(e,["content"],n);const r=b(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],w6(r));const s=b(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const o=b(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const a=b(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const d=b(t,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const u=b(t,["index"]);u!=null&&y(e,["index"],u);const f=b(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=b(t,["safetyRatings"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(w=>w)),y(e,["safetyRatings"],x)}const g=b(t,["urlContextMetadata"]);return g!=null&&y(e,["urlContextMetadata"],g),e}function w6(t){const e={},n=b(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),y(e,["citations"],r)}return e}function GT(t){const e={},n=b(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>W6(o))),y(e,["parts"],s)}const r=b(t,["role"]);return r!=null&&y(e,["role"],r),e}function S6(t,e){const n={},r=b(t,["displayName"]);if(e!==void 0&&r!=null&&y(e,["batch","displayName"],r),b(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function C6(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const s=b(t,["dest"]);return e!==void 0&&s!=null&&y(e,["outputConfig"],f6(d6(s))),n}function dS(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["src"]);s!=null&&y(n,["batch","inputConfig"],m6(t,VT(t,s)));const o=b(e,["config"]);return o!=null&&S6(o,n),n}function N6(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["model"],We(t,r));const s=b(e,["src"]);s!=null&&y(n,["inputConfig"],g6(VT(t,s)));const o=b(e,["config"]);return o!=null&&C6(o,n),n}function E6(t,e){const n={},r=b(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["batch","displayName"],r),n}function T6(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["src"]);s!=null&&y(n,["batch","inputConfig"],I6(t,s));const o=b(e,["config"]);return o!=null&&E6(o,n),n}function k6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function A6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function _6(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["name"]);r!=null&&y(e,["name"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);return o!=null&&y(e,["error"],o),e}function j6(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["name"]);r!=null&&y(e,["name"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);return o!=null&&y(e,["error"],o),e}function M6(t,e){const n={},r=b(e,["contents"]);if(r!=null){let o=Nb(t,r);Array.isArray(o)&&(o=o.map(a=>a)),y(n,["requests[]","request","content"],o)}const s=b(e,["config"]);return s!=null&&(y(n,["_self"],R6(s,n)),AP(n,{"requests[].*":"requests[].request.*"})),n}function R6(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const s=b(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const o=b(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function I6(t,e){const n={},r=b(e,["fileName"]);r!=null&&y(n,["file_name"],r);const s=b(e,["inlinedRequests"]);return s!=null&&y(n,["requests"],M6(t,s)),n}function D6(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function P6(t,e,n){const r={},s=b(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],GT(bn(s)));const o=b(e,["temperature"]);o!=null&&y(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&y(r,["topP"],a);const d=b(e,["topK"]);d!=null&&y(r,["topK"],d);const u=b(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const f=b(e,["maxOutputTokens"]);f!=null&&y(r,["maxOutputTokens"],f);const p=b(e,["stopSequences"]);p!=null&&y(r,["stopSequences"],p);const g=b(e,["responseLogprobs"]);g!=null&&y(r,["responseLogprobs"],g);const x=b(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const w=b(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const C=b(e,["frequencyPenalty"]);C!=null&&y(r,["frequencyPenalty"],C);const E=b(e,["seed"]);E!=null&&y(r,["seed"],E);const N=b(e,["responseMimeType"]);N!=null&&y(r,["responseMimeType"],N);const k=b(e,["responseSchema"]);k!=null&&y(r,["responseSchema"],Eb(k));const _=b(e,["responseJsonSchema"]);if(_!=null&&y(r,["responseJsonSchema"],_),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=b(e,["safetySettings"]);if(n!==void 0&&j!=null){let ne=j;Array.isArray(ne)&&(ne=ne.map(oe=>Y6(oe))),y(n,["safetySettings"],ne)}const P=b(e,["tools"]);if(n!==void 0&&P!=null){let ne=tl(P);Array.isArray(ne)&&(ne=ne.map(oe=>X6(el(oe)))),y(n,["tools"],ne)}const z=b(e,["toolConfig"]);if(n!==void 0&&z!=null&&y(n,["toolConfig"],z),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=b(e,["cachedContent"]);n!==void 0&&O!=null&&y(n,["cachedContent"],Ms(t,O));const D=b(e,["responseModalities"]);D!=null&&y(r,["responseModalities"],D);const te=b(e,["mediaResolution"]);te!=null&&y(r,["mediaResolution"],te);const G=b(e,["speechConfig"]);if(G!=null&&y(r,["speechConfig"],Tb(G)),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=b(e,["thinkingConfig"]);le!=null&&y(r,["thinkingConfig"],le);const Ne=b(e,["imageConfig"]);return Ne!=null&&y(r,["imageConfig"],Ne),r}function O6(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>v6(f))),y(e,["candidates"],u)}const s=b(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const o=b(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const a=b(t,["responseId"]);a!=null&&y(e,["responseId"],a);const d=b(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function L6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function B6(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],nl(t,r)),n}function U6(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function z6(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function q6(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["request","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let d=fr(s);Array.isArray(d)&&(d=d.map(u=>GT(u))),y(n,["request","contents"],d)}const o=b(e,["metadata"]);o!=null&&y(n,["metadata"],o);const a=b(e,["config"]);return a!=null&&y(n,["request","generationConfig"],P6(t,a,b(n,["request"],{}))),n}function H6(t){const e={},n=b(t,["response"]);n!=null&&y(e,["response"],O6(n));const r=b(t,["error"]);return r!=null&&y(e,["error"],r),e}function V6(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);if(e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),b(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function F6(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);e!==void 0&&s!=null&&y(e,["_query","pageToken"],s);const o=b(t,["filter"]);return e!==void 0&&o!=null&&y(e,["_query","filter"],o),n}function $6(t){const e={},n=b(t,["config"]);return n!=null&&V6(n,e),e}function G6(t){const e={},n=b(t,["config"]);return n!=null&&F6(n,e),e}function J6(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["operations"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>Ju(a))),y(e,["batchJobs"],o)}return e}function K6(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["batchPredictionJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>l0(a))),y(e,["batchJobs"],o)}return e}function W6(t){const e={},n=b(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=b(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const o=b(t,["fileData"]);o!=null&&y(e,["fileData"],D6(o));const a=b(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const d=b(t,["inlineData"]);d!=null&&y(e,["inlineData"],b6(d));const u=b(t,["text"]);u!=null&&y(e,["text"],u);const f=b(t,["thought"]);f!=null&&y(e,["thought"],f);const p=b(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const g=b(t,["videoMetadata"]);return g!=null&&y(e,["videoMetadata"],g),e}function Y6(t){const e={},n=b(t,["category"]);if(n!=null&&y(e,["category"],n),b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function X6(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),y(e,["functionDeclarations"],p)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const s=b(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const o=b(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=b(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],U6(d));const u=b(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],z6(u));const f=b(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ks;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ks||(ks={}));class Bi{constructor(e,n,r,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,s)}init(e,n,r){var s,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!r||Object.keys(r).length===0?a={config:{}}:typeof r=="object"?a=Object.assign({},r):a=r,a.config&&(a.config.pageToken=n.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(o=(s=a.config)===null||s===void 0?void 0:s.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q6 extends js{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Bi(ks.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=dS(this.apiClient,e),r=n._url,s=de("{model}:batchGenerateContent",r),d=n.batch.inputConfig.requests,u=d.requests,f=[];for(const p of u){const g=Object.assign({},p);if(g.systemInstruction){const x=g.systemInstruction;delete g.systemInstruction;const w=g.request;w.systemInstruction=x,g.request=w}f.push(g)}return d.requests=f,delete n.config,delete n._url,delete n._query,{path:s,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},s=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${s}`),r.dest===void 0){const o=this.getGcsUri(e),a=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${s}`;else if(a)r.dest=`${a}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=N6(this.apiClient,e);return d=de("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>l0(p))}else{const f=dS(this.apiClient,e);return d=de("{model}:batchGenerateContent",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Ju(p))}}async createEmbeddingsInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=T6(this.apiClient,e);return o=de("{model}:asyncBatchEmbedContent",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>Ju(u))}}async get(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=B6(this.apiClient,e);return d=de("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>l0(p))}else{const f=L6(this.apiClient,e);return d=de("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>Ju(p))}}async cancel(e){var n,r,s,o;let a="",d={};if(this.apiClient.isVertexAI()){const u=y6(this.apiClient,e);a=de("batchPredictionJobs/{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=x6(this.apiClient,e);a=de("batches/{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=G6(e);return d=de("batchPredictionJobs",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=K6(p),x=new iS;return Object.assign(x,g),x})}else{const f=$6(e);return d=de("batches",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=J6(p),x=new iS;return Object.assign(x,g),x})}}async delete(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=A6(this.apiClient,e);return d=de("batchPredictionJobs/{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>j6(p))}else{const f=k6(this.apiClient,e);return d=de("batches/{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>_6(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z6(t){const e={},n=b(t,["data"]);if(n!=null&&y(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function uS(t){const e={},n=b(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>vO(o))),y(e,["parts"],s)}const r=b(t,["role"]);return r!=null&&y(e,["role"],r),e}function eO(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=b(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const o=b(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let p=fr(a);Array.isArray(p)&&(p=p.map(g=>uS(g))),y(e,["contents"],p)}const d=b(t,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],uS(bn(d)));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(g=>wO(g))),y(e,["tools"],p)}const f=b(t,["toolConfig"]);if(e!==void 0&&f!=null&&y(e,["toolConfig"],f),b(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function tO(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=b(t,["expireTime"]);e!==void 0&&s!=null&&y(e,["expireTime"],s);const o=b(t,["displayName"]);e!==void 0&&o!=null&&y(e,["displayName"],o);const a=b(t,["contents"]);if(e!==void 0&&a!=null){let g=fr(a);Array.isArray(g)&&(g=g.map(x=>x)),y(e,["contents"],g)}const d=b(t,["systemInstruction"]);e!==void 0&&d!=null&&y(e,["systemInstruction"],bn(d));const u=b(t,["tools"]);if(e!==void 0&&u!=null){let g=u;Array.isArray(g)&&(g=g.map(x=>SO(x))),y(e,["tools"],g)}const f=b(t,["toolConfig"]);e!==void 0&&f!=null&&y(e,["toolConfig"],f);const p=b(t,["kmsKeyName"]);return e!==void 0&&p!=null&&y(e,["encryption_spec","kmsKeyName"],p),n}function nO(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["model"],DT(t,r));const s=b(e,["config"]);return s!=null&&eO(s,n),n}function rO(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["model"],DT(t,r));const s=b(e,["config"]);return s!=null&&tO(s,n),n}function sO(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],Ms(t,r)),n}function oO(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],Ms(t,r)),n}function iO(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function aO(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function lO(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function cO(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const r=b(t,["name"]);r!=null&&y(e,["name"],r);const s=b(t,["parameters"]);s!=null&&y(e,["parameters"],s);const o=b(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&y(e,["response"],a);const d=b(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function dO(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],Ms(t,r)),n}function uO(t,e){const n={},r=b(e,["name"]);return r!=null&&y(n,["_url","name"],Ms(t,r)),n}function hO(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function fO(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function pO(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function mO(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function gO(t){const e={},n=b(t,["config"]);return n!=null&&pO(n,e),e}function bO(t){const e={},n=b(t,["config"]);return n!=null&&mO(n,e),e}function xO(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["cachedContents"],o)}return e}function yO(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["cachedContents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["cachedContents"],o)}return e}function vO(t){const e={},n=b(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=b(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const o=b(t,["fileData"]);o!=null&&y(e,["fileData"],lO(o));const a=b(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const d=b(t,["inlineData"]);d!=null&&y(e,["inlineData"],Z6(d));const u=b(t,["text"]);u!=null&&y(e,["text"],u);const f=b(t,["thought"]);f!=null&&y(e,["thought"],f);const p=b(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const g=b(t,["videoMetadata"]);return g!=null&&y(e,["videoMetadata"],g),e}function wO(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),y(e,["functionDeclarations"],p)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const s=b(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const o=b(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=b(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],hO(d));const u=b(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],fO(u));const f=b(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function SO(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>cO(x))),y(e,["functionDeclarations"],g)}const r=b(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const s=b(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const o=b(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const d=b(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const u=b(t,["googleMaps"]);u!=null&&y(e,["googleMaps"],u);const f=b(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=b(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function CO(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=b(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function NO(t,e){const n={},r=b(t,["ttl"]);e!==void 0&&r!=null&&y(e,["ttl"],r);const s=b(t,["expireTime"]);return e!==void 0&&s!=null&&y(e,["expireTime"],s),n}function EO(t,e){const n={},r=b(e,["name"]);r!=null&&y(n,["_url","name"],Ms(t,r));const s=b(e,["config"]);return s!=null&&CO(s,n),n}function TO(t,e){const n={},r=b(e,["name"]);r!=null&&y(n,["_url","name"],Ms(t,r));const s=b(e,["config"]);return s!=null&&NO(s,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kO extends js{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(ks.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=rO(this.apiClient,e);return d=de("cachedContents",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=nO(this.apiClient,e);return d=de("cachedContents",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async get(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=uO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=dO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async delete(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=oO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=aO(p),x=new sS;return Object.assign(x,g),x})}else{const f=sO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=iO(p),x=new sS;return Object.assign(x,g),x})}}async update(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=TO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>p)}else{const f=EO(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>p)}}async listInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=bO(e);return d=de("cachedContents",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=yO(p),x=new oS;return Object.assign(x,g),x})}else{const f=gO(e);return d=de("cachedContents",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=xO(p),x=new oS;return Object.assign(x,g),x})}}}function hS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pt(t){return this instanceof pt?(this.v=t,this):new pt(t)}function Ba(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(w){return function(C){return Promise.resolve(C).then(w,g)}}function d(w,C){r[w]&&(s[w]=function(E){return new Promise(function(N,k){o.push([w,E,N,k])>1||u(w,E)})},C&&(s[w]=C(s[w])))}function u(w,C){try{f(r[w](C))}catch(E){x(o[0][3],E)}}function f(w){w.value instanceof pt?Promise.resolve(w.value.v).then(p,g):x(o[0][2],w)}function p(w){u("next",w)}function g(w){u("throw",w)}function x(w,C){w(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Tc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof hS=="function"?hS(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(d,u){a=t[o](a),s(d,u,a.done,a.value)})}}function s(o,a,d,u){Promise.resolve(u).then(function(f){o({value:f,done:d})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function AO(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:JT(n)}function JT(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function _O(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function fS(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const s=[];let o=!0;for(;r<n&&t[r].role==="model";)s.push(t[r]),o&&!JT(t[r])&&(o=!1),r++;o?e.push(...s):e.pop()}return e}class jO{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new MO(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class MO{constructor(e,n,r,s={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=s,this.history=o,this.sendPromise=Promise.resolve(),_O(o)}async sendMessage(e){var n;await this.sendPromise;const r=bn(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,a,d;const u=await s,f=(a=(o=u.candidates)===null||o===void 0?void 0:o[0])===null||a===void 0?void 0:a.content,p=u.automaticFunctionCallingHistory,g=this.getHistory(!0).length;let x=[];p!=null&&(x=(d=p.slice(g))!==null&&d!==void 0?d:[]);const w=f?[f]:[];this.recordHistory(r,w,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var n;await this.sendPromise;const r=bn(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const o=await s;return this.processStreamResponse(o,r)}getHistory(e=!1){const n=e?fS(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,s;return Ba(this,arguments,function*(){var a,d,u,f;const p=[];try{for(var g=!0,x=Tc(e),w;w=yield pt(x.next()),a=w.done,!a;g=!0){f=w.value,g=!1;const C=f;if(AO(C)){const E=(s=(r=C.candidates)===null||r===void 0?void 0:r[0])===null||s===void 0?void 0:s.content;E!==void 0&&p.push(E)}yield yield pt(C)}}catch(C){d={error:C}}finally{try{!g&&!a&&(u=x.return)&&(yield pt(u.call(x)))}finally{if(d)throw d.error}}this.recordHistory(n,p)})}recordHistory(e,n,r){let s=[];n.length>0&&n.every(o=>o.role!==void 0)?s=n:s.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...fS(r)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,pf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RO(t){const e={},n=b(t,["file"]);return n!=null&&y(e,["file"],n),e}function IO(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function DO(t){const e={},n=b(t,["name"]);return n!=null&&y(e,["_url","file"],zT(n)),e}function PO(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function OO(t){const e={},n=b(t,["name"]);return n!=null&&y(e,["_url","file"],zT(n)),e}function LO(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function BO(t){const e={},n=b(t,["config"]);return n!=null&&LO(n,e),e}function UO(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["files"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["files"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zO extends js{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Bi(ks.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=BO(e);return o=de("files",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=UO(u),p=new XP;return Object.assign(p,f),p})}}async createInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=RO(e);return o=de("upload/v1beta/files",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=IO(u),p=new QP;return Object.assign(p,f),p})}}async get(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OO(e);return o=de("files/{file}",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DO(e);return o=de("files/{file}",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=PO(u),p=new ZP;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ku(t){const e={},n=b(t,["data"]);if(n!=null&&y(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function qO(t){const e={},n=b(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>nL(o))),y(e,["parts"],s)}const r=b(t,["role"]);return r!=null&&y(e,["role"],r),e}function HO(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function VO(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const r=b(t,["name"]);r!=null&&y(e,["name"],r);const s=b(t,["parameters"]);s!=null&&y(e,["parameters"],s);const o=b(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&y(e,["response"],a);const d=b(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function FO(t){const e={},n=b(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const r=b(t,["responseJsonSchema"]);r!=null&&y(e,["responseJsonSchema"],r);const s=b(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const o=b(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const a=b(t,["enableAffectiveDialog"]);a!=null&&y(e,["enableAffectiveDialog"],a);const d=b(t,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const u=b(t,["logprobs"]);u!=null&&y(e,["logprobs"],u);const f=b(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=b(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const g=b(t,["presencePenalty"]);g!=null&&y(e,["presencePenalty"],g);const x=b(t,["responseLogprobs"]);x!=null&&y(e,["responseLogprobs"],x);const w=b(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const C=b(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const E=b(t,["responseSchema"]);E!=null&&y(e,["responseSchema"],E);const N=b(t,["routingConfig"]);N!=null&&y(e,["routingConfig"],N);const k=b(t,["seed"]);k!=null&&y(e,["seed"],k);const _=b(t,["speechConfig"]);_!=null&&y(e,["speechConfig"],KT(_));const j=b(t,["stopSequences"]);j!=null&&y(e,["stopSequences"],j);const P=b(t,["temperature"]);P!=null&&y(e,["temperature"],P);const z=b(t,["thinkingConfig"]);z!=null&&y(e,["thinkingConfig"],z);const O=b(t,["topK"]);O!=null&&y(e,["topK"],O);const D=b(t,["topP"]);if(D!=null&&y(e,["topP"],D),b(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function $O(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function GO(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function JO(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const s=b(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const o=b(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topP"],a);const d=b(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const f=b(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=b(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const g=b(t,["speechConfig"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","speechConfig"],kb(g));const x=b(t,["thinkingConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","thinkingConfig"],x);const w=b(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],qO(bn(C)));const E=b(t,["tools"]);if(e!==void 0&&E!=null){let O=tl(E);Array.isArray(O)&&(O=O.map(D=>sL(el(D)))),y(e,["setup","tools"],O)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],rL(N));const k=b(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const _=b(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&y(e,["setup","outputAudioTranscription"],_);const j=b(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const P=b(t,["contextWindowCompression"]);e!==void 0&&P!=null&&y(e,["setup","contextWindowCompression"],P);const z=b(t,["proactivity"]);return e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),n}function KO(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],FO(r));const s=b(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const o=b(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topP"],a);const d=b(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const f=b(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=b(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const g=b(t,["speechConfig"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","speechConfig"],KT(kb(g)));const x=b(t,["thinkingConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","thinkingConfig"],x);const w=b(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],bn(C));const E=b(t,["tools"]);if(e!==void 0&&E!=null){let O=tl(E);Array.isArray(O)&&(O=O.map(D=>oL(el(D)))),y(e,["setup","tools"],O)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],N);const k=b(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const _=b(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&y(e,["setup","outputAudioTranscription"],_);const j=b(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const P=b(t,["contextWindowCompression"]);e!==void 0&&P!=null&&y(e,["setup","contextWindowCompression"],P);const z=b(t,["proactivity"]);return e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),n}function WO(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["setup","model"],We(t,r));const s=b(e,["config"]);return s!=null&&y(n,["config"],JO(s,n)),n}function YO(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["setup","model"],We(t,r));const s=b(e,["config"]);return s!=null&&y(n,["config"],KO(s,n)),n}function XO(t){const e={},n=b(t,["musicGenerationConfig"]);return n!=null&&y(e,["musicGenerationConfig"],n),e}function QO(t){const e={},n=b(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),y(e,["weightedPrompts"],r)}return e}function ZO(t){const e={},n=b(t,["media"]);if(n!=null){let f=PT(n);Array.isArray(f)&&(f=f.map(p=>Ku(p))),y(e,["mediaChunks"],f)}const r=b(t,["audio"]);r!=null&&y(e,["audio"],Ku(LT(r)));const s=b(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const o=b(t,["video"]);o!=null&&y(e,["video"],Ku(OT(o)));const a=b(t,["text"]);a!=null&&y(e,["text"],a);const d=b(t,["activityStart"]);d!=null&&y(e,["activityStart"],d);const u=b(t,["activityEnd"]);return u!=null&&y(e,["activityEnd"],u),e}function eL(t){const e={},n=b(t,["media"]);if(n!=null){let f=PT(n);Array.isArray(f)&&(f=f.map(p=>p)),y(e,["mediaChunks"],f)}const r=b(t,["audio"]);r!=null&&y(e,["audio"],LT(r));const s=b(t,["audioStreamEnd"]);s!=null&&y(e,["audioStreamEnd"],s);const o=b(t,["video"]);o!=null&&y(e,["video"],OT(o));const a=b(t,["text"]);a!=null&&y(e,["text"],a);const d=b(t,["activityStart"]);d!=null&&y(e,["activityStart"],d);const u=b(t,["activityEnd"]);return u!=null&&y(e,["activityEnd"],u),e}function tL(t){const e={},n=b(t,["setupComplete"]);n!=null&&y(e,["setupComplete"],n);const r=b(t,["serverContent"]);r!=null&&y(e,["serverContent"],r);const s=b(t,["toolCall"]);s!=null&&y(e,["toolCall"],s);const o=b(t,["toolCallCancellation"]);o!=null&&y(e,["toolCallCancellation"],o);const a=b(t,["usageMetadata"]);a!=null&&y(e,["usageMetadata"],iL(a));const d=b(t,["goAway"]);d!=null&&y(e,["goAway"],d);const u=b(t,["sessionResumptionUpdate"]);return u!=null&&y(e,["sessionResumptionUpdate"],u),e}function nL(t){const e={},n=b(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=b(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const o=b(t,["fileData"]);o!=null&&y(e,["fileData"],HO(o));const a=b(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const d=b(t,["inlineData"]);d!=null&&y(e,["inlineData"],Ku(d));const u=b(t,["text"]);u!=null&&y(e,["text"],u);const f=b(t,["thought"]);f!=null&&y(e,["thought"],f);const p=b(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const g=b(t,["videoMetadata"]);return g!=null&&y(e,["videoMetadata"],g),e}function rL(t){const e={},n=b(t,["handle"]);if(n!=null&&y(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function KT(t){const e={},n=b(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const r=b(t,["voiceConfig"]);if(r!=null&&y(e,["voiceConfig"],r),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function sL(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),y(e,["functionDeclarations"],p)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const s=b(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const o=b(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=b(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],$O(d));const u=b(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],GO(u));const f=b(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function oL(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>VO(x))),y(e,["functionDeclarations"],g)}const r=b(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const s=b(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const o=b(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const d=b(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const u=b(t,["googleMaps"]);u!=null&&y(e,["googleMaps"],u);const f=b(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=b(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function iL(t){const e={},n=b(t,["promptTokenCount"]);n!=null&&y(e,["promptTokenCount"],n);const r=b(t,["cachedContentTokenCount"]);r!=null&&y(e,["cachedContentTokenCount"],r);const s=b(t,["candidatesTokenCount"]);s!=null&&y(e,["responseTokenCount"],s);const o=b(t,["toolUsePromptTokenCount"]);o!=null&&y(e,["toolUsePromptTokenCount"],o);const a=b(t,["thoughtsTokenCount"]);a!=null&&y(e,["thoughtsTokenCount"],a);const d=b(t,["totalTokenCount"]);d!=null&&y(e,["totalTokenCount"],d);const u=b(t,["promptTokensDetails"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(C=>C)),y(e,["promptTokensDetails"],w)}const f=b(t,["cacheTokensDetails"]);if(f!=null){let w=f;Array.isArray(w)&&(w=w.map(C=>C)),y(e,["cacheTokensDetails"],w)}const p=b(t,["candidatesTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(C=>C)),y(e,["responseTokensDetails"],w)}const g=b(t,["toolUsePromptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(C=>C)),y(e,["toolUsePromptTokensDetails"],w)}const x=b(t,["trafficType"]);return x!=null&&y(e,["trafficType"],x),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aL(t){const e={},n=b(t,["data"]);if(n!=null&&y(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function lL(t){const e={},n=b(t,["content"]);n!=null&&y(e,["content"],n);const r=b(t,["citationMetadata"]);r!=null&&y(e,["citationMetadata"],cL(r));const s=b(t,["tokenCount"]);s!=null&&y(e,["tokenCount"],s);const o=b(t,["finishReason"]);o!=null&&y(e,["finishReason"],o);const a=b(t,["avgLogprobs"]);a!=null&&y(e,["avgLogprobs"],a);const d=b(t,["groundingMetadata"]);d!=null&&y(e,["groundingMetadata"],d);const u=b(t,["index"]);u!=null&&y(e,["index"],u);const f=b(t,["logprobsResult"]);f!=null&&y(e,["logprobsResult"],f);const p=b(t,["safetyRatings"]);if(p!=null){let x=p;Array.isArray(x)&&(x=x.map(w=>w)),y(e,["safetyRatings"],x)}const g=b(t,["urlContextMetadata"]);return g!=null&&y(e,["urlContextMetadata"],g),e}function cL(t){const e={},n=b(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>s)),y(e,["citations"],r)}return e}function dL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let o=fr(s);Array.isArray(o)&&(o=o.map(a=>a)),y(n,["contents"],o)}return n}function uL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["tokensInfo"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),y(e,["tokensInfo"],s)}return e}function hL(t){const e={},n=b(t,["values"]);n!=null&&y(e,["values"],n);const r=b(t,["statistics"]);return r!=null&&y(e,["statistics"],fL(r)),e}function fL(t){const e={},n=b(t,["truncated"]);n!=null&&y(e,["truncated"],n);const r=b(t,["token_count"]);return r!=null&&y(e,["tokenCount"],r),e}function mf(t){const e={},n=b(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>x8(o))),y(e,["parts"],s)}const r=b(t,["role"]);return r!=null&&y(e,["role"],r),e}function pL(t){const e={},n=b(t,["controlType"]);n!=null&&y(e,["controlType"],n);const r=b(t,["enableControlImageComputation"]);return r!=null&&y(e,["computeControl"],r),e}function mL(t){const e={};if(b(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(b(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(b(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function gL(t,e){const n={},r=b(t,["systemInstruction"]);e!==void 0&&r!=null&&y(e,["systemInstruction"],bn(r));const s=b(t,["tools"]);if(e!==void 0&&s!=null){let a=s;Array.isArray(a)&&(a=a.map(d=>ZT(d))),y(e,["tools"],a)}const o=b(t,["generationConfig"]);return e!==void 0&&o!=null&&y(e,["generationConfig"],o8(o)),n}function bL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let a=fr(s);Array.isArray(a)&&(a=a.map(d=>mf(d))),y(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&mL(o),n}function xL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let a=fr(s);Array.isArray(a)&&(a=a.map(d=>d)),y(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&gL(o,n),n}function yL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["totalTokens"]);r!=null&&y(e,["totalTokens"],r);const s=b(t,["cachedContentTokenCount"]);return s!=null&&y(e,["cachedContentTokenCount"],s),e}function vL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["totalTokens"]);return r!=null&&y(e,["totalTokens"],r),e}function wL(t,e){const n={},r=b(e,["model"]);return r!=null&&y(n,["_url","name"],We(t,r)),n}function SL(t,e){const n={},r=b(e,["model"]);return r!=null&&y(n,["_url","name"],We(t,r)),n}function CL(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function NL(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}function EL(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const s=b(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const o=b(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const d=b(t,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const u=b(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const f=b(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=b(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const g=b(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&y(e,["parameters","includeSafetyAttributes"],g);const x=b(t,["includeRaiReason"]);e!==void 0&&x!=null&&y(e,["parameters","includeRaiReason"],x);const w=b(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const C=b(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const E=b(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const N=b(t,["addWatermark"]);e!==void 0&&N!=null&&y(e,["parameters","addWatermark"],N);const k=b(t,["labels"]);e!==void 0&&k!=null&&y(e,["labels"],k);const _=b(t,["editMode"]);e!==void 0&&_!=null&&y(e,["parameters","editMode"],_);const j=b(t,["baseSteps"]);return e!==void 0&&j!=null&&y(e,["parameters","editConfig","baseSteps"],j),n}function TL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const o=b(e,["referenceImages"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>N8(u))),y(n,["instances[0]","referenceImages"],d)}const a=b(e,["config"]);return a!=null&&EL(a,n),n}function kL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>gf(o))),y(e,["generatedImages"],s)}return e}function AL(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&y(e,["requests[]","taskType"],r);const s=b(t,["title"]);e!==void 0&&s!=null&&y(e,["requests[]","title"],s);const o=b(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&y(e,["requests[]","outputDimensionality"],o),b(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(b(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function _L(t,e){const n={},r=b(t,["taskType"]);e!==void 0&&r!=null&&y(e,["instances[]","task_type"],r);const s=b(t,["title"]);e!==void 0&&s!=null&&y(e,["instances[]","title"],s);const o=b(t,["outputDimensionality"]);e!==void 0&&o!=null&&y(e,["parameters","outputDimensionality"],o);const a=b(t,["mimeType"]);e!==void 0&&a!=null&&y(e,["instances[]","mimeType"],a);const d=b(t,["autoTruncate"]);return e!==void 0&&d!=null&&y(e,["parameters","autoTruncate"],d),n}function jL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let d=Nb(t,s);Array.isArray(d)&&(d=d.map(u=>u)),y(n,["requests[]","content"],d)}const o=b(e,["config"]);o!=null&&AL(o,n);const a=b(e,["model"]);return a!==void 0&&y(n,["requests[]","model"],We(t,a)),n}function ML(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let a=Nb(t,s);Array.isArray(a)&&(a=a.map(d=>d)),y(n,["instances[]","content"],a)}const o=b(e,["config"]);return o!=null&&_L(o,n),n}function RL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["embeddings"],o)}const s=b(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function IL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>hL(a))),y(e,["embeddings"],o)}const s=b(t,["metadata"]);return s!=null&&y(e,["metadata"],s),e}function DL(t){const e={},n=b(t,["endpoint"]);n!=null&&y(e,["name"],n);const r=b(t,["deployedModelId"]);return r!=null&&y(e,["deployedModelId"],r),e}function PL(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function OL(t){const e={};if(b(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=b(t,["description"]);n!=null&&y(e,["description"],n);const r=b(t,["name"]);r!=null&&y(e,["name"],r);const s=b(t,["parameters"]);s!=null&&y(e,["parameters"],s);const o=b(t,["parametersJsonSchema"]);o!=null&&y(e,["parametersJsonSchema"],o);const a=b(t,["response"]);a!=null&&y(e,["response"],a);const d=b(t,["responseJsonSchema"]);return d!=null&&y(e,["responseJsonSchema"],d),e}function LL(t,e,n){const r={},s=b(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],mf(bn(s)));const o=b(e,["temperature"]);o!=null&&y(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&y(r,["topP"],a);const d=b(e,["topK"]);d!=null&&y(r,["topK"],d);const u=b(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const f=b(e,["maxOutputTokens"]);f!=null&&y(r,["maxOutputTokens"],f);const p=b(e,["stopSequences"]);p!=null&&y(r,["stopSequences"],p);const g=b(e,["responseLogprobs"]);g!=null&&y(r,["responseLogprobs"],g);const x=b(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const w=b(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const C=b(e,["frequencyPenalty"]);C!=null&&y(r,["frequencyPenalty"],C);const E=b(e,["seed"]);E!=null&&y(r,["seed"],E);const N=b(e,["responseMimeType"]);N!=null&&y(r,["responseMimeType"],N);const k=b(e,["responseSchema"]);k!=null&&y(r,["responseSchema"],Eb(k));const _=b(e,["responseJsonSchema"]);if(_!=null&&y(r,["responseJsonSchema"],_),b(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(b(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=b(e,["safetySettings"]);if(n!==void 0&&j!=null){let ne=j;Array.isArray(ne)&&(ne=ne.map(oe=>E8(oe))),y(n,["safetySettings"],ne)}const P=b(e,["tools"]);if(n!==void 0&&P!=null){let ne=tl(P);Array.isArray(ne)&&(ne=ne.map(oe=>M8(el(oe)))),y(n,["tools"],ne)}const z=b(e,["toolConfig"]);if(n!==void 0&&z!=null&&y(n,["toolConfig"],z),b(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const O=b(e,["cachedContent"]);n!==void 0&&O!=null&&y(n,["cachedContent"],Ms(t,O));const D=b(e,["responseModalities"]);D!=null&&y(r,["responseModalities"],D);const te=b(e,["mediaResolution"]);te!=null&&y(r,["mediaResolution"],te);const G=b(e,["speechConfig"]);if(G!=null&&y(r,["speechConfig"],Tb(G)),b(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const le=b(e,["thinkingConfig"]);le!=null&&y(r,["thinkingConfig"],le);const Ne=b(e,["imageConfig"]);return Ne!=null&&y(r,["imageConfig"],Ne),r}function BL(t,e,n){const r={},s=b(e,["systemInstruction"]);n!==void 0&&s!=null&&y(n,["systemInstruction"],bn(s));const o=b(e,["temperature"]);o!=null&&y(r,["temperature"],o);const a=b(e,["topP"]);a!=null&&y(r,["topP"],a);const d=b(e,["topK"]);d!=null&&y(r,["topK"],d);const u=b(e,["candidateCount"]);u!=null&&y(r,["candidateCount"],u);const f=b(e,["maxOutputTokens"]);f!=null&&y(r,["maxOutputTokens"],f);const p=b(e,["stopSequences"]);p!=null&&y(r,["stopSequences"],p);const g=b(e,["responseLogprobs"]);g!=null&&y(r,["responseLogprobs"],g);const x=b(e,["logprobs"]);x!=null&&y(r,["logprobs"],x);const w=b(e,["presencePenalty"]);w!=null&&y(r,["presencePenalty"],w);const C=b(e,["frequencyPenalty"]);C!=null&&y(r,["frequencyPenalty"],C);const E=b(e,["seed"]);E!=null&&y(r,["seed"],E);const N=b(e,["responseMimeType"]);N!=null&&y(r,["responseMimeType"],N);const k=b(e,["responseSchema"]);k!=null&&y(r,["responseSchema"],Eb(k));const _=b(e,["responseJsonSchema"]);_!=null&&y(r,["responseJsonSchema"],_);const j=b(e,["routingConfig"]);j!=null&&y(r,["routingConfig"],j);const P=b(e,["modelSelectionConfig"]);P!=null&&y(r,["modelConfig"],P);const z=b(e,["safetySettings"]);if(n!==void 0&&z!=null){let q=z;Array.isArray(q)&&(q=q.map(W=>W)),y(n,["safetySettings"],q)}const O=b(e,["tools"]);if(n!==void 0&&O!=null){let q=tl(O);Array.isArray(q)&&(q=q.map(W=>ZT(el(W)))),y(n,["tools"],q)}const D=b(e,["toolConfig"]);n!==void 0&&D!=null&&y(n,["toolConfig"],D);const te=b(e,["labels"]);n!==void 0&&te!=null&&y(n,["labels"],te);const G=b(e,["cachedContent"]);n!==void 0&&G!=null&&y(n,["cachedContent"],Ms(t,G));const le=b(e,["responseModalities"]);le!=null&&y(r,["responseModalities"],le);const Ne=b(e,["mediaResolution"]);Ne!=null&&y(r,["mediaResolution"],Ne);const ne=b(e,["speechConfig"]);ne!=null&&y(r,["speechConfig"],QT(Tb(ne)));const oe=b(e,["audioTimestamp"]);oe!=null&&y(r,["audioTimestamp"],oe);const me=b(e,["thinkingConfig"]);me!=null&&y(r,["thinkingConfig"],me);const fe=b(e,["imageConfig"]);return fe!=null&&y(r,["imageConfig"],fe),r}function pS(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let a=fr(s);Array.isArray(a)&&(a=a.map(d=>mf(d))),y(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&y(n,["generationConfig"],LL(t,o,n)),n}function mS(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["contents"]);if(s!=null){let a=fr(s);Array.isArray(a)&&(a=a.map(d=>d)),y(n,["contents"],a)}const o=b(e,["config"]);return o!=null&&y(n,["generationConfig"],BL(t,o,n)),n}function gS(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>lL(f))),y(e,["candidates"],u)}const s=b(t,["modelVersion"]);s!=null&&y(e,["modelVersion"],s);const o=b(t,["promptFeedback"]);o!=null&&y(e,["promptFeedback"],o);const a=b(t,["responseId"]);a!=null&&y(e,["responseId"],a);const d=b(t,["usageMetadata"]);return d!=null&&y(e,["usageMetadata"],d),e}function bS(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(p=>p)),y(e,["candidates"],f)}const s=b(t,["createTime"]);s!=null&&y(e,["createTime"],s);const o=b(t,["modelVersion"]);o!=null&&y(e,["modelVersion"],o);const a=b(t,["promptFeedback"]);a!=null&&y(e,["promptFeedback"],a);const d=b(t,["responseId"]);d!=null&&y(e,["responseId"],d);const u=b(t,["usageMetadata"]);return u!=null&&y(e,["usageMetadata"],u),e}function UL(t,e){const n={};if(b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const s=b(t,["aspectRatio"]);e!==void 0&&s!=null&&y(e,["parameters","aspectRatio"],s);const o=b(t,["guidanceScale"]);if(e!==void 0&&o!=null&&y(e,["parameters","guidanceScale"],o),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=b(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&y(e,["parameters","safetySetting"],a);const d=b(t,["personGeneration"]);e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d);const u=b(t,["includeSafetyAttributes"]);e!==void 0&&u!=null&&y(e,["parameters","includeSafetyAttributes"],u);const f=b(t,["includeRaiReason"]);e!==void 0&&f!=null&&y(e,["parameters","includeRaiReason"],f);const p=b(t,["language"]);e!==void 0&&p!=null&&y(e,["parameters","language"],p);const g=b(t,["outputMimeType"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","mimeType"],g);const x=b(t,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&y(e,["parameters","outputOptions","compressionQuality"],x),b(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=b(t,["imageSize"]);if(e!==void 0&&w!=null&&y(e,["parameters","sampleImageSize"],w),b(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function zL(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const s=b(t,["negativePrompt"]);e!==void 0&&s!=null&&y(e,["parameters","negativePrompt"],s);const o=b(t,["numberOfImages"]);e!==void 0&&o!=null&&y(e,["parameters","sampleCount"],o);const a=b(t,["aspectRatio"]);e!==void 0&&a!=null&&y(e,["parameters","aspectRatio"],a);const d=b(t,["guidanceScale"]);e!==void 0&&d!=null&&y(e,["parameters","guidanceScale"],d);const u=b(t,["seed"]);e!==void 0&&u!=null&&y(e,["parameters","seed"],u);const f=b(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&y(e,["parameters","safetySetting"],f);const p=b(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const g=b(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&y(e,["parameters","includeSafetyAttributes"],g);const x=b(t,["includeRaiReason"]);e!==void 0&&x!=null&&y(e,["parameters","includeRaiReason"],x);const w=b(t,["language"]);e!==void 0&&w!=null&&y(e,["parameters","language"],w);const C=b(t,["outputMimeType"]);e!==void 0&&C!=null&&y(e,["parameters","outputOptions","mimeType"],C);const E=b(t,["outputCompressionQuality"]);e!==void 0&&E!=null&&y(e,["parameters","outputOptions","compressionQuality"],E);const N=b(t,["addWatermark"]);e!==void 0&&N!=null&&y(e,["parameters","addWatermark"],N);const k=b(t,["labels"]);e!==void 0&&k!=null&&y(e,["labels"],k);const _=b(t,["imageSize"]);e!==void 0&&_!=null&&y(e,["parameters","sampleImageSize"],_);const j=b(t,["enhancePrompt"]);return e!==void 0&&j!=null&&y(e,["parameters","enhancePrompt"],j),n}function qL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const o=b(e,["config"]);return o!=null&&UL(o,n),n}function HL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const o=b(e,["config"]);return o!=null&&zL(o,n),n}function VL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>t8(a))),y(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],YT(s)),e}function FL(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>gf(a))),y(e,["generatedImages"],o)}const s=b(t,["positivePromptSafetyAttributes"]);return s!=null&&y(e,["positivePromptSafetyAttributes"],XT(s)),e}function $L(t,e){const n={},r=b(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r),b(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(b(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=b(t,["durationSeconds"]);if(e!==void 0&&s!=null&&y(e,["parameters","durationSeconds"],s),b(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=b(t,["aspectRatio"]);e!==void 0&&o!=null&&y(e,["parameters","aspectRatio"],o);const a=b(t,["resolution"]);e!==void 0&&a!=null&&y(e,["parameters","resolution"],a);const d=b(t,["personGeneration"]);if(e!==void 0&&d!=null&&y(e,["parameters","personGeneration"],d),b(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=b(t,["negativePrompt"]);e!==void 0&&u!=null&&y(e,["parameters","negativePrompt"],u);const f=b(t,["enhancePrompt"]);if(e!==void 0&&f!=null&&y(e,["parameters","enhancePrompt"],f),b(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=b(t,["lastFrame"]);e!==void 0&&p!=null&&y(e,["instances[0]","lastFrame"],bf(p));const g=b(t,["referenceImages"]);if(e!==void 0&&g!=null){let x=g;Array.isArray(x)&&(x=x.map(w=>F8(w))),y(e,["instances[0]","referenceImages"],x)}if(b(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(b(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function GL(t,e){const n={},r=b(t,["numberOfVideos"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const s=b(t,["outputGcsUri"]);e!==void 0&&s!=null&&y(e,["parameters","storageUri"],s);const o=b(t,["fps"]);e!==void 0&&o!=null&&y(e,["parameters","fps"],o);const a=b(t,["durationSeconds"]);e!==void 0&&a!=null&&y(e,["parameters","durationSeconds"],a);const d=b(t,["seed"]);e!==void 0&&d!=null&&y(e,["parameters","seed"],d);const u=b(t,["aspectRatio"]);e!==void 0&&u!=null&&y(e,["parameters","aspectRatio"],u);const f=b(t,["resolution"]);e!==void 0&&f!=null&&y(e,["parameters","resolution"],f);const p=b(t,["personGeneration"]);e!==void 0&&p!=null&&y(e,["parameters","personGeneration"],p);const g=b(t,["pubsubTopic"]);e!==void 0&&g!=null&&y(e,["parameters","pubsubTopic"],g);const x=b(t,["negativePrompt"]);e!==void 0&&x!=null&&y(e,["parameters","negativePrompt"],x);const w=b(t,["enhancePrompt"]);e!==void 0&&w!=null&&y(e,["parameters","enhancePrompt"],w);const C=b(t,["generateAudio"]);e!==void 0&&C!=null&&y(e,["parameters","generateAudio"],C);const E=b(t,["lastFrame"]);e!==void 0&&E!=null&&y(e,["instances[0]","lastFrame"],Rr(E));const N=b(t,["referenceImages"]);if(e!==void 0&&N!=null){let j=N;Array.isArray(j)&&(j=j.map(P=>$8(P))),y(e,["instances[0]","referenceImages"],j)}const k=b(t,["mask"]);e!==void 0&&k!=null&&y(e,["instances[0]","mask"],V8(k));const _=b(t,["compressionQuality"]);return e!==void 0&&_!=null&&y(e,["parameters","compressionQuality"],_),n}function JL(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response","generateVideoResponse"]);return a!=null&&y(e,["response"],XL(a)),e}function KL(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response"]);return a!=null&&y(e,["response"],QL(a)),e}function WL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const o=b(e,["image"]);o!=null&&y(n,["instances[0]","image"],bf(o));const a=b(e,["video"]);a!=null&&y(n,["instances[0]","video"],ek(a));const d=b(e,["source"]);d!=null&&ZL(d,n);const u=b(e,["config"]);return u!=null&&$L(u,n),n}function YL(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["prompt"]);s!=null&&y(n,["instances[0]","prompt"],s);const o=b(e,["image"]);o!=null&&y(n,["instances[0]","image"],Rr(o));const a=b(e,["video"]);a!=null&&y(n,["instances[0]","video"],tk(a));const d=b(e,["source"]);d!=null&&e8(d,n);const u=b(e,["config"]);return u!=null&&GL(u,n),n}function XL(t){const e={},n=b(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>r8(a))),y(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=b(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function QL(t){const e={},n=b(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(a=>s8(a))),y(e,["generatedVideos"],o)}const r=b(t,["raiMediaFilteredCount"]);r!=null&&y(e,["raiMediaFilteredCount"],r);const s=b(t,["raiMediaFilteredReasons"]);return s!=null&&y(e,["raiMediaFilteredReasons"],s),e}function ZL(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const s=b(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],bf(s));const o=b(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],ek(o)),n}function e8(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const s=b(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Rr(s));const o=b(t,["video"]);return e!==void 0&&o!=null&&y(e,["instances[0]","video"],tk(o)),n}function t8(t){const e={},n=b(t,["_self"]);n!=null&&y(e,["image"],d8(n));const r=b(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const s=b(t,["_self"]);return s!=null&&y(e,["safetyAttributes"],YT(s)),e}function gf(t){const e={},n=b(t,["_self"]);n!=null&&y(e,["image"],WT(n));const r=b(t,["raiFilteredReason"]);r!=null&&y(e,["raiFilteredReason"],r);const s=b(t,["_self"]);s!=null&&y(e,["safetyAttributes"],XT(s));const o=b(t,["prompt"]);return o!=null&&y(e,["enhancedPrompt"],o),e}function n8(t){const e={},n=b(t,["_self"]);n!=null&&y(e,["mask"],WT(n));const r=b(t,["labels"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),y(e,["labels"],s)}return e}function r8(t){const e={},n=b(t,["video"]);return n!=null&&y(e,["video"],q8(n)),e}function s8(t){const e={},n=b(t,["_self"]);return n!=null&&y(e,["video"],H8(n)),e}function o8(t){const e={},n=b(t,["modelSelectionConfig"]);n!=null&&y(e,["modelConfig"],n);const r=b(t,["responseJsonSchema"]);r!=null&&y(e,["responseJsonSchema"],r);const s=b(t,["audioTimestamp"]);s!=null&&y(e,["audioTimestamp"],s);const o=b(t,["candidateCount"]);o!=null&&y(e,["candidateCount"],o);const a=b(t,["enableAffectiveDialog"]);a!=null&&y(e,["enableAffectiveDialog"],a);const d=b(t,["frequencyPenalty"]);d!=null&&y(e,["frequencyPenalty"],d);const u=b(t,["logprobs"]);u!=null&&y(e,["logprobs"],u);const f=b(t,["maxOutputTokens"]);f!=null&&y(e,["maxOutputTokens"],f);const p=b(t,["mediaResolution"]);p!=null&&y(e,["mediaResolution"],p);const g=b(t,["presencePenalty"]);g!=null&&y(e,["presencePenalty"],g);const x=b(t,["responseLogprobs"]);x!=null&&y(e,["responseLogprobs"],x);const w=b(t,["responseMimeType"]);w!=null&&y(e,["responseMimeType"],w);const C=b(t,["responseModalities"]);C!=null&&y(e,["responseModalities"],C);const E=b(t,["responseSchema"]);E!=null&&y(e,["responseSchema"],E);const N=b(t,["routingConfig"]);N!=null&&y(e,["routingConfig"],N);const k=b(t,["seed"]);k!=null&&y(e,["seed"],k);const _=b(t,["speechConfig"]);_!=null&&y(e,["speechConfig"],QT(_));const j=b(t,["stopSequences"]);j!=null&&y(e,["stopSequences"],j);const P=b(t,["temperature"]);P!=null&&y(e,["temperature"],P);const z=b(t,["thinkingConfig"]);z!=null&&y(e,["thinkingConfig"],z);const O=b(t,["topK"]);O!=null&&y(e,["topK"],O);const D=b(t,["topP"]);if(D!=null&&y(e,["topP"],D),b(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function i8(t,e){const n={},r=b(e,["model"]);return r!=null&&y(n,["_url","name"],We(t,r)),n}function a8(t,e){const n={},r=b(e,["model"]);return r!=null&&y(n,["_url","name"],We(t,r)),n}function l8(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function c8(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function d8(t){const e={},n=b(t,["bytesBase64Encoded"]);n!=null&&y(e,["imageBytes"],Lo(n));const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function WT(t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&y(e,["imageBytes"],Lo(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function bf(t){const e={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=b(t,["imageBytes"]);n!=null&&y(e,["bytesBase64Encoded"],Lo(n));const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function Rr(t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["gcsUri"],n);const r=b(t,["imageBytes"]);r!=null&&y(e,["bytesBase64Encoded"],Lo(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function u8(t,e,n){const r={},s=b(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const o=b(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const a=b(e,["filter"]);n!==void 0&&a!=null&&y(n,["_query","filter"],a);const d=b(e,["queryBase"]);return n!==void 0&&d!=null&&y(n,["_url","models_url"],qT(t,d)),r}function h8(t,e,n){const r={},s=b(e,["pageSize"]);n!==void 0&&s!=null&&y(n,["_query","pageSize"],s);const o=b(e,["pageToken"]);n!==void 0&&o!=null&&y(n,["_query","pageToken"],o);const a=b(e,["filter"]);n!==void 0&&a!=null&&y(n,["_query","filter"],a);const d=b(e,["queryBase"]);return n!==void 0&&d!=null&&y(n,["_url","models_url"],qT(t,d)),r}function f8(t,e){const n={},r=b(e,["config"]);return r!=null&&u8(t,r,n),n}function p8(t,e){const n={},r=b(e,["config"]);return r!=null&&h8(t,r,n),n}function m8(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["_self"]);if(s!=null){let o=HT(s);Array.isArray(o)&&(o=o.map(a=>c0(a))),y(e,["models"],o)}return e}function g8(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["_self"]);if(s!=null){let o=HT(s);Array.isArray(o)&&(o=o.map(a=>d0(a))),y(e,["models"],o)}return e}function b8(t){const e={},n=b(t,["maskMode"]);n!=null&&y(e,["maskMode"],n);const r=b(t,["segmentationClasses"]);r!=null&&y(e,["maskClasses"],r);const s=b(t,["maskDilation"]);return s!=null&&y(e,["dilation"],s),e}function c0(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["displayName"]);r!=null&&y(e,["displayName"],r);const s=b(t,["description"]);s!=null&&y(e,["description"],s);const o=b(t,["version"]);o!=null&&y(e,["version"],o);const a=b(t,["_self"]);a!=null&&y(e,["tunedModelInfo"],R8(a));const d=b(t,["inputTokenLimit"]);d!=null&&y(e,["inputTokenLimit"],d);const u=b(t,["outputTokenLimit"]);u!=null&&y(e,["outputTokenLimit"],u);const f=b(t,["supportedGenerationMethods"]);return f!=null&&y(e,["supportedActions"],f),e}function d0(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["displayName"]);r!=null&&y(e,["displayName"],r);const s=b(t,["description"]);s!=null&&y(e,["description"],s);const o=b(t,["versionId"]);o!=null&&y(e,["version"],o);const a=b(t,["deployedModels"]);if(a!=null){let g=a;Array.isArray(g)&&(g=g.map(x=>DL(x))),y(e,["endpoints"],g)}const d=b(t,["labels"]);d!=null&&y(e,["labels"],d);const u=b(t,["_self"]);u!=null&&y(e,["tunedModelInfo"],I8(u));const f=b(t,["defaultCheckpointId"]);f!=null&&y(e,["defaultCheckpointId"],f);const p=b(t,["checkpoints"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(x=>x)),y(e,["checkpoints"],g)}return e}function x8(t){const e={},n=b(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=b(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const o=b(t,["fileData"]);o!=null&&y(e,["fileData"],PL(o));const a=b(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const d=b(t,["inlineData"]);d!=null&&y(e,["inlineData"],aL(d));const u=b(t,["text"]);u!=null&&y(e,["text"],u);const f=b(t,["thought"]);f!=null&&y(e,["thought"],f);const p=b(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const g=b(t,["videoMetadata"]);return g!=null&&y(e,["videoMetadata"],g),e}function y8(t){const e={},n=b(t,["productImage"]);return n!=null&&y(e,["image"],Rr(n)),e}function v8(t,e){const n={},r=b(t,["numberOfImages"]);e!==void 0&&r!=null&&y(e,["parameters","sampleCount"],r);const s=b(t,["baseSteps"]);e!==void 0&&s!=null&&y(e,["parameters","editConfig","baseSteps"],s);const o=b(t,["outputGcsUri"]);e!==void 0&&o!=null&&y(e,["parameters","storageUri"],o);const a=b(t,["seed"]);e!==void 0&&a!=null&&y(e,["parameters","seed"],a);const d=b(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&y(e,["parameters","safetySetting"],d);const u=b(t,["personGeneration"]);e!==void 0&&u!=null&&y(e,["parameters","personGeneration"],u);const f=b(t,["addWatermark"]);e!==void 0&&f!=null&&y(e,["parameters","addWatermark"],f);const p=b(t,["outputMimeType"]);e!==void 0&&p!=null&&y(e,["parameters","outputOptions","mimeType"],p);const g=b(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&y(e,["parameters","outputOptions","compressionQuality"],g);const x=b(t,["enhancePrompt"]);e!==void 0&&x!=null&&y(e,["parameters","enhancePrompt"],x);const w=b(t,["labels"]);return e!==void 0&&w!=null&&y(e,["labels"],w),n}function w8(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["source"]);s!=null&&C8(s,n);const o=b(e,["config"]);return o!=null&&v8(o,n),n}function S8(t){const e={},n=b(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>gf(s))),y(e,["generatedImages"],r)}return e}function C8(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const s=b(t,["personImage"]);e!==void 0&&s!=null&&y(e,["instances[0]","personImage","image"],Rr(s));const o=b(t,["productImages"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>y8(d))),y(e,["instances[0]","productImages"],a)}return n}function N8(t){const e={},n=b(t,["referenceImage"]);n!=null&&y(e,["referenceImage"],Rr(n));const r=b(t,["referenceId"]);r!=null&&y(e,["referenceId"],r);const s=b(t,["referenceType"]);s!=null&&y(e,["referenceType"],s);const o=b(t,["maskImageConfig"]);o!=null&&y(e,["maskImageConfig"],b8(o));const a=b(t,["controlImageConfig"]);a!=null&&y(e,["controlImageConfig"],pL(a));const d=b(t,["styleImageConfig"]);d!=null&&y(e,["styleImageConfig"],d);const u=b(t,["subjectImageConfig"]);return u!=null&&y(e,["subjectImageConfig"],u),e}function YT(t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=b(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const s=b(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function XT(t){const e={},n=b(t,["safetyAttributes","categories"]);n!=null&&y(e,["categories"],n);const r=b(t,["safetyAttributes","scores"]);r!=null&&y(e,["scores"],r);const s=b(t,["contentType"]);return s!=null&&y(e,["contentType"],s),e}function E8(t){const e={},n=b(t,["category"]);if(n!=null&&y(e,["category"],n),b(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=b(t,["threshold"]);return r!=null&&y(e,["threshold"],r),e}function T8(t){const e={},n=b(t,["image"]);return n!=null&&y(e,["image"],Rr(n)),e}function k8(t,e){const n={},r=b(t,["mode"]);e!==void 0&&r!=null&&y(e,["parameters","mode"],r);const s=b(t,["maxPredictions"]);e!==void 0&&s!=null&&y(e,["parameters","maxPredictions"],s);const o=b(t,["confidenceThreshold"]);e!==void 0&&o!=null&&y(e,["parameters","confidenceThreshold"],o);const a=b(t,["maskDilation"]);e!==void 0&&a!=null&&y(e,["parameters","maskDilation"],a);const d=b(t,["binaryColorThreshold"]);e!==void 0&&d!=null&&y(e,["parameters","binaryColorThreshold"],d);const u=b(t,["labels"]);return e!==void 0&&u!=null&&y(e,["labels"],u),n}function A8(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["source"]);s!=null&&j8(s,n);const o=b(e,["config"]);return o!=null&&k8(o,n),n}function _8(t){const e={},n=b(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(s=>n8(s))),y(e,["generatedMasks"],r)}return e}function j8(t,e){const n={},r=b(t,["prompt"]);e!==void 0&&r!=null&&y(e,["instances[0]","prompt"],r);const s=b(t,["image"]);e!==void 0&&s!=null&&y(e,["instances[0]","image"],Rr(s));const o=b(t,["scribbleImage"]);return e!==void 0&&o!=null&&y(e,["instances[0]","scribble"],T8(o)),n}function QT(t){const e={},n=b(t,["languageCode"]);n!=null&&y(e,["languageCode"],n);const r=b(t,["voiceConfig"]);if(r!=null&&y(e,["voiceConfig"],r),b(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function M8(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),y(e,["functionDeclarations"],p)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const s=b(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const o=b(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=b(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],l8(d));const u=b(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],c8(u));const f=b(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}function ZT(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let g=n;Array.isArray(g)&&(g=g.map(x=>OL(x))),y(e,["functionDeclarations"],g)}const r=b(t,["retrieval"]);r!=null&&y(e,["retrieval"],r);const s=b(t,["googleSearchRetrieval"]);s!=null&&y(e,["googleSearchRetrieval"],s);const o=b(t,["computerUse"]);if(o!=null&&y(e,["computerUse"],o),b(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=b(t,["codeExecution"]);a!=null&&y(e,["codeExecution"],a);const d=b(t,["enterpriseWebSearch"]);d!=null&&y(e,["enterpriseWebSearch"],d);const u=b(t,["googleMaps"]);u!=null&&y(e,["googleMaps"],u);const f=b(t,["googleSearch"]);f!=null&&y(e,["googleSearch"],f);const p=b(t,["urlContext"]);return p!=null&&y(e,["urlContext"],p),e}function R8(t){const e={},n=b(t,["baseModel"]);n!=null&&y(e,["baseModel"],n);const r=b(t,["createTime"]);r!=null&&y(e,["createTime"],r);const s=b(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function I8(t){const e={},n=b(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&y(e,["baseModel"],n);const r=b(t,["createTime"]);r!=null&&y(e,["createTime"],r);const s=b(t,["updateTime"]);return s!=null&&y(e,["updateTime"],s),e}function D8(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const s=b(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const o=b(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function P8(t,e){const n={},r=b(t,["displayName"]);e!==void 0&&r!=null&&y(e,["displayName"],r);const s=b(t,["description"]);e!==void 0&&s!=null&&y(e,["description"],s);const o=b(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&y(e,["defaultCheckpointId"],o),n}function O8(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","name"],We(t,r));const s=b(e,["config"]);return s!=null&&D8(s,n),n}function L8(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["config"]);return s!=null&&P8(s,n),n}function B8(t,e){const n={},r=b(t,["outputGcsUri"]);e!==void 0&&r!=null&&y(e,["parameters","storageUri"],r);const s=b(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&y(e,["parameters","safetySetting"],s);const o=b(t,["personGeneration"]);e!==void 0&&o!=null&&y(e,["parameters","personGeneration"],o);const a=b(t,["includeRaiReason"]);e!==void 0&&a!=null&&y(e,["parameters","includeRaiReason"],a);const d=b(t,["outputMimeType"]);e!==void 0&&d!=null&&y(e,["parameters","outputOptions","mimeType"],d);const u=b(t,["outputCompressionQuality"]);e!==void 0&&u!=null&&y(e,["parameters","outputOptions","compressionQuality"],u);const f=b(t,["enhanceInputImage"]);e!==void 0&&f!=null&&y(e,["parameters","upscaleConfig","enhanceInputImage"],f);const p=b(t,["imagePreservationFactor"]);e!==void 0&&p!=null&&y(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const g=b(t,["labels"]);e!==void 0&&g!=null&&y(e,["labels"],g);const x=b(t,["numberOfImages"]);e!==void 0&&x!=null&&y(e,["parameters","sampleCount"],x);const w=b(t,["mode"]);return e!==void 0&&w!=null&&y(e,["parameters","mode"],w),n}function U8(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["_url","model"],We(t,r));const s=b(e,["image"]);s!=null&&y(n,["instances[0]","image"],Rr(s));const o=b(e,["upscaleFactor"]);o!=null&&y(n,["parameters","upscaleConfig","upscaleFactor"],o);const a=b(e,["config"]);return a!=null&&B8(a,n),n}function z8(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["predictions"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>gf(o))),y(e,["generatedImages"],s)}return e}function q8(t){const e={},n=b(t,["uri"]);n!=null&&y(e,["uri"],n);const r=b(t,["encodedVideo"]);r!=null&&y(e,["videoBytes"],Lo(r));const s=b(t,["encoding"]);return s!=null&&y(e,["mimeType"],s),e}function H8(t){const e={},n=b(t,["gcsUri"]);n!=null&&y(e,["uri"],n);const r=b(t,["bytesBase64Encoded"]);r!=null&&y(e,["videoBytes"],Lo(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}function V8(t){const e={},n=b(t,["image"]);n!=null&&y(e,["_self"],Rr(n));const r=b(t,["maskMode"]);return r!=null&&y(e,["maskMode"],r),e}function F8(t){const e={},n=b(t,["image"]);n!=null&&y(e,["image"],bf(n));const r=b(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function $8(t){const e={},n=b(t,["image"]);n!=null&&y(e,["image"],Rr(n));const r=b(t,["referenceType"]);return r!=null&&y(e,["referenceType"],r),e}function ek(t){const e={},n=b(t,["uri"]);n!=null&&y(e,["uri"],n);const r=b(t,["videoBytes"]);r!=null&&y(e,["encodedVideo"],Lo(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["encoding"],s),e}function tk(t){const e={},n=b(t,["uri"]);n!=null&&y(e,["gcsUri"],n);const r=b(t,["videoBytes"]);r!=null&&y(e,["bytesBase64Encoded"],Lo(r));const s=b(t,["mimeType"]);return s!=null&&y(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G8="Content-Type",J8="X-Server-Timeout",K8="User-Agent",u0="x-goog-api-client",W8="1.29.0",Y8=`google-genai-sdk/${W8}`,X8="v1beta1",Q8="v1beta",xS=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Z8{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:X8,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Q8,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const s=[this.getRequestUrlInternal(n)];return r&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[a,d]of Object.entries(e.queryParams))s.searchParams.append(a,String(d));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.unaryApiCall(s,o,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[s,o]of Object.entries(n))typeof o=="object"?r[s]=Object.assign(Object.assign({},r[s]),o):o!==void 0&&(r[s]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,n,r);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,s.toString(),e.abortSignal),this.streamApiCall(s,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,s){if(n&&n.timeout||s){const o=new AbortController,a=o.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const d=setTimeout(()=>o.abort(),n.timeout);d&&typeof d.unref=="function"&&d.unref()}s&&s.addEventListener("abort",()=>{o.abort()}),e.signal=a}return n&&n.extraBody!==null&&e7(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await yS(s),new i0(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async s=>(await yS(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var n;return Ba(this,arguments,function*(){const s=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let a="";for(;;){const{done:d,value:u}=yield pt(s.read());if(d){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const f=o.decode(u,{stream:!0});try{const g=JSON.parse(f);if("error"in g){const x=JSON.parse(JSON.stringify(g.error)),w=x.status,C=x.code,E=`got status: ${w}. ${JSON.stringify(g)}`;if(C>=400&&C<600)throw new pf({message:E,status:C})}}catch(g){if(g.name==="ApiError")throw g}a+=f;let p=a.match(xS);for(;p;){const g=p[1];try{const x=new Response(g,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield pt(new i0(x)),a=a.slice(p[0].length),p=a.match(xS)}catch(x){throw new Error(`exception parsing stream chunk ${g}. ${x}`)}}}}finally{s.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},n=Y8+" "+this.clientOptions.userAgentExtra;return e[K8]=n,e[u0]=n,e[G8]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[s,o]of Object.entries(e.headers))r.append(s,o);e.timeout&&e.timeout>0&&r.append(J8,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const s={};n!=null&&(s.mimeType=n.mimeType,s.name=n.name,s.displayName=n.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const o=this.clientOptions.uploader,a=await o.stat(e);s.sizeBytes=String(a.size);const d=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:a.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=d;const u={file:s},f=this.getFileName(e),p=de("upload/v1beta/files",u._url),g=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,f,u,n==null?void 0:n.httpOptions);return o.upload(e,g,this)}async uploadFileToFileSearchStore(e,n,r){var s;const o=this.clientOptions.uploader,a=await o.stat(n),d=String(a.size),u=(s=r==null?void 0:r.mimeType)!==null&&s!==void 0?s:a.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(n),g={};r!=null&&r.customMetadata&&(g.customMetadata=r.customMetadata),r!=null&&r.chunkingConfig&&(g.chunkingConfig=r.chunkingConfig);const x=await this.fetchUploadUrl(f,d,u,p,g,r==null?void 0:r.httpOptions);return o.uploadToFileSearchStore(n,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,s,o,a){var d;let u={};a?u=a:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},s?{"X-Goog-Upload-File-Name":s}:{})};const f=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:u});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(d=f==null?void 0:f.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function yS(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const s=JSON.stringify(r);throw n>=400&&n<600?new pf({message:s,status:n}):new Error(s)}}function e7(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,a){const d=Object.assign({},o);for(const u in a)if(Object.prototype.hasOwnProperty.call(a,u)){const f=a[u],p=d[u];f&&typeof f=="object"&&!Array.isArray(f)&&p&&typeof p=="object"&&!Array.isArray(p)?d[u]=r(p,f):(p&&f&&typeof p!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof p}, New type: ${typeof f}. Overwriting.`),d[u]=f)}return d}const s=r(n,e);t.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const t7="mcp_used/unknown";let n7=!1;function nk(t){for(const e of t)if(r7(e)||typeof e=="object"&&"inputSchema"in e)return!0;return n7}function rk(t){var e;const n=(e=t[u0])!==null&&e!==void 0?e:"";t[u0]=(n+` ${t7}`).trimStart()}function r7(t){return t!==null&&typeof t=="object"&&t instanceof Ab}function s7(t,e=100){return Ba(this,arguments,function*(){let r,s=0;for(;s<e;){const o=yield pt(t.listTools({cursor:r}));for(const a of o.tools)yield yield pt(a),s++;if(!o.nextCursor)break;r=o.nextCursor}})}class Ab{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Ab(e,n)}async initialize(){var e,n,r,s;if(this.mcpTools.length>0)return;const o={},a=[];for(const p of this.mcpClients)try{for(var d=!0,u=(n=void 0,Tc(s7(p))),f;f=await u.next(),e=f.done,!e;d=!0){s=f.value,d=!1;const g=s;a.push(g);const x=g.name;if(o[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);o[x]=p}}catch(g){n={error:g}}finally{try{!d&&!e&&(r=u.return)&&await r.call(u)}finally{if(n)throw n.error}}this.mcpTools=a,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),c6(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[r.name];let o;this.config.timeout&&(o={timeout:this.config.timeout});const a=await s.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:a.isError?{error:a}:a}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function o7(t,e,n){const r=new t6;let s;n.data instanceof Blob?s=JSON.parse(await n.data.text()):s=JSON.parse(n.data),Object.assign(r,s),e(r)}class i7{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),a=c7(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${d}`;let f=()=>{};const p=new Promise(j=>{f=j}),g=e.callbacks,x=function(){f({})},w=this.apiClient,C={onopen:x,onmessage:j=>{o7(w,g.onmessage,j)},onerror:(n=g==null?void 0:g.onerror)!==null&&n!==void 0?n:function(j){},onclose:(r=g==null?void 0:g.onclose)!==null&&r!==void 0?r:function(j){}},E=this.webSocketFactory.create(u,l7(a),C);E.connect(),await p;const _={setup:{model:We(this.apiClient,e.model)}};return E.send(JSON.stringify(_)),new a7(E,this.apiClient)}}class a7{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=QO(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=XO(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Ra.PLAY)}pause(){this.sendPlaybackControl(Ra.PAUSE)}stop(){this.sendPlaybackControl(Ra.STOP)}resetContext(){this.sendPlaybackControl(Ra.RESET_CONTEXT)}close(){this.conn.close()}}function l7(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function c7(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function u7(t,e,n){const r=new e6;let s;n.data instanceof Blob?s=await n.data.text():n.data instanceof ArrayBuffer?s=new TextDecoder().decode(n.data):s=n.data;const o=JSON.parse(s);if(t.isVertexAI()){const a=tL(o);Object.assign(r,a)}else Object.assign(r,o);e(r)}class h7{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new i7(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,s,o,a,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let p;const g=this.apiClient.getHeaders();e.config&&e.config.tools&&nk(e.config.tools)&&rk(g);const x=g7(g);if(this.apiClient.isVertexAI())p=`${u}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,p);else{const G=this.apiClient.getApiKey();let le="BidiGenerateContent",Ne="key";G!=null&&G.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),le="BidiGenerateContentConstrained",Ne="access_token"),p=`${u}/ws/google.ai.generativelanguage.${f}.GenerativeService.${le}?${Ne}=${G}`}let w=()=>{};const C=new Promise(G=>{w=G}),E=e.callbacks,N=function(){var G;(G=E==null?void 0:E.onopen)===null||G===void 0||G.call(E),w({})},k=this.apiClient,_={onopen:N,onmessage:G=>{u7(k,E.onmessage,G)},onerror:(n=E==null?void 0:E.onerror)!==null&&n!==void 0?n:function(G){},onclose:(r=E==null?void 0:E.onclose)!==null&&r!==void 0?r:function(G){}},j=this.webSocketFactory.create(p,m7(x),_);j.connect(),await C;let P=We(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&P.startsWith("publishers/")){const G=this.apiClient.getProject(),le=this.apiClient.getLocation();P=`projects/${G}/locations/${le}/`+P}let z={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Bh.AUDIO]}:e.config.responseModalities=[Bh.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const O=(d=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&d!==void 0?d:[],D=[];for(const G of O)if(this.isCallableTool(G)){const le=G;D.push(await le.tool())}else D.push(G);D.length>0&&(e.config.tools=D);const te={model:P,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?z=YO(this.apiClient,te):z=WO(this.apiClient,te),delete z.config,j.send(JSON.stringify(z)),new p7(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const f7={turnComplete:!0};class p7{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=fr(n.turns),e.isVertexAI()||(r=r.map(s=>mf(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(d7)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},f7),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:eL(e)}:n={realtimeInput:ZO(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function m7(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function g7(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS=10;function wS(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const a of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(Ua(a)){s=!0;break}if(!s)return!0;const o=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Ua(t){return"callTool"in t&&typeof t.callTool=="function"}function b7(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(s=>Ua(s)))!==null&&r!==void 0?r:!1}function SS(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,s)=>{if(Ua(r))return;const o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(s)}),n}function CS(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x7 extends js{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,s,o,a,d;const u=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!b7(n)||wS(n.config))return await this.generateContentInternal(u);const f=SS(n);if(f.length>0){const E=f.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${E}.`)}let p,g;const x=fr(u.contents),w=(o=(s=(r=u.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&o!==void 0?o:vS;let C=0;for(;C<w&&(p=await this.generateContentInternal(u),!(!p.functionCalls||p.functionCalls.length===0));){const E=p.candidates[0].content,N=[];for(const k of(d=(a=n.config)===null||a===void 0?void 0:a.tools)!==null&&d!==void 0?d:[])if(Ua(k)){const j=await k.callTool(p.functionCalls);N.push(...j)}C++,g={role:"user",parts:N},u.contents=fr(u.contents),u.contents.push(E),u.contents.push(g),CS(u.config)&&(x.push(E),x.push(g))}return CS(u.config)&&(p.automaticFunctionCallingHistory=x),p},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),wS(n.config)){const s=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(s)}const r=SS(n);if(r.length>0){const s=r.map(o=>`tools[${o}]`).join(", ");throw new Error(`Incompatible tools found at ${s}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var s;let o;const a=[];if(r!=null&&r.generatedImages)for(const u of r.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((s=u==null?void 0:u.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?o=u==null?void 0:u.safetyAttributes:a.push(u);let d;return o?d={generatedImages:a,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:a,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async n=>{var r;const a={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((r=a.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new Bi(ks.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(a),a)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const s={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(s)},this.generateVideos=async n=>{var r,s,o,a,d,u;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((s=n.video)===null||s===void 0)&&s.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((a=(o=n.source)===null||o===void 0?void 0:o.video)===null||a===void 0)&&a.uri&&(!((u=(d=n.source)===null||d===void 0?void 0:d.video)===null||u===void 0)&&u.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,s;const o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;const a=await Promise.all(o.map(async u=>Ua(u)?await u.tool():u)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(d.config.tools=a,e.config&&e.config.tools&&nk(e.config.tools)){const u=(s=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&s!==void 0?s:{};let f=Object.assign({},u);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),rk(f),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return d}async initAfcToolsMap(e){var n,r,s;const o=new Map;for(const a of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Ua(a)){const d=a,u=await d.tool();for(const f of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!f.name)throw new Error("Function declaration name is required.");if(o.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);o.set(f.name,d)}}return o}async processAfcStream(e){var n,r,s;const o=(s=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&s!==void 0?s:vS;let a=!1,d=0;const u=await this.initAfcToolsMap(e);return(function(f,p,g){var x,w;return Ba(this,arguments,function*(){for(var C,E,N,k;d<o;){a&&(d++,a=!1);const z=yield pt(f.processParamsMaybeAddMcpUsage(g)),O=yield pt(f.generateContentStreamInternal(z)),D=[],te=[];try{for(var _=!0,j=(E=void 0,Tc(O)),P;P=yield pt(j.next()),C=P.done,!C;_=!0){k=P.value,_=!1;const G=k;if(yield yield pt(G),G.candidates&&(!((x=G.candidates[0])===null||x===void 0)&&x.content)){te.push(G.candidates[0].content);for(const le of(w=G.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(d<o&&le.functionCall){if(!le.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(le.functionCall.name)){const Ne=yield pt(p.get(le.functionCall.name).callTool([le.functionCall]));D.push(...Ne)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${le.functionCall.name}`)}}}}catch(G){E={error:G}}finally{try{!_&&!C&&(N=j.return)&&(yield pt(N.call(j)))}finally{if(E)throw E.error}}if(D.length>0){a=!0;const G=new lc;G.candidates=[{content:{role:"user",parts:D}}],yield yield pt(G);const le=[];le.push(...te),le.push({role:"user",parts:D});const Ne=fr(g.contents).concat(le);g.contents=Ne}else break}})})(this,u,e)}async generateContentInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=mS(this.apiClient,e);return d=de("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=bS(p),x=new lc;return Object.assign(x,g),x})}else{const f=pS(this.apiClient,e);return d=de("{model}:generateContent",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=gS(p),x=new lc;return Object.assign(x,g),x})}}async generateContentStreamInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=mS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),a.then(function(g){return Ba(this,arguments,function*(){var x,w,C,E;try{for(var N=!0,k=Tc(g),_;_=yield pt(k.next()),x=_.done,!x;N=!0){E=_.value,N=!1;const j=E,P=bS(yield pt(j.json()));P.sdkHttpResponse={headers:j.headers};const z=new lc;Object.assign(z,P),yield yield pt(z)}}catch(j){w={error:j}}finally{try{!N&&!x&&(C=k.return)&&(yield pt(C.call(k)))}finally{if(w)throw w.error}}})})}else{const f=pS(this.apiClient,e);return d=de("{model}:streamGenerateContent?alt=sse",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.requestStream({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(g){return Ba(this,arguments,function*(){var x,w,C,E;try{for(var N=!0,k=Tc(g),_;_=yield pt(k.next()),x=_.done,!x;N=!0){E=_.value,N=!1;const j=E,P=gS(yield pt(j.json()));P.sdkHttpResponse={headers:j.headers};const z=new lc;Object.assign(z,P),yield yield pt(z)}}catch(j){w={error:j}}finally{try{!N&&!x&&(C=k.return)&&(yield pt(C.call(k)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=ML(this.apiClient,e);return d=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=IL(p),x=new Q2;return Object.assign(x,g),x})}else{const f=jL(this.apiClient,e);return d=de("{model}:batchEmbedContents",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=RL(p),x=new Q2;return Object.assign(x,g),x})}}async generateImagesInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=HL(this.apiClient,e);return d=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=FL(p),x=new Z2;return Object.assign(x,g),x})}else{const f=qL(this.apiClient,e);return d=de("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=VL(p),x=new Z2;return Object.assign(x,g),x})}}async editImageInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=TL(this.apiClient,e);return o=de("{model}:predict",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=kL(u),p=new VP;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=U8(this.apiClient,e);return o=de("{model}:predict",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=z8(u),p=new FP;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=w8(this.apiClient,e);return o=de("{model}:predict",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=S8(u),p=new $P;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=A8(this.apiClient,e);return o=de("{model}:predict",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=_8(u),p=new GP;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=a8(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>d0(p))}else{const f=i8(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>c0(p))}}async listInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=p8(this.apiClient,e);return d=de("{models_url}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=g8(p),x=new eS;return Object.assign(x,g),x})}else{const f=f8(this.apiClient,e);return d=de("{models_url}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=m8(p),x=new eS;return Object.assign(x,g),x})}}async update(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=L8(this.apiClient,e);return d=de("{model}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>d0(p))}else{const f=O8(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>c0(p))}}async delete(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=SL(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=NL(p),x=new tS;return Object.assign(x,g),x})}else{const f=wL(this.apiClient,e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=CL(p),x=new tS;return Object.assign(x,g),x})}}async countTokens(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=xL(this.apiClient,e);return d=de("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=vL(p),x=new nS;return Object.assign(x,g),x})}else{const f=bL(this.apiClient,e);return d=de("{model}:countTokens",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=yL(p),x=new nS;return Object.assign(x,g),x})}}async computeTokens(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=dL(this.apiClient,e);return o=de("{model}:computeTokens",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const f=uL(u),p=new JP;return Object.assign(p,f),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=YL(this.apiClient,e);return d=de("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a.then(p=>{const g=KL(p),x=new Uh;return Object.assign(x,g),x})}else{const f=WL(this.apiClient,e);return d=de("{model}:predictLongRunning",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a.then(p=>{const g=JL(p),x=new Uh;return Object.assign(x,g),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y7 extends js{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=n.name.split("/operations/")[0];let o;r&&"httpOptions"in r&&(o=r.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:s,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:a,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=LP(e);return d=de("{operationName}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json()),a}else{const f=OP(e);return d=de("{operationName}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json()),a}}async fetchPredictVideosOperationInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=_P(e);return o=de("{resourceName}:fetchPredictOperation",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function v7(t){const e={},n=b(t,["data"]);if(n!=null&&y(e,["data"],n),b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function w7(t){const e={},n=b(t,["parts"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>_7(o))),y(e,["parts"],s)}const r=b(t,["role"]);return r!=null&&y(e,["role"],r),e}function S7(t,e,n){const r={},s=b(e,["expireTime"]);n!==void 0&&s!=null&&y(n,["expireTime"],s);const o=b(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&y(n,["newSessionExpireTime"],o);const a=b(e,["uses"]);n!==void 0&&a!=null&&y(n,["uses"],a);const d=b(e,["liveConnectConstraints"]);n!==void 0&&d!=null&&y(n,["bidiGenerateContentSetup"],A7(t,d));const u=b(e,["lockAdditionalFields"]);return n!==void 0&&u!=null&&y(n,["fieldMask"],u),r}function C7(t,e){const n={},r=b(e,["config"]);return r!=null&&y(n,["config"],S7(t,r,n)),n}function N7(t){const e={};if(b(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=b(t,["fileUri"]);n!=null&&y(e,["fileUri"],n);const r=b(t,["mimeType"]);return r!=null&&y(e,["mimeType"],r),e}function E7(t){const e={};if(b(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=b(t,["enableWidget"]);return n!=null&&y(e,["enableWidget"],n),e}function T7(t){const e={};if(b(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(b(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const n=b(t,["timeRangeFilter"]);return n!=null&&y(e,["timeRangeFilter"],n),e}function k7(t,e){const n={},r=b(t,["generationConfig"]);e!==void 0&&r!=null&&y(e,["setup","generationConfig"],r);const s=b(t,["responseModalities"]);e!==void 0&&s!=null&&y(e,["setup","generationConfig","responseModalities"],s);const o=b(t,["temperature"]);e!==void 0&&o!=null&&y(e,["setup","generationConfig","temperature"],o);const a=b(t,["topP"]);e!==void 0&&a!=null&&y(e,["setup","generationConfig","topP"],a);const d=b(t,["topK"]);e!==void 0&&d!=null&&y(e,["setup","generationConfig","topK"],d);const u=b(t,["maxOutputTokens"]);e!==void 0&&u!=null&&y(e,["setup","generationConfig","maxOutputTokens"],u);const f=b(t,["mediaResolution"]);e!==void 0&&f!=null&&y(e,["setup","generationConfig","mediaResolution"],f);const p=b(t,["seed"]);e!==void 0&&p!=null&&y(e,["setup","generationConfig","seed"],p);const g=b(t,["speechConfig"]);e!==void 0&&g!=null&&y(e,["setup","generationConfig","speechConfig"],kb(g));const x=b(t,["thinkingConfig"]);e!==void 0&&x!=null&&y(e,["setup","generationConfig","thinkingConfig"],x);const w=b(t,["enableAffectiveDialog"]);e!==void 0&&w!=null&&y(e,["setup","generationConfig","enableAffectiveDialog"],w);const C=b(t,["systemInstruction"]);e!==void 0&&C!=null&&y(e,["setup","systemInstruction"],w7(bn(C)));const E=b(t,["tools"]);if(e!==void 0&&E!=null){let O=tl(E);Array.isArray(O)&&(O=O.map(D=>M7(el(D)))),y(e,["setup","tools"],O)}const N=b(t,["sessionResumption"]);e!==void 0&&N!=null&&y(e,["setup","sessionResumption"],j7(N));const k=b(t,["inputAudioTranscription"]);e!==void 0&&k!=null&&y(e,["setup","inputAudioTranscription"],k);const _=b(t,["outputAudioTranscription"]);e!==void 0&&_!=null&&y(e,["setup","outputAudioTranscription"],_);const j=b(t,["realtimeInputConfig"]);e!==void 0&&j!=null&&y(e,["setup","realtimeInputConfig"],j);const P=b(t,["contextWindowCompression"]);e!==void 0&&P!=null&&y(e,["setup","contextWindowCompression"],P);const z=b(t,["proactivity"]);return e!==void 0&&z!=null&&y(e,["setup","proactivity"],z),n}function A7(t,e){const n={},r=b(e,["model"]);r!=null&&y(n,["setup","model"],We(t,r));const s=b(e,["config"]);return s!=null&&y(n,["config"],k7(s,n)),n}function _7(t){const e={},n=b(t,["functionCall"]);n!=null&&y(e,["functionCall"],n);const r=b(t,["codeExecutionResult"]);r!=null&&y(e,["codeExecutionResult"],r);const s=b(t,["executableCode"]);s!=null&&y(e,["executableCode"],s);const o=b(t,["fileData"]);o!=null&&y(e,["fileData"],N7(o));const a=b(t,["functionResponse"]);a!=null&&y(e,["functionResponse"],a);const d=b(t,["inlineData"]);d!=null&&y(e,["inlineData"],v7(d));const u=b(t,["text"]);u!=null&&y(e,["text"],u);const f=b(t,["thought"]);f!=null&&y(e,["thought"],f);const p=b(t,["thoughtSignature"]);p!=null&&y(e,["thoughtSignature"],p);const g=b(t,["videoMetadata"]);return g!=null&&y(e,["videoMetadata"],g),e}function j7(t){const e={},n=b(t,["handle"]);if(n!=null&&y(e,["handle"],n),b(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function M7(t){const e={},n=b(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(g=>g)),y(e,["functionDeclarations"],p)}if(b(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=b(t,["googleSearchRetrieval"]);r!=null&&y(e,["googleSearchRetrieval"],r);const s=b(t,["computerUse"]);s!=null&&y(e,["computerUse"],s);const o=b(t,["fileSearch"]);o!=null&&y(e,["fileSearch"],o);const a=b(t,["codeExecution"]);if(a!=null&&y(e,["codeExecution"],a),b(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=b(t,["googleMaps"]);d!=null&&y(e,["googleMaps"],E7(d));const u=b(t,["googleSearch"]);u!=null&&y(e,["googleSearch"],T7(u));const f=b(t,["urlContext"]);return f!=null&&y(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R7(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const s=Object.keys(r).map(o=>`${n}.${o}`);e.push(...s)}else e.push(n)}return e.join(",")}function I7(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const s=t.fieldMask;if(n){const o=R7(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)o?t.fieldMask=o:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];s.length>0&&(d=s.map(f=>a.includes(f)?`generationConfig.${f}`:f));const u=[];o&&u.push(o),d.length>0&&u.push(...d),u.length>0?t.fieldMask=u.join(","):delete t.fieldMask}else delete t.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?t.fieldMask=s.join(","):delete t.fieldMask;return t}class D7 extends js{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=C7(this.apiClient,e);o=de("auth_tokens",d._url),a=d._query,delete d.config,delete d._url,delete d._query;const u=I7(d,e.config);return s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),s.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function P7(t,e){const n={},r=b(t,["displayName"]);return e!==void 0&&r!=null&&y(e,["displayName"],r),n}function O7(t){const e={},n=b(t,["config"]);return n!=null&&P7(n,e),e}function L7(t,e){const n={},r=b(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function B7(t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=b(t,["config"]);return r!=null&&L7(r,e),e}function U7(t){const e={},n=b(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function z7(t,e){const n={},r=b(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["customMetadata"],o)}const s=b(t,["chunkingConfig"]);return e!==void 0&&s!=null&&y(e,["chunkingConfig"],s),n}function q7(t){const e={},n=b(t,["name"]);n!=null&&y(e,["name"],n);const r=b(t,["metadata"]);r!=null&&y(e,["metadata"],r);const s=b(t,["done"]);s!=null&&y(e,["done"],s);const o=b(t,["error"]);o!=null&&y(e,["error"],o);const a=b(t,["response"]);return a!=null&&y(e,["response"],V7(a)),e}function H7(t){const e={},n=b(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=b(t,["fileName"]);r!=null&&y(e,["fileName"],r);const s=b(t,["config"]);return s!=null&&z7(s,e),e}function V7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["parent"]);r!=null&&y(e,["parent"],r);const s=b(t,["documentName"]);return s!=null&&y(e,["documentName"],s),e}function F7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function $7(t){const e={},n=b(t,["config"]);return n!=null&&F7(n,e),e}function G7(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["fileSearchStores"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["fileSearchStores"],o)}return e}function J7(t,e){const n={},r=b(t,["mimeType"]);e!==void 0&&r!=null&&y(e,["mimeType"],r);const s=b(t,["displayName"]);e!==void 0&&s!=null&&y(e,["displayName"],s);const o=b(t,["customMetadata"]);if(e!==void 0&&o!=null){let d=o;Array.isArray(d)&&(d=d.map(u=>u)),y(e,["customMetadata"],d)}const a=b(t,["chunkingConfig"]);return e!==void 0&&a!=null&&y(e,["chunkingConfig"],a),n}function K7(t){const e={},n=b(t,["fileSearchStoreName"]);n!=null&&y(e,["_url","file_search_store_name"],n);const r=b(t,["config"]);return r!=null&&J7(r,e),e}function W7(t){const e={},n=b(t,["sdkHttpResponse"]);return n!=null&&y(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y7(t,e){const n={},r=b(t,["force"]);return e!==void 0&&r!=null&&y(e,["_query","force"],r),n}function X7(t){const e={},n=b(t,["name"]);n!=null&&y(e,["_url","name"],n);const r=b(t,["config"]);return r!=null&&Y7(r,e),e}function Q7(t){const e={},n=b(t,["name"]);return n!=null&&y(e,["_url","name"],n),e}function Z7(t,e){const n={},r=b(t,["pageSize"]);e!==void 0&&r!=null&&y(e,["_query","pageSize"],r);const s=b(t,["pageToken"]);return e!==void 0&&s!=null&&y(e,["_query","pageToken"],s),n}function eB(t){const e={},n=b(t,["parent"]);n!=null&&y(e,["_url","parent"],n);const r=b(t,["config"]);return r!=null&&Z7(r,e),e}function tB(t){const e={},n=b(t,["sdkHttpResponse"]);n!=null&&y(e,["sdkHttpResponse"],n);const r=b(t,["nextPageToken"]);r!=null&&y(e,["nextPageToken"],r);const s=b(t,["documents"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(a=>a)),y(e,["documents"],o)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nB extends js{constructor(e){super(),this.apiClient=e,this.list=async n=>new Bi(ks.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=Q7(e);return o=de("{name}",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=X7(e);s=de("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=eB(e);return o=de("{parent}/documents",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=tB(u),p=new KP;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rB extends js{constructor(e,n=new nB(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Bi(ks.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=O7(e);return o=de("fileSearchStores",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async get(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=U7(e);return o=de("{name}",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var n,r;let s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const a=B7(e);s=de("{name}",a._url),o=a._query,delete a._url,delete a._query,await this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$7(e);return o=de("fileSearchStores",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=G7(u),p=new WP;return Object.assign(p,f),p})}}async uploadToFileSearchStoreInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=K7(e);return o=de("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=W7(u),p=new YP;return Object.assign(p,f),p})}}async importFile(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H7(e);return o=de("{file_search_store_name}:importFile",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json()),s.then(u=>{const f=q7(u),p=new Sb;return Object.assign(p,f),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sB(t,e){const n={},r=b(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function oB(t,e){const n={},r=b(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function iB(t,e,n){const r={};if(b(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=b(t,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&y(e,["displayName"],s),b(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const o=b(t,["epochCount"]);e!==void 0&&o!=null&&y(e,["tuningTask","hyperparameters","epochCount"],o);const a=b(t,["learningRateMultiplier"]);if(a!=null&&y(r,["tuningTask","hyperparameters","learningRateMultiplier"],a),b(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(b(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(b(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=b(t,["batchSize"]);e!==void 0&&d!=null&&y(e,["tuningTask","hyperparameters","batchSize"],d);const u=b(t,["learningRate"]);if(e!==void 0&&u!=null&&y(e,["tuningTask","hyperparameters","learningRate"],u),b(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(b(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function aB(t,e,n){const r={};let s=b(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=b(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec"],NS(w))}else if(s==="PREFERENCE_TUNING"){const w=b(t,["validationDataset"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec"],NS(w))}const o=b(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&y(e,["tunedModelDisplayName"],o);const a=b(t,["description"]);e!==void 0&&a!=null&&y(e,["description"],a);let d=b(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=b(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(d==="PREFERENCE_TUNING"){const w=b(t,["epochCount"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let u=b(n,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=b(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(u==="PREFERENCE_TUNING"){const w=b(t,["learningRateMultiplier"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let f=b(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=b(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(f==="PREFERENCE_TUNING"){const w=b(t,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let p=b(n,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=b(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(p==="PREFERENCE_TUNING"){const w=b(t,["adapterSize"]);e!==void 0&&w!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(b(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(b(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const g=b(t,["labels"]);e!==void 0&&g!=null&&y(e,["labels"],g);const x=b(t,["beta"]);return e!==void 0&&x!=null&&y(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),r}function lB(t,e){const n={},r=b(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const s=b(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const o=b(t,["trainingDataset"]);o!=null&&yB(o);const a=b(t,["config"]);return a!=null&&iB(a,n),n}function cB(t,e){const n={},r=b(t,["baseModel"]);r!=null&&y(n,["baseModel"],r);const s=b(t,["preTunedModel"]);s!=null&&y(n,["preTunedModel"],s);const o=b(t,["trainingDataset"]);o!=null&&vB(o,n,e);const a=b(t,["config"]);return a!=null&&aB(a,n,e),n}function dB(t,e){const n={},r=b(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function uB(t,e){const n={},r=b(t,["name"]);return r!=null&&y(n,["_url","name"],r),n}function hB(t,e,n){const r={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const a=b(t,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),r}function fB(t,e,n){const r={},s=b(t,["pageSize"]);e!==void 0&&s!=null&&y(e,["_query","pageSize"],s);const o=b(t,["pageToken"]);e!==void 0&&o!=null&&y(e,["_query","pageToken"],o);const a=b(t,["filter"]);return e!==void 0&&a!=null&&y(e,["_query","filter"],a),r}function pB(t,e){const n={},r=b(t,["config"]);return r!=null&&hB(r,n),n}function mB(t,e){const n={},r=b(t,["config"]);return r!=null&&fB(r,n),n}function gB(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=b(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const o=b(t,["tunedModels"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>sk(d))),y(n,["tuningJobs"],a)}return n}function bB(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=b(t,["nextPageToken"]);s!=null&&y(n,["nextPageToken"],s);const o=b(t,["tuningJobs"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(d=>h0(d))),y(n,["tuningJobs"],a)}return n}function xB(t,e){const n={},r=b(t,["name"]);r!=null&&y(n,["model"],r);const s=b(t,["name"]);return s!=null&&y(n,["endpoint"],s),n}function yB(t,e){const n={};if(b(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(b(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=b(t,["examples"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),y(n,["examples","examples"],s)}return n}function vB(t,e,n){const r={};let s=b(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const a=b(t,["gcsUri"]);e!==void 0&&a!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(s==="PREFERENCE_TUNING"){const a=b(t,["gcsUri"]);e!==void 0&&a!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}let o=b(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){const a=b(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&y(e,["supervisedTuningSpec","trainingDatasetUri"],a)}else if(o==="PREFERENCE_TUNING"){const a=b(t,["vertexDatasetResource"]);e!==void 0&&a!=null&&y(e,["preferenceOptimizationSpec","trainingDatasetUri"],a)}if(b(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function sk(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=b(t,["name"]);s!=null&&y(n,["name"],s);const o=b(t,["state"]);o!=null&&y(n,["state"],UT(o));const a=b(t,["createTime"]);a!=null&&y(n,["createTime"],a);const d=b(t,["tuningTask","startTime"]);d!=null&&y(n,["startTime"],d);const u=b(t,["tuningTask","completeTime"]);u!=null&&y(n,["endTime"],u);const f=b(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=b(t,["description"]);p!=null&&y(n,["description"],p);const g=b(t,["baseModel"]);g!=null&&y(n,["baseModel"],g);const x=b(t,["_self"]);return x!=null&&y(n,["tunedModel"],xB(x)),n}function h0(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=b(t,["name"]);s!=null&&y(n,["name"],s);const o=b(t,["state"]);o!=null&&y(n,["state"],UT(o));const a=b(t,["createTime"]);a!=null&&y(n,["createTime"],a);const d=b(t,["startTime"]);d!=null&&y(n,["startTime"],d);const u=b(t,["endTime"]);u!=null&&y(n,["endTime"],u);const f=b(t,["updateTime"]);f!=null&&y(n,["updateTime"],f);const p=b(t,["error"]);p!=null&&y(n,["error"],p);const g=b(t,["description"]);g!=null&&y(n,["description"],g);const x=b(t,["baseModel"]);x!=null&&y(n,["baseModel"],x);const w=b(t,["tunedModel"]);w!=null&&y(n,["tunedModel"],w);const C=b(t,["preTunedModel"]);C!=null&&y(n,["preTunedModel"],C);const E=b(t,["supervisedTuningSpec"]);E!=null&&y(n,["supervisedTuningSpec"],E);const N=b(t,["preferenceOptimizationSpec"]);N!=null&&y(n,["preferenceOptimizationSpec"],N);const k=b(t,["tuningDataStats"]);k!=null&&y(n,["tuningDataStats"],k);const _=b(t,["encryptionSpec"]);_!=null&&y(n,["encryptionSpec"],_);const j=b(t,["partnerModelTuningSpec"]);j!=null&&y(n,["partnerModelTuningSpec"],j);const P=b(t,["customBaseModel"]);P!=null&&y(n,["customBaseModel"],P);const z=b(t,["experiment"]);z!=null&&y(n,["experiment"],z);const O=b(t,["labels"]);O!=null&&y(n,["labels"],O);const D=b(t,["outputUri"]);D!=null&&y(n,["outputUri"],D);const te=b(t,["pipelineJob"]);te!=null&&y(n,["pipelineJob"],te);const G=b(t,["serviceAccount"]);G!=null&&y(n,["serviceAccount"],G);const le=b(t,["tunedModelDisplayName"]);le!=null&&y(n,["tunedModelDisplayName"],le);const Ne=b(t,["veoTuningSpec"]);return Ne!=null&&y(n,["veoTuningSpec"],Ne),n}function wB(t,e){const n={},r=b(t,["sdkHttpResponse"]);r!=null&&y(n,["sdkHttpResponse"],r);const s=b(t,["name"]);s!=null&&y(n,["name"],s);const o=b(t,["metadata"]);o!=null&&y(n,["metadata"],o);const a=b(t,["done"]);a!=null&&y(n,["done"],a);const d=b(t,["error"]);return d!=null&&y(n,["error"],d),n}function NS(t,e){const n={},r=b(t,["gcsUri"]);r!=null&&y(n,["validationDatasetUri"],r);const s=b(t,["vertexDatasetResource"]);return s!=null&&y(n,["validationDatasetUri"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SB extends js{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Bi(ks.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const s={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(s.checkpointId=n.config.preTunedModelCheckpointId);const o=Object.assign(Object.assign({},n),{preTunedModel:s});return o.baseModel=void 0,await this.tuneInternal(o)}else{const s=Object.assign({},n);return await this.tuneInternal(s)}else{const s=Object.assign({},n),o=await this.tuneMldevInternal(s);let a="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?a=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(a=o.name.split("/operations/")[0]),{name:a,state:o0.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=uB(e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>h0(p))}else{const f=dB(e);return d=de("{name}",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>sk(p))}}async listInternal(e){var n,r,s,o;let a,d="",u={};if(this.apiClient.isVertexAI()){const f=mB(e);return d=de("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=bB(p),x=new rS;return Object.assign(x,g),x})}else{const f=pB(e);return d=de("tunedModels",f._url),u=f._query,delete f._url,delete f._query,a=this.apiClient.request({path:d,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(p=>p.json().then(g=>{const x=g;return x.sdkHttpResponse={headers:p.headers},x})),a.then(p=>{const g=gB(p),x=new rS;return Object.assign(x,g),x})}}async cancel(e){var n,r,s,o;let a="",d={};if(this.apiClient.isVertexAI()){const u=oB(e);a=de("{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const u=sB(e);a=de("{name}:cancel",u._url),d=u._query,delete u._url,delete u._query,await this.apiClient.request({path:a,queryParams:d,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async tuneInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI()){const d=cB(e,e);return o=de("tuningJobs",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>h0(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let s,o="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=lB(e);return o=de("tunedModels",d._url),a=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:o,queryParams:a,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(u=>u.json().then(f=>{const p=f;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>wB(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CB{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const NB=1024*1024*8,EB=3,TB=1e3,kB=2,qh="x-goog-upload-status";async function AB(t,e,n){var r;const s=await ok(t,e,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[qh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function _B(t,e,n){var r;const s=await ok(t,e,n),o=await(s==null?void 0:s.json());if(((r=s==null?void 0:s.headers)===null||r===void 0?void 0:r[qh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const a=IT(o),d=new Cb;return Object.assign(d,a),d}async function ok(t,e,n){var r,s;let o=0,a=0,d=new i0(new Response),u="upload";for(o=t.size;a<o;){const f=Math.min(NB,o-a),p=t.slice(a,a+f);a+f>=o&&(u+=", finalize");let g=0,x=TB;for(;g<EB&&(d=await n.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(a),"Content-Length":String(f)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[qh]));)g++,await MB(x),x=x*kB;if(a+=f,((s=d==null?void 0:d.headers)===null||s===void 0?void 0:s[qh])!=="active")break;if(o<=a)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function jB(t){return{size:t.size,type:t.type}}function MB(t){return new Promise(e=>setTimeout(e,t))}class RB{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await AB(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await _B(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await jB(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class IB{create(e,n,r){return new DB(e,n,r)}}class DB{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ES="x-goog-api-key";class PB{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(ES)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(ES,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OB="gl-node/";class Wa{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=kP(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion;const s=new PB(this.apiKey);this.apiClient=new Z8({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:OB+"web",uploader:new RB,downloader:new CB}),this.models=new x7(this.apiClient),this.live=new h7(this.apiClient,s,new IB),this.batches=new Q6(this.apiClient),this.chats=new jO(this.models,this.apiClient),this.caches=new kO(this.apiClient),this.files=new zO(this.apiClient),this.operations=new y7(this.apiClient),this.authTokens=new D7(this.apiClient),this.tunings=new SB(this.apiClient),this.fileSearchStores=new rB(this.apiClient)}}const _r=t=>l.jsxs("svg",{...t,className:`animate-spin ${t.className||""}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[l.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),l.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),hi=({title:t,children:e,defaultOpen:n=!1})=>{const[r,s]=R.useState(n);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsxs("button",{type:"button",onClick:()=>s(!r),className:"w-full flex justify-between items-center p-4 text-left font-semibold text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("span",{children:t}),l.jsx("span",{className:`transform transition-transform duration-200 ${r?"rotate-180":""}`,children:""})]}),r&&l.jsx("div",{className:"p-6 border-t border-[rgb(var(--color-brand-gray-light))]",children:e})]})},TS=({product:t,collections:e,onSave:n,onCancel:r})=>{var q,W,be,ve,Pe;const s=!!(t!=null&&t.id)||(t==null?void 0:t.id)===""&&!!t.name,[o,a]=R.useState({name:"",shortDescription:"",description:"",images:[],price:0,compareAtPrice:void 0,costPerItem:void 0,status:"Ativo",sku:"",barcode:"",trackQuantity:!0,inventory:10,continueSelling:!1,requiresShipping:!0,chargeTax:!0,type:"Fsico",collectionId:((q=e[0])==null?void 0:q.id)||null,seoTitle:"",seoDescription:"",urlHandle:"",weight:0,weightUnit:"kg",supplier:"",options:[],variants:[],...t}),[d,u]=R.useState(!1),[f,p]=R.useState(!1),g=R.useRef(null),[x,w]=R.useState({}),C=R.useMemo(()=>(o.options||[]).length>0,[o.options]);R.useEffect(()=>{var Me;if(!C){(Me=o.variants)!=null&&Me.length&&a(Re=>({...Re,variants:[]}));return}const M=o.variants||[],B=o.options||[];if(B.length===0||B.every(Re=>Re.values.length===0)){M.length>0&&a(Re=>({...Re,variants:[]}));return}const K=B.map(Re=>Re.values.length>0?Re.values:[""]),Ae=((...Re)=>Re.reduce((_e,Zt)=>_e.flatMap(Ct=>Zt.map(bt=>[...Ct,bt])),[[]]))(...K).map((Re,_e)=>{const Zt=Array.isArray(Re)?Re:[Re],Ct=B.reduce((Ge,xt,Rt)=>(Zt[Rt]&&(Ge[xt.name]=Zt[Rt]),Ge),{}),bt=M.find(Ge=>B.every(xt=>Ge.options[xt.name]===Ct[xt.name]));return{id:(bt==null?void 0:bt.id)||`var-${Date.now()}-${_e}`,options:Ct,price:(bt==null?void 0:bt.price)??o.price??0,inventory:(bt==null?void 0:bt.inventory)??0,sku:(bt==null?void 0:bt.sku)??""}});JSON.stringify(Ae)!==JSON.stringify(M)&&a(Re=>({...Re,variants:Ae}))},[o.options,C,o.price]);const E=M=>{a(M?B=>({...B,options:[{id:`opt-${Date.now()}`,name:"Tamanho",values:["P","M","G"]}]}):B=>({...B,options:[],variants:[]}))},N=()=>{a(M=>{var B;return{...M,options:[...M.options||[],{id:`opt-${Date.now()}`,name:`Opo ${(((B=M.options)==null?void 0:B.length)||0)+1}`,values:[]}]}})},k=M=>{a(B=>({...B,options:(B.options||[]).filter((K,ie)=>ie!==M)}))},_=(M,B)=>{a(K=>{const ie=K.options||[],he=ie[M].name,Ae=ie.map((Re,_e)=>_e===M?{...Re,name:B}:Re),Me=(K.variants||[]).map(Re=>{if(he in Re.options){const _e={...Re.options};return _e[B]=_e[he],delete _e[he],{...Re,options:_e}}return Re});return{...K,options:Ae,variants:Me}})},j=M=>{var K;const B=(K=x[M])==null?void 0:K.trim();B&&(a(ie=>{const he=[...ie.options||[]];return he[M]&&!he[M].values.includes(B)?(he[M]={...he[M],values:[...he[M].values,B]},{...ie,options:he}):ie}),w(ie=>({...ie,[M]:""})))},P=(M,B)=>{a(K=>{const ie=[...K.options||[]];return ie[M]?(ie[M]={...ie[M],values:ie[M].values.filter(he=>he!==B)},{...K,options:ie}):K})},z=(M,B)=>{w(K=>({...K,[M]:B}))},O=(M,B,K)=>{a(ie=>({...ie,variants:(ie.variants||[]).map(he=>he.id===M?{...he,[B]:B==="price"||B==="inventory"?Number(K):K}:he)}))},D=M=>{const{name:B,value:K}=M.target;a(ie=>({...ie,[B]:K}))},te=(M,B)=>{a(K=>({...K,[M]:B}))},G=M=>{a(B=>({...B,description:M}))},le=M=>{a(B=>({...B,images:[...B.images||[],M]}))},Ne=M=>{a(B=>{var K;return{...B,images:(K=B.images)==null?void 0:K.filter(ie=>ie!==M)}})},ne=M=>{var B;if(M.preventDefault(),!((B=o.name)!=null&&B.trim())){alert("Por favor, insira um nome para o produto.");return}n(o)},oe=()=>{var M;(M=g.current)==null||M.requestSubmit()},me=async()=>{if(!o.name){alert("Por favor, insira um nome para o produto antes de gerar a descrio.");return}u(!0);try{const M=new Wa({apiKey:void 0}),B=`Voc  um copywriter especialista em e-commerce para produtos de luxo. Com base no nome do produto "${o.name}" e na descrio curta "${o.shortDescription}", escreva uma descrio completa, atraente e sofisticada para o produto. Use formatao rica em HTML como ttulos (h2), listas de marcadores (ul/li) e negrito (strong) para destacar os principais recursos e benefcios. O tone deve ser elegante e persuasivo, focado em qualidade, design e exclusividade.`,K=await M.models.generateContent({model:"gemini-2.5-flash",contents:B});G(K.text??"")}catch(M){console.error("AI Description Generation Error:",M),alert("Ocorreu um erro ao gerar a descrio. Tente novamente.")}finally{u(!1)}},fe=async()=>{if(!o.name){alert("Por favor, insira um nome para o produto antes de gerar o SEO.");return}p(!0);try{const B=await new Wa({apiKey:void 0}).models.generateContent({model:"gemini-2.5-flash",contents:`Baseado no nome do produto "${o.name}" e na descrio curta "${o.shortDescription}", gere um Ttulo SEO e uma Meta Descrio SEO otimizados para mecanismos de busca para um e-commerce de luxo.`,config:{responseMimeType:"application/json",responseSchema:{type:Kt.OBJECT,properties:{seoTitle:{type:Kt.STRING,description:"Um ttulo otimizado para SEO com no mximo 60 caracteres."},seoDescription:{type:Kt.STRING,description:"Uma meta descrio otimizada para SEO com no mximo 160 caracteres."}},required:["seoTitle","seoDescription"]}}}),K=JSON.parse(B.text??"{}");if(K.seoTitle&&K.seoDescription)a(ie=>({...ie,seoTitle:K.seoTitle,seoDescription:K.seoDescription}));else throw new Error("Resposta da IA em formato invlido.")}catch(M){console.error("AI SEO Generation Error:",M),alert("Ocorreu um erro ao gerar o contedo de SEO. Tente novamente.")}finally{p(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))]",children:s?"Editar Produto":"Adicionar Produto"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:r,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] transition-colors",children:"Descartar"}),l.jsx("button",{type:"button",onClick:oe,className:"text-sm font-bold bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-success))] transition-colors",children:"Salvar"})]})]}),l.jsxs("form",{onSubmit:ne,ref:g,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Nome do Produto"}),l.jsx("input",{type:"text",name:"name",id:"name",value:o.name,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"shortDescription",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Descrio Curta"}),l.jsx("textarea",{name:"shortDescription",id:"shortDescription",value:o.shortDescription,onChange:D,rows:3,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Descrio Completa"}),l.jsxs("button",{type:"button",onClick:me,disabled:d,className:"flex items-center gap-1.5 text-sm font-semibold bg-[rgb(var(--color-brand-gold))]/[.10] text-[rgb(var(--color-brand-gold))] py-1 px-3 rounded-md hover:bg-[rgb(var(--color-brand-gold))]/[.20] transition-colors disabled:opacity-50",children:[d?l.jsx(_r,{className:"w-4 h-4"}):l.jsx(Lh,{className:"w-4 h-4"}),d?"Gerando...":"Gerar com IA"]})]}),l.jsx(RT,{value:o.description||"",onChange:G})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4",children:"Mdia"}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[(W=o.images)==null?void 0:W.map(M=>l.jsxs("div",{className:"relative group aspect-square",children:[l.jsx("img",{src:M,alt:"preview",className:"w-full h-full object-cover rounded-md"}),l.jsx("div",{className:"absolute inset-0 bg-[rgb(var(--color-brand-dark))]/[.60] opacity-0 group-hover:opacity-100 flex items-center justify-center",children:l.jsx("button",{type:"button",onClick:()=>Ne(M),className:"p-2 bg-[rgb(var(--color-error))] rounded-full",children:l.jsx(cn,{className:"w-5 h-5"})})})]},M)),l.jsx(Dn,{currentImage:"",onImageUpload:le,placeholderText:"Adicionar imagem",aspectRatio:"square"})]})]}),l.jsx(hi,{title:"Preos",defaultOpen:!0,children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Preo"}),l.jsx("input",{type:"number",name:"price",id:"price",value:o.price,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",step:"0.01",min:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"compareAtPrice",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Preo de Comparao (opcional)"}),l.jsx("input",{type:"number",name:"compareAtPrice",id:"compareAtPrice",value:o.compareAtPrice,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",step:"0.01",min:"0"}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:"Defina um preo mais alto para mostrar um desconto."})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"costPerItem",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Custo por Item (opcional)"}),l.jsx("input",{type:"number",name:"costPerItem",id:"costPerItem",value:o.costPerItem,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",step:"0.01",min:"0"}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:"Exibido apenas para voc. Para calcular margem."})]})]})}),l.jsx(hi,{title:"Estoque",defaultOpen:!0,children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"trackQuantity",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Rastrear quantidade"}),l.jsx(wt,{checked:!!o.trackQuantity,onChange:M=>te("trackQuantity",M),labelId:"trackQuantity"})]}),o.trackQuantity&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"inventory",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Quantidade disponvel"}),l.jsx("input",{type:"number",name:"inventory",id:"inventory",value:o.inventory,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",min:"0"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"continueSelling",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Continuar vendendo quando esgotar"}),l.jsx(wt,{checked:!!o.continueSelling,onChange:M=>te("continueSelling",M),labelId:"continueSelling"})]})]})]})}),l.jsx(hi,{title:"Variaes",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"hasVariants",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Este produto tem mltiplas opes (ex: tamanhos, cores)?"}),l.jsx(wt,{checked:C,onChange:E,labelId:"hasVariants"})]}),C&&l.jsxs("div",{className:"space-y-6",children:[(o.options||[]).map((M,B)=>l.jsxs("div",{className:"p-4 bg-[rgb(var(--color-brand-gray))]/[.50] rounded-lg border border-[rgb(var(--color-brand-gray-light))]",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Nome da Opo"}),l.jsx("button",{type:"button",onClick:()=>k(B),className:"p-1 text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))]",children:l.jsx(cn,{className:"w-4 h-4"})})]}),l.jsx("input",{type:"text",value:M.name,onChange:K=>_(B,K.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))] text-sm mb-3"}),l.jsx("label",{className:"text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Valores da Opo"}),l.jsx("div",{className:"flex flex-wrap gap-2 my-2 min-h-[2.25rem]",children:M.values.map(K=>l.jsxs("div",{className:"flex items-center gap-1 bg-[rgb(var(--color-brand-gray))] rounded-full px-3 py-1 text-sm",children:[K,l.jsx("button",{type:"button",onClick:()=>P(B,K),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] leading-none -mr-1",children:""})]},K))}),l.jsx("div",{className:"flex gap-2",children:l.jsx("input",{type:"text",value:x[B]||"",onChange:K=>z(B,K.target.value),onKeyDown:K=>{K.key==="Enter"&&(K.preventDefault(),j(B))},placeholder:"Adicionar novo valor e pressionar Enter",className:"flex-grow bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))] text-sm"})})]},M.id)),l.jsx("button",{type:"button",onClick:N,className:"text-sm font-semibold text-[rgb(var(--color-brand-gold))] hover:underline",children:"+ Adicionar outra opo"}),(((be=o.variants)==null?void 0:be.length)||0)>0&&l.jsxs("div",{className:"mt-6 border-t border-[rgb(var(--color-brand-gray-light))] pt-6",children:[l.jsx("h4",{className:"text-md font-semibold text-[rgb(var(--color-brand-text-light))] mb-2",children:"Variantes"}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[(o.options||[]).map(M=>l.jsx("th",{className:"px-4 py-2",children:M.name},M.id)),l.jsx("th",{className:"px-4 py-2",children:"Preo"}),l.jsx("th",{className:"px-4 py-2",children:"Estoque"}),l.jsx("th",{className:"px-4 py-2",children:"SKU"})]})}),l.jsx("tbody",{children:(o.variants||[]).map(M=>l.jsxs("tr",{className:"border-t border-[rgb(var(--color-brand-gray-light))]",children:[Object.entries(M.options).map(([B,K])=>l.jsx("td",{className:"px-4 py-2",children:K},B)),l.jsx("td",{className:"px-4 py-2",children:l.jsx("input",{type:"number",value:M.price,onChange:B=>O(M.id,"price",B.target.value),className:"w-24 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))] text-sm"})}),l.jsx("td",{className:"px-4 py-2",children:l.jsx("input",{type:"number",value:M.inventory,onChange:B=>O(M.id,"inventory",B.target.value),className:"w-24 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))] text-sm"})}),l.jsx("td",{className:"px-4 py-2",children:l.jsx("input",{type:"text",value:M.sku,onChange:B=>O(M.id,"sku",B.target.value),className:"w-24 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))] text-sm"})})]},M.id))})]})})]})]})]})}),l.jsx(hi,{title:"Envio",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"requiresShipping",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Este produto exige envio?"}),l.jsx(wt,{checked:!!o.requiresShipping,onChange:M=>te("requiresShipping",M),labelId:"requiresShipping"})]}),o.requiresShipping&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Peso"}),l.jsx("input",{type:"number",name:"weight",id:"weight",value:o.weight,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",step:"0.01",min:"0"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"weightUnit",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Unidade de Peso"}),l.jsxs("select",{name:"weightUnit",id:"weightUnit",value:o.weightUnit,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{value:"kg",children:"kg"}),l.jsx("option",{value:"g",children:"g"}),l.jsx("option",{value:"lb",children:"lb"}),l.jsx("option",{value:"oz",children:"oz"})]})]})]})]})})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))]",children:"Status do Produto"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Status"}),l.jsxs("select",{name:"status",id:"status",value:o.status,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{value:"Ativo",children:"Ativo"}),l.jsx("option",{value:"Rascunho",children:"Rascunho"})]})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))]",children:"Organizao do Produto"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collectionId",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Coleo"}),l.jsxs("select",{name:"collectionId",id:"collectionId",value:o.collectionId||"",onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{value:"",children:"Nenhuma"}),e.map(M=>l.jsx("option",{value:M.id,children:M.title},M.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Tipo de Produto"}),l.jsxs("select",{name:"type",id:"type",value:o.type,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{value:"Fsico",children:"Fsico"}),l.jsx("option",{value:"Digital",children:"Digital"}),l.jsx("option",{value:"Dropshipping",children:"Dropshipping"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"supplier",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Fornecedor (opcional)"}),l.jsx("input",{type:"text",name:"supplier",id:"supplier",value:o.supplier,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]})]}),l.jsx(hi,{title:"SEO (Otimizao para Busca)",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{type:"button",onClick:fe,disabled:f,className:"w-full flex items-center justify-center gap-1.5 text-sm font-semibold bg-[rgb(var(--color-brand-gold))]/[.10] text-[rgb(var(--color-brand-gold))] py-2 px-3 rounded-md hover:bg-[rgb(var(--color-brand-gold))]/[.20] transition-colors disabled:opacity-50",children:[f?l.jsx(_r,{className:"w-4 h-4"}):l.jsx(Lh,{className:"w-4 h-4"}),f?"Gerando...":"Gerar SEO com IA"]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"seoTitle",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Ttulo SEO"}),l.jsx("input",{type:"text",name:"seoTitle",id:"seoTitle",value:o.seoTitle,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",maxLength:60}),l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:[((ve=o.seoTitle)==null?void 0:ve.length)||0," de 60 caracteres"]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"seoDescription",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Meta Descrio"}),l.jsx("textarea",{name:"seoDescription",id:"seoDescription",value:o.seoDescription,onChange:D,rows:3,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",maxLength:160}),l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:[((Pe=o.seoDescription)==null?void 0:Pe.length)||0," de 160 caracteres"]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"urlHandle",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"URL Handle"}),l.jsx("input",{type:"text",name:"urlHandle",id:"urlHandle",value:o.urlHandle,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] mt-1",children:"Ex: /produtos/nome-do-produto"})]})]})}),l.jsx(hi,{title:"Informaes Adicionais",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sku",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"SKU (Stock Keeping Unit)"}),l.jsx("input",{type:"text",name:"sku",id:"sku",value:o.sku,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"barcode",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Cdigo de Barras (ISBN, UPC, GTIN)"}),l.jsx("input",{type:"text",name:"barcode",id:"barcode",value:o.barcode,onChange:D,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]})]})}),l.jsx(hi,{title:"Tributao",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("label",{htmlFor:"chargeTax",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))]",children:"Cobrar imposto sobre este produto?"}),l.jsx(wt,{checked:!!o.chargeTax,onChange:M=>te("chargeTax",M),labelId:"chargeTax"})]})})]})]})]})},LB=({products:t,onSave:e,onNavigate:n})=>{const[r,s]=R.useState(""),[o,a]=R.useState({}),[d,u]=R.useState(!1);R.useEffect(()=>{const x=t.reduce((w,C)=>(w[C.id]=C.inventory,w),{});a(x)},[t]);const f=R.useMemo(()=>t.filter(x=>x.name.toLowerCase().includes(r.toLowerCase())),[t,r]),p=(x,w)=>{a(C=>({...C,[x]:w})),u(!0)},g=()=>{const x=t.map(w=>{const C=o[w.id];return C!==void 0&&C!==w.inventory?{...w,inventory:Number(C)}:w});e(x),u(!1)};return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))] flex justify-between items-center",children:[l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar produtos...",value:r,onChange:x=>s(x.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 pl-10 pr-4 text-[rgb(var(--color-brand-text-light))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]}),d&&l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-gold))]",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:g,className:"text-sm font-bold bg-[rgb(var(--color-active-lime))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-success))]",children:"Salvar Alteraes"})]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Produto"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"SKU"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Disponvel"})]})}),l.jsx("tbody",{children:f.map(x=>l.jsxs("tr",{className:"border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsx("td",{className:"px-6 py-4 font-medium text-[rgb(var(--color-brand-text-light))]",children:x.name}),l.jsx("td",{className:"px-6 py-4",children:x.sku?x.sku:l.jsx("button",{onClick:()=>n("addEditProduct",x),className:"text-[rgb(var(--color-brand-gold))] hover:underline text-xs",title:"Adicionar SKU para este produto",children:"Adicionar SKU"})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("input",{type:"number",value:o[x.id]??"",onChange:w=>p(x.id,w.target.value),className:"w-24 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-1 px-2 text-[rgb(var(--color-brand-text-light))]"})})]},x.id))})]})})]})},ik=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"})}),BB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"})}),ak=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z"})]}),pr=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 10.5h4.5m-4.5 3h4.5m-4.5 3h4.5"})]}),ju=({icon:t,label:e,children:n})=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx(t,{className:"w-5 h-5 text-[rgb(var(--color-brand-text-dim))] mt-1 flex-shrink-0"}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:e}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-light))] font-medium",children:n})]})]}),UB=({order:t,onClose:e})=>l.jsx("div",{className:"fixed inset-0 bg-[rgb(var(--color-brand-dark))]/[.70] z-50 flex items-center justify-center p-4",onClick:e,"aria-modal":"true",role:"dialog",children:l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg w-full max-w-lg max-h-[90vh] flex flex-col",onClick:n=>n.stopPropagation(),children:[l.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-[rgb(var(--color-brand-gray-light))] flex-shrink-0",children:[l.jsxs("h2",{className:"text-xl font-bold text-[rgb(var(--color-brand-text-light))] flex items-center gap-2",children:[l.jsx(Ts,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"}),"Detalhes do Cliente"]}),l.jsx("button",{onClick:e,className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))]","aria-label":"Fechar",children:l.jsx(Qa,{className:"w-6 h-6"})})]}),l.jsxs("main",{className:"p-6 overflow-y-auto space-y-6",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))]/[.50] p-4 rounded-lg space-y-4",children:[l.jsx(ju,{icon:Ts,label:"Nome do Cliente",children:t.customerName}),l.jsx(ju,{icon:ik,label:"E-mail",children:t.customerEmail}),l.jsx(ju,{icon:BB,label:"Telefone",children:t.customerPhone}),l.jsx(ju,{icon:pr,label:"CPF",children:t.customerCpf})]}),l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-2 flex items-center gap-2",children:[l.jsx(ak,{className:"w-5 h-5 text-[rgb(var(--color-brand-gold))]"}),"Endereo de Entrega"]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))]/[.50] p-4 rounded-lg space-y-1 text-[rgb(var(--color-brand-text-light))]",children:[l.jsxs("p",{children:[t.shippingAddress.street,", ",t.shippingAddress.number]}),t.shippingAddress.complement&&l.jsx("p",{children:t.shippingAddress.complement}),l.jsx("p",{children:t.shippingAddress.neighborhood}),l.jsxs("p",{children:[t.shippingAddress.city," - ",t.shippingAddress.state]}),l.jsxs("p",{children:["CEP: ",t.shippingAddress.zipCode]})]})]})]}),l.jsx("footer",{className:"p-4 bg-[rgb(var(--color-brand-gray))]/[.50] border-t border-[rgb(var(--color-brand-gray-light))] flex-shrink-0 text-right",children:l.jsx("button",{onClick:e,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"Fechar"})})]})}),zB=({status:t})=>{const e="px-2 py-1 text-xs font-semibold rounded-full inline-flex items-center",n={Pago:"bg-[rgb(var(--color-success))]/[0.20] text-[rgb(var(--color-success))]",Pendente:"bg-[rgb(var(--color-warning))]/[0.20] text-[rgb(var(--color-warning))]",Reembolsado:"bg-[rgb(var(--color-brand-gray-light))]/[0.20] text-[rgb(var(--color-brand-text-dim))]","Parcialmente Pago":"bg-[rgb(var(--color-info))]/[0.20] text-[rgb(var(--color-info))]",Cancelado:"bg-[rgb(var(--color-error))]/[0.20] text-[rgb(var(--color-error))]"};return l.jsx("span",{className:`${e} ${n[t]}`,children:t})},qB=({status:t})=>{const e="px-2 py-1 text-xs font-semibold rounded-full inline-flex items-center",n={Realizado:"bg-[rgb(var(--color-success))]/[0.20] text-[rgb(var(--color-success))]","No Realizado":"bg-[rgb(var(--color-warning))]/[0.20] text-[rgb(var(--color-warning))]",Parcial:"bg-[rgb(var(--color-info))]/[0.20] text-[rgb(var(--color-info))]"};return l.jsx("span",{className:`${e} ${n[t]}`,children:t})},kS=({orders:t,onNavigate:e})=>{const[n,r]=R.useState(""),[s,o]=R.useState(null),a=R.useMemo(()=>t.filter(d=>d.id.toLowerCase().includes(n.toLowerCase())||d.customerName.toLowerCase().includes(n.toLowerCase())).sort((d,u)=>new Date(u.date).getTime()-new Date(d.date).getTime()),[t,n]);return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsx("div",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar por N do pedido ou cliente",value:n,onChange:d=>r(d.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 pl-10 pr-4 text-[rgb(var(--color-brand-text-light))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Pedido"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cliente"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Pagamento"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"})]})}),l.jsx("tbody",{children:a.map(d=>l.jsxs("tr",{className:"border-b border-[rgb(var(--color-brand-gray-light))] hover:bg-[rgb(var(--color-brand-gray))]/[.50] cursor-pointer",onClick:()=>e("orderDetail",d),children:[l.jsx("td",{className:"px-6 py-4 font-medium text-[rgb(var(--color-brand-gold))]",children:d.id}),l.jsx("td",{className:"px-6 py-4",children:new Date(d.date).toLocaleDateString("pt-BR")}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("button",{className:"text-[rgb(var(--color-brand-text-light))] hover:underline",onClick:u=>{u.stopPropagation(),o(d)},children:d.customerName})}),l.jsx("td",{className:"px-6 py-4 text-right",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:d.currency}).format(d.total)}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(zB,{status:d.paymentStatus})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(qB,{status:d.fulfillmentStatus})})]},d.id))})]})})]}),s&&l.jsx(UB,{order:s,onClose:()=>o(null)})]})},HB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M16.75 13.96c.25.13.42.3.42.51v.12c0 .24-.1.45-.28.6l-1.03.88c-.53.45-1.2.68-1.87.68-.6 0-1.16-.17-1.65-.49-.57-.38-.97-.84-1.2-1.35-.3-.6-.46-1.25-.46-1.95 0-.7.15-1.37.46-1.98s.7-1.12 1.18-1.54c.5-.42 1.05-.73 1.64-.93.52-.17 1.04-.26 1.54-.26.6 0 1.15.12 1.64.35.5.23.9.56 1.2 1 .3.42.5.9.6 1.42.08.5.13 1 .13 1.51 0 .19-.01.38-.03.55zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l2.96 1.05-1.05-2.96C19.56 15.36 20 13.73 20 12c0-5.52-4.48-10-8-10zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})}),VB=({order:t,onUpdateOrder:e,onBack:n})=>{const[r,s]=R.useState(t.trackingCode||""),[o,a]=R.useState(!1),[d,u]=R.useState(t.notes||""),f=(C,E)=>{const N=C==="payment"?{paymentStatus:E}:{fulfillmentStatus:E};e(t.id,N)},p=()=>{e(t.id,{trackingCode:r}),a(!1)},g=()=>{e(t.id,{notes:d}),alert("Observao salva!")},x=`Ol ${t.customerName}, seu pedido ${t.id} foi enviado! O cdigo de rastreamento : ${r}`,w=`https://wa.me/55${t.customerPhone.replace(/\D/g,"")}?text=${encodeURIComponent(x)}`;return l.jsxs("div",{children:[l.jsx("button",{onClick:n,className:"text-sm text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))] mb-6",children:" Voltar para Pedidos"}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4",children:"Itens do Pedido"}),l.jsx("div",{className:"divide-y divide-[rgb(var(--color-brand-gray-light))]",children:t.items.map((C,E)=>l.jsxs("div",{className:"flex items-center justify-between py-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-16 h-16 bg-[rgb(var(--color-brand-gray))] rounded-md flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:C.productName}),C.sku&&l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] font-mono",children:["SKU: ",C.sku]}),C.variantText&&l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:C.variantText}),l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:[new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.currency}).format(C.price)," x ",C.quantity]})]})]}),l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.currency}).format(C.price*C.quantity)})]},E))}),l.jsx("div",{className:"pt-4 mt-4 border-t border-[rgb(var(--color-brand-gray-light))] text-right",children:l.jsxs("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:["Total: ",l.jsx("span",{className:"text-xl text-[rgb(var(--color-brand-text-light))] font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:t.currency}).format(t.total)})]})})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4 flex items-center gap-2",children:[l.jsx(pr,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})," Observaes do Pedido"]}),l.jsx("textarea",{value:d,onChange:C=>u(C.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",placeholder:"Adicione observaes internas sobre este pedido...",rows:4}),l.jsx("div",{className:"text-right mt-2",children:l.jsx("button",{onClick:g,disabled:d===(t.notes||""),className:"bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar Observao"})})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-[rgb(var(--color-brand-text-dim))]",children:"Status do Pagamento"}),l.jsxs("select",{value:t.paymentStatus,onChange:C=>f("payment",C.target.value),className:"w-full mt-1 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{children:"Pendente"}),l.jsx("option",{children:"Pago"}),l.jsx("option",{children:"Cancelado"}),l.jsx("option",{children:"Reembolsado"}),l.jsx("option",{children:"Parcialmente Pago"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-[rgb(var(--color-brand-text-dim))]",children:"Status do Pedido"}),l.jsxs("select",{value:t.fulfillmentStatus,onChange:C=>f("fulfillment",C.target.value),className:"w-full mt-1 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{children:"No Realizado"}),l.jsx("option",{children:"Realizado"}),l.jsx("option",{children:"Parcial"})]})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4 flex items-center gap-2",children:[l.jsx(Ts,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})," Cliente"]}),l.jsx("p",{className:"font-bold text-[rgb(var(--color-brand-gold))] text-base",children:t.customerName}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:t.customerEmail}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:t.customerPhone}),l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] mt-2 flex items-center gap-2",children:[l.jsx(pr,{className:"w-4 h-4 text-[rgb(var(--color-brand-text-dim))]"})," CPF: ",t.customerCpf]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4 flex items-center gap-2",children:[l.jsx(ak,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})," Endereo de Entrega"]}),l.jsxs("address",{className:"text-sm not-italic text-[rgb(var(--color-brand-text-dim))] space-y-1",children:[l.jsxs("p",{children:[t.shippingAddress.street,", ",t.shippingAddress.number]}),t.shippingAddress.complement&&l.jsx("p",{children:t.shippingAddress.complement}),l.jsx("p",{children:t.shippingAddress.neighborhood}),l.jsxs("p",{children:[t.shippingAddress.city," - ",t.shippingAddress.state]}),l.jsxs("p",{children:["CEP: ",t.shippingAddress.zipCode]})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsxs("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4 flex items-center gap-2",children:[l.jsx(Wh,{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]"})," Entrega e Rastreamento"]}),t.shippingMethod&&l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"Mtodo de Envio"}),l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:t.shippingMethod})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("label",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"Cdigo de Rastreio"}),o||!t.trackingCode?l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("input",{type:"text",value:r,onChange:C=>s(C.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",placeholder:"Insira o cdigo"}),l.jsx("button",{onClick:p,className:"bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-2 px-4 rounded-md hover:bg-yellow-400",children:"Salvar"}),o&&l.jsx("button",{onClick:()=>a(!1),className:"bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] font-semibold py-2 px-4 rounded-md",children:"Cancelar"})]}):l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("p",{className:"font-mono text-[rgb(var(--color-brand-text-light))] bg-[rgb(var(--color-brand-gray))] px-3 py-2 rounded-md",children:t.trackingCode}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("a",{href:w,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-sm text-[rgb(var(--color-success))] hover:text-[rgb(var(--color-success))]/[.80]",title:"Enviar rastreio por WhatsApp",children:l.jsx(HB,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>a(!0),className:"text-sm text-[rgb(var(--color-brand-gold))] hover:underline",children:"Editar"})]})]})]})]})]})]})]})},AS=({coupons:t,onNavigate:e,onCouponDelete:n})=>{const[r,s]=R.useState(""),o=R.useMemo(()=>t.filter(a=>a.code.toLowerCase().includes(r.toLowerCase())),[t,r]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))]",children:"Cupons de Desconto"}),l.jsxs("button",{onClick:()=>e("addEditCoupon"),className:"flex items-center gap-2 text-sm font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-yellow-400 transition-colors",children:[l.jsx(R0,{className:"w-5 h-5"}),"Criar cupom"]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsx("div",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar por cdigo do cupom...",value:r,onChange:a=>s(a.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-4 text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Cdigo"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Tipo"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Valor"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Utilizaes"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Status"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Aes"})]})}),l.jsx("tbody",{children:o.map(a=>l.jsxs("tr",{className:"border-b border-[rgb(var(--color-brand-gray-light))] hover:bg-[rgb(var(--color-brand-gray))]/[.50]",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("button",{onClick:()=>e("addEditCoupon",a),className:"font-medium text-[rgb(var(--color-brand-gold))] hover:underline",children:a.code}),a.description&&l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:a.description})]}),l.jsx("td",{className:"px-6 py-4",children:a.type}),l.jsx("td",{className:"px-6 py-4 text-[rgb(var(--color-brand-text-light))]",children:a.type==="Porcentagem"?`${a.value}%`:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a.value)}),l.jsxs("td",{className:"px-6 py-4",children:[a.usageCount," / ",a.usageLimit??""]}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${a.status==="Ativo"?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:a.status})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-center gap-4",children:[l.jsx("button",{onClick:()=>e("addEditCoupon",a),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]",title:"Editar",children:l.jsx(Xh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>n(a.id),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))]",title:"Excluir",children:l.jsx(cn,{className:"w-5 h-5"})})]})})]},a.id))})]})})]})]})},FB=({coupon:t,onSave:e,onCancel:n})=>{var p,g;const[r,s]=R.useState({code:"",description:"",type:"Porcentagem",value:10,status:"Ativo",usageLimit:null,startDate:new Date().toISOString().split("T")[0],endDate:"",...t}),o=R.useRef(null),a=x=>{const{name:w,value:C,type:E}=x.target,N=E==="checkbox",k=x.target.checked;s(w==="unlimitedUses"?_=>({..._,usageLimit:k?null:_.usageLimit??100}):w==="noEndDate"?_=>({..._,endDate:k?null:_.endDate??""}):_=>({..._,[w]:N?k:C}))},d=()=>{const x=Math.random().toString(36).substring(2,10).toUpperCase();s(w=>({...w,code:x}))},u=x=>{var w;if(x.preventDefault(),!((w=r.code)!=null&&w.trim())){alert("Por favor, insira um cdigo para o cupom.");return}if(r.value===void 0||r.value<=0){alert("O valor do desconto deve ser maior que zero.");return}e(r)},f=()=>{var x;(x=o.current)==null||x.requestSubmit()};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 transition-colors",children:"Descartar"}),l.jsx("button",{type:"button",onClick:f,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 transition-colors",children:"Salvar Cupom"})]})}),l.jsx("form",{onSubmit:u,ref:o,className:"space-y-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsx("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"code",className:"block text-sm font-medium text-white mb-2",children:"Cdigo do Cupom"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",name:"code",id:"code",value:r.code,onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500"}),l.jsx("button",{type:"button",onClick:d,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"Gerar"})]})]}),l.jsx("div",{}),l.jsxs("div",{className:"md:col-span-2",children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:"Descrio (opcional)"}),l.jsx("textarea",{name:"description",id:"description",value:r.description,onChange:a,rows:3,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500",placeholder:"Para uso interno"})]})]})}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tipo e Valor"}),l.jsxs("div",{className:"flex gap-8 mb-4",children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"type",value:"Porcentagem",checked:r.type==="Porcentagem",onChange:a,className:"h-4 w-4 bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("span",{className:"ml-2 text-white",children:"Porcentagem"})]}),l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"type",value:"Valor Fixo",checked:r.type==="Valor Fixo",onChange:a,className:"h-4 w-4 bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("span",{className:"ml-2 text-white",children:"Valor Fixo"})]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"value",className:"block text-sm font-medium text-white mb-2",children:"Valor do Desconto"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"number",name:"value",id:"value",value:r.value,onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white pl-8",min:"0",step:"0.01"}),l.jsx("span",{className:"absolute inset-y-0 left-0 pl-3 flex items-center text-gray-400",children:r.type==="Porcentagem"?"%":"R$"})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Limites de Utilizao"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"unlimitedUses",name:"unlimitedUses",checked:r.usageLimit===null,onChange:a,className:"h-4 w-4 rounded bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("label",{htmlFor:"unlimitedUses",className:"ml-2 block text-sm text-gray-300",children:"Sem limite de utilizaes"})]}),r.usageLimit!==null&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"usageLimit",className:"block text-sm text-gray-400 mb-1",children:"Nmero total de utilizaes"}),l.jsx("input",{type:"number",name:"usageLimit",id:"usageLimit",value:r.usageLimit??"",onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]})]})]}),l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Status"}),l.jsxs("select",{name:"status",id:"status",value:r.status,onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white",children:[l.jsx("option",{value:"Ativo",children:"Ativo"}),l.jsx("option",{value:"Inativo",children:"Inativo"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cupons inativos no podem ser usados no checkout."})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Perodo de Atividade"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"startDate",className:"block text-sm text-gray-400 mb-1",children:"Data de Incio"}),l.jsx("input",{type:"date",name:"startDate",id:"startDate",value:(p=r.startDate)==null?void 0:p.split("T")[0],onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center mb-1",children:[l.jsx("input",{type:"checkbox",id:"noEndDate",name:"noEndDate",checked:r.endDate===null,onChange:a,className:"h-4 w-4 rounded bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("label",{htmlFor:"noEndDate",className:"ml-2 block text-sm text-gray-300",children:"Sem data de fim"})]}),r.endDate!==null&&l.jsx("input",{type:"date",name:"endDate",id:"endDate",value:(g=r.endDate)==null?void 0:g.split("T")[0],onChange:a,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]})]})]})]})})]})},Mu=({title:t,children:e,defaultOpen:n=!1})=>{const[r,s]=R.useState(n);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsxs("button",{onClick:()=>s(!r),className:"w-full flex justify-between items-center p-4 text-left font-semibold text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("span",{children:t}),l.jsx("span",{className:`transform transition-transform duration-200 ${r?"rotate-180":""}`,children:""})]}),r&&l.jsx("div",{className:"p-4 border-t border-[rgb(var(--color-brand-gray-light))]",children:e})]})},$B=({customization:t,onUpdate:e,onNavigate:n})=>{const[r,s]=R.useState(t),o=R.useRef(null),a=JSON.stringify(r)!==JSON.stringify(t);R.useEffect(()=>{s(t)},[t]),R.useEffect(()=>{var N;(N=o.current)!=null&&N.contentWindow&&o.current.contentWindow.postMessage({type:"LIVE_PREVIEW_UPDATE",payload:r},"*")},[r]);const d=()=>{e(r)},u=()=>{s(t)},f=(N,k)=>{s(_=>({..._,[N]:k}))},p=(N,k)=>{s(_=>({..._,hero:{..._.hero,[N]:k}}))},g=(N,k,_)=>{const j=[...r.carouselBanners];j[N]={...j[N],[k]:_},s(P=>({...P,carouselBanners:j}))},x=()=>{const N={id:`carousel-${Date.now()}`,desktopImage:"",mobileImage:"",link:"#"};s(k=>({...k,carouselBanners:[...k.carouselBanners,N]}))},w=N=>{s(k=>({...k,carouselBanners:k.carouselBanners.filter(_=>_.id!==N)}))},C=(N,k)=>{s(_=>({..._,midPageBanner:{..._.midPageBanner,[N]:k}}))},E=(N,k)=>{s(_=>({..._,footer:{..._.footer,[N]:k}}))};return l.jsxs("div",{className:"flex h-[calc(100vh-5rem)]",children:[l.jsxs("div",{className:"w-96 flex-shrink-0 bg-[rgb(var(--color-brand-dark))] flex flex-col border-r border-[rgb(var(--color-brand-gray-light))]",children:[l.jsxs("header",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))] flex-shrink-0",children:[l.jsx("h2",{className:"text-xl font-bold",children:"Editor de Vitrine"}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"Personalize a aparncia da sua loja."})]}),l.jsxs("main",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[l.jsx(Mu,{title:"Identidade Visual",defaultOpen:!0,children:l.jsxs("div",{className:"space-y-4",children:[l.jsx(Dn,{currentImage:r.logoUrl,onImageUpload:N=>f("logoUrl",N),placeholderText:"Logo da Loja",aspectRatio:"square"}),l.jsx(Dn,{currentImage:r.faviconUrl,onImageUpload:N=>f("faviconUrl",N),placeholderText:"cone do Site (Favicon)",aspectRatio:"square"})]})}),l.jsx(Mu,{title:"Pgina Inicial: Sees",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[rgb(var(--color-brand-gold))] mb-2",children:"Banner Principal (Hero)"}),l.jsx("input",{value:r.hero.title,onChange:N=>p("title",N.target.value),placeholder:"Ttulo",className:"w-full bg-[rgb(var(--color-brand-gray))] border border-[rgb(var(--color-brand-gray-light))] rounded-md p-2 text-sm mb-2"}),l.jsx("input",{value:r.hero.subtitle,onChange:N=>p("subtitle",N.target.value),placeholder:"Subttulo",className:"w-full bg-[rgb(var(--color-brand-gray))] border border-[rgb(var(--color-brand-gray-light))] rounded-md p-2 text-sm mb-2"}),l.jsx(Dn,{currentImage:r.hero.desktopImage,onImageUpload:N=>p("desktopImage",N),placeholderText:"Imagem Desktop"})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[rgb(var(--color-brand-gold))] mb-2",children:"Carrossel de Banners"}),l.jsxs("div",{className:"space-y-2",children:[r.carouselBanners.map((N,k)=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-2 rounded-md",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:["Banner ",k+1]}),l.jsx("button",{onClick:()=>w(N.id),children:l.jsx(cn,{className:"w-4 h-4 text-red-500"})})]}),l.jsx(Dn,{currentImage:N.desktopImage,onImageUpload:_=>g(k,"desktopImage",_),placeholderText:"Imagem do Banner"})]},N.id)),l.jsx("button",{onClick:x,className:"text-sm w-full p-2 bg-[rgb(var(--color-brand-gray))] rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"+ Adicionar Banner"})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"font-semibold text-[rgb(var(--color-brand-gold))] mb-2",children:"Banner do Meio da Pgina"}),l.jsx(Dn,{currentImage:r.midPageBanner.desktopImage,onImageUpload:N=>C("desktopImage",N),placeholderText:"Imagem do Banner"})]})]})}),l.jsx(Mu,{title:"Rodap",children:l.jsxs("div",{className:"space-y-4",children:[l.jsx("label",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"Descrio"}),l.jsx("input",{value:r.footer.description,onChange:N=>E("description",N.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border border-[rgb(var(--color-brand-gray-light))] rounded-md p-2 text-sm"}),l.jsx("label",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:"CNPJ"}),l.jsx("input",{value:r.footer.cnpj,onChange:N=>E("cnpj",N.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border border-[rgb(var(--color-brand-gray-light))] rounded-md p-2 text-sm"})]})}),l.jsx(Mu,{title:"CSS Personalizado",children:l.jsx("textarea",{value:r.customCss||"",onChange:N=>f("customCss",N.target.value),rows:10,className:"w-full bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-md p-2 text-sm font-mono"})})]}),l.jsxs("footer",{className:"p-4 border-t border-[rgb(var(--color-brand-gray-light))] flex-shrink-0",children:[a&&l.jsx("p",{className:"text-xs text-center text-[rgb(var(--color-brand-gold))] mb-2",children:"Voc tem alteraes no salvas."}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:u,disabled:!a,className:"flex-1 text-sm font-semibold bg-[rgb(var(--color-brand-gray))] py-2 px-4 rounded-md disabled:opacity-50",children:"Descartar"}),l.jsx("button",{onClick:d,disabled:!a,className:"flex-1 text-sm font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md disabled:opacity-50",children:"Salvar"})]})]})]}),l.jsx("div",{className:"flex-1 bg-black p-4",children:l.jsx("div",{className:"w-full h-full bg-white rounded-lg shadow-inner overflow-hidden",children:l.jsx("iframe",{ref:o,src:window.location.href,title:"Live Preview",className:"w-full h-full border-0"})})})]})},_S=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",fill:"currentColor",children:[l.jsx("path",{fill:"#FFC107",d:"M43.611 20.083H42V20H24v8h11.303c-1.649 4.657-6.08 8-11.303 8c-6.627 0-12-5.373-12-12s5.373-12 12-12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C12.955 4 4 12.955 4 24s8.955 20 20 20s20-8.955 20-20c0-1.341-.138-2.65-.389-3.917z"}),l.jsx("path",{fill:"#FF3D00",d:"M6.306 14.691l6.571 4.819C14.655 15.108 18.961 12 24 12c3.059 0 5.842 1.154 7.961 3.039l5.657-5.657C34.046 6.053 29.268 4 24 4C16.318 4 9.656 8.337 6.306 14.691z"}),l.jsx("path",{fill:"#4CAF50",d:"M24 44c5.166 0 9.86-1.977 13.409-5.192l-6.19-5.238A11.91 11.91 0 0 1 24 36c-5.222 0-9.653-3.356-11.303-7.918l-6.522 5.025A20.02 20.02 0 0 0 24 44z"}),l.jsx("path",{fill:"#1976D2",d:"M43.611 20.083H42V20H24v8h11.303c-.792 2.237-2.231 4.166-4.087 5.571l6.19 5.238C42.012 36.417 44 30.556 44 24c0-1.341-.138-2.65-.389-3.917z"})]}),GB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-2.43.03-4.83-1-6.7-2.9-1.85-1.85-2.75-4.23-2.68-6.75.02-1.31.02-2.62 0-3.93.62-.02 1.24-.01 1.87-.01.04 1.4.52 2.83 1.37 3.93.85 1.1 2.11 1.76 3.48 1.76.01 0 .02.01.02.01.2 0 .4-.01.59-.02 1.15-.06 2.23-.62 2.99-1.52.75-.9 1.15-2.02 1.15-3.14-.02-2.89-.02-5.78-.01-8.67-.04-1.28-.58-2.55-1.48-3.55C14.28 2.3 13.43 1.17 12.525.02z"})}),JB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12c0 4.28 2.81 7.9 6.6 9.35.03-.22.05-.5.08-.72.03-.2.18-1.18.27-1.58.1-.42.6-2.58.6-2.58s-.15-.3-.15-.75c0-.7.42-1.22.95-1.22.45 0 .66.33.66.73 0 .45-.28 1.12-.43 1.75-.12.52.26 1 .78 1 1.35 0 2.38-1.7 2.38-3.9 0-1.95-1.38-3.3-3.25-3.3-2.18 0-3.45 1.62-3.45 3.2 0 .4.15.85.35 1.1.05.08.05.15 0 .23-.08.26-.28.85-.33.95-.03.1-.1.13-.23.05-1.02-.5-1.65-2.05-1.65-3.3 0-2.72 2.2-5.2 6.15-5.2 3.22 0 5.55 2.28 5.55 5 0 3.23-1.88 5.58-4.5 5.58-.9 0-1.75-.48-2.05-1.05 0 0-.45 1.78-.55 2.2-.28 1.1-.98 2.32-1.42 3.12 1.1.32 2.25.5 3.45.5 5.52 0 10-4.48 10-10S17.52 2 12 2z"})}),KB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M11.235 7.633l-3.328 3.328a2.12 2.12 0 11-2.998-2.998l3.328-3.328a2.12 2.12 0 112.998 2.998zm1.53 1.53l-3.328 3.328a2.12 2.12 0 11-2.998-2.998l3.328-3.328a2.12 2.12 0 112.998 2.998zm-1.53 1.531l-3.328 3.328a2.12 2.12 0 11-2.998-2.998l3.328-3.328a2.12 2.12 0 112.998 2.998zm5.33-4.59l3.328-3.328a2.12 2.12 0 10-2.998-2.998l-3.328 3.328a2.12 2.12 0 102.998 2.998zm-1.53 1.53l3.328-3.328a2.12 2.12 0 10-2.998-2.998l-3.328 3.328a2.12 2.12 0 102.998 2.998zm1.53 1.531l3.328-3.328a2.12 2.12 0 10-2.998-2.998l-3.328 3.328a2.12 2.12 0 102.998 2.998z"})}),WB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2a10 10 0 100 20 10 10 0 000-20zm0 16a6 6 0 110-12 6 6 0 010 12z"})}),YB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 01-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 011.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 00-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 01-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 00-3.375-3.375h-1.5a1.125 1.125 0 01-1.125-1.125v-1.5a3.375 3.375 0 00-3.375-3.375H9.75"})}),XB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M19.345 1.124c-1.288-.04-2.618.06-3.917.02-.04 1.74-1.74 3.48-3.48 3.48s-3.48-1.74-3.48-3.48c-1.3-.04-2.628-.06-3.917-.02C1.408 1.144 0 4.194 0 7.243c0 2.95 1.487 5.92 4.383 5.92.52 0 1.11-.08 1.583-.16 0 2.308.87 4.542 2.522 6.194 1.652 1.652 3.965 2.522 6.194 2.522s4.542-.87 6.194-2.522c1.652-1.652 2.522-3.886 2.522-6.194-.473.08-1.063.16-1.584.16 2.896 0 4.383-2.97 4.383-5.92 0-3.05-1.407-6.1-4.558-6.12z"})}),QB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2.05 14.23l-3.4-3.4c-.39-.39-.39-1.02 0-1.41l3.4-3.4c.39-.39 1.02-.39 1.41 0l3.4 3.4c.39.39.39 1.02 0 1.41l-3.4 3.4c-.39.39-1.02.39-1.41 0z"})}),ZB=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 15c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"})}),eU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M10.15 11.23L5.43 8.79l6.98-2.61 4.14 1.55-6.4 3.5zm.22-1.95l6.4-3.5L10.37 3.2 4 6.75l6.37 2.55zM4 7.23v9.54l6.18 3.03V10.2L4 7.23zm15.9.1L13.82 4.1v15.6l6.08-2.95V7.33z"})}),tU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M15.09 13.52c-.63.63-1.49.98-2.38.98-1.12 0-2.14-.54-2.77-1.39-.56-.75-.82-1.68-.74-2.63.1-1.13.67-2.13 1.54-2.77.87-.65 2.01-.9 3.03-.68.96.2 1.83.75 2.45 1.52.62.77.92 1.76.84 2.78-.09 1.25-.7 2.37-1.57 3.19l-3.1 3.1c-.1.1-.26.1-.35 0-.1-.1-.1-.26 0-.35l3.1-3.1c.78-.73 1.3-1.7 1.38-2.82.07-.9-.2-1.78-.76-2.47-.56-.7-1.33-1.18-2.2-1.36-.92-.19-1.91.04-2.68.62-.77.58-1.28 1.48-1.37 2.49-.07.82.16 1.63.66 2.28.56.73 1.45 1.15 2.36 1.15.78 0 1.53-.3 2.12-.88l4.08-4.08c1.09-1.09 1.6-2.5 1.48-3.95-.15-1.71-1.05-3.23-2.44-4.14-1.63-1.06-3.7-.93-5.18.31-1.32 1.1-2 2.68-1.87 4.28.1 1.26.7 2.4 1.59 3.24l.35.35c.1.1.1.26 0 .35-.1.1-.26.1-.35 0l-.35-.35C8.3 12.33 7.78 11.3 7.7 10.1c-.13-1.84.6-3.64 1.93-4.88 1.52-1.42 3.84-1.8 5.76-1.1 1.7.62 3.03 2.13 3.65 3.9.72 2.06.18 4.38-1.3 6.03l-4.08 4.08z"})}),nU={Facebook:LC,"Google Ads":_S,"Google Analytics":_S,TikTok:GB,Pinterest:JB,Kwai:KB,Taboola:WB,LinkedIn:UC,Twitter:BC,Bing:eU,Criteo:QB,Hotjar:tU,Outbrain:ZB,Snapchat:XB},rU=({pixel:t,onNavigate:e,onDelete:n,onStatusToggle:r,onDuplicate:s})=>{const o=nU[t.type];return l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(o,{className:`w-8 h-8 flex-shrink-0 ${t.type==="Google Ads"||t.type==="Google Analytics"?"":"text-white"}`}),l.jsxs("div",{children:[l.jsx("button",{onClick:()=>e("addEditMarketingPixel",t),className:"font-bold text-white text-left hover:text-yellow-400",children:t.name}),l.jsxs("div",{className:"flex flex-wrap items-center gap-x-2 text-xs text-gray-400",children:[l.jsxs("span",{className:"font-mono bg-gray-700/50 px-1 rounded",children:["ID: ",t.pixelId]}),t.idLabel&&l.jsxs("span",{className:"font-mono bg-gray-700/50 px-1 rounded",children:["Label: ",t.idLabel]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-4 sm:gap-6 w-full sm:w-auto",children:[l.jsx(wt,{checked:t.status==="Ativo",onChange:()=>r(t.id),labelId:`toggle-pixel-${t.id}`}),l.jsxs("div",{className:"flex items-center gap-3 ml-auto sm:ml-0",children:[l.jsx("button",{onClick:()=>e("addEditMarketingPixel",t),title:"Editar",className:"text-gray-400 hover:text-yellow-400",children:l.jsx(Xh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>s(t.id),title:"Duplicar",className:"text-gray-400 hover:text-white",children:l.jsx(YB,{className:"w-5 h-5"})}),l.jsx("button",{title:"Excluir",onClick:()=>n(t.id),className:"text-gray-400 hover:text-red-400",children:l.jsx(cn,{className:"w-5 h-5"})})]})]})]})},jS=({pixels:t,onNavigate:e,onDelete:n,onStatusToggle:r,onDuplicate:s})=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Pixels de Marketing"}),l.jsx("button",{onClick:()=>e("addEditMarketingPixel"),className:"font-bold bg-yellow-500 text-black py-2 px-5 rounded-md hover:bg-yellow-400 transition-colors",children:"+ Adicionar Pixel"})]}),l.jsx("div",{className:"space-y-3",children:t.map(o=>l.jsx(rU,{pixel:o,onNavigate:e,onDelete:n,onStatusToggle:r,onDuplicate:s},o.id))})]}),MS=({links:t,setLinks:e})=>{const[n,r]=R.useState(""),[s,o]=R.useState(null),a=()=>{if(!n||!n.startsWith("http")){alert("Por favor, insira uma URL vlida.");return}const p={id:`SL-${Date.now()}`,shortUrl:`https://rs.shp/${Math.random().toString(36).substring(2,7)}`,originalUrl:n,clicks:0};e(g=>[p,...g]),r("")},d=p=>{navigator.clipboard.writeText(p.shortUrl),o(p.id),setTimeout(()=>o(null),2e3)},u=p=>{window.confirm("Tem certeza que deseja excluir este link?")&&e(g=>g.filter(x=>x.id!==p))},f=p=>{e(g=>g.map(x=>x.id===p?{...x,clicks:x.clicks+1}:x))};return l.jsxs("div",{className:"space-y-8",children:[l.jsx("div",{children:l.jsxs("h1",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))] flex items-center gap-2",children:[l.jsx(Yh,{className:"w-6 h-6"}),"Encurtador de Link"]})}),l.jsx("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch gap-2",children:[l.jsx("input",{type:"url",placeholder:"Cole sua URL longa aqui...",value:n,onChange:p=>r(p.target.value),className:"flex-grow bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-lg py-3 px-4 text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("button",{onClick:a,className:"font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-3 px-6 rounded-lg hover:bg-yellow-400",children:"Encurtar"})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))]",children:"Seus Links Recentes"}),t.map(p=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[l.jsxs("div",{children:[l.jsx("a",{href:p.originalUrl,target:"_blank",rel:"noopener noreferrer",onClick:()=>f(p.id),className:"font-bold text-[rgb(var(--color-brand-gold))] hover:underline",children:p.shortUrl}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] truncate max-w-xs sm:max-w-md",children:p.originalUrl})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("div",{className:"flex items-center gap-2 text-sm text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx(KC,{className:"w-5 h-5"}),l.jsxs("span",{children:[p.clicks," cliques"]})]}),l.jsxs("button",{onClick:()=>d(p),className:`font-semibold text-sm py-2 px-4 rounded-md flex items-center gap-2 transition-colors ${s===p.id?"bg-[rgb(var(--color-success))]/[.20] text-[rgb(var(--color-success))]":"bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[s===p.id?l.jsx(Va,{className:"w-5 h-5"}):l.jsx(Ha,{className:"w-5 h-5"}),s===p.id?"Copiado!":"Copiar"]}),l.jsx("button",{onClick:()=>u(p.id),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))]",title:"Excluir link",children:l.jsx(cn,{className:"w-5 h-5"})})]})]},p.id))]})]})},sU=["Facebook","Google Ads","Google Analytics","TikTok","Pinterest","Kwai","Taboola","LinkedIn","Twitter","Bing","Criteo","Hotjar","Outbrain","Snapchat"],RS=({pixel:t,onSave:e,onCancel:n})=>{const[r,s]=R.useState({name:"",type:"Facebook",pixelId:"",idLabel:"",status:"Ativo",...t}),o=R.useRef(null),a=f=>{const{name:p,value:g}=f.target;s(x=>({...x,[p]:g}))},d=f=>{var p,g;if(f.preventDefault(),!((p=r.name)!=null&&p.trim())||!((g=r.pixelId)!=null&&g.trim())){alert("Por favor, preencha o nome e o ID do pixel.");return}e(r)},u=()=>{var f;(f=o.current)==null||f.requestSubmit()};return l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] transition-colors",children:"Descartar"}),l.jsx("button",{type:"button",onClick:u,className:"text-sm font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-yellow-400 transition-colors",children:"Salvar Pixel"})]})}),l.jsxs("form",{onSubmit:d,ref:o,className:"max-w-2xl mx-auto space-y-8",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6 space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Nome da Campanha"}),l.jsx("input",{type:"text",name:"name",id:"name",value:r.name,onChange:a,placeholder:"Ex: Campanha de Lanamento",className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",required:!0})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"type",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Plataforma"}),l.jsx("select",{name:"type",id:"type",value:r.type,onChange:a,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:sU.map(f=>l.jsx("option",{value:f,children:f},f))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pixelId",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"ID do Pixel / Tag"}),l.jsx("input",{type:"text",name:"pixelId",id:"pixelId",value:r.pixelId,onChange:a,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",required:!0})]}),r.type==="Google Ads"&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"idLabel",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Rtulo de Converso (Opcional)"}),l.jsx("input",{type:"text",name:"idLabel",id:"idLabel",value:r.idLabel,onChange:a,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-[rgb(var(--color-brand-text-light))] mb-4",children:"Status"}),l.jsxs("select",{name:"status",id:"status",value:r.status,onChange:a,className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("option",{value:"Ativo",children:"Ativo"}),l.jsx("option",{value:"Inativo",children:"Inativo"})]})]})]})]})},oU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"})}),iU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5A.75.75 0 0114.25 12h.01a.75.75 0 01.75.75v7.5m-3.75 0v-7.5a.75.75 0 00-.75-.75h-.01a.75.75 0 00-.75.75v7.5m-3.75 0v-7.5A.75.75 0 016.75 12h.01a.75.75 0 01.75.75v7.5m-3.75 0V12A2.25 2.25 0 015.25 9.75h9.5A2.25 2.25 0 0117.25 12v9.75m-9.75 0h4.5m-13.5-3.375V12a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 12v2.25m-18 0h18M12 6.75h.008v.008H12V6.75z"})}),aU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 00-5.78 1.128 2.25 2.25 0 01-2.4 2.245 4.5 4.5 0 008.4-2.245c0-.399-.078-.78-.22-1.128zm0 0a15.998 15.998 0 003.388-1.62m-5.043-.025a15.998 15.998 0 011.622-3.385m5.043.025a2.25 2.25 0 01-2.244 2.4l1.128 5.78a3 3 0 001.128 5.78m0 0l3.388-1.62m-5.043-.025a15.998 15.998 0 011.622-3.385m5.043.025a2.25 2.25 0 01-2.244 2.4l1.128 5.78a3 3 0 001.128 5.78m0 0l3.388-1.62m-5.043-.025a15.998 15.998 0 011.622-3.385"})}),lU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.72 3.72a.75.75 0 01-1.06 0l-3.72-3.72C9.347 17.653 8.5 16.689 8.5 15.553V11.25c0-.97.616-1.813 1.5-2.097m6.5 0v3.75m-6.5-3.75v3.75m6.5-3.75h3.75m-13.5 0h3.75m-3.75 0a3.003 3.003 0 00-3 3v6.75a3.003 3.003 0 003 3h9.75a.75.75 0 00.75-.75V19.5m-12-6.75a.75.75 0 01.75-.75h9.75a.75.75 0 01.75.75v9.75a.75.75 0 01-.75.75h-9.75a.75.75 0 01-.75-.75V12.75z"})}),Hh=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.553L16.5 21.75l-.398-1.197a3.375 3.375 0 00-2.456-2.456L12.5 17.25l1.197-.398a3.375 3.375 0 002.456-2.456L16.5 13.5l.398 1.197a3.375 3.375 0 002.456 2.456l1.197.398-1.197.398a3.375 3.375 0 00-2.456 2.456z"})}),cU=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995a6.75 6.75 0 010 1.99c0 .382.145.755.438.995l1.003.827c.424.35.534.954.26 1.431l-1.298 2.247a1.125 1.125 0 01-1.369.49l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.333.183-.582.495-.645.87l-.213 1.28c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995a6.75 6.75 0 010-1.99c0-.382-.145-.755-.438-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.297-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.645-.87l.213-1.28z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),dU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.75 19.5l-7.5-7.5 7.5-7.5m-6 15L5.25 12l7.5-7.5"})}),uU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 003 8.25v10.5A2.25 2.25 0 005.25 21h10.5A2.25 2.25 0 0018 18.75V10.5m-4.5 0L21 3m0 0h-6.375M21 3v6.375"})}),lk=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 21v-7.5A.75.75 0 0114.25 12h.01a.75.75 0 01.75.75v7.5m-3.75 0v-7.5a.75.75 0 00-.75-.75h-.01a.75.75 0 00-.75.75v7.5m-3.75 0v-7.5A.75.75 0 016.75 12h.01a.75.75 0 01.75.75v7.5m-3.75 0V12A2.25 2.25 0 015.25 9.75h9.5A2.25 2.25 0 0117.25 12v9.75m-9.75 0h4.5m-13.5-3.375V12a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 12v2.25m-18 0h18M12 6.75h.008v.008H12V6.75z"})}),hU=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"})}),fU=[{main:{icon:oU,label:"Dashboard",view:"consultantStore"}},{main:{icon:Hh,label:"RS Studio",view:"rsStudio"}},{main:{icon:lU,label:"Comunicao",view:"communication"}},{isSeparator:!0,title:"GERENCIAR"},{main:{icon:iU,label:"Minha Loja",view:"manageProducts"},subLinks:[{label:"Produtos",view:"manageProducts"},{label:"Colees",view:"manageCollections"},{label:"Pedidos",view:"manageOrders"},{label:"Cupons",view:"managePromotions"},{label:"Order Bump",view:"manageOrderBump"},{label:"Upsell",view:"manageUpsell"},{label:"Carrinhos Abandonados",view:"manageAbandonedCarts"},{label:"Avaliaes",view:"manageReviews"},{label:"Afiliados",view:"manageAffiliates"}]},{main:{icon:j0,label:"Wallet Pay",view:"walletPayHub"}},{main:{icon:lk,label:"CDs",view:"manageDistributors"}},{main:{icon:Cs,label:"Marketing",view:"virtualOfficePixels"},subLinks:[{label:"Pixels de Marketing",view:"virtualOfficePixels"},{label:"Encurtador de Links",view:"virtualOfficeLinkShortener"}]},{isSeparator:!0,title:"APARNCIA"},{main:{icon:aU,label:"Personalizao",view:"storeEditor"},subLinks:[{label:"Meu Perfil",view:"userProfileEditor"},{label:"Aparncia da Loja",view:"storeEditor"},{label:"Editor do Painel",view:"dashboardEditor"},{label:"Banners do Painel",view:"bannerDashboard"}]},{main:{icon:pr,label:"Contedo e Mdia",view:"manageAnnouncements"},subLinks:[{label:"Comunicados",view:"manageAnnouncements"},{label:"Treinamentos",view:"manageTrainings"},{label:"Materiais de Marketing",view:"manageMarketingAssets"}]},{main:{icon:cU,label:"Configuraes",view:"managePayments"},subLinks:[{label:"Plano de Compensao",view:"compensationPlan"},{label:"Pagamentos",view:"managePayments"},{label:"Frete",view:"manageShipping"}]}],pU=({item:t,isCollapsed:e,currentView:n,onNavigate:r})=>{const{main:s,subLinks:o}=t,a=n===s.view||o&&o.some(N=>N.view===n),[d,u]=R.useState(a),[f,p]=R.useState(!1),g=R.useRef(null);R.useEffect(()=>{!a&&!e&&u(!1)},[a,e]),R.useEffect(()=>{const N=k=>{e&&g.current&&!g.current.contains(k.target)&&p(!1)};return document.addEventListener("mousedown",N),()=>document.removeEventListener("mousedown",N)},[e]);const x=()=>{e?o?p(N=>!N):r(s.view):o?u(N=>!N):r(s.view)};return l.jsxs("div",{ref:g,children:[l.jsxs("button",{onClick:x,className:`w-full flex items-center justify-between text-left px-3 rounded-md text-sm font-medium transition-all duration-200 h-11 relative group ${a?"bg-[rgb(var(--color-brand-gold))]/10 text-white":"text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gray-light))] hover:text-white"}`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(s.icon,{className:`h-6 w-6 flex-shrink-0 transition-colors ${a?"text-[rgb(var(--color-brand-gold))]":""}`}),!e&&l.jsx("span",{className:"truncate",children:s.label})]}),!e&&o&&l.jsx("span",{className:`transform transition-transform text-xs ${d?"rotate-180":""}`,children:""}),a&&l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-6 w-1 bg-[rgb(var(--color-brand-gold))] rounded-r-full"}),e&&l.jsx("div",{className:"absolute left-full ml-3 px-3 py-1.5 bg-[rgb(var(--color-brand-gray))] text-white text-xs font-bold rounded-md whitespace-nowrap opacity-0 pointer-events-none group-hover:opacity-100 transition-opacity delay-300 z-50",children:s.label})]}),!e&&d&&o&&l.jsx("div",{className:"pl-8 pt-2 space-y-1",children:o.map(N=>l.jsxs("button",{onClick:()=>r(N.view),className:`w-full text-left pl-5 pr-2 py-2 rounded-md text-sm transition-colors relative ${n===N.view?"text-white font-semibold":"text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[n===N.view&&l.jsx("div",{className:"absolute left-0 top-1/2 -translate-y-1/2 h-1.5 w-1.5 bg-[rgb(var(--color-brand-gold))] rounded-full"}),N.label]},N.view))}),e&&f&&o&&l.jsx("div",{className:"absolute left-full top-0 ml-2 z-50 w-56 bg-[rgba(30,30,30,0.8)] backdrop-blur-md border border-[rgb(var(--color-brand-gold))]/20 rounded-lg shadow-2xl p-2 animate-fade-in-fast",children:o.map(N=>l.jsx("button",{onClick:()=>r(N.view),className:`w-full text-left px-3 py-2 text-sm rounded-md transition-colors ${n===N.view?"text-[rgb(var(--color-brand-gold))] font-semibold bg-[rgb(var(--color-brand-gray))]":"text-white hover:bg-[rgb(var(--color-brand-gray))]"}`,children:N.label},N.view))})]})},pg=({title:t,children:e,currentView:n,onNavigate:r,onLogout:s})=>{const[o,a]=R.useState(!0),[d,u]=R.useState(!1);return l.jsxs("div",{className:"flex h-screen bg-[rgb(var(--color-brand-dark))] text-[rgb(var(--color-brand-text-light))]",children:[l.jsx("style",{children:`
                @keyframes fade-in-fast { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
                .animate-fade-in-fast { animation: fade-in-fast 0.15s ease-out forwards; }
            `}),l.jsx("div",{className:`fixed inset-0 bg-black/60 z-30 lg:hidden transition-opacity ${d?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:()=>u(!1)}),l.jsxs("aside",{className:`fixed lg:relative inset-y-0 left-0 z-40 bg-[rgba(18,18,18,0.6)] backdrop-blur-lg flex-shrink-0 p-3 flex flex-col transition-all duration-300
                ${d?"translate-x-0 w-72":"-translate-x-full w-72"}
                ${o&&!d?"w-72":"w-20"} lg:translate-x-0 border-r border-[rgb(var(--color-brand-gold))]/15`,children:[l.jsx("div",{className:"flex items-center justify-center h-16 px-3 mb-6 flex-shrink-0",children:l.jsx("span",{className:`font-display text-[rgb(var(--color-brand-gold))] transition-all duration-300 ${o?"text-3xl":"text-2xl"}`,children:o?"RS Prlipsi":"RS"})}),l.jsx("nav",{className:"flex-grow space-y-1 overflow-y-auto pr-1",children:fU.map((f,p)=>"isSeparator"in f?l.jsx("div",{className:`pt-4 pb-2 px-3 transition-opacity duration-300 ${o?"opacity-100":"opacity-0 h-0 pointer-events-none"}`,children:l.jsx("p",{className:"text-xs font-bold text-[rgb(var(--color-brand-text-dim))] uppercase tracking-wider",children:f.title})},p):l.jsx(pU,{item:f,isCollapsed:!o,currentView:n,onNavigate:r},p))}),l.jsxs("div",{className:"flex-shrink-0 mt-auto pt-4 space-y-2",children:[l.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-3 py-3 rounded-md text-sm font-medium text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gray-light))] hover:text-white ${o?"":"justify-center"}`,children:[l.jsx(hU,{className:"h-6 w-6"}),!o||l.jsx("span",{className:"truncate",children:"Sair"})]}),l.jsxs("button",{onClick:()=>a(!o),className:"w-full hidden lg:flex items-center gap-3 px-3 py-3 rounded-md text-sm font-medium text-[rgb(var(--color-brand-text-dim))] hover:bg-[rgb(var(--color-brand-gray-light))] hover:text-white",children:[l.jsx(dU,{className:`h-6 w-6 transition-transform ${o?"":"rotate-180"}`}),!o||l.jsx("span",{className:"truncate",children:"Recolher"})]})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[l.jsxs("header",{className:"flex-shrink-0 h-20 flex items-center justify-between px-6 bg-[rgb(var(--color-brand-dark))] border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>u(!0),className:"lg:hidden",children:[" ",l.jsx(OC,{className:"w-6 h-6"})," "]}),l.jsx("h1",{className:"text-xl md:text-2xl font-bold text-white",children:t||"Painel"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>r("home"),className:"flex items-center gap-2 text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-white py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:[l.jsx(uU,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:"Ver Loja"})]}),l.jsxs("button",{className:"relative text-[rgb(var(--color-brand-text-dim))] hover:text-white",children:[l.jsx(I0,{className:"w-6 h-6"}),l.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white w-3 h-3 rounded-full text-xs"})]}),l.jsx("button",{onClick:()=>r("userProfileEditor"),children:l.jsx(Ts,{className:"w-8 h-8 p-1 rounded-full bg-[rgb(var(--color-brand-gray))]"})})]})]}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e})]})]})},mU=({onProductClick:t,products:e,wishlist:n,onToggleWishlist:r})=>{const s=e.filter(o=>o.status==="Ativo"&&o.compareAtPrice&&o.compareAtPrice>o.price).sort((o,a)=>{if(!o.compareAtPrice||!a.compareAtPrice)return 0;const d=(o.compareAtPrice-o.price)/o.compareAtPrice*100;return(a.compareAtPrice-a.price)/a.compareAtPrice*100-d}).slice(0,4);return s.length===0?null:l.jsx("section",{id:"offers",className:"py-16 sm:py-24 bg-gray-900",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display text-white",children:"Ofertas Especiais"}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-gray-400",children:"Aproveite nossos descontos exclusivos por tempo limitado."})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:s.map(o=>l.jsx(jc,{product:o,onClick:()=>t(o),wishlist:n,onToggleWishlist:r},o.id))})]})})},gU=({banner:t})=>!(t!=null&&t.desktopImage)&&!(t!=null&&t.mobileImage)?null:l.jsx("section",{className:"py-16 sm:py-24 bg-black",children:l.jsx("div",{className:"container mx-auto px-4",children:l.jsx("a",{href:t.link||"#",className:"block rounded-lg overflow-hidden group focus:outline-none focus:ring-4 focus:ring-yellow-500/50",children:l.jsxs("picture",{children:[l.jsx("source",{media:"(min-width: 768px)",srcSet:t.desktopImage}),l.jsx("img",{src:t.mobileImage,alt:"Banner promocional",className:"w-full h-auto object-cover transition-transform duration-300 group-hover:scale-105"})]})})})});class bU extends R.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"min-h-screen bg-[rgb(var(--color-brand-darker))] flex items-center justify-center p-6",children:l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-red-500/30 rounded-lg p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Ops! Algo deu errado"}),l.jsx("p",{className:"text-gray-300 mb-6",children:"Ocorreu um erro ao carregar este componente. Tente recarregar a pgina."}),l.jsxs("div",{className:"space-y-3",children:[l.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-[rgb(var(--color-brand-primary))] text-white py-3 px-6 rounded-lg hover:opacity-90 transition-opacity font-semibold",children:"Recarregar Pgina"}),l.jsx("button",{onClick:()=>this.setState({hasError:!1}),className:"w-full bg-gray-600 text-white py-3 px-6 rounded-lg hover:bg-gray-500 transition-colors font-semibold",children:"Tentar Novamente"})]}),this.state.error&&l.jsxs("details",{className:"mt-6 text-left",children:[l.jsx("summary",{className:"text-sm text-gray-400 cursor-pointer hover:text-gray-300",children:"Detalhes do erro"}),l.jsx("pre",{className:"mt-2 text-xs text-red-400 bg-black/30 p-3 rounded overflow-auto max-h-32",children:this.state.error.toString()})]})]})}):this.props.children}}const xU="https://api.rsprolipsi.com.br",Ya="523554e3-00ef-41b9-adee-a6798111ef50",$n=async(t,e={})=>{const n={"Content-Type":"application/json",...e.headers};try{const r=await fetch(`${xU}${t}`,{...e,headers:n}),s=await r.json();return r.ok?s:{success:!1,error:s.error||`HTTP error! status: ${r.status}`}}catch(r){return{success:!1,error:r.message}}},yU={getAll:async t=>{const e=t!==void 0?`&published=${t}`:"";return $n(`/v1/marketplace/products?tenantId=${Ya}${e}`)},getById:async t=>$n(`/v1/marketplace/products/${t}`),create:async t=>$n("/v1/marketplace/products",{method:"POST",body:JSON.stringify({...t,tenantId:Ya})}),update:async(t,e)=>$n(`/v1/marketplace/products/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>$n(`/v1/marketplace/products/${t}`,{method:"DELETE"}),updateStock:async(t,e)=>$n(`/v1/marketplace/products/${t}/stock`,{method:"PATCH",body:JSON.stringify({stock:e})})},vU={getAll:async()=>$n(`/v1/marketplace/collections?tenantId=${Ya}`),create:async t=>$n("/v1/marketplace/collections",{method:"POST",body:JSON.stringify({...t,tenantId:Ya})}),update:async(t,e)=>$n(`/v1/marketplace/collections/${t}`,{method:"PUT",body:JSON.stringify(e)}),delete:async t=>$n(`/v1/marketplace/collections/${t}`,{method:"DELETE"})},wU={getAll:async t=>{const e=t?`&status=${t}`:"";return $n(`/v1/marketplace/orders?tenantId=${Ya}${e}`)},create:async t=>$n("/v1/marketplace/orders",{method:"POST",body:JSON.stringify({...t,tenantId:Ya})}),updateStatus:async(t,e)=>$n(`/v1/marketplace/orders/${t}/status`,{method:"PATCH",body:JSON.stringify({status:e})})},Jn={products:yU,collections:vU,orders:wU},SU=(t,e)=>{const n=async()=>{const a=await Jn.products.getAll();if(a.success&&a.data){const d=a.data.map(u=>({id:u.id,name:u.name,description:u.description,price:parseFloat(u.price),originalPrice:u.original_price?parseFloat(u.original_price):void 0,images:Array.isArray(u.images)?u.images:[],rating:4.5,reviews:0,stock:u.stock,sku:u.sku,category:u.category,collections:Array.isArray(u.collections)?u.collections:[],published:u.published,featured:u.featured,specifications:u.specifications||{},seoTitle:u.seo_title,seoDescription:u.seo_description,seoKeywords:Array.isArray(u.seo_keywords)?u.seo_keywords:[]}));t(d)}else console.error("Erro ao carregar produtos:",a.error)};return{loadProducts:n,handleSaveProduct:async a=>{try{const d={name:a.name,description:a.description,price:a.price,originalPrice:a.originalPrice,stock:a.stock,sku:a.sku,images:a.images||[],category:a.category,collections:a.collections||[],published:a.published!==!1,featured:a.featured||!1,specifications:a.specifications||{},seoTitle:a.seoTitle,seoDescription:a.seoDescription,seoKeywords:a.seoKeywords||[]};let u;return a.id?u=await Jn.products.update(a.id,d):u=await Jn.products.create(d),u.success?(await n(),e("manageProducts"),{success:!0}):(console.error("Erro ao salvar produto:",u.error),{success:!1,error:u.error})}catch(d){return console.error("Erro ao salvar produto:",d),{success:!1,error:d.message}}},handleDeleteProduct:async a=>{if(window.confirm("Tem certeza que deseja excluir este produto?"))try{const d=await Jn.products.delete(a);return d.success?(t(u=>u.filter(f=>f.id!==a)),{success:!0}):(console.error("Erro ao deletar produto:",d.error),alert(`Erro ao deletar produto: ${d.error}`),{success:!1,error:d.error})}catch(d){return console.error("Erro ao deletar produto:",d),alert(`Erro ao deletar produto: ${d.message}`),{success:!1,error:d.message}}},handleUpdateStock:async(a,d)=>{try{const u=await Jn.products.updateStock(a,d);return u.success?(t(f=>f.map(p=>p.id===a?{...p,stock:d}:p)),{success:!0}):(console.error("Erro ao atualizar estoque:",u.error),{success:!1,error:u.error})}catch(u){return console.error("Erro ao atualizar estoque:",u),{success:!1,error:u.message}}}}},CU=(t,e)=>{const n=async()=>{const a=await Jn.collections.getAll();if(a.success&&a.data){const d=a.data.map(u=>({id:u.id,name:u.name,description:u.description,image:u.image,productIds:u.product_ids||[]}));t(d)}};return{loadCollections:n,handleSaveCollection:async a=>{try{const d={name:a.name,description:a.description,image:a.image,productIds:a.productIds||[]};let u;return a.id?u=await Jn.collections.update(a.id,d):u=await Jn.collections.create(d),u.success?(await n(),e("manageCollections"),{success:!0}):{success:!1,error:u.error}}catch(d){return{success:!1,error:d.message}}},handleDeleteCollection:async a=>{if(window.confirm("Tem certeza que deseja excluir esta coleo?"))try{const d=await Jn.collections.delete(a);return d.success?(t(u=>u.filter(f=>f.id!==a)),{success:!0}):(alert(`Erro ao deletar coleo: ${d.error}`),{success:!1,error:d.error})}catch(d){return alert(`Erro ao deletar coleo: ${d.message}`),{success:!1,error:d.message}}},handleCreateCollection:async(a,d)=>{try{const u=await Jn.collections.create({name:a,description:d,productIds:[]});return u.success?(await n(),{success:!0}):{success:!1,error:u.error}}catch(u){return{success:!1,error:u.message}}}}},NU=t=>{const e=async()=>{const s=await Jn.orders.getAll();s.success&&s.data&&t(s.data)};return{loadOrders:e,handleCreateOrder:async s=>{try{const o=await Jn.orders.create(s);return o.success?(await e(),{success:!0,data:o.data}):{success:!1,error:o.error}}catch(o){return{success:!1,error:o.message}}},handleUpdateOrderStatus:async(s,o)=>{try{const a=await Jn.orders.updateStatus(s,o);return a.success?(await e(),{success:!0}):{success:!1,error:a.error}}catch(a){return{success:!1,error:a.message}}}}},xs=({value:t,onChange:e,name:n,id:r,placeholder:s})=>{const[o,a]=R.useState(!1);return l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o?"text":"password",name:n,id:r,value:t,onChange:e,placeholder:s,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 pr-10 text-white focus:outline-none focus:border-yellow-500"}),l.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-yellow-400","aria-label":o?"Esconder":"Mostrar",children:o?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]})},IS=({settings:t,onSave:e,onNavigate:n})=>{const[r,s]=R.useState(t),[o,a]=R.useState(!1);R.useEffect(()=>{s(t),a(!1)},[t]);const d=x=>{const{name:w,value:C}=x.target,[E,N]=w.split(".");s(k=>({...k,[E]:{...k[E],[N]:C}})),a(!0)},u=(x,w)=>{s(C=>({...C,[x]:{...C[x],enabled:w}})),a(!0)},f=()=>{e(r),a(!1)},p=()=>{s(t),a(!1)},g=["CPF","CNPJ","E-mail","Telefone","Chave Aleatria"];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[o&&l.jsx("p",{className:"text-sm text-yellow-400 mr-4",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:p,disabled:!o,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Descartar"}),l.jsx("button",{onClick:f,disabled:!o,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Mercado Pago"}),l.jsx(wt,{checked:r.mercadoPago.enabled,onChange:x=>u("mercadoPago",x),labelId:"mp-toggle"})]}),r.mercadoPago.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mp-public-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"Public Key"}),l.jsx(xs,{id:"mp-public-key",name:"mercadoPago.publicKey",value:r.mercadoPago.publicKey,onChange:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"mp-access-token",className:"block text-sm font-medium text-gray-400 mb-2",children:"Access Token"}),l.jsx(xs,{id:"mp-access-token",name:"mercadoPago.accessToken",value:r.mercadoPago.accessToken,onChange:d})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"PagSeguro"}),l.jsx(wt,{checked:r.pagSeguro.enabled,onChange:x=>u("pagSeguro",x),labelId:"ps-toggle"})]}),r.pagSeguro.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ps-email",className:"block text-sm font-medium text-gray-400 mb-2",children:"E-mail"}),l.jsx("input",{type:"email",id:"ps-email",name:"pagSeguro.email",value:r.pagSeguro.email,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"ps-token",className:"block text-sm font-medium text-gray-400 mb-2",children:"Token"}),l.jsx(xs,{id:"ps-token",name:"pagSeguro.token",value:r.pagSeguro.token,onChange:d})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"PIX"}),l.jsx(wt,{checked:r.pix.enabled,onChange:x=>u("pix",x),labelId:"pix-toggle"})]}),r.pix.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pix-key-type",className:"block text-sm font-medium text-gray-400 mb-2",children:"Tipo de Chave"}),l.jsx("select",{id:"pix-key-type",name:"pix.pixKeyType",value:r.pix.pixKeyType,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500",children:g.map(x=>l.jsx("option",{value:x,children:x},x))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pix-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"Chave PIX"}),l.jsx("input",{type:"text",id:"pix-key",name:"pix.pixKey",value:r.pix.pixKey,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500"})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"AppMax"}),l.jsx(wt,{checked:r.appmax.enabled,onChange:x=>u("appmax",x),labelId:"appmax-toggle"})]}),r.appmax.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"appmax-api-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),l.jsx(xs,{id:"appmax-api-key",name:"appmax.apiKey",value:r.appmax.apiKey,onChange:d})]})})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Asaas"}),l.jsx(wt,{checked:r.asaas.enabled,onChange:x=>u("asaas",x),labelId:"asaas-toggle"})]}),r.asaas.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"asaas-api-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),l.jsx(xs,{id:"asaas-api-key",name:"asaas.apiKey",value:r.asaas.apiKey,onChange:d})]})})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Pagar.me"}),l.jsx(wt,{checked:r.pagarme.enabled,onChange:x=>u("pagarme",x),labelId:"pagarme-toggle"})]}),r.pagarme.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pagarme-api-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),l.jsx(xs,{id:"pagarme-api-key",name:"pagarme.apiKey",value:r.pagarme.apiKey,onChange:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"pagarme-encryption-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"Encryption Key"}),l.jsx(xs,{id:"pagarme-encryption-key",name:"pagarme.encryptionKey",value:r.pagarme.encryptionKey,onChange:d})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Stripe"}),l.jsx(wt,{checked:r.stripe.enabled,onChange:x=>u("stripe",x),labelId:"stripe-toggle"})]}),r.stripe.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stripe-publishable-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"Publishable Key"}),l.jsx(xs,{id:"stripe-publishable-key",name:"stripe.publishableKey",value:r.stripe.publishableKey,onChange:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"stripe-secret-key",className:"block text-sm font-medium text-gray-400 mb-2",children:"Secret Key"}),l.jsx(xs,{id:"stripe-secret-key",name:"stripe.secretKey",value:r.stripe.secretKey,onChange:d})]})]})]})]})]})},fi=({value:t,onChange:e,name:n,id:r,placeholder:s})=>{const[o,a]=R.useState(!1);return l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:o?"text":"password",name:n,id:r,value:t,onChange:e,placeholder:s,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 pr-10 text-white focus:outline-none focus:border-yellow-500"}),l.jsx("button",{type:"button",onClick:()=>a(!o),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-yellow-400","aria-label":o?"Esconder":"Mostrar",children:o?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]})},DS=({settings:t,onSave:e,onNavigate:n})=>{const[r,s]=R.useState(t),[o,a]=R.useState(!1);R.useEffect(()=>{s(t),a(!1)},[t]);const d=g=>{const{name:x,value:w}=g.target,[C,E]=x.split(".");s(N=>({...N,[C]:{...N[C],[E]:w}})),a(!0)},u=(g,x)=>{s(w=>({...w,[g]:{...w[g],enabled:x}})),a(!0)},f=()=>{e(r),a(!1)},p=()=>{s(t),a(!1)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[o&&l.jsx("p",{className:"text-sm text-yellow-400 mr-4",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:p,disabled:!o,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Descartar"}),l.jsx("button",{onClick:f,disabled:!o,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})}),l.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Frenet"}),l.jsx(wt,{checked:r.frenet.enabled,onChange:g=>u("frenet",g),labelId:"frenet-toggle"})]}),r.frenet.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"frenet-apiKey",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),l.jsx(fi,{id:"frenet-apiKey",name:"frenet.apiKey",value:r.frenet.apiKey,onChange:d})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"frenet-apiSecret",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Secret"}),l.jsx(fi,{id:"frenet-apiSecret",name:"frenet.apiSecret",value:r.frenet.apiSecret,onChange:d})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Melhor Envio"}),l.jsx(wt,{checked:r.melhorEnvio.enabled,onChange:g=>u("melhorEnvio",g),labelId:"melhor-envio-toggle"})]}),r.melhorEnvio.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"melhor-envio-token",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Token"}),l.jsx(fi,{id:"melhor-envio-token",name:"melhorEnvio.apiToken",value:r.melhorEnvio.apiToken,onChange:d})]})})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Correios"}),l.jsx(wt,{checked:r.correios.enabled,onChange:g=>u("correios",g),labelId:"correios-toggle"})]}),r.correios.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"correios-contrato",className:"block text-sm font-medium text-gray-400 mb-2",children:"Cdigo do Contrato"}),l.jsx("input",{id:"correios-contrato",name:"correios.contrato",value:r.correios.contrato,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"correios-senha",className:"block text-sm font-medium text-gray-400 mb-2",children:"Senha"}),l.jsx(fi,{id:"correios-senha",name:"correios.senha",value:r.correios.senha,onChange:d})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"SuperFrete"}),l.jsx(wt,{checked:r.superFrete.enabled,onChange:g=>u("superFrete",g),labelId:"superfrete-toggle"})]}),r.superFrete.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"superfrete-token",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Token"}),l.jsx(fi,{id:"superfrete-token",name:"superFrete.apiToken",value:r.superFrete.apiToken,onChange:d})]})})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Jadlog"}),l.jsx(wt,{checked:r.jadlog.enabled,onChange:g=>u("jadlog",g),labelId:"jadlog-toggle"})]}),r.jadlog.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"jadlog-token",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Token"}),l.jsx(fi,{id:"jadlog-token",name:"jadlog.apiToken",value:r.jadlog.apiToken,onChange:d})]})})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Loggi"}),l.jsx(wt,{checked:r.loggi.enabled,onChange:g=>u("loggi",g),labelId:"loggi-toggle"})]}),r.loggi.enabled&&l.jsx("div",{className:"p-6 space-y-4",children:l.jsxs("div",{children:[l.jsx("label",{htmlFor:"loggi-apiKey",className:"block text-sm font-medium text-gray-400 mb-2",children:"API Key"}),l.jsx(fi,{id:"loggi-apiKey",name:"loggi.apiKey",value:r.loggi.apiKey,onChange:d})]})})]})]})]})},EU=({isOpen:t,onClose:e,cartItems:n,onUpdateQuantity:r,onRemoveItem:s,onNavigate:o})=>{const a=R.useMemo(()=>n&&n.length>0?n.reduce((u,f)=>u+f.price*f.quantity,0):0,[n]),d=()=>{o("checkout")};return t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"fixed inset-0 bg-black/60 z-[99] animate-fade-in",onClick:e,"aria-hidden":"true"}),l.jsx("div",{className:`fixed top-0 right-0 h-full w-full max-w-lg bg-[rgb(var(--color-brand-dark))] z-[100] transform transition-transform duration-300 ease-in-out ${t?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"cart-heading",children:l.jsxs("div",{className:"flex flex-col h-full",children:[l.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-[rgb(var(--color-brand-gold))]/[.30]",children:[l.jsx("h2",{id:"cart-heading",className:"text-xl font-display text-[rgb(var(--color-brand-gold))]",children:"Seu Carrinho"}),l.jsx("button",{onClick:e,"aria-label":"Fechar carrinho",children:l.jsx(Qa,{className:"h-6 w-6 text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]"})})]}),n.length>0?l.jsxs(l.Fragment,{children:[l.jsx("main",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:n.map(u=>l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("img",{src:u.image,alt:u.name,className:"w-20 h-20 object-cover rounded-md"}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-[rgb(var(--color-brand-text-light))]",children:u.name}),u.variantText&&l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:u.variantText}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-gold))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.price)}),l.jsxs("div",{className:"flex items-center border border-[rgb(var(--color-brand-gray-light))] rounded-full justify-between w-28 mt-2",children:[l.jsx("button",{onClick:()=>r(u.id,u.quantity-1),"aria-label":`Diminuir quantidade de ${u.name}`,className:"px-3 py-1 text-lg text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-l-full",children:"-"}),l.jsx("span",{className:"text-sm font-semibold text-[rgb(var(--color-brand-text-light))]",children:u.quantity}),l.jsx("button",{onClick:()=>r(u.id,u.quantity+1),"aria-label":`Aumentar quantidade de ${u.name}`,className:"px-3 py-1 text-lg text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-r-full",children:"+"})]})]}),l.jsxs("div",{className:"text-right flex flex-col items-end",children:[l.jsx("p",{className:"font-bold text-[rgb(var(--color-brand-text-light))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.price*u.quantity)}),l.jsx("button",{onClick:()=>s(u.id),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))] mt-2","aria-label":`Remover ${u.name} do carrinho`,children:l.jsx(cn,{className:"w-5 h-5"})})]})]},u.id))}),l.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-[rgb(var(--color-brand-gray-light))] space-y-4 bg-[rgb(var(--color-brand-dark))]",children:[l.jsx("div",{className:"space-y-2 text-[rgb(var(--color-brand-text-light))]",children:l.jsxs("div",{className:"flex justify-between font-bold text-xl text-[rgb(var(--color-brand-gold))] border-t border-[rgb(var(--color-brand-gray-light))] pt-2 mt-2",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx("button",{onClick:e,className:"w-full bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] font-bold py-3 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"Continuar Comprando"}),l.jsx("button",{onClick:d,className:"w-full bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-3 px-4 rounded-md hover:bg-yellow-400",children:"Finalizar Compra"})]})]})]}):l.jsxs("div",{className:"flex-grow flex flex-col items-center justify-center text-center p-4",children:[l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))]",children:"Seu carrinho est vazio"}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))] mt-2",children:"Adicione produtos para v-los aqui."}),l.jsx("button",{onClick:e,className:"mt-6 bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-2 px-6 rounded-full hover:bg-yellow-400",children:"Voltar para a Loja"})]})]})}),l.jsx("style",{children:`
                @keyframes fade-in {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                .animate-fade-in {
                    animation: fade-in 0.3s ease-out forwards;
                }
            `})]}):null},TU=({cartItems:t,onViewCart:e})=>{const n=t&&t.length>0?t.reduce((s,o)=>s+o.quantity,0):0,r=t&&t.length>0?t.reduce((s,o)=>s+o.price*o.quantity,0):0;return l.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-40 flex justify-center animate-slide-up",children:[l.jsx("div",{className:"container mx-auto px-4 pb-4",children:l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gold))]/[0.30] rounded-lg shadow-lg flex items-center justify-between p-4",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"font-bold text-[rgb(var(--color-brand-text-light))]",children:[n," ",n>1?"Itens":"Item"," no Carrinho"]}),l.jsx("p",{className:"text-[rgb(var(--color-brand-gold))] font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r)})]}),l.jsxs("button",{onClick:e,className:"bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-2 px-6 rounded-full flex items-center gap-2 hover:bg-yellow-400 transition-colors",children:[l.jsx(Kh,{className:"w-5 h-5"}),"Ver Pedido"]})]})}),l.jsx("style",{children:`
                @keyframes slide-up {
                    from { transform: translateY(100%); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
                .animate-slide-up {
                    animation: slide-up 0.3s ease-out forwards;
                }
            `})]})},PS=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),Ru=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 002.25-2.25V6.75A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25v10.5A2.25 2.25 0 004.5 19.5z"})}),mg=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"})}),OS=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.5v15a1.5 1.5 0 001.5 1.5h13.5a1.5 1.5 0 001.5-1.5v-15M8.25 4.5h7.5"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 9.75h.008v.008H6V9.75zm3.75 0h.008v.008H9.75V9.75zm3.75 0h.008v.008H13.5V9.75zm3.75 0h.008v.008H17.25V9.75zm-1.5 3.75h.008v.008H15.75v-.008zm-3.75 0h.008v.008H12v-.008zm-3.75 0h.008v.008H8.25v-.008zM6 17.25h.008v.008H6v-.008zm3.75 0h.008v.008H9.75v-.008zm3.75 0h.008v.008H13.5v-.008zm3.75 0h.008v.008H17.25v-.008z"})]}),gg=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),kU=({cartItems:t,onBack:e,onFinalizePurchase:n,currentCustomer:r,coupons:s,orderBumpConfig:o,allProducts:a,paymentSettings:d,onUpdateQuantity:u,onRemoveItem:f})=>{const p=R.useMemo(()=>t&&t.length>0?t.reduce((xe,Ue)=>xe+Ue.price*Ue.quantity,0):0,[t]),[g,x]=R.useState(1),[w,C]=R.useState({email:(r==null?void 0:r.email)||"",customerName:(r==null?void 0:r.name)||"",customerCpf:"",customerPhone:"",zipCode:"",street:"",number:"",complement:"",neighborhood:"",city:"",state:""}),[E,N]=R.useState({number:"",name:"",expiry:"",cvv:""}),[k,_]=R.useState("unknown"),[j,P]=R.useState(""),[z,O]=R.useState(null),[D,te]=R.useState(0),[G,le]=R.useState(""),[Ne,ne]=R.useState(!1),[oe,me]=R.useState([]),[fe,q]=R.useState(null),[W,be]=R.useState(!1),[ve,Pe]=R.useState("pix"),[M,B]=R.useState(!1),[K,ie]=R.useState(null),[he,Ae]=R.useState(!1),[Me,Re]=R.useState(null),[_e,Zt]=R.useState(!1),[Ct,bt]=R.useState(2),[Ge,xt]=R.useState(""),Rt=R.useMemo(()=>o.enabled?a.find(xe=>xe.id===o.productId):null,[o,a]),Rs=W&&Rt?o.offerPrice:0,Is=(fe==null?void 0:fe.price)??0,Ft=R.useMemo(()=>{const xe=t&&t.length>0?t.reduce((Ye,en)=>Ye+en.price*en.quantity,0):0,Ue=W&&Rt?o.offerPrice:0,ze=(fe==null?void 0:fe.price)??0;let Qe=0;return z&&(z.type==="Porcentagem"?Qe=xe*(z.value/100):Qe=z.value),te(Qe),xe+ze-Qe+Ue},[t,fe,z,W,Rt,o.offerPrice]),Xn=w.customerName&&w.email&&w.customerCpf&&w.customerPhone,Ir=Xn&&fe;R.useEffect(()=>{g===3&&ve==="pix"&&!K&&d.asaas.enabled&&(async()=>{B(!0);try{const ze=await fetch("/api/payment/pix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Ft,customerName:w.customerName,customerCpf:w.customerCpf})});if(!ze.ok)throw new Error("Falha ao gerar o PIX");const Qe=await ze.json();ie({qrCodeUrl:Qe.encodedImage,copyPaste:Qe.payload})}catch(Ue){console.error("Erro ao gerar PIX com Asaas:",Ue),alert("No foi possvel gerar o PIX. Tente novamente.")}finally{B(!1)}})()},[g,ve,d.asaas.enabled,Ft,w.customerName,w.customerCpf]);const $t=xe=>{const{name:Ue,value:ze}=xe.target;C(Qe=>({...Qe,[Ue]:ze}))},Ui=xe=>xe.startsWith("4")?"visa":xe.match(/^5[1-5]/)?"mastercard":"unknown",Uo=xe=>{let{name:Ue,value:ze}=xe.target;Ue==="number"&&(ze=ze.replace(/\D/g,"").slice(0,16),_(Ui(ze)),ze=ze.replace(/(.{4})/g,"$1 ").trim()),Ue==="expiry"&&(ze=ze.replace(/\D/g,"").slice(0,4),ze.length>2&&(ze=`${ze.slice(0,2)}/${ze.slice(2)}`)),Ue==="cvv"&&(ze=ze.replace(/\D/g,"").slice(0,4)),N(Qe=>({...Qe,[Ue]:ze}))},dn=async xe=>{if(xe)try{const ze=await fetch("/api/shipping/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:{postal_code:"01001000"},to:{postal_code:xe},products:t.map(ut=>{const et=a.find(Gr=>Gr.id===ut.productId);return{id:ut.productId,width:(et==null?void 0:et.width)||0,height:(et==null?void 0:et.height)||0,length:(et==null?void 0:et.length)||0,weight:(et==null?void 0:et.weight)||0,insurance_value:ut.price,quantity:ut.quantity}})})});if(!ze.ok)throw new Error("Falha ao calcular o frete");const Ye=(await ze.json()).filter(ut=>{const et=parseFloat(ut.price),Gr=parseInt(ut.delivery_time);return!isNaN(et)&&et>0&&!isNaN(Gr)&&Gr>0}).map(ut=>({id:`${ut.id}-${ut.company.name}`,name:`${ut.name} (${ut.company.name})`,delivery_time:`${ut.delivery_time} dias teis`,price:parseFloat(ut.price)})),Ze=[{id:"retirada-local",name:"Retirada Local - Loja RS Prlipsi",delivery_time:"Disponvel em 1 dia til",price:0},...Ye];me(Ze),Ze.length>0&&q(Ze[0])}catch(Ue){console.error("Erro ao buscar opes de frete:",Ue);const ze=[{id:"sedex-fallback",name:"SEDEX (Erro na API)",delivery_time:"5 dias teis",price:50},{id:"pac-fallback",name:"PAC (Erro na API)",delivery_time:"10 dias teis",price:30},{id:"jadlog-fallback",name:"Jadlog (Erro na API)",delivery_time:"7 dias teis",price:40}];me(ze),q(ze[0])}},zo=async xe=>{const Ue=xe.target.value.replace(/\D/g,"");if(Ue.length===8){ne(!0),me([]),q(null);try{const Qe=await(await fetch(`https://viacep.com.br/ws/${Ue}/json/`)).json();Qe.erro?alert("CEP no encontrado."):(C(Ye=>({...Ye,street:Qe.logradouro,neighborhood:Qe.bairro,city:Qe.localidade,state:Qe.uf})),dn(Ue))}catch(ze){console.error("Erro ao buscar CEP:",ze)}finally{ne(!1)}}},Ds=()=>{le("");const xe=s.find(Ue=>Ue.code.toUpperCase()===j.toUpperCase()&&Ue.status==="Ativo");xe?O(xe):(le("Cupom invlido ou inativo."),te(0),O(null))},zi=()=>{K&&(navigator.clipboard.writeText(K.copyPaste),Ae(!0),setTimeout(()=>Ae(!1),2e3))},$r=async()=>{var ze,Qe;if(!Ir){alert("Por favor, preencha todos os dados e selecione um mtodo de envio.");return}B(!0),await new Promise(Ye=>setTimeout(Ye,2e3));let xe={},Ue="Pendente";try{if(ve==="boleto"&&d.asaas.enabled){const ut=await fetch("/api/payment/boleto",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:Ft,customerName:w.customerName,customerCpf:w.customerCpf,address:{street:w.street,number:w.number,complement:w.complement,neighborhood:w.neighborhood,zipCode:w.zipCode}})});if(!ut.ok)throw new Error("Falha ao gerar o boleto.");xe={boletoUrl:(await ut.json()).boletoUrl},Ue="Pendente"}else if(ve==="pix"){const ut=await fetch("/api/payment/pix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:`ORD-${Date.now()}`,amount:Ft,buyer:{name:w.customerName,email:w.email,cpf:w.customerCpf}})});if(!ut.ok)throw new Error("Falha ao gerar o PIX. Tente novamente.");const et=await ut.json();if(!et.success)throw new Error(et.error||"Erro ao gerar PIX");ie({qrCodeUrl:`data:image/png;base64,${et.qr_code_base64}`,copyPaste:et.qr_code}),xe={pixQrCodeUrl:`data:image/png;base64,${et.qr_code_base64}`,pixCopyableCode:et.qr_code,pixPaymentId:et.paymentId},Ue="Pendente"}else if(ve==="credit-card"&&d.mercadoPago.enabled){if(!E.number||!E.name||!E.expiry||!E.cvv)throw new Error("Preencha todos os dados do carto.");Ue="Pago"}const Ye=t.map(Ze=>({productId:Ze.productId,variantId:Ze.variantId,productName:Ze.name,quantity:Ze.quantity,price:Ze.price,variantText:Ze.variantText}));W&&Rt&&Ye.push({productId:Rt.id,variantId:((Qe=(ze=Rt.variants)==null?void 0:ze[0])==null?void 0:Qe.id)||"default",productName:`${Rt.name} (Oferta Especial)`,quantity:1,price:o.offerPrice});const en={id:`#${Date.now().toString().slice(-6)}`,date:new Date().toISOString(),customerName:w.customerName,customerEmail:w.email,customerCpf:w.customerCpf,customerPhone:w.customerPhone,shippingAddress:{street:w.street,number:w.number,complement:w.complement,neighborhood:w.neighborhood,city:w.city,state:w.state,zipCode:w.zipCode},items:Ye,subtotal:p,shippingCost:Is,discount:D,appliedCoupon:z==null?void 0:z.code,total:Ft,currency:"BRL",paymentStatus:Ue,fulfillmentStatus:"No Realizado",shippingMethod:fe.name,...xe};n(en)}catch(Ye){alert(`Erro ao processar pagamento: ${Ye instanceof Error?Ye.message:String(Ye)}`),B(!1)}},ol=()=>M?"Processando...":g!==3?"Finalizar Pedido":ve==="boleto"?"Gerar Boleto via Asaas":ve==="pix"?"Confirmar Pedido e Gerar PIX":"Pagar com Asaas";return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] text-[rgb(var(--color-brand-text-light))] min-h-screen",children:[l.jsx("header",{className:"bg-[rgb(var(--color-brand-gray))] backdrop-blur-sm border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 h-20 grid grid-cols-3 items-center",children:[l.jsx("div",{className:"justify-self-start",children:l.jsxs("button",{onClick:e,className:"flex items-center gap-2 text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]",children:[l.jsx(Mi,{className:"w-5 h-5"}),l.jsx("span",{className:"hidden sm:inline",children:"Voltar"})]})}),l.jsx("div",{className:"justify-self-center",children:l.jsx("span",{className:"text-3xl font-display text-[rgb(var(--color-brand-gold))]",children:"RS Prlipsi"})})]})}),l.jsx("main",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:l.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-12",children:[l.jsx("div",{className:"lg:col-span-7 mb-12 lg:mb-0",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`bg-[rgb(var(--color-brand-gray))] rounded-lg border-2 ${g===1?"border-[rgb(var(--color-brand-gold))]":"border-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsxs("button",{className:"w-full flex items-center gap-4 p-4 text-left",onClick:()=>x(1),children:[l.jsx(gg,{className:`w-8 h-8 ${g===1?"text-[rgb(var(--color-brand-gold))]":"text-[rgb(var(--color-brand-text-dim))]"}`}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold font-display",children:"1. Seus Dados"}),g>1&&Xn&&l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] truncate",children:[w.customerName," - ",w.email]})]})]}),g===1&&l.jsxs("div",{className:"p-6 border-t border-[rgb(var(--color-brand-gray-light))] space-y-4",children:[l.jsx("input",{type:"text",name:"customerName",value:w.customerName,onChange:$t,placeholder:"Nome completo *",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"email",name:"email",value:w.email,onChange:$t,placeholder:"E-mail *",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx("input",{type:"text",name:"customerCpf",value:w.customerCpf,onChange:$t,placeholder:"CPF *",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"tel",name:"customerPhone",value:w.customerPhone,onChange:$t,placeholder:"Telefone / WhatsApp *",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"})]}),l.jsx("button",{onClick:()=>x(2),disabled:!Xn,className:"w-full bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-3 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Continuar"})]})]}),l.jsxs("div",{className:`bg-[rgb(var(--color-brand-gray))] rounded-lg border-2 ${g===2?"border-[rgb(var(--color-brand-gold))]":"border-[rgb(var(--color-brand-gray-light))]"} ${Xn?"":"opacity-50"}`,children:[l.jsxs("button",{className:"w-full flex items-center gap-4 p-4 text-left",onClick:()=>Xn&&x(2),disabled:!Xn,children:[l.jsx(Wh,{className:`w-8 h-8 ${g===2?"text-[rgb(var(--color-brand-gold))]":"text-[rgb(var(--color-brand-text-dim))]"}`}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-lg font-bold font-display",children:"2. Entrega"}),g>2&&fe&&l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] truncate",children:[fe.name," - ",w.street,", ",w.number]})]})]}),g===2&&l.jsxs("div",{className:"p-6 border-t border-[rgb(var(--color-brand-gray-light))] space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-6 gap-4",children:[l.jsxs("div",{className:"relative sm:col-span-2",children:[l.jsx("input",{type:"text",name:"zipCode",value:w.zipCode,onChange:$t,onBlur:zo,placeholder:"CEP *",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),Ne&&l.jsx(_r,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-[rgb(var(--color-brand-gold))]"})]}),l.jsx("input",{type:"text",name:"street",value:w.street,onChange:$t,placeholder:"Endereo *",className:"sm:col-span-4 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"text",name:"number",value:w.number,onChange:$t,placeholder:"Nmero *",className:"sm:col-span-2 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"text",name:"complement",value:w.complement,onChange:$t,placeholder:"Complemento",className:"sm:col-span-4 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"text",name:"neighborhood",value:w.neighborhood,onChange:$t,placeholder:"Bairro *",className:"sm:col-span-3 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"text",name:"city",value:w.city,onChange:$t,placeholder:"Cidade *",className:"sm:col-span-2 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("input",{type:"text",name:"state",value:w.state,onChange:$t,placeholder:"UF *",className:"sm:col-span-1 w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"})]}),oe.length>0&&l.jsx("div",{className:"space-y-3 pt-4",children:oe.map(xe=>l.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border-2 cursor-pointer transition-colors ${(fe==null?void 0:fe.id)===xe.id?"bg-[rgb(var(--color-brand-gold))]/[.10] border-[rgb(var(--color-brand-gold))]":"bg-[rgb(var(--color-brand-dark))] border-[rgb(var(--color-brand-gray-light))] hover:border-[rgb(var(--color-brand-gray))]"}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"shipping",checked:(fe==null?void 0:fe.id)===xe.id,onChange:()=>q(xe),className:"h-4 w-4 text-[rgb(var(--color-brand-gold))] bg-[rgb(var(--color-brand-gray))] border-[rgb(var(--color-brand-gray-light))] focus:ring-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"ml-3 text-sm",children:[l.jsx("p",{className:"font-medium",children:xe.name}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:xe.delivery_time})]})]}),l.jsx("p",{className:"font-semibold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(xe.price)})]},xe.id))}),l.jsx("button",{onClick:()=>x(3),disabled:!Ir,className:"w-full bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-3 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed mt-4",children:"Continuar"})]})]}),l.jsxs("div",{className:`bg-[rgb(var(--color-brand-gray))] rounded-lg border-2 ${g===3?"border-[rgb(var(--color-brand-gold))]":"border-[rgb(var(--color-brand-gray-light))]"} ${Ir?"":"opacity-50"}`,children:[l.jsxs("button",{className:"w-full flex items-center gap-4 p-4 text-left",onClick:()=>Ir&&x(3),disabled:!Ir,children:[l.jsx(Ru,{className:`w-8 h-8 ${g===3?"text-[rgb(var(--color-brand-gold))]":"text-[rgb(var(--color-brand-text-dim))]"}`}),l.jsx("h2",{className:"text-lg font-bold font-display",children:"3. Pagamento"})]}),g===3&&l.jsxs("div",{className:"p-6 border-t border-[rgb(var(--color-brand-gray-light))] space-y-6",children:[l.jsxs("div",{className:"bg-gradient-to-br from-[rgb(var(--color-brand-gold))]/10 to-[rgb(var(--color-brand-dark))] p-5 rounded-lg border-2 border-[rgb(var(--color-brand-gold))]/40",children:[l.jsxs("h3",{className:"text-base font-bold text-[rgb(var(--color-brand-gold))] mb-4 flex items-center gap-2",children:[l.jsx(mg,{className:"w-6 h-6"}),"Escolha sua forma de pagamento"]}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-4 rounded-lg border-2 border-[rgb(var(--color-brand-gray-light))] hover:border-[rgb(var(--color-brand-gold))] hover:scale-105 transition-all cursor-pointer",onClick:()=>Pe("pix"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:"PIX"}),l.jsx("img",{src:"https://logopng.com.br/logos/pix-106.svg",alt:"PIX",className:"h-6 w-6"})]}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-gold))] mb-1",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft)}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:" Aprovao imediata"})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-4 rounded-lg border-2 border-[rgb(var(--color-brand-gray-light))] hover:border-[rgb(var(--color-brand-gold))] hover:scale-105 transition-all cursor-pointer",onClick:()=>Pe("saldo"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:"Saldo"}),l.jsxs("svg",{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]",fill:"currentColor",viewBox:"0 0 20 20",children:[l.jsx("path",{d:"M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z"}),l.jsx("path",{fillRule:"evenodd",d:"M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z",clipRule:"evenodd"})]})]}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-gold))] mb-1",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft)}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:" Sem taxas extras"})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-4 rounded-lg border-2 border-[rgb(var(--color-brand-gray-light))] hover:border-[rgb(var(--color-brand-gold))] hover:scale-105 transition-all cursor-pointer",onClick:()=>Pe("compartilhado"),children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-sm font-bold text-white",children:"Compartilhar"}),l.jsx("svg",{className:"w-6 h-6 text-[rgb(var(--color-brand-gold))]",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"})})]}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-gold))] mb-1",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft/Ct)}),l.jsxs("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:[" Por pessoa (",Ct,"x)"]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 bg-[rgb(var(--color-brand-dark))] p-1 rounded-lg",children:[d.mercadoPago.enabled&&l.jsxs("button",{onClick:()=>Pe("credit-card"),className:`py-2 px-3 text-sm font-semibold rounded-md transition-colors flex items-center justify-center gap-2 ${ve==="credit-card"?"bg-[rgb(var(--color-brand-gold))] text-black":"hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsx(Ru,{className:"w-5 h-5"})," Carto"]}),d.asaas.enabled&&l.jsxs("button",{onClick:()=>Pe("pix"),className:`py-2 px-3 text-sm font-semibold rounded-md transition-colors flex items-center justify-center gap-2 ${ve==="pix"?"bg-[rgb(var(--color-brand-gold))] text-black":"hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsx("img",{src:"https://logopng.com.br/logos/pix-106.svg",alt:"PIX",className:"h-4"})," Pix"]}),d.mercadoPago.enabled&&l.jsxs("button",{onClick:()=>Pe("boleto"),className:`py-2 px-3 text-sm font-semibold rounded-md transition-colors flex items-center justify-center gap-2 ${ve==="boleto"?"bg-[rgb(var(--color-brand-gold))] text-black":"hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsx(OS,{className:"w-5 h-5"})," Boleto"]}),l.jsxs("button",{onClick:()=>Pe("saldo"),className:`py-2 px-3 text-sm font-semibold rounded-md transition-colors flex items-center justify-center gap-2 ${ve==="saldo"?"bg-[rgb(var(--color-brand-gold))] text-black":"hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsx(Ru,{className:"w-5 h-5"})," Saldo"]}),l.jsxs("button",{onClick:()=>Pe("compartilhado"),className:`py-2 px-3 text-sm font-semibold rounded-md transition-colors flex items-center justify-center gap-2 ${ve==="compartilhado"?"bg-[rgb(var(--color-brand-gold))] text-black":"hover:bg-[rgb(var(--color-brand-gray-light))]"}`,children:[l.jsx(gg,{className:"w-5 h-5"})," Compartilhado"]})]}),ve==="credit-card"&&l.jsxs("div",{className:"space-y-3 pt-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",name:"number",value:E.number,onChange:Uo,placeholder:"Nmero do Carto",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 pr-12 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:[k==="visa"&&l.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",alt:"Visa",className:"h-4"}),k==="mastercard"&&l.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",alt:"Mastercard",className:"h-5"})]})]}),l.jsx("input",{type:"text",name:"name",value:E.name,onChange:Uo,placeholder:"Nome no Carto",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx("input",{type:"text",name:"expiry",value:E.expiry,onChange:Uo,placeholder:"Validade (MM/AA)",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",name:"cvv",value:E.cvv,onChange:Uo,placeholder:"CVV",className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-3 px-4 pr-10 focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center group cursor-help",children:l.jsx(mg,{className:"w-5 h-5 text-[rgb(var(--color-brand-text-dim))]"})})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 text-sm text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx(PS,{className:"w-4 h-4"}),l.jsx("span",{children:"Pagamento seguro por"}),l.jsx("span",{className:"font-bold",children:"RS Prlipsi"})]})]}),ve==="pix"&&l.jsxs("div",{className:"text-center p-4 bg-[rgb(var(--color-brand-dark))] rounded-lg",children:[l.jsx("p",{className:"font-semibold mb-2",children:"Pagamento via PIX"}),M&&!K?l.jsxs("div",{className:"h-[268px] flex flex-col items-center justify-center",children:[l.jsx(_r,{className:"w-10 h-10 text-[rgb(var(--color-brand-gold))] mb-2"})," ",l.jsx("p",{children:"Gerando PIX..."})]}):K?l.jsxs(l.Fragment,{children:[l.jsx("img",{src:K.qrCodeUrl,alt:"QR Code PIX",className:"mx-auto bg-white p-2 rounded-md"}),l.jsx("p",{className:"text-sm mt-4 text-[rgb(var(--color-brand-text-dim))]",children:"Aponte a cmera do seu celular para pagar."}),l.jsxs("button",{onClick:zi,className:"mt-4 w-full bg-[rgb(var(--color-brand-gray-light))] text-[rgb(var(--color-brand-text-light))] font-semibold py-3 px-4 rounded-md hover:bg-gray-600 flex items-center justify-center gap-2",children:[he?l.jsx(Va,{className:"w-5 h-5 text-green-400"}):l.jsx(Ha,{className:"w-5 h-5"}),he?"Cdigo Copiado!":"Copiar Cdigo PIX"]})]}):l.jsx("p",{children:"No foi possvel gerar o PIX."})]}),ve==="boleto"&&l.jsxs("div",{className:"text-center p-4 bg-[rgb(var(--color-brand-dark))] rounded-lg text-[rgb(var(--color-brand-text-dim))] space-y-3",children:[l.jsx("p",{className:"font-semibold text-white",children:"Boleto Bancrio"}),l.jsx(OS,{className:"w-16 h-16 mx-auto text-[rgb(var(--color-brand-gold))]"}),l.jsx("p",{children:"O boleto ser gerado aps a finalizao da compra e poder ser pago em qualquer banco ou casa lotrica at a data de vencimento."})]}),ve==="saldo"&&l.jsxs("div",{className:"text-center p-4 bg-[rgb(var(--color-brand-dark))] rounded-lg text-[rgb(var(--color-brand-text-dim))] space-y-3",children:[l.jsx("p",{className:"font-semibold text-white",children:"Pagar com Saldo RS Prlipsi"}),l.jsx(Ru,{className:"w-16 h-16 mx-auto text-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-4 rounded-lg",children:[l.jsx("p",{className:"text-white font-bold text-2xl",children:"R$ 0,00"}),l.jsx("p",{className:"text-sm",children:"Saldo disponvel"})]}),l.jsx("p",{children:"Use seu saldo RS Prlipsi para pagar este pedido. Rpido, seguro e sem taxas!"})]}),ve==="compartilhado"&&l.jsxs("div",{className:"p-4 bg-[rgb(var(--color-brand-dark))] rounded-lg text-[rgb(var(--color-brand-text-dim))] space-y-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"font-semibold text-white text-lg",children:"Pedido Compartilhado"}),l.jsx(gg,{className:"w-16 h-16 mx-auto text-[rgb(var(--color-brand-gold))] my-2"}),l.jsx("p",{className:"text-sm",children:"Divida o pagamento com vrias pessoas! Cada um paga sua parte."})]}),Ge?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-green-500/10 border border-green-500/30 p-4 rounded-lg",children:[l.jsx("p",{className:"text-green-400 font-bold text-center mb-2",children:" Link Gerado com Sucesso!"}),l.jsxs("p",{className:"text-xs text-center text-[rgb(var(--color-brand-text-dim))] mb-3",children:["Compartilhe este link com os ",Ct," participantes:"]}),l.jsx("div",{className:"bg-[rgb(var(--color-brand-dark))] p-3 rounded-md border border-[rgb(var(--color-brand-gray-light))] break-all text-sm",children:Ge}),l.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(Ge)},className:"mt-3 w-full bg-[rgb(var(--color-brand-gray-light))] text-white font-semibold py-2 px-4 rounded-md hover:bg-gray-600 flex items-center justify-center gap-2",children:[l.jsx(Ha,{className:"w-5 h-5"})," Copiar Link"]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-4 rounded-lg",children:[l.jsx("p",{className:"text-sm font-semibold text-white mb-2",children:"Cdigo de Compartilhamento:"}),l.jsx("p",{className:"text-3xl font-bold text-[rgb(var(--color-brand-gold))] text-center tracking-wider",children:Me==null?void 0:Me.shareCode}),l.jsx("p",{className:"text-xs text-center text-[rgb(var(--color-brand-text-dim))] mt-2",children:"Os participantes podem usar este cdigo para acessar o pedido"})]}),l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 p-4 rounded-lg text-sm",children:[l.jsx("p",{className:"text-blue-400 font-semibold mb-2",children:" Prximos passos:"}),l.jsxs("ul",{className:"space-y-1 text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("li",{children:" Compartilhe o link ou cdigo com os participantes"}),l.jsx("li",{children:" Acompanhe o status dos pagamentos em tempo real"}),l.jsx("li",{children:" O pedido ser processado automaticamente quando todos pagarem"})]})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 p-4 rounded-lg mb-4",children:[l.jsx("p",{className:"text-blue-400 font-semibold text-sm mb-2",children:" Como funciona o Pedido Unificado:"}),l.jsxs("ul",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] space-y-1",children:[l.jsx("li",{children:" Vrios consultores fazem pedidos individuais"}),l.jsx("li",{children:" Cada um adiciona seu ID ao grupo de unificao"}),l.jsx("li",{children:" Todos os pedidos so consolidados em uma nica entrega"}),l.jsx("li",{children:" Cada consultor paga apenas seu pedido"})]})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-4 rounded-lg",children:[l.jsx("label",{className:"block text-sm font-semibold text-white mb-2",children:"Criar Grupo de Unificao:"}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>bt(Math.max(2,Ct-1)),className:"bg-[rgb(var(--color-brand-gray-light))] text-white px-4 py-2 rounded-md hover:bg-gray-600 font-bold text-lg",children:"-"}),l.jsxs("div",{className:"flex-1 text-center",children:[l.jsx("p",{className:"text-3xl font-bold text-[rgb(var(--color-brand-gold))]",children:Ct}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"pessoas"})]}),l.jsx("button",{onClick:()=>bt(Math.min(6,Ct+1)),className:"bg-[rgb(var(--color-brand-gray-light))] text-white px-4 py-2 rounded-md hover:bg-gray-600 font-bold text-lg",children:"+"})]})]}),l.jsx("div",{className:"bg-gradient-to-r from-[rgb(var(--color-brand-gold))]/20 to-transparent p-4 rounded-lg border border-[rgb(var(--color-brand-gold))]/30",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Valor por pessoa"}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-gold))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft/Ct)})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Total do pedido"}),l.jsx("p",{className:"text-lg font-semibold text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft)})]})]})}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-4 rounded-lg text-left space-y-2",children:[l.jsxs("p",{className:"text-xs font-semibold text-white flex items-center gap-2",children:[l.jsx(mg,{className:"w-4 h-4"}),"Como funciona:"]}),l.jsxs("ul",{className:"text-sm space-y-1.5 text-[rgb(var(--color-brand-text-dim))]",children:[l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-gold))] font-bold",children:"1."}),l.jsx("span",{children:"Voc gera um link de pagamento compartilhado"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-gold))] font-bold",children:"2."}),l.jsxs("span",{children:["Envia para os ",Ct," participantes"]})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-gold))] font-bold",children:"3."}),l.jsx("span",{children:"Cada um paga sua parte via PIX, boleto ou saldo"})]}),l.jsxs("li",{className:"flex items-start gap-2",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-gold))] font-bold",children:"4."}),l.jsx("span",{children:"Entrega em um nico endereo quando atingir 100%"})]})]})]}),l.jsx("button",{onClick:async()=>{Zt(!0);try{const Ue=await(await fetch("/api/shared-order/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:`ORD-${Date.now()}`,totalAmount:Ft,items:t,deliveryAddress:w,organizer:{name:w.customerName,email:w.email,cpf:w.customerCpf},maxParticipants:Ct})})).json();Ue.success&&(xt(Ue.shareUrl),Re(Ue))}catch(xe){console.error("Erro ao criar pedido compartilhado:",xe)}Zt(!1)},disabled:_e,className:"w-full bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-3 rounded-md hover:bg-yellow-400 transition-colors flex items-center justify-center gap-2 disabled:bg-[rgb(var(--color-brand-gray-light))] disabled:cursor-not-allowed",children:_e?l.jsxs(l.Fragment,{children:[l.jsx(_r,{className:"w-5 h-5"})," Criando link..."]}):l.jsx(l.Fragment,{children:" Gerar Link Compartilhado"})})]})]}),l.jsxs("button",{onClick:$r,disabled:M,className:"mt-4 w-full bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] font-bold py-3 rounded-md hover:bg-yellow-400 transition-colors flex items-center justify-center gap-2 disabled:bg-[rgb(var(--color-brand-gray-light))] disabled:cursor-not-allowed",children:[M?l.jsx(_r,{className:"w-5 h-5"}):l.jsx(PS,{className:"w-5 h-5"}),ol()]})]})]})]})}),l.jsx("div",{className:"lg:col-span-5",children:l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] p-6 rounded-lg lg:sticky lg:top-28 self-start border border-[rgb(var(--color-brand-gray-light))]",children:[l.jsx("h2",{className:"text-xl font-bold font-display text-[rgb(var(--color-brand-text-light))] mb-4",children:"Resumo do Pedido"}),l.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2 mb-4 border-b border-[rgb(var(--color-brand-gray-light))] pb-4",children:t.map(xe=>l.jsxs("div",{className:"flex items-start gap-4 py-3",children:[l.jsxs("div",{className:"relative flex-shrink-0",children:[l.jsx("img",{src:xe.image,alt:xe.name,className:"w-16 h-16 object-cover rounded-md"}),l.jsx("span",{className:"absolute -top-2 -right-2 bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center",children:xe.quantity})]}),l.jsxs("div",{className:"flex-grow",children:[l.jsx("p",{className:"font-semibold text-sm leading-tight",children:xe.name}),xe.variantText&&l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:xe.variantText}),l.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[l.jsxs("div",{className:"flex items-center border border-[rgb(var(--color-brand-gray-light))] rounded-full",children:[l.jsx("button",{onClick:()=>u(xe.id,xe.quantity-1),className:"px-3 py-1 text-lg text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-l-full",children:"-"}),l.jsx("span",{className:"px-2 text-sm font-semibold",children:xe.quantity}),l.jsx("button",{onClick:()=>u(xe.id,xe.quantity+1),className:"px-3 py-1 text-lg text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))] rounded-r-full",children:"+"})]}),l.jsx("button",{onClick:()=>f(xe.id),className:"text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))]",title:"Remover item",children:l.jsx(cn,{className:"w-4 h-4"})})]})]}),l.jsx("p",{className:"font-semibold text-sm",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(xe.price*xe.quantity)})]},xe.id))}),Rt&&l.jsx("div",{className:"my-6 p-4 rounded-lg border-2 border-dashed border-[rgb(var(--color-brand-gold))] bg-[rgb(var(--color-brand-gold))]/[.05]",children:l.jsxs("label",{className:"flex items-center cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:W,onChange:()=>be(!W),className:"h-5 w-5 rounded bg-[rgb(var(--color-brand-gray))] border-[rgb(var(--color-brand-gray-light))] text-[rgb(var(--color-brand-gold))] focus:ring-[rgb(var(--color-brand-gold))]"}),l.jsxs("div",{className:"ml-3 flex-grow",children:[l.jsx("p",{className:"font-bold text-[rgb(var(--color-brand-gold))] text-sm",children:o.title}),l.jsxs("div",{className:"flex items-baseline gap-2",children:[l.jsx("span",{className:"text-md font-bold text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o.offerPrice)}),l.jsx("span",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] line-through",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Rt.price)})]})]})]})}),l.jsxs("div",{className:"space-y-2 py-4 border-b border-[rgb(var(--color-brand-gray-light))]",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{value:j,onChange:xe=>P(xe.target.value),type:"text",placeholder:"Cupom de desconto",className:"flex-grow bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-sm focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("button",{onClick:Ds,className:"font-semibold bg-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"Aplicar"})]}),G&&l.jsx("p",{className:"text-xs text-[rgb(var(--color-error))] mt-1",children:G}),z&&l.jsxs("p",{className:"text-xs text-[rgb(var(--color-success))] mt-1",children:['Cupom "',z.code,'" aplicado!']})]}),l.jsxs("div",{className:"space-y-2 pt-4",children:[l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Subtotal:"}),l.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p)})]}),W&&Rt&&l.jsxs("div",{className:"flex justify-between text-sm text-[rgb(var(--color-brand-gold))]",children:[l.jsx("span",{children:"Oferta Especial:"}),l.jsxs("span",{children:["+ ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Rs)]})]}),l.jsxs("div",{className:"flex justify-between text-sm",children:[l.jsx("span",{children:"Frete:"}),l.jsx("span",{children:fe?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Is):"Aguardando CEP"})]}),D>0&&l.jsxs("div",{className:"flex justify-between text-sm text-[rgb(var(--color-success))]",children:[l.jsx("span",{children:"Desconto:"}),l.jsxs("span",{children:["- ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(D)]})]}),l.jsxs("div",{className:"flex justify-between font-bold text-xl text-[rgb(var(--color-brand-gold))] border-t border-[rgb(var(--color-brand-gray-light))] pt-2 mt-2",children:[l.jsx("span",{children:"Total:"}),l.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(Ft)})]})]})]})})]})})]})},AU=({onRegisterSuccess:t,onBackToHome:e})=>{const[n,r]=R.useState({sponsorId:"RS Prlipsi",nomeCompleto:"",cpfCnpj:"",email:"",telefone:"",cep:"",logradouro:"",numero:"",complemento:"",bairro:"",cidade:"",estado:"",nomeLoja:"",codigoIndicacao:"",senha:"",confirmarSenha:"",termos:!1}),[s,o]=R.useState(!1),[a,d]=R.useState(!1),[u,f]=R.useState(""),p=C=>{const{name:E,value:N,type:k,checked:_}=C.target;r(j=>({...j,[E]:k==="checkbox"?_:N}))},g=C=>{if(C.preventDefault(),f(""),n.senha!==n.confirmarSenha){f("As senhas no coincidem.");return}if(!n.termos){f("Voc deve aceitar os termos e condies.");return}console.log("Dados do formulrio:",n),alert("Cadastro realizado com sucesso! Em breve, nossa equipe da sede entrar em contato para finalizar seu credenciamento."),t()},x=({children:C})=>l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-x-6 gap-y-4",children:C}),w=({name:C,label:E,type:N="text",required:k=!1,fullWidth:_=!1,value:j,onChange:P,children:z})=>l.jsxs("div",{className:_?"sm:col-span-2":"",children:[l.jsx("label",{htmlFor:C,className:"block text-sm font-medium text-gray-300 mb-1",children:E}),l.jsx("input",{type:N,name:C,id:C,required:k,value:j,onChange:P,className:"appearance-none block w-full px-3 py-2 border-2 border-gray-700 bg-gray-800 text-white placeholder-gray-500 rounded-md focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm"}),z]});return l.jsx("div",{className:"bg-black min-h-screen py-12 px-4",children:l.jsxs("div",{className:"w-full max-w-4xl mx-auto p-8 space-y-8 bg-black border-2 border-yellow-600/30 rounded-lg shadow-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center font-display text-yellow-400",children:"Cadastro de Lojista"}),l.jsx("p",{className:"mt-2 text-center text-gray-400",children:"Faa parte do nosso marketplace premium."})]}),l.jsxs("form",{className:"mt-8 space-y-8",onSubmit:g,children:[l.jsxs("fieldset",{className:"space-y-4",children:[l.jsx("legend",{className:"text-lg font-semibold text-white mb-4",children:"Patrocinador"}),l.jsx(x,{children:l.jsx(w,{name:"sponsorId",label:"ID ou Nome do Patrocinador",required:!0,value:n.sponsorId,onChange:p,fullWidth:!0,children:l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Seu cadastro deve ser vinculado a um patrocinador. Se no tiver um, mantenha o ID da empresa. O link de indicao preencher este campo automaticamente."})})})]}),l.jsxs("fieldset",{className:"space-y-4 border-t-2 border-gray-800 pt-6",children:[l.jsx("legend",{className:"text-lg font-semibold text-white px-2 -mt-10 bg-black",children:"Dados Pessoais"}),l.jsxs(x,{children:[l.jsx(w,{name:"nomeCompleto",label:"Nome Completo",required:!0,value:n.nomeCompleto,onChange:p,fullWidth:!0}),l.jsx(w,{name:"cpfCnpj",label:"CPF / CNPJ",required:!0,value:n.cpfCnpj,onChange:p}),l.jsx(w,{name:"email",label:"E-mail",type:"email",required:!0,value:n.email,onChange:p}),l.jsx(w,{name:"telefone",label:"Telefone / WhatsApp",type:"tel",required:!0,value:n.telefone,onChange:p})]})]}),l.jsxs("fieldset",{className:"space-y-4 border-t-2 border-gray-800 pt-6",children:[l.jsx("legend",{className:"text-lg font-semibold text-white px-2 -mt-10 bg-black",children:"Endereo"}),l.jsxs(x,{children:[l.jsx(w,{name:"cep",label:"CEP",required:!0,value:n.cep,onChange:p}),l.jsx(w,{name:"logradouro",label:"Logradouro (Rua, Av.)",required:!0,value:n.logradouro,onChange:p}),l.jsx(w,{name:"numero",label:"Nmero",required:!0,value:n.numero,onChange:p}),l.jsx(w,{name:"complemento",label:"Complemento",value:n.complemento,onChange:p}),l.jsx(w,{name:"bairro",label:"Bairro",required:!0,value:n.bairro,onChange:p}),l.jsx(w,{name:"cidade",label:"Cidade",required:!0,value:n.cidade,onChange:p}),l.jsx(w,{name:"estado",label:"Estado (UF)",required:!0,value:n.estado,onChange:p})]})]}),l.jsxs("fieldset",{className:"space-y-4 border-t-2 border-gray-800 pt-6",children:[l.jsx("legend",{className:"text-lg font-semibold text-white px-2 -mt-10 bg-black",children:"Dados da Loja"}),l.jsxs(x,{children:[l.jsx(w,{name:"nomeLoja",label:"Nome da Loja",required:!0,value:n.nomeLoja,onChange:p,fullWidth:!0}),l.jsx(w,{name:"codigoIndicacao",label:"Cdigo de Indicao",required:!0,value:n.codigoIndicacao,onChange:p,fullWidth:!0,children:l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Este cadastro deve ser feito atravs de um indicador da Sede."})})]})]}),l.jsxs("fieldset",{className:"space-y-4 border-t-2 border-gray-800 pt-6",children:[l.jsx("legend",{className:"text-lg font-semibold text-white px-2 -mt-10 bg-black",children:"Dados de Acesso"}),l.jsxs(x,{children:[l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"senha",className:"block text-sm font-medium text-gray-300 mb-1",children:"Senha"}),l.jsx("input",{id:"senha",name:"senha",type:s?"text":"password",required:!0,value:n.senha,onChange:p,className:"appearance-none block w-full px-3 py-2 border-2 border-gray-700 bg-gray-800 text-white rounded-md pr-10"}),l.jsx("button",{type:"button",onClick:()=>o(!s),className:"absolute bottom-2 right-3 text-gray-400",children:s?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"confirmarSenha",className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirmar Senha"}),l.jsx("input",{id:"confirmarSenha",name:"confirmarSenha",type:a?"text":"password",required:!0,value:n.confirmarSenha,onChange:p,className:"appearance-none block w-full px-3 py-2 border-2 border-gray-700 bg-gray-800 text-white rounded-md pr-10"}),l.jsx("button",{type:"button",onClick:()=>d(!a),className:"absolute bottom-2 right-3 text-gray-400",children:a?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]})]})]}),u&&l.jsx("p",{className:"text-red-500 text-sm text-center !mt-4",children:u}),l.jsx("div",{className:"pt-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"termos",name:"termos",type:"checkbox",checked:n.termos,onChange:p,className:"h-4 w-4 text-yellow-500 bg-gray-700 border-gray-600 rounded focus:ring-yellow-600"}),l.jsxs("label",{htmlFor:"termos",className:"ml-2 block text-sm text-gray-300",children:["Eu li e aceito os ",l.jsx("a",{href:"#",className:"font-medium text-yellow-500 hover:text-yellow-400",children:"Termos e Condies"})]})]})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-black bg-yellow-500 hover:bg-yellow-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-yellow-500 transition-colors mt-6",children:"Finalizar Cadastro"})})]}),l.jsx("div",{className:"text-center",children:l.jsx("button",{onClick:e,className:"font-medium text-sm text-yellow-500 hover:text-yellow-400",children:"Voltar para a loja"})})]})})},LS=({settings:t,onSave:e,onNavigate:n})=>{const[r,s]=R.useState(t),[o,a]=R.useState(!1);R.useEffect(()=>{s(t)},[t]),R.useEffect(()=>{const E=JSON.stringify(r)!==JSON.stringify(t);a(E)},[r,t]);const d=E=>{const{name:N,value:k}=E.target;s(_=>({..._,[N]:N==="frequency"?k:Number(k)}))},u=(E,N,k)=>{s(_=>({..._,tiers:_.tiers.map(j=>j.id===E?{...j,[N]:N==="name"?k:Number(k)}:j)}))},f=(E,N,k)=>{s(_=>({..._,tiers:_.tiers.map(j=>j.id===E?{...j,[N]:k}:j)}))},p=()=>{const E={id:`tier-${Date.now()}`,name:"Novo Nvel",pointsRequired:r.tiers.length>0?Math.max(...r.tiers.map(N=>N.pointsRequired))+1e3:1e3,reward:r.tiers.length>0?Math.max(...r.tiers.map(N=>N.reward))+100:100,pinImageUrl:"",bannerImageUrl:""};s(N=>({...N,tiers:[...N.tiers,E]}))},g=E=>{s(N=>({...N,tiers:N.tiers.filter(k=>k.id!==E)}))},x=()=>{e(r)},w=()=>{s(t)},C=["Semanal","Mensal","Trimestral","Semestral","Anual"];return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[o&&l.jsx("p",{className:"text-sm text-yellow-400 mr-4",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:w,disabled:!o,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"Descartar"}),l.jsx("button",{onClick:x,disabled:!o,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar"})]})}),l.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Frequncia da Premiao"}),l.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Escolha a periodicidade em que os bnus do plano de compensao sero calculados e pagos."}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"frequency",className:"block text-sm font-medium text-gray-300 mb-2",children:"Frequncia de Pagamento"}),l.jsx("select",{id:"frequency",name:"frequency",value:r.frequency,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500",children:C.map(E=>l.jsx("option",{value:E,children:E},E))})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Regras de Pontuao"}),l.jsx("p",{className:"text-sm text-gray-400 mb-6",children:"Defina quantos pontos so gerados por cada R$ 1 vendido em cada modalidade."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"dropshippingPointsPerBrl",className:"block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2",children:[l.jsx(A0,{className:"w-5 h-5 text-yellow-400"}),"Pontos por R$1 vendido (Dropshipping)"]}),l.jsx("input",{type:"number",id:"dropshippingPointsPerBrl",name:"dropshippingPointsPerBrl",value:r.dropshippingPointsPerBrl,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500",step:"0.1"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"affiliatePointsPerBrl",className:"block text-sm font-medium text-gray-300 mb-2 flex items-center gap-2",children:[l.jsx(Cs,{className:"w-5 h-5 text-yellow-400"}),"Pontos por R$1 vendido (Afiliados)"]}),l.jsx("input",{type:"number",id:"affiliatePointsPerBrl",name:"affiliatePointsPerBrl",value:r.affiliatePointsPerBrl,onChange:d,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white focus:outline-none focus:border-yellow-500",step:"0.1"})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-lg font-semibold text-white",children:["Nveis de Premiao (",r.frequency,")"]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Crie os nveis de recompensa baseados na pontuao acumulada no perodo."})]}),l.jsx("button",{onClick:p,className:"text-sm font-bold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"+ Adicionar Nvel"})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm",children:[l.jsx("thead",{className:"text-left text-gray-400",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3",children:"Nome do Nvel"}),l.jsx("th",{className:"px-6 py-3",children:"PIN"}),l.jsx("th",{className:"px-6 py-3",children:"Banner do Prmio"}),l.jsx("th",{className:"px-6 py-3",children:"Pontos Necessrios"}),l.jsx("th",{className:"px-6 py-3",children:"Recompensa (Bnus R$)"}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Aes"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-800",children:r.tiers.map(E=>l.jsxs("tr",{children:[l.jsx("td",{className:"px-6 py-4 align-middle",children:l.jsx("input",{type:"text",value:E.name,onChange:N=>u(E.id,"name",N.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white"})}),l.jsx("td",{className:"px-6 py-4 align-middle",children:l.jsx("div",{className:"w-24",children:l.jsx(Dn,{currentImage:E.pinImageUrl,onImageUpload:N=>f(E.id,"pinImageUrl",N),placeholderText:"Subir Pin",aspectRatio:"square"})})}),l.jsx("td",{className:"px-6 py-4 align-middle",children:l.jsx("div",{className:"w-40",children:l.jsx(Dn,{currentImage:E.bannerImageUrl,onImageUpload:N=>f(E.id,"bannerImageUrl",N),placeholderText:"Subir Banner",aspectRatio:"video"})})}),l.jsx("td",{className:"px-6 py-4 align-middle",children:l.jsx("input",{type:"number",value:E.pointsRequired,onChange:N=>u(E.id,"pointsRequired",N.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white"})}),l.jsx("td",{className:"px-6 py-4 align-middle",children:l.jsx("input",{type:"number",value:E.reward,onChange:N=>u(E.id,"reward",N.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white"})}),l.jsx("td",{className:"px-6 py-4 text-right align-middle",children:l.jsx("button",{onClick:()=>g(E.id),className:"p-2 text-gray-500 hover:text-red-500","aria-label":`Excluir nvel ${E.name}`,children:l.jsx(cn,{className:"w-5 h-5"})})})]},E.id))})]})})]})]})]})},_U=t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:[l.jsx("circle",{cx:"9",cy:"6",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"6",r:"1.5"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"12",r:"1.5"}),l.jsx("circle",{cx:"9",cy:"18",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"18",r:"1.5"})]}),BS=({banners:t,onUpdate:e})=>{const[n,r]=R.useState(t),[s,o]=R.useState(null),[a,d]=R.useState(null);R.useEffect(()=>{r(t)},[t]);const u=JSON.stringify(n)!==JSON.stringify(t),f=()=>{e(n)},p=()=>{r(t)},g=(_,j,P)=>{const z=[...n];z[_]={...z[_],[j]:P},r(z)},x=()=>{const _={id:`dash-banner-${Date.now()}`,desktopImage:"",mobileImage:"",link:"#"};r(j=>[...j,_])},w=_=>{r(j=>j.filter(P=>P.id!==_))},C=(_,j)=>{o(j),_.dataTransfer.effectAllowed="move"},E=_=>{_!==s&&d(_)},N=()=>{if(s===null||a===null||s===a)return;const _=[...n],j=_.splice(s,1)[0];_.splice(a,0,j),r(_)},k=()=>{N(),o(null),d(null)};return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"flex items-center gap-4",children:[u&&l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-gold))]",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:p,disabled:!u,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] disabled:opacity-50 disabled:cursor-not-allowed",children:"Descartar"}),l.jsx("button",{onClick:f,disabled:!u,className:"text-sm font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Salvar Banners"})]})}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))] max-w-2xl",children:"Gerencie os banners que aparecem na pgina inicial do seu painel de administrador. Use este espao para anncios internos, lanamentos e comunicados."}),l.jsx("button",{onClick:x,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] whitespace-nowrap",children:"+ Adicionar Banner"})]}),l.jsxs("div",{className:"space-y-4",children:[n.map((_,j)=>l.jsxs(vn.Fragment,{children:[a===j&&s!==j&&l.jsx("div",{className:"h-2 my-2 border-2 border-dashed border-[rgb(var(--color-brand-gold))] rounded-lg bg-[rgb(var(--color-brand-gold))]/[.10]"}),l.jsxs("div",{draggable:!0,onDragStart:P=>C(P,j),onDragEnter:()=>E(j),onDragEnd:k,onDragOver:P=>P.preventDefault(),className:`bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg space-y-3 transition-opacity ${s===j?"opacity-50":"opacity-100"}`,children:[l.jsxs("div",{className:"flex justify-between items-center p-4",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"cursor-grab text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-text-light))]","aria-label":"Arrastar para reordenar",children:l.jsx(_U,{className:"w-5 h-5"})}),l.jsxs("h4",{className:"text-md text-[rgb(var(--color-brand-text-light))] font-semibold",children:["Banner ",j+1]})]}),l.jsx("button",{onClick:()=>w(_.id),className:"p-1 text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-error))]",children:l.jsx(cn,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:`carouselLink${j}`,className:"block text-sm font-medium text-[rgb(var(--color-brand-text-dim))] mb-1",children:"Link do Banner (opcional)"}),l.jsx("input",{id:`carouselLink${j}`,type:"text",value:_.link,onChange:P=>g(j,"link",P.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))]"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(Dn,{currentImage:_.desktopImage,onImageUpload:P=>g(j,"desktopImage",P),placeholderText:"Imagem para Desktop (1200x400 recomendado)"}),l.jsx(Dn,{currentImage:_.mobileImage,onImageUpload:P=>g(j,"mobileImage",P),placeholderText:"Imagem para Celular (400x300 recomendado)"})]})]})]})]},_.id)),n.length===0&&l.jsx("p",{className:"text-center text-[rgb(var(--color-brand-text-dim))] py-8",children:"Nenhum banner encontrado. Adicione um para comear."})]})]})]})},_b=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),jU=t=>l.jsxs("svg",{...t,viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:[l.jsx("circle",{cx:"9",cy:"6",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"6",r:"1.5"}),l.jsx("circle",{cx:"9",cy:"12",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"12",r:"1.5"}),l.jsx("circle",{cx:"9",cy:"18",r:"1.5"}),l.jsx("circle",{cx:"15",cy:"18",r:"1.5"})]}),MU={AffiliateIcon:{component:qC,name:"Afiliado"},DistributionIcon:{component:A0,name:"Dropshipping"},TruckIcon:{component:Wh,name:"Logstica"},GlobalIcon:{component:HC,name:"Global"},StarOutlineIcon:{component:VC,name:"Estrela"},TrophyIcon:{component:_0,name:"Trofu"},WalletIcon:{component:j0,name:"Carteira"},OrdersIcon:{component:M0,name:"Pedidos"},ProductsIcon:{component:FC,name:"Produtos"},AnalyticsIcon:{component:$C,name:"Analytics"},TagIcon:{component:R0,name:"Tag/Promoo"},MegaphoneIcon:{component:Cs,name:"Marketing"},LinkChainIcon:{component:Yh,name:"Link"},UserIcon:{component:Ts,name:"Usurio"},BellIcon:{component:I0,name:"Notificao"},ShoppingBagIcon:{component:GC,name:"Loja"}},bg={userInfo:"Carto de Usurio",referralLinks:"Links de Indicao e Afiliado",qualificationProgress:"Barra de Qualificao/Progresso",adminBanner:"Banner do Painel",bonusCards:"Cartes de Bnus",incentivesProgram:"Programa de Incentivos",networkActivity:"Atividade da Rede",shortcut:"Atalho Rpido",performanceChart:"Grfico de Desempenho"},RU=[{key:"cycleBonus",label:"Bnus Ciclo Global"},{key:"topSigmeBonus",label:"Bnus Top Sigme"},{key:"careerPlanBonus",label:"Bnus Plano de Carreira"},{key:"affiliateBonus",label:"Bnus Venda Afiliado"},{key:"dropshipBonus",label:"Bnus Dropship"},{key:"logisticsBonus",label:"Bnus de Logstica"},{key:"custom",label:"Nenhum (Valor Manual)"}],IU={id:"ID do Usurio",graduation:"Graduao",accountStatus:"Status da Conta",monthlyActivity:"Atividade Mensal",category:"Categoria",referralLink:"Link de Indicao",affiliateLink:"Link de Afiliado"},US=({settings:t,onUpdate:e})=>{const[n,r]=R.useState(t),[s,o]=R.useState(!1),[a,d]=R.useState(null),[u,f]=R.useState(null);R.useEffect(()=>{r(t)},[t]);const p=JSON.stringify(n)!==JSON.stringify(t),g=()=>e(n),x=()=>r(t),w=(O,D)=>{const te={id:`comp-${Date.now()}`,type:O,column:D,enabled:!0,title:bg[O],...O==="userInfo"&&{visibleFields:{id:!0,graduation:!0,accountStatus:!0,monthlyActivity:!0,category:!0,referralLink:!0,affiliateLink:!0}},...O==="qualificationProgress"&&{value:50,max:100,startLabel:"Incio",endLabel:"Meta"},...O==="shortcut"&&{url:"#",icon:"LinkChainIcon"}};r(G=>({...G,components:[...G.components,te]})),o(!1)},C=(O,D,te)=>{r(G=>({...G,components:G.components.map(le=>le.id===O?{...le,[D]:te}:le)}))},E=(O,D,te)=>{r(G=>({...G,components:G.components.map(le=>le.id===O?{...le,visibleFields:{...le.visibleFields,[D]:te}}:le)}))},N=(O,D,te)=>{r(G=>({...G,cards:G.cards.map(le=>le.id===O?{...le,[D]:te}:le)}))},k=[{type:"userInfo",column:"left"},{type:"referralLinks",column:"left"},{type:"qualificationProgress",column:"left"},{type:"adminBanner",column:"right"},{type:"bonusCards",column:"right"},{type:"incentivesProgram",column:"right"},{type:"networkActivity",column:"right"},{type:"shortcut",column:"right"},{type:"performanceChart",column:"right"}],_=n.components.filter(O=>O.column==="left"),j=n.components.filter(O=>O.column==="right"),P=(O,D)=>{if(!a)return;const te=a.col,G=a.index,le=[..._],Ne=[...j];let ne;te==="left"?ne=le.splice(G,1)[0]:ne=Ne.splice(G,1)[0],ne.column=O,O==="left"?le.splice(D,0,ne):Ne.splice(D,0,ne),r(oe=>({...oe,components:[...le,...Ne]}))},z=(O,D,te)=>l.jsxs("div",{draggable:!0,onDragStart:G=>{G.dataTransfer.effectAllowed="move",d({col:D,index:te})},onDragEnd:()=>{d(null),f(null)},onDragOver:G=>{G.preventDefault(),((u==null?void 0:u.index)!==te||u.col!==D)&&f({col:D,index:te})},onDrop:G=>{G.preventDefault(),P(D,te)},className:`bg-black border border-gray-800 rounded-lg p-4 space-y-3 transition-opacity ${(a==null?void 0:a.index)===te&&(a==null?void 0:a.col)===D?"opacity-30":""}`,children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(jU,{className:"w-5 h-5 text-gray-500 cursor-grab"}),l.jsx("h4",{className:"font-semibold text-white",children:bg[O.type]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx(wt,{checked:O.enabled,onChange:G=>C(O.id,"enabled",G),labelId:`toggle-${O.id}`}),l.jsx("button",{onClick:()=>r(G=>({...G,components:G.components.filter(le=>le.id!==O.id)})),className:"text-gray-500 hover:text-red-500",children:l.jsx(cn,{className:"w-5 h-5"})})]})]}),O.title!==void 0&&O.type!=="userInfo"&&O.type!=="referralLinks"&&l.jsx("input",{type:"text",value:O.title,onChange:G=>C(O.id,"title",G.target.value),placeholder:"Ttulo do Componente",className:"w-full text-sm bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white"}),O.type==="userInfo"&&O.visibleFields&&l.jsx("div",{className:"grid grid-cols-2 gap-2 border-t border-gray-700 pt-3",children:Object.entries(IU).map(([G,le])=>l.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[l.jsx("input",{type:"checkbox",checked:O.visibleFields[G],onChange:Ne=>E(O.id,G,Ne.target.checked),className:"h-4 w-4 rounded bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),le]},G))})]},O.id);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-gray-800",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:"Editor do Painel"}),l.jsxs("div",{className:"flex items-center gap-4",children:[p&&l.jsx("p",{className:"text-sm text-yellow-400",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:x,disabled:!p,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50",children:"Descartar"}),l.jsx("button",{onClick:g,disabled:!p,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50",children:"Salvar Layout"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white px-2",children:"Coluna Esquerda"}),_.map((O,D)=>z(O,"left",D))]}),l.jsxs("div",{className:"lg:col-span-2 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white px-2",children:"Coluna Direita"}),j.map((O,D)=>z(O,"right",D))]})]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-center gap-2 text-sm font-semibold bg-gray-800 text-white py-3 px-4 rounded-lg border-2 border-dashed border-gray-700 hover:border-yellow-500 hover:text-yellow-400",children:[l.jsx(_b,{className:"w-5 h-5"})," Adicionar Componente"]}),s&&l.jsx("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-72 bg-black border border-gray-700 rounded-lg shadow-lg z-10 p-2",children:k.map(O=>l.jsxs("button",{onClick:()=>w(O.type,O.column),className:"w-full text-left px-3 py-2 text-sm text-gray-300 hover:bg-gray-800 rounded-md",children:[bg[O.type]," ",l.jsxs("span",{className:"text-xs text-gray-500",children:["(",O.column==="left"?"Esquerda":"Direita",")"]})]},O.type))})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-3",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Cartes de Bnus"}),n.cards.map(O=>l.jsxs("div",{className:"grid grid-cols-3 gap-3 items-center",children:[l.jsx("input",{type:"text",value:O.title,onChange:D=>N(O.id,"title",D.target.value),placeholder:"Ttulo do Carto",className:"col-span-1 w-full text-sm bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white"}),l.jsx("select",{value:O.dataKey,onChange:D=>N(O.id,"dataKey",D.target.value),className:"col-span-1 w-full text-sm bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white",children:RU.map(D=>l.jsx("option",{value:D.key,children:D.label},D.key))}),l.jsx("select",{value:O.icon,onChange:D=>N(O.id,"icon",D.target.value),className:"col-span-1 w-full text-sm bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white",children:Object.entries(MU).map(([D,{name:te}])=>l.jsx("option",{value:D,children:te},D))})]},O.id))]})]})},zS=({collections:t,onNavigate:e,onCollectionDelete:n})=>{const[r,s]=R.useState(""),o=R.useMemo(()=>t.filter(a=>a.title.toLowerCase().includes(r.toLowerCase())),[t,r]);return l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsx("div",{className:"p-4 border-b border-gray-800",children:l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar colees...",value:r,onChange:a=>s(a.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-10 text-white"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-gray-400"})})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[l.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-black",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Coleo"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Produtos"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Aes"})]})}),l.jsx("tbody",{children:o.map(a=>l.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("img",{src:a.imageUrl,alt:a.title,className:"w-16 h-10 object-cover rounded-md bg-gray-700"}),l.jsxs("div",{children:[l.jsx("button",{onClick:()=>e("addEditCollection",a),className:"font-medium text-white hover:text-yellow-400",children:a.title}),l.jsx("p",{className:"text-xs text-gray-500",children:a.description})]})]})}),l.jsx("td",{className:"px-6 py-4",children:0}),l.jsx("td",{className:"px-6 py-4 text-right",children:l.jsxs("div",{className:"flex items-center justify-end gap-4",children:[l.jsx("button",{onClick:()=>e("addEditCollection",a),className:"text-gray-400 hover:text-yellow-400",children:l.jsx(Xh,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>n(a.id),className:"text-gray-400 hover:text-red-500",children:l.jsx(cn,{className:"w-5 h-5"})})]})})]},a.id))})]})})]})},qS=({collection:t,products:e,onSave:n,onCancel:r,onNavigate:s})=>{const o=!!t,[a,d]=R.useState({title:"",description:"",imageUrl:"",productIds:[],...t}),u=R.useRef(null),[f,p]=R.useState(""),g=N=>{const{name:k,value:_}=N.target;d(j=>({...j,[k]:_}))},x=N=>{d(k=>{const _=k.productIds||[];return _.includes(N)?{...k,productIds:_.filter(j=>j!==N)}:{...k,productIds:[..._,N]}})},w=N=>{if(N.preventDefault(),!a.title){alert("A coleo precisa de um ttulo.");return}n(a)},C=()=>{var N;(N=u.current)==null||N.requestSubmit()},E=e.filter(N=>N.name.toLowerCase().includes(f.toLowerCase()));return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-gray-800",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:o?"Editar Coleo":"Criar Coleo"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:r,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"Descartar"}),l.jsx("button",{type:"button",onClick:C,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:"Salvar"})]})]}),l.jsxs("form",{onSubmit:w,ref:u,className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-white mb-2",children:"Ttulo"}),l.jsx("input",{type:"text",name:"title",id:"title",value:a.title,onChange:g,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-white mb-2",children:"Descrio"}),l.jsx("textarea",{name:"description",id:"description",value:a.description,onChange:g,rows:4,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Produtos na Coleo"}),l.jsx("input",{type:"text",placeholder:"Buscar produtos para adicionar...",value:f,onChange:N=>p(N.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white mb-4"}),l.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2 pr-2",children:E.map(N=>{var k;return l.jsxs("label",{className:"flex items-center p-2 bg-gray-800/50 rounded-md cursor-pointer hover:bg-gray-800",children:[l.jsx("input",{type:"checkbox",checked:(k=a.productIds)==null?void 0:k.includes(N.id),onChange:()=>x(N.id),className:"h-4 w-4 rounded bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("img",{src:N.images[0],alt:N.name,className:"w-10 h-10 object-cover rounded-md ml-4"}),l.jsx("span",{className:"ml-3 text-sm text-white",children:N.name})]},N.id)})})]})]}),l.jsx("div",{className:"space-y-8",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Imagem da Coleo"}),l.jsx(Dn,{currentImage:a.imageUrl||"",onImageUpload:N=>d(k=>({...k,imageUrl:N})),placeholderText:"Imagem da Coleo"})]})})]})]})},DU=({collection:t,products:e,onProductClick:n,onBack:r,wishlist:s,onToggleWishlist:o})=>{const[a,d]=R.useState("default"),u=e.filter(p=>t.productIds.includes(p.id)),f=R.useMemo(()=>{const p=[...u];switch(a){case"price-asc":p.sort((g,x)=>g.price-x.price);break;case"price-desc":p.sort((g,x)=>x.price-g.price);break;case"name-asc":p.sort((g,x)=>g.name.localeCompare(x.name));break}return p},[u,a]);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))]",children:[l.jsxs("div",{className:"relative h-64 md:h-80 flex items-center justify-center text-center bg-cover bg-center",style:{backgroundImage:`url(${t.imageUrl})`},children:[l.jsx("div",{className:"absolute inset-0 bg-[rgb(var(--color-brand-dark))]/[.70]"}),l.jsxs("div",{className:"relative z-10 px-4",children:[l.jsx("h1",{className:"text-4xl md:text-6xl font-bold font-display text-[rgb(var(--color-brand-text-light))] drop-shadow-lg",children:t.title}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg md:text-xl text-[rgb(var(--color-brand-text-dim))]",children:t.description})]})]}),l.jsx("section",{className:"py-16 sm:py-24",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-8",children:[l.jsx("button",{onClick:r,className:"text-sm text-[rgb(var(--color-brand-text-dim))] hover:text-[rgb(var(--color-brand-gold))]",children:" Voltar"}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"sort-order",className:"sr-only",children:"Ordenar por"}),l.jsxs("select",{id:"sort-order",value:a,onChange:p=>d(p.target.value),className:"bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 px-3 text-[rgb(var(--color-brand-text-light))] text-sm focus:outline-none focus:border-[rgb(var(--color-brand-gold))]",children:[l.jsx("option",{value:"default",children:"Padro"}),l.jsx("option",{value:"price-asc",children:"Preo: Menor para Maior"}),l.jsx("option",{value:"price-desc",children:"Preo: Maior para Menor"}),l.jsx("option",{value:"name-asc",children:"Nome: A-Z"})]})]})]}),f.length>0?l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:f.map(p=>l.jsx(jc,{product:p,onClick:()=>n(p),wishlist:s,onToggleWishlist:o},p.id))}):l.jsx("p",{className:"text-center text-[rgb(var(--color-brand-text-dim))]",children:"Nenhum produto encontrado nesta coleo."})]})})]})},PU=({customers:t,onLoginSuccess:e,onBackToHome:n,onNavigateToRegister:r,onNavigateToForgotPassword:s})=>{const[o,a]=R.useState("rsprolipsioficial@gmail.com"),[d,u]=R.useState("Yannis784512@"),[f,p]=R.useState(""),[g,x]=R.useState(!1),w=C=>{C.preventDefault(),p("");const E=t.find(N=>N.email.toLowerCase()===o.toLowerCase());E&&E.passwordHash===d?e(E):p("E-mail ou senha invlidos.")};return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black py-12",children:l.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-black border-2 border-yellow-600/30 rounded-lg shadow-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center font-display text-yellow-400",children:"Login"}),l.jsx("p",{className:"mt-2 text-center text-gray-400",children:"Acesse sua conta para ver seus pedidos."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"E-mail"}),l.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:o,onChange:C=>a(C.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",placeholder:"E-mail"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),l.jsx("input",{id:"password",name:"password",type:g?"text":"password",autoComplete:"current-password",required:!0,value:d,onChange:C=>u(C.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm pr-10",placeholder:"Senha"}),l.jsx("button",{type:"button",onClick:()=>x(!g),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400 hover:text-yellow-400","aria-label":g?"Esconder senha":"Mostrar senha",children:g?l.jsx(qa,{className:"h-5 w-5"}):l.jsx(Mo,{className:"h-5 w-5"})})]})]}),f&&l.jsx("p",{className:"text-red-500 text-sm text-center !mt-4",children:f}),l.jsx("div",{className:"text-right",children:l.jsx("button",{onClick:s,type:"button",className:"text-sm font-medium text-yellow-500 hover:text-yellow-400",children:"Esqueceu sua senha?"})}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-md text-black bg-amber-500 hover:bg-amber-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-amber-500 transition-colors mt-2",children:"Entrar"})})]}),l.jsxs("div",{className:"text-center space-y-2",children:[l.jsxs("p",{className:"text-sm text-gray-400",children:["No tem uma conta?"," ",l.jsx("button",{onClick:r,className:"font-medium text-yellow-500 hover:text-yellow-400",children:"Cadastre-se"})]}),l.jsx("button",{onClick:n,className:"font-medium text-sm text-yellow-500 hover:text-yellow-400",children:"Voltar para a loja"})]})]})})},OU=({onRegister:t,onBackToHome:e,onNavigateToLogin:n,existingCustomers:r})=>{const[s,o]=R.useState({name:"",email:"",password:"",confirmPassword:""}),[a,d]=R.useState(""),[u,f]=R.useState(!1),[p,g]=R.useState(!1),x=C=>{const{name:E,value:N}=C.target;o(k=>({...k,[E]:N}))},w=C=>{if(C.preventDefault(),d(""),!s.name.trim()||!s.email.trim()||!s.password){d("Por favor, preencha todos os campos.");return}if(s.password!==s.confirmPassword){d("As senhas no coincidem.");return}if(r.some(E=>E.email.toLowerCase()===s.email.toLowerCase())){d("Este e-mail j est em uso.");return}t({name:s.name,email:s.email,passwordHash:s.password})};return l.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black py-12",children:l.jsxs("div",{className:"w-full max-w-md p-8 space-y-8 bg-black border-2 border-yellow-600/30 rounded-lg shadow-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center font-display text-yellow-400",children:"Criar Conta"}),l.jsx("p",{className:"mt-2 text-center text-gray-400",children:"Crie sua conta para uma experincia de compra mais rpida."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:w,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"sr-only",children:"Nome Completo"}),l.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:s.name,onChange:x,className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",placeholder:"Nome Completo"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"E-mail"}),l.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:s.email,onChange:x,className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm",placeholder:"E-mail"})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),l.jsx("input",{id:"password",name:"password",type:u?"text":"password",required:!0,value:s.password,onChange:x,className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm pr-10",placeholder:"Senha"}),l.jsx("button",{type:"button",onClick:()=>f(!u),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400",children:l.jsx(Mo,{className:"h-5 w-5"})})]}),l.jsxs("div",{className:"relative",children:[l.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirmar Senha"}),l.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:p?"text":"password",required:!0,value:s.confirmPassword,onChange:x,className:"appearance-none relative block w-full px-3 py-3 border-2 border-slate-700 bg-slate-800 text-white placeholder-gray-400 rounded-md focus:outline-none focus:ring-amber-500 focus:border-amber-500 sm:text-sm pr-10",placeholder:"Confirmar Senha"}),l.jsx("button",{type:"button",onClick:()=>g(!p),className:"absolute inset-y-0 right-0 px-3 flex items-center text-gray-400",children:l.jsx(Mo,{className:"h-5 w-5"})})]})]}),a&&l.jsx("p",{className:"text-red-500 text-sm text-center !mt-4",children:a}),l.jsx("div",{children:l.jsx("button",{type:"submit",className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-md text-black bg-amber-500 hover:bg-amber-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 focus:ring-amber-500 transition-colors mt-6",children:"Cadastrar"})})]}),l.jsxs("div",{className:"text-center space-y-2",children:[l.jsxs("p",{className:"text-sm text-gray-400",children:["J tem uma conta?"," ",l.jsx("button",{onClick:n,className:"font-medium text-yellow-500 hover:text-yellow-400",children:"Entrar"})]}),l.jsx("button",{onClick:e,className:"font-medium text-sm text-yellow-500 hover:text-yellow-400",children:"Voltar para a loja"})]})]})})},LU=({status:t})=>{const e="px-2 py-1 text-xs font-semibold rounded-full inline-flex items-center",n={Pago:"bg-green-500/20 text-green-300",Pendente:"bg-yellow-500/20 text-yellow-300",Reembolsado:"bg-gray-500/20 text-gray-300","Parcialmente Pago":"bg-cyan-500/20 text-cyan-300",Cancelado:"bg-red-500/20 text-red-300"};return l.jsx("span",{className:`${e} ${n[t]}`,children:t})},BU=({status:t})=>{const e="px-2 py-1 text-xs font-semibold rounded-full inline-flex items-center",n={Realizado:"bg-green-500/20 text-green-300","No Realizado":"bg-orange-500/20 text-orange-300",Parcial:"bg-purple-500/20 text-purple-300"};return l.jsx("span",{className:`${e} ${n[t]}`,children:t})},UU=({customer:t,orders:e,onNavigate:n})=>{const r=e.filter(u=>u.customerId===t.id).sort((u,f)=>new Date(f.date).getTime()-new Date(u.date).getTime()),[s,o]=R.useState("orders"),a=()=>l.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Histrico de Pedidos"}),r.length>0?l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[l.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-black/30",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3",children:"Pedido"}),l.jsx("th",{className:"px-4 py-3",children:"Data"}),l.jsx("th",{className:"px-4 py-3 text-right",children:"Total"}),l.jsx("th",{className:"px-4 py-3",children:"Pagamento"}),l.jsx("th",{className:"px-4 py-3",children:"Status"})]})}),l.jsx("tbody",{className:"divide-y divide-gray-800",children:r.map(u=>l.jsxs("tr",{className:"hover:bg-gray-800/50",children:[l.jsx("td",{className:"px-4 py-3 font-medium text-yellow-400",children:u.id}),l.jsx("td",{className:"px-4 py-3",children:new Date(u.date).toLocaleDateString("pt-BR")}),l.jsx("td",{className:"px-4 py-3 text-right",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(u.total)}),l.jsx("td",{className:"px-4 py-3",children:l.jsx(LU,{status:u.paymentStatus})}),l.jsx("td",{className:"px-4 py-3",children:l.jsx(BU,{status:u.fulfillmentStatus})})]},u.id))})]})}):l.jsx("p",{children:"Voc ainda no fez nenhum pedido."})]}),d=()=>l.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Meus Dados"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-gray-400",children:"Nome Completo"}),l.jsx("p",{className:"text-white p-2 bg-gray-800 rounded-md mt-1",children:t.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm text-gray-400",children:"E-mail"}),l.jsx("p",{className:"text-white p-2 bg-gray-800 rounded-md mt-1",children:t.email})]}),l.jsx("button",{className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"Alterar Senha"})]})]});return l.jsxs("div",{className:"container mx-auto px-4 py-12",children:[l.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-display text-white mb-8",children:"Minha Conta"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[l.jsx("aside",{className:"md:col-span-1",children:l.jsxs("div",{className:"bg-gray-900 p-4 rounded-lg sticky top-24",children:[l.jsxs("div",{className:"text-center mb-4",children:[l.jsx(Ts,{className:"w-16 h-16 mx-auto text-yellow-400 bg-gray-800 p-3 rounded-full"}),l.jsx("h2",{className:"mt-2 text-xl font-bold text-white truncate",children:t.name}),l.jsx("p",{className:"text-sm text-gray-400 truncate",children:t.email})]}),l.jsxs("nav",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>o("orders"),className:`w-full flex items-center gap-3 text-left p-3 rounded-lg font-semibold transition-colors ${s==="orders"?"bg-yellow-500/10 text-yellow-400":"text-gray-300 hover:bg-gray-800"}`,children:[l.jsx(M0,{className:"w-5 h-5"}),"Histrico de Pedidos"]}),l.jsxs("button",{onClick:()=>o("profile"),className:`w-full flex items-center gap-3 text-left p-3 rounded-lg font-semibold transition-colors ${s==="profile"?"bg-yellow-500/10 text-yellow-400":"text-gray-300 hover:bg-gray-800"}`,children:[l.jsx(Ts,{className:"w-5 h-5"}),"Meus Dados"]})]})]})}),l.jsxs("main",{className:"md:col-span-3",children:[s==="orders"&&a(),s==="profile"&&d()]})]})]})},zU=({onProductClick:t,products:e,orders:n,wishlist:r,onToggleWishlist:s})=>{const o=new Map;n.forEach(u=>{u.paymentStatus==="Pago"&&u.items.forEach(f=>{o.set(f.productId,(o.get(f.productId)||0)+f.quantity)})});const d=Array.from(o.entries()).sort((u,f)=>f[1]-u[1]).map(u=>u[0]).map(u=>e.find(f=>f.id===u&&f.status==="Ativo")).filter(u=>!!u).slice(0,4);if(d.length===0){const u=[...e].filter(f=>f.status==="Ativo").sort((f,p)=>p.reviewCount-f.reviewCount).slice(0,4);return u.length===0?null:l.jsx("section",{id:"bestsellers",className:"py-16 sm:py-24 bg-black",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display text-white",children:"Populares"}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-gray-400",children:"Conhea os favoritos dos nossos clientes e as tendncias do momento."})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:u.map(f=>l.jsx(jc,{product:f,onClick:()=>t(f),wishlist:r,onToggleWishlist:s},f.id))})]})})}return l.jsx("section",{id:"bestsellers",className:"py-16 sm:py-24 bg-black",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display text-white",children:"Mais Vendidos"}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-gray-400",children:"Conhea os favoritos dos nossos clientes e as tendncias do momento."})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8",children:d.map(u=>l.jsx(jc,{product:u,onClick:()=>t(u),wishlist:r,onToggleWishlist:s},u.id))})]})})},qU=({collection:t,onClick:e})=>l.jsxs("div",{onClick:e,className:"relative aspect-video sm:aspect-[4/3] rounded-lg overflow-hidden group cursor-pointer border-2 border-transparent hover:border-[rgb(var(--color-brand-gold))] focus-within:border-[rgb(var(--color-brand-gold))] transition-all duration-300 shadow-lg",role:"button",tabIndex:0,onKeyPress:n=>n.key==="Enter"&&e(),children:[l.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-110"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6",children:[l.jsx("h3",{className:"text-2xl font-bold font-display text-white transition-colors duration-300 group-hover:text-[rgb(var(--color-brand-gold))]",children:t.title}),l.jsx("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))] mt-1 line-clamp-2",children:t.description})]})]}),HU=({collections:t,onNavigate:e})=>!t||t.length===0?null:l.jsx("section",{id:"featured-collections",className:"py-16 sm:py-24 bg-[rgb(var(--color-brand-gray))]",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold font-display text-[rgb(var(--color-brand-text-light))]",children:"Explore Nossas Colees"}),l.jsx("p",{className:"mt-4 max-w-2xl mx-auto text-lg text-[rgb(var(--color-brand-text-dim))]",children:"Descubra selees de produtos curadas para o seu estilo de vida."})]}),l.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map(n=>l.jsx(qU,{collection:n,onClick:()=>e("collectionView",n)},n.id))})]})}),HS=({links:t,onNavigate:e})=>{const[n,r]=R.useState(""),s=R.useMemo(()=>t.filter(o=>o.name&&o.name.toLowerCase().includes(n.toLowerCase())||o.email&&o.email.toLowerCase().includes(n.toLowerCase())),[t,n]);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:[l.jsx("div",{className:"p-4 border-b border-[rgb(var(--color-brand-gray-light))]",children:l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar por nome ou e-mail do afiliado...",value:n,onChange:o=>r(o.target.value),className:"w-full bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 pl-10 pr-4 text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] focus:outline-none focus:border-[rgb(var(--color-brand-gold))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-[rgb(var(--color-brand-text-dim))]",children:[l.jsx("thead",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] uppercase bg-[rgb(var(--color-brand-dark))]",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Afiliado"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-center",children:"Comisso"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Vendas Totais"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Ganhos Totais"}),l.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Saldo a Pagar"})]})}),l.jsx("tbody",{children:s.map(o=>{const a=o.totalEarnings-o.paidOut;return l.jsxs("tr",{className:"border-b border-[rgb(var(--color-brand-gray-light))] hover:bg-[rgb(var(--color-brand-gray))]/[.50]",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("p",{className:"font-medium text-[rgb(var(--color-brand-text-light))]",children:o.name}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:o.email})]}),l.jsxs("td",{className:"px-6 py-4 text-center text-lg font-bold text-[rgb(var(--color-brand-text-light))]",children:[o.commissionRate,"%"]}),l.jsx("td",{className:"px-6 py-4 text-right",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o.totalSales)}),l.jsx("td",{className:"px-6 py-4 text-right text-[rgb(var(--color-success))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(o.totalEarnings)}),l.jsx("td",{className:"px-6 py-4 text-right text-[rgb(var(--color-brand-gold))] font-bold",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(a)})]},o.id)})})]})})]})},VS=({userProfile:t,onSave:e})=>{const[n,r]=R.useState(t),s=JSON.stringify(n)!==JSON.stringify(t),o=p=>{const{name:g,value:x}=p.target;r(w=>({...w,[g]:x}))},a=p=>{r(g=>({...g,avatarUrl:p}))},d=()=>{e(n)},u=()=>{r(t)},f=({label:p,value:g})=>l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-400",children:p}),l.jsx("p",{className:"mt-1 text-white p-2 bg-gray-800 rounded-md",children:g})]});return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[s&&l.jsx("p",{className:"text-sm text-yellow-400",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:u,disabled:!s,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50",children:"Descartar"}),l.jsx("button",{onClick:d,disabled:!s,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50",children:"Salvar Perfil"})]})}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 text-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Foto de Perfil"}),l.jsx(Dn,{currentImage:n.avatarUrl,onImageUpload:a,placeholderText:"Alterar foto",aspectRatio:"square"})]})}),l.jsx("div",{className:"lg:col-span-2",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-400 mb-1",children:"Nome de Exibio"}),l.jsx("input",{id:"name",name:"name",type:"text",value:n.name,onChange:o,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-400 mb-1",children:"E-mail"}),l.jsx("input",{id:"email",name:"email",type:"email",value:n.email,onChange:o,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"cpfCnpj",className:"block text-sm font-medium text-gray-400 mb-1",children:"CPF/CNPJ"}),l.jsx("input",{id:"cpfCnpj",name:"cpfCnpj",type:"text",value:n.cpfCnpj,onChange:o,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-400 mb-1",children:"Telefone"}),l.jsx("input",{id:"phone",name:"phone",type:"tel",value:n.phone,onChange:o,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]}),l.jsx(f,{label:"ID",value:n.id}),l.jsx(f,{label:"Graduao",value:n.graduation}),l.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[l.jsx(f,{label:"Status da Conta",value:n.accountStatus}),l.jsx(f,{label:"Atividade Mensal",value:n.monthlyActivity})]}),l.jsx(f,{label:"Link de Indicao",value:n.referralLink}),l.jsx(f,{label:"Link de Afiliado",value:n.affiliateLink})]})})]})]})},FS=()=>l.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-20 bg-black border-2 border-dashed border-gray-800 rounded-lg h-[75vh]",children:[l.jsx(Hh,{className:"w-20 h-20 text-yellow-400 mb-4"}),l.jsx("h3",{className:"text-3xl font-bold font-display text-white",children:"RS Studio: Em Breve"}),l.jsx("p",{className:"mt-2 max-w-lg text-gray-400",children:"Uma sute de ferramentas com IA para automao e criao de contedo est chegando para revolucionar seu negcio. Aguarde!"})]});var f0=function(t,e){return f0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},f0(t,e)};function ck(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Vh=function(){return Vh=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Vh.apply(this,arguments)};function rl(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function dk(t,e,n,r){var s=arguments.length,o=s<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,n,r);else for(var d=t.length-1;d>=0;d--)(a=t[d])&&(o=(s<3?a(o):s>3?a(e,n,o):a(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function uk(t,e){return function(n,r){e(n,r,t)}}function hk(t,e,n,r,s,o){function a(k){if(k!==void 0&&typeof k!="function")throw new TypeError("Function expected");return k}for(var d=r.kind,u=d==="getter"?"get":d==="setter"?"set":"value",f=!e&&t?r.static?t:t.prototype:null,p=e||(f?Object.getOwnPropertyDescriptor(f,r.name):{}),g,x=!1,w=n.length-1;w>=0;w--){var C={};for(var E in r)C[E]=E==="access"?{}:r[E];for(var E in r.access)C.access[E]=r.access[E];C.addInitializer=function(k){if(x)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(k||null))};var N=(0,n[w])(d==="accessor"?{get:p.get,set:p.set}:p[u],C);if(d==="accessor"){if(N===void 0)continue;if(N===null||typeof N!="object")throw new TypeError("Object expected");(g=a(N.get))&&(p.get=g),(g=a(N.set))&&(p.set=g),(g=a(N.init))&&s.unshift(g)}else(g=a(N))&&(d==="field"?s.unshift(g):p[u]=g)}f&&Object.defineProperty(f,r.name,p),x=!0}function fk(t,e,n){for(var r=arguments.length>2,s=0;s<e.length;s++)n=r?e[s].call(t,n):e[s].call(t);return r?n:void 0}function pk(t){return typeof t=="symbol"?t:"".concat(t)}function mk(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function gk(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ye(t,e,n,r){function s(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function d(p){try{f(r.next(p))}catch(g){a(g)}}function u(p){try{f(r.throw(p))}catch(g){a(g)}}function f(p){p.done?o(p.value):s(p.value).then(d,u)}f((r=r.apply(t,e||[])).next())})}function bk(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,s,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=d(0),a.throw=d(1),a.return=d(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function d(f){return function(p){return u([f,p])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;a&&(a=0,f[0]&&(n=0)),n;)try{if(r=1,s&&(o=f[0]&2?s.return:f[0]?s.throw||((o=s.return)&&o.call(s),0):s.next)&&!(o=o.call(s,f[1])).done)return o;switch(s=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,s=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=e.call(t,n)}catch(p){f=[6,p],s=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var xf=Object.create?(function(t,e,n,r){r===void 0&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}):(function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]});function xk(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&xf(e,t,n)}function Fh(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function jb(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,o=[],a;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)o.push(s.value)}catch(d){a={error:d}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(a)throw a.error}}return o}function yk(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(jb(arguments[e]));return t}function vk(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),s=0,e=0;e<n;e++)for(var o=arguments[e],a=0,d=o.length;a<d;a++,s++)r[s]=o[a];return r}function wk(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Xa(t){return this instanceof Xa?(this.v=t,this):new Xa(t)}function Sk(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),s,o=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",a),s[Symbol.asyncIterator]=function(){return this},s;function a(w){return function(C){return Promise.resolve(C).then(w,g)}}function d(w,C){r[w]&&(s[w]=function(E){return new Promise(function(N,k){o.push([w,E,N,k])>1||u(w,E)})},C&&(s[w]=C(s[w])))}function u(w,C){try{f(r[w](C))}catch(E){x(o[0][3],E)}}function f(w){w.value instanceof Xa?Promise.resolve(w.value.v).then(p,g):x(o[0][2],w)}function p(w){u("next",w)}function g(w){u("throw",w)}function x(w,C){w(C),o.shift(),o.length&&u(o[0][0],o[0][1])}}function Ck(t){var e,n;return e={},r("next"),r("throw",function(s){throw s}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(s,o){e[s]=t[s]?function(a){return(n=!n)?{value:Xa(t[s](a)),done:!1}:o?o(a):a}:o}}function Nk(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Fh=="function"?Fh(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(a){return new Promise(function(d,u){a=t[o](a),s(d,u,a.done,a.value)})}}function s(o,a,d,u){Promise.resolve(u).then(function(f){o({value:f,done:d})},a)}}function Ek(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var VU=Object.create?(function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}):function(t,e){t.default=e},p0=function(t){return p0=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},p0(t)};function Tk(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=p0(t),r=0;r<n.length;r++)n[r]!=="default"&&xf(e,t,n[r]);return VU(e,t),e}function kk(t){return t&&t.__esModule?t:{default:t}}function Ak(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function _k(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n}function jk(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Mk(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,s;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var FU=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function Rk(t){function e(o){t.error=t.hasError?new FU(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var n,r=0;function s(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(s);if(n.dispose){var o=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(o).then(s,function(a){return e(a),s()})}else r|=1}catch(a){e(a)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return s()}function Ik(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,s,o,a){return r?e?".jsx":".js":s&&(!o||!a)?n:s+o+"."+a.toLowerCase()+"js"}):t}const $U={__extends:ck,__assign:Vh,__rest:rl,__decorate:dk,__param:uk,__esDecorate:hk,__runInitializers:fk,__propKey:pk,__setFunctionName:mk,__metadata:gk,__awaiter:ye,__generator:bk,__createBinding:xf,__exportStar:xk,__values:Fh,__read:jb,__spread:yk,__spreadArrays:vk,__spreadArray:wk,__await:Xa,__asyncGenerator:Sk,__asyncDelegator:Ck,__asyncValues:Nk,__makeTemplateObject:Ek,__importStar:Tk,__importDefault:kk,__classPrivateFieldGet:Ak,__classPrivateFieldSet:_k,__classPrivateFieldIn:jk,__addDisposableResource:Mk,__disposeResources:Rk,__rewriteRelativeImportExtension:Ik},GU=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Mk,get __assign(){return Vh},__asyncDelegator:Ck,__asyncGenerator:Sk,__asyncValues:Nk,__await:Xa,__awaiter:ye,__classPrivateFieldGet:Ak,__classPrivateFieldIn:jk,__classPrivateFieldSet:_k,__createBinding:xf,__decorate:dk,__disposeResources:Rk,__esDecorate:hk,__exportStar:xk,__extends:ck,__generator:bk,__importDefault:kk,__importStar:Tk,__makeTemplateObject:Ek,__metadata:gk,__param:uk,__propKey:pk,__read:jb,__rest:rl,__rewriteRelativeImportExtension:Ik,__runInitializers:fk,__setFunctionName:mk,__spread:yk,__spreadArray:wk,__spreadArrays:vk,__values:Fh,default:$U},Symbol.toStringTag,{value:"Module"})),JU=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Mb extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class $S extends Mb{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class GS extends Mb{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class JS extends Mb{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var m0;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(m0||(m0={}));class KU{constructor(e,{headers:n={},customFetch:r,region:s=m0.Any}={}){this.url=e,this.headers=n,this.region=s,this.fetch=JU(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ye(this,arguments,void 0,function*(n,r={}){var s;try{const{headers:o,method:a,body:d,signal:u}=r;let f={},{region:p}=r;p||(p=this.region);const g=new URL(`${this.url}/${n}`);p&&p!=="any"&&(f["x-region"]=p,g.searchParams.set("forceFunctionRegion",p));let x;d&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",x=d):typeof d=="string"?(f["Content-Type"]="text/plain",x=d):typeof FormData<"u"&&d instanceof FormData?x=d:(f["Content-Type"]="application/json",x=JSON.stringify(d)):x=d;const w=yield this.fetch(g.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),o),body:x,signal:u}).catch(k=>{throw k.name==="AbortError"?k:new $S(k)}),C=w.headers.get("x-relay-error");if(C&&C==="true")throw new GS(w);if(!w.ok)throw new JS(w);let E=((s=w.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),N;return E==="application/json"?N=yield w.json():E==="application/octet-stream"||E==="application/pdf"?N=yield w.blob():E==="text/event-stream"?N=w:E==="multipart/form-data"?N=yield w.formData():N=yield w.text(),{data:N,error:null,response:w}}catch(o){return o instanceof Error&&o.name==="AbortError"?{data:null,error:new $S(o)}:{data:null,error:o,response:o instanceof JS||o instanceof GS?o.context:void 0}}})}}var fn={};const sl=a5(GU);var Iu={},Du={},Pu={},Ou={},Lu={},Bu={},KS;function Dk(){if(KS)return Bu;KS=1,Object.defineProperty(Bu,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Bu.default=t,Bu}var WS;function Pk(){if(WS)return Lu;WS=1,Object.defineProperty(Lu,"__esModule",{value:!0});const e=sl.__importDefault(Dk());class n{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let d=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async u=>{var f,p,g,x;let w=null,C=null,E=null,N=u.status,k=u.statusText;if(u.ok){if(this.method!=="HEAD"){const z=await u.text();z===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((f=this.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?C=z:C=JSON.parse(z))}const j=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),P=(g=u.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");j&&P&&P.length>1&&(E=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(C)&&(C.length>1?(w={code:"PGRST116",details:`Results contain ${C.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},C=null,E=null,N=406,k="Not Acceptable"):C.length===1?C=C[0]:C=null)}else{const j=await u.text();try{w=JSON.parse(j),Array.isArray(w)&&u.status===404&&(C=[],w=null,N=200,k="OK")}catch{u.status===404&&j===""?(N=204,k="No Content"):w={message:j}}if(w&&this.isMaybeSingle&&(!((x=w==null?void 0:w.details)===null||x===void 0)&&x.includes("0 rows"))&&(w=null,N=200,k="OK"),w&&this.shouldThrowOnError)throw new e.default(w)}return{error:w,data:C,count:E,status:N,statusText:k}});return this.shouldThrowOnError||(d=d.catch(u=>{var f,p,g;return{error:{message:`${(f=u==null?void 0:u.name)!==null&&f!==void 0?f:"FetchError"}: ${u==null?void 0:u.message}`,details:`${(p=u==null?void 0:u.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(g=u==null?void 0:u.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),d.then(s,o)}returns(){return this}overrideTypes(){return this}}return Lu.default=n,Lu}var YS;function Ok(){if(YS)return Ou;YS=1,Object.defineProperty(Ou,"__esModule",{value:!0});const e=sl.__importDefault(Pk());class n extends e.default{select(s){let o=!1;const a=(s??"*").split("").map(d=>/\s/.test(d)&&!o?"":(d==='"'&&(o=!o),d)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:o=!0,nullsFirst:a,foreignTable:d,referencedTable:u=d}={}){const f=u?`${u}.order`:"order",p=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${p?`${p},`:""}${s}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:o,referencedTable:a=o}={}){const d=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(d,`${s}`),this}range(s,o,{foreignTable:a,referencedTable:d=a}={}){const u=typeof d>"u"?"offset":`${d}.offset`,f=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(u,`${s}`),this.url.searchParams.set(f,`${o-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:o=!1,settings:a=!1,buffers:d=!1,wal:u=!1,format:f="text"}={}){var p;const g=[s?"analyze":null,o?"verbose":null,a?"settings":null,d?"buffers":null,u?"wal":null].filter(Boolean).join("|"),x=(p=this.headers.get("Accept"))!==null&&p!==void 0?p:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${x}"; options=${g};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Ou.default=n,Ou}var XS;function Rb(){if(XS)return Pu;XS=1,Object.defineProperty(Pu,"__esModule",{value:!0});const e=sl.__importDefault(Ok()),n=new RegExp("[,()]");class r extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}in(o,a){const d=Array.from(new Set(a)).map(u=>typeof u=="string"&&n.test(u)?`"${u}"`:`${u}`).join(",");return this.url.searchParams.append(o,`in.(${d})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:d,type:u}={}){let f="";u==="plain"?f="pl":u==="phrase"?f="ph":u==="websearch"&&(f="w");const p=d===void 0?"":`(${d})`;return this.url.searchParams.append(o,`${f}fts${p}.${a}`),this}match(o){return Object.entries(o).forEach(([a,d])=>{this.url.searchParams.append(a,`eq.${d}`)}),this}not(o,a,d){return this.url.searchParams.append(o,`not.${a}.${d}`),this}or(o,{foreignTable:a,referencedTable:d=a}={}){const u=d?`${d}.or`:"or";return this.url.searchParams.append(u,`(${o})`),this}filter(o,a,d){return this.url.searchParams.append(o,`${a}.${d}`),this}}return Pu.default=r,Pu}var QS;function Lk(){if(QS)return Du;QS=1,Object.defineProperty(Du,"__esModule",{value:!0});const e=sl.__importDefault(Rb());class n{constructor(s,{headers:o={},schema:a,fetch:d}){this.url=s,this.headers=new Headers(o),this.schema=a,this.fetch=d}select(s,o){const{head:a=!1,count:d}=o??{},u=a?"HEAD":"GET";let f=!1;const p=(s??"*").split("").map(g=>/\s/.test(g)&&!f?"":(g==='"'&&(f=!f),g)).join("");return this.url.searchParams.set("select",p),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:o,defaultToNull:a=!0}={}){var d;const u="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const f=s.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(f.length>0){const p=[...new Set(f)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(s,{onConflict:o,ignoreDuplicates:a=!1,count:d,defaultToNull:u=!0}={}){var f;const p="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),d&&this.headers.append("Prefer",`count=${d}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const g=s.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(g.length>0){const x=[...new Set(g)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new e.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(s,{count:o}={}){var a;const d="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:s}={}){var o;const a="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Du.default=n,Du}var ZS;function WU(){if(ZS)return Iu;ZS=1,Object.defineProperty(Iu,"__esModule",{value:!0});const t=sl,e=t.__importDefault(Lk()),n=t.__importDefault(Rb());class r{constructor(o,{headers:a={},schema:d,fetch:u}={}){this.url=o,this.headers=new Headers(a),this.schemaName=d,this.fetch=u}from(o){const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new r(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:d=!1,get:u=!1,count:f}={}){var p;let g;const x=new URL(`${this.url}/rpc/${o}`);let w;d||u?(g=d?"HEAD":"GET",Object.entries(a).filter(([E,N])=>N!==void 0).map(([E,N])=>[E,Array.isArray(N)?`{${N.join(",")}}`:`${N}`]).forEach(([E,N])=>{x.searchParams.append(E,N)})):(g="POST",w=a);const C=new Headers(this.headers);return f&&C.set("Prefer",`count=${f}`),new n.default({method:g,url:x,headers:C,schema:this.schemaName,body:w,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}}return Iu.default=r,Iu}var eC;function YU(){if(eC)return fn;eC=1,Object.defineProperty(fn,"__esModule",{value:!0}),fn.PostgrestError=fn.PostgrestBuilder=fn.PostgrestTransformBuilder=fn.PostgrestFilterBuilder=fn.PostgrestQueryBuilder=fn.PostgrestClient=void 0;const t=sl,e=t.__importDefault(WU());fn.PostgrestClient=e.default;const n=t.__importDefault(Lk());fn.PostgrestQueryBuilder=n.default;const r=t.__importDefault(Rb());fn.PostgrestFilterBuilder=r.default;const s=t.__importDefault(Ok());fn.PostgrestTransformBuilder=s.default;const o=t.__importDefault(Pk());fn.PostgrestBuilder=o.default;const a=t.__importDefault(Dk());return fn.PostgrestError=a.default,fn.default={PostgrestClient:e.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:r.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:o.default,PostgrestError:a.default},fn}var Bk=YU();const Uk=Gc(Bk),XU=i5({__proto__:null,default:Uk},[Bk]),{PostgrestClient:QU,PostgrestQueryBuilder:aH,PostgrestFilterBuilder:lH,PostgrestTransformBuilder:cH,PostgrestBuilder:dH,PostgrestError:uH}=Uk||XU;class ZU{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,s=parseInt(r.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ez="2.80.0",tz=`realtime-js/${ez}`,nz="1.0.0",g0=1e4,rz=1e3,sz=100;var kc;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(kc||(kc={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var Tr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Tr||(Tr={}));var b0;(function(t){t.websocket="websocket"})(b0||(b0={}));var yi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(yi||(yi={}));class oz{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const s=n.getUint8(1),o=n.getUint8(2);let a=this.HEADER_LENGTH+2;const d=r.decode(e.slice(a,a+s));a=a+s;const u=r.decode(e.slice(a,a+o));a=a+o;const f=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:d,event:u,payload:f}}}class zk{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var dt;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(dt||(dt={}));const tC=(t,e,n={})=>{var r;const s=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=iz(a,t,e,s),o),{}):{}},iz=(t,e,n,r)=>{const s=e.find(d=>d.name===t),o=s==null?void 0:s.type,a=n[t];return o&&!r.includes(o)?qk(o,a):x0(a)},qk=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return dz(e,n)}switch(t){case dt.bool:return az(e);case dt.float4:case dt.float8:case dt.int2:case dt.int4:case dt.int8:case dt.numeric:case dt.oid:return lz(e);case dt.json:case dt.jsonb:return cz(e);case dt.timestamp:return uz(e);case dt.abstime:case dt.date:case dt.daterange:case dt.int4range:case dt.int8range:case dt.money:case dt.reltime:case dt.text:case dt.time:case dt.timestamptz:case dt.timetz:case dt.tsrange:case dt.tstzrange:return x0(e);default:return x0(e)}},x0=t=>t,az=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},lz=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},cz=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},dz=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let o;const a=t.slice(1,n);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(d=>qk(e,d))}return t},uz=t=>typeof t=="string"?t.replace(" ","T"):t,Hk=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class xg{constructor(e,n,r={},s=g0){this.channel=e,this.event=n,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var nC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(nC||(nC={}));class Ac{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:o,onLeave:a,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ac.syncState(this.state,s,o,a),this.pendingDiffs.forEach(u=>{this.state=Ac.syncDiff(this.state,u,o,a)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},s=>{const{onJoin:o,onLeave:a,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ac.syncDiff(this.state,s,o,a),d())}),this.onJoin((s,o,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:o,newPresences:a})}),this.onLeave((s,o,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,s){const o=this.cloneDeep(e),a=this.transformState(n),d={},u={};return this.map(o,(f,p)=>{a[f]||(u[f]=p)}),this.map(a,(f,p)=>{const g=o[f];if(g){const x=p.map(N=>N.presence_ref),w=g.map(N=>N.presence_ref),C=p.filter(N=>w.indexOf(N.presence_ref)<0),E=g.filter(N=>x.indexOf(N.presence_ref)<0);C.length>0&&(d[f]=C),E.length>0&&(u[f]=E)}else d[f]=p}),this.syncDiff(o,{joins:d,leaves:u},r,s)}static syncDiff(e,n,r,s){const{joins:o,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(o,(d,u)=>{var f;const p=(f=e[d])!==null&&f!==void 0?f:[];if(e[d]=this.cloneDeep(u),p.length>0){const g=e[d].map(w=>w.presence_ref),x=p.filter(w=>g.indexOf(w.presence_ref)<0);e[d].unshift(...x)}r(d,p,u)}),this.map(a,(d,u)=>{let f=e[d];if(!f)return;const p=u.map(g=>g.presence_ref);f=f.filter(g=>p.indexOf(g.presence_ref)<0),e[d]=f,s(d,f,u),f.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const s=e[r];return"metas"in s?n[r]=s.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=s,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var rC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(rC||(rC={}));var _c;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(_c||(_c={}));var ws;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(ws||(ws={}));class Ib{constructor(e,n={config:{}},r){var s,o;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new xg(this,Tr.join,this.params,this.timeout),this.rejoinTimer=new zk(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Tr.reply,{},(a,d)=>{this._trigger(this._replyEventName(d),a)}),this.presence=new Ac(this),this.broadcastEndpointURL=Hk(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,s,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:a,presence:d,private:u}}=this.params,f=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&s!==void 0?s:[],p=!!this.bindings[_c.PRESENCE]&&this.bindings[_c.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,g={},x={broadcast:a,presence:Object.assign(Object.assign({},d),{enabled:p}),postgres_changes:f,private:u};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(w=>e==null?void 0:e(ws.CHANNEL_ERROR,w)),this._onClose(()=>e==null?void 0:e(ws.CLOSED)),this.updateJoinPayload(Object.assign({config:x},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var C;if(this.socket.setAuth(),w===void 0){e==null||e(ws.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,N=(C=E==null?void 0:E.length)!==null&&C!==void 0?C:0,k=[];for(let _=0;_<N;_++){const j=E[_],{filter:{event:P,schema:z,table:O,filter:D}}=j,te=w&&w[_];if(te&&te.event===P&&te.schema===z&&te.table===O&&te.filter===D)k.push(Object.assign(Object.assign({},j),{id:te.id}));else{this.unsubscribe(),this.state=Vt.errored,e==null||e(ws.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=k,e&&e(ws.SUBSCRIBED);return}}).receive("error",w=>{this.state=Vt.errored,e==null||e(ws.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(ws.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Vt.joined&&e===_c.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var s;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(s=r.timeout)!==null&&s!==void 0?s:this.timeout);if(d.status===202)return{success:!0};let u=d.statusText;try{const f=await d.json();u=f.error||f.message||u}catch{}return Promise.reject(new Error(u))}async send(e,n={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=f.body)===null||s===void 0?void 0:s.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,d,u;const f=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((u=(d=(a=this.params)===null||a===void 0?void 0:a.config)===null||d===void 0?void 0:d.broadcast)===null||u===void 0)&&u.ack)&&o("ok"),f.receive("ok",()=>o("ok")),f.receive("error",()=>o("error")),f.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Tr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new xg(this,Tr.leave,{},e),r.receive("ok",()=>{n(),s("ok")}).receive("timeout",()=>{n(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const s=new AbortController,o=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:s.signal}));return clearTimeout(o),a}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new xg(this,e,n,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sz){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var s,o;const a=e.toLocaleLowerCase(),{close:d,error:u,leave:f,join:p}=Tr;if(r&&[d,u,f,p].indexOf(a)>=0&&r!==this._joinRef())return;let x=this._onMessage(a,n,r);if(n&&!x)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(w=>{var C,E,N;return((C=w.filter)===null||C===void 0?void 0:C.event)==="*"||((N=(E=w.filter)===null||E===void 0?void 0:E.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===a}).map(w=>w.callback(x,r)):(o=this.bindings[a])===null||o===void 0||o.filter(w=>{var C,E,N,k,_,j;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in w){const P=w.id,z=(C=w.filter)===null||C===void 0?void 0:C.event;return P&&((E=n.ids)===null||E===void 0?void 0:E.includes(P))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const P=(_=(k=w==null?void 0:w.filter)===null||k===void 0?void 0:k.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return P==="*"||P===((j=n==null?void 0:n.event)===null||j===void 0?void 0:j.toLocaleLowerCase())}else return w.type.toLocaleLowerCase()===a}).map(w=>{if(typeof x=="object"&&"ids"in x){const C=x.data,{schema:E,table:N,commit_timestamp:k,type:_,errors:j}=C;x=Object.assign(Object.assign({},{schema:E,table:N,commit_timestamp:k,eventType:_,new:{},old:{},errors:j}),this._getPayloadRecords(C))}w.callback(x,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const s=e.toLocaleLowerCase(),o={type:s,filter:n,callback:r};return this.bindings[s]?this.bindings[s].push(o):this.bindings[s]=[o],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var o;return!(((o=s.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&Ib.isEqual(s.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Tr.close,{},e)}_onError(e){this._on(Tr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=tC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=tC(e.columns,e.old_record)),n}}const yg=()=>{},Uu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hz=[1e3,2e3,5e3,1e4],fz=1e4,pz=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class mz{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=g0,this.transport=null,this.heartbeatIntervalMs=Uu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=yg,this.ref=0,this.reconnectTimer=null,this.logger=yg,this.conn=null,this.sendBuffer=[],this.serializer=new oz,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...o)=>s(...o):(...o)=>fetch(...o),!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${b0.websocket}`,this.httpEndpoint=Hk(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=ZU.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:nz}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case kc.connecting:return yi.Connecting;case kc.open:return yi.Open;case kc.closing:return yi.Closing;default:return yi.Closed}}isConnected(){return this.connectionState()===yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(o=>o.topic===r);if(s)return s;{const o=new Ib(`realtime:${e}`,n,this);return this.channels.push(o),o}}push(e){const{topic:n,event:r,payload:s,ref:o}=e,a=()=>{this.encode(e,d=>{var u;(u=this.conn)===null||u===void 0||u.send(d)})};this.log("push",`${n} ${r} (${o})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(rz,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Uu.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:o,ref:a}=n,d=a?`(${a})`:"",u=o.status||"";this.log("receive",`${u} ${r} ${s} ${d}`.trim(),o),this.channels.filter(f=>f._isMember(r)).forEach(f=>f._trigger(s,o,a)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Tr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(n);return`${e}${r}${s}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([pz],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const s={access_token:n,version:tz};n&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(Tr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new zk(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Uu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,s,o,a,d,u,f,p;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:g0,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:Uu.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:yg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=e==null?void 0:e.reconnectAfterMs)!==null&&u!==void 0?u:(g=>hz[g-1]||fz),this.encode=(f=e==null?void 0:e.encode)!==null&&f!==void 0?f:((g,x)=>x(JSON.stringify(g))),this.decode=(p=e==null?void 0:e.decode)!==null&&p!==void 0?p:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Db extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function yt(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class gz extends Db{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class y0 extends Db{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Pb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),bz=()=>Response,v0=t=>{if(Array.isArray(t))return t.map(n=>v0(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const s=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[s]=v0(r)}),e},xz=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vg=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},yz=(t,e,n)=>ye(void 0,void 0,void 0,function*(){const r=yield bz();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(s=>{const o=t.status||500,a=(s==null?void 0:s.statusCode)||o+"";e(new gz(vg(s),o,a))}).catch(s=>{e(new y0(vg(s),s))}):e(new y0(vg(t),t))}),vz=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?s:(xz(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),n))};function Qc(t,e,n,r,s,o){return ye(this,void 0,void 0,function*(){return new Promise((a,d)=>{t(n,vz(e,r,s,o)).then(u=>{if(!u.ok)throw u;return r!=null&&r.noResolveJson?u:u.json()}).then(u=>a(u)).catch(u=>yz(u,d,r))})})}function Vc(t,e,n,r){return ye(this,void 0,void 0,function*(){return Qc(t,"GET",e,n,r)})}function Er(t,e,n,r,s){return ye(this,void 0,void 0,function*(){return Qc(t,"POST",e,r,s,n)})}function w0(t,e,n,r,s){return ye(this,void 0,void 0,function*(){return Qc(t,"PUT",e,r,s,n)})}function wz(t,e,n,r){return ye(this,void 0,void 0,function*(){return Qc(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ob(t,e,n,r,s){return ye(this,void 0,void 0,function*(){return Qc(t,"DELETE",e,r,s,n)})}class Sz{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ye(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}var Vk;class Cz{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Vk]="BlobDownloadBuilder",this.promise=null}asStream(){return new Sz(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ye(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(yt(e))return{data:null,error:e};throw e}})}}Vk=Symbol.toStringTag;const Nz={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ez{constructor(e,n={},r,s){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Pb(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,s){return ye(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},sC),s);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const u=a.metadata;typeof Blob<"u"&&r instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),u&&o.append("metadata",this.encodeMetadata(u)),o.append("",r)):typeof FormData<"u"&&r instanceof FormData?(o=r,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),u&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(u))):(o=r,d["cache-control"]=`max-age=${a.cacheControl}`,d["content-type"]=a.contentType,u&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(u))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),s!=null&&s.headers&&(d=Object.assign(Object.assign({},d),s.headers));const f=this._removeEmptyFolders(n),p=this._getFinalPath(f),g=yield(e=="PUT"?w0:Er)(this.fetch,`${this.url}/object/${p}`,o,Object.assign({headers:d},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:f,id:g.Id,fullPath:g.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(yt(o))return{data:null,error:o};throw o}})}upload(e,n,r){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,s){return ye(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),d=new URL(this.url+`/object/upload/sign/${a}`);d.searchParams.set("token",n);try{let u;const f=Object.assign({upsert:sC.upsert},s),p=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&r instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),u.append("",r)):typeof FormData<"u"&&r instanceof FormData?(u=r,u.append("cacheControl",f.cacheControl)):(u=r,p["cache-control"]=`max-age=${f.cacheControl}`,p["content-type"]=f.contentType);const g=yield w0(this.fetch,d.toString(),u,{headers:p});return{data:{path:o,fullPath:g.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(yt(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(e,n){return ye(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);n!=null&&n.upsert&&(s["x-upsert"]="true");const o=yield Er(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+o.url),d=a.searchParams.get("token");if(!d)throw new Db("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}update(e,n,r){return ye(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ye(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}copy(e,n,r){return ye(this,void 0,void 0,function*(){try{return{data:{path:(yield Er(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}createSignedUrl(e,n,r){return ye(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),o=yield Er(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}createSignedUrls(e,n,r){return ye(this,void 0,void 0,function*(){try{const s=yield Er(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}download(e,n){const s=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=o?`?${o}`:"",d=this._getFinalPath(e),u=()=>Vc(this.fetch,`${this.url}/${s}/${d}${a}`,{headers:this.headers,noResolveJson:!0});return new Cz(u,this.shouldThrowOnError)}info(e){return ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Vc(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:v0(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}exists(e){return ye(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield wz(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r)&&r instanceof y0){const s=r.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),s=[],o=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";o!==""&&s.push(o);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});u!==""&&s.push(u);let f=s.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${f}`)}}}remove(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ob(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}list(e,n,r){return ye(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Nz),n),{prefix:e||""});return{data:yield Er(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}listV2(e,n){return ye(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Er(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Fk="2.80.0",$k={"X-Client-Info":`storage-js/${Fk}`};class Tz{constructor(e,n={},r,s){this.shouldThrowOnError=!1;const o=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$k),n),this.fetch=Pb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ye(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Vc(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Vc(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}createBucket(e){return ye(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Er(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(yt(s))return{data:null,error:s};throw s}})}updateBucket(e,n){return ye(this,void 0,void 0,function*(){try{return{data:yield w0(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(yt(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ob(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class kz{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$k),n),this.fetch=Pb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Er(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}listBuckets(e){return ye(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),s=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Vc(this.fetch,s,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Ob(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(yt(n))return{data:null,error:n};throw n}})}}const Lb={"X-Client-Info":`storage-js/${Fk}`,"Content-Type":"application/json"};class Gk extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Kn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class wg extends Gk{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Az extends Gk{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var oC;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(oC||(oC={}));const Bb=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_z=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},iC=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jz=(t,e,n)=>ye(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const s=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const d=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||s+"";e(new wg(iC(a),s,d))}).catch(()=>{const a=s+"",d=o.statusText||`HTTP ${s} error`;e(new wg(d,s,a))});else{const a=s+"",d=o.statusText||`HTTP ${s} error`;e(new wg(d,s,a))}}else e(new Az(iC(t),t))}),Mz=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return r?(_z(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(r)):s.body=r,Object.assign(Object.assign({},s),n)):s};function Rz(t,e,n,r,s,o){return ye(this,void 0,void 0,function*(){return new Promise((a,d)=>{t(n,Mz(e,r,s,o)).then(u=>{if(!u.ok)throw u;if(r!=null&&r.noResolveJson)return u;const f=u.headers.get("content-type");return!f||!f.includes("application/json")?{}:u.json()}).then(u=>a(u)).catch(u=>jz(u,d,r))})})}function Wn(t,e,n,r,s){return ye(this,void 0,void 0,function*(){return Rz(t,"POST",e,r,s,n)})}class Iz{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lb),n),this.fetch=Bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield Wn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ye(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}listIndexes(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ye(this,void 0,void 0,function*(){try{return{data:(yield Wn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Kn(r))return{data:null,error:r};throw r}})}}class Dz{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lb),n),this.fetch=Bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Wn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}getVectors(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}listVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Wn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}queryVectors(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ye(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Wn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}}class Pz{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Lb),n),this.fetch=Bb(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield Wn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}getBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:yield Wn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}listBuckets(){return ye(this,arguments,void 0,function*(e={}){try{return{data:yield Wn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ye(this,void 0,void 0,function*(){try{return{data:(yield Wn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Kn(n))return{data:null,error:n};throw n}})}}class Oz extends Pz{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Lz(this.url,this.headers,e,this.fetch)}}class Lz extends Iz{constructor(e,n,r,s){super(e,n,s),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ye(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ye(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ye(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ye(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Bz(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Bz extends Dz{constructor(e,n,r,s,o){super(e,n,o),this.vectorBucketName=r,this.indexName=s}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ye(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ye(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ye(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ye(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ye(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Uz extends Tz{constructor(e,n={},r,s){super(e,n,r,s)}from(e){return new Ez(this.url,this.headers,e,this.fetch)}get vectors(){return new Oz(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kz(this.url+"/iceberg",this.headers,this.fetch)}}const zz="2.80.0";let mc="";typeof Deno<"u"?mc="deno":typeof document<"u"?mc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?mc="react-native":mc="node";const qz={"X-Client-Info":`supabase-js-${mc}/${zz}`},Hz={headers:qz},Vz={schema:"public"},Fz={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},$z={},Gz=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),Jz=()=>Headers,Kz=(t,e,n)=>{const r=Gz(n),s=Jz();return async(o,a)=>{var d;const u=(d=await e())!==null&&d!==void 0?d:t;let f=new s(a==null?void 0:a.headers);return f.has("apikey")||f.set("apikey",t),f.has("Authorization")||f.set("Authorization",`Bearer ${u}`),r(o,Object.assign(Object.assign({},a),{headers:f}))}};function Wz(t){return t.endsWith("/")?t:t+"/"}function Yz(t,e){var n,r;const{db:s,auth:o,realtime:a,global:d}=t,{db:u,auth:f,realtime:p,global:g}=e,x={db:Object.assign(Object.assign({},u),s),auth:Object.assign(Object.assign({},f),o),realtime:Object.assign(Object.assign({},p),a),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?x.accessToken=t.accessToken:delete x.accessToken,x}function Xz(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Wz(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Jk="2.80.0",_a=30*1e3,S0=3,Sg=S0*_a,Qz="http://localhost:9999",Zz="supabase.auth.token",e9={"X-Client-Info":`gotrue-js/${Jk}`},C0="X-Supabase-Api-Version",Kk={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},t9=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,n9=600*1e3;class Fc extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function we(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class r9 extends Fc{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function s9(t){return we(t)&&t.name==="AuthApiError"}class vi extends Fc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Bo extends Fc{constructor(e,n,r,s){super(e,r,s),this.name=n,this.status=r}}class Cr extends Bo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o9(t){return we(t)&&t.name==="AuthSessionMissingError"}class va extends Bo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zu extends Bo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class qu extends Bo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i9(t){return we(t)&&t.name==="AuthImplicitGrantRedirectError"}class aC extends Bo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class N0 extends Bo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Cg(t){return we(t)&&t.name==="AuthRetryableFetchError"}class lC extends Bo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class E0 extends Bo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const $h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),cC=` 	
\r=`.split(""),a9=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<cC.length;e+=1)t[cC[e].charCodeAt(0)]=-2;for(let e=0;e<$h.length;e+=1)t[$h[e].charCodeAt(0)]=e;return t})();function dC(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($h[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n($h[r]),e.queuedBits-=6}}function Wk(t,e,n){const r=a9[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function uC(t){const e=[],n=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},o=a=>{d9(a,r,n)};for(let a=0;a<t.length;a+=1)Wk(t.charCodeAt(a),s,o);return e.join("")}function l9(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function c9(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|s)+65536,n+=1}l9(r,e)}}function d9(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if((t>>7-r&1)===0){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function za(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)Wk(t.charCodeAt(s),n,r);return new Uint8Array(e)}function u9(t){const e=[];return c9(t,n=>e.push(n)),new Uint8Array(e)}function Ei(t){const e=[],n={queue:0,queuedBits:0},r=s=>{e.push(s)};return t.forEach(s=>dC(s,n,r)),dC(null,n,r),e.join("")}function h9(t){return Math.round(Date.now()/1e3)+t}function f9(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const pn=()=>typeof window<"u"&&typeof document<"u",pi={tested:!1,writable:!1},Yk=()=>{if(!pn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(pi.tested)return pi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),pi.tested=!0,pi.writable=!0}catch{pi.tested=!0,pi.writable=!1}return pi.writable};function p9(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((s,o)=>{e[o]=s})}catch{}return n.searchParams.forEach((r,s)=>{e[s]=r}),e}const Xk=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),m9=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ja=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},mi=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},go=async(t,e)=>{await t.removeItem(e)};class yf{constructor(){this.promise=new yf.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}yf.promiseConstructor=Promise;function Ng(t){const e=t.split(".");if(e.length!==3)throw new E0("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!t9.test(e[r]))throw new E0("JWT not in base64url format");return{header:JSON.parse(uC(e[0])),payload:JSON.parse(uC(e[1])),signature:za(e[2]),raw:{header:e[0],payload:e[1]}}}async function g9(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function b9(t,e){return new Promise((r,s)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){r(a);return}}catch(a){if(!e(o,a)){s(a);return}}})()})}function x9(t){return("0"+t.toString(16)).substr(-2)}function y9(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let s="";for(let o=0;o<56;o++)s+=n.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,x9).join("")}async function v9(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),s=new Uint8Array(r);return Array.from(s).map(o=>String.fromCharCode(o)).join("")}async function w9(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await v9(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(t,e,n=!1){const r=y9();let s=r;n&&(s+="/PASSWORD_RECOVERY"),await ja(t,`${e}-code-verifier`,s);const o=await w9(r);return[o,r===o?"plain":"s256"]}const S9=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function C9(t){const e=t.headers.get(C0);if(!e||!e.match(S9))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function N9(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function E9(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const T9=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sa(t){if(!T9.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Eg(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k9(t,e){return new Proxy(t,{get:(n,r,s)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,s)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,s)}})}function hC(t){return JSON.parse(JSON.stringify(t))}const bi=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),A9=[502,503,504];async function fC(t){var e;if(!m9(t))throw new N0(bi(t),0);if(A9.includes(t.status))throw new N0(bi(t),t.status);let n;try{n=await t.json()}catch(o){throw new vi(bi(o),o)}let r;const s=C9(t);if(s&&s.getTime()>=Kk["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new lC(bi(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Cr}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new lC(bi(n),t.status,n.weak_password.reasons);throw new r9(bi(n),t.status||500,r)}const _9=(t,e,n,r)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),n))};async function ke(t,e,n,r){var s;const o=Object.assign({},r==null?void 0:r.headers);o[C0]||(o[C0]=Kk["2024-01-01"].name),r!=null&&r.jwt&&(o.Authorization=`Bearer ${r.jwt}`);const a=(s=r==null?void 0:r.query)!==null&&s!==void 0?s:{};r!=null&&r.redirectTo&&(a.redirect_to=r.redirectTo);const d=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",u=await j9(t,e,n+d,{headers:o,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(u):{data:Object.assign({},u),error:null}}async function j9(t,e,n,r,s,o){const a=_9(e,r,s,o);let d;try{d=await t(n,Object.assign({},a))}catch(u){throw console.error(u),new N0(bi(u),0)}if(d.ok||await fC(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(u){await fC(u)}}function Nr(t){var e;let n=null;I9(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=h9(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function pC(t){const e=Nr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Co(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function M9(t){return{data:t,error:null}}function R9(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o}=t,a=rl(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:s,verification_type:o},u=Object.assign({},a);return{data:{properties:d,user:u},error:null}}function mC(t){return t}function I9(t){return t.access_token&&t.refresh_token&&t.expires_in}const Tg=["global","local","others"];class D9{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Xk(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Tg[0]){if(Tg.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Tg.join(", ")}`);try{return await ke(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(we(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ke(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Co})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=rl(e,["options"]),s=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(s.new_email=r==null?void 0:r.newEmail,delete s.newEmail),await ke(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:R9,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(we(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Co})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,s,o,a,d,u;try{const f={nextPage:null,lastPage:0,total:0},p=await ke(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:mC});if(p.error)throw p.error;const g=await p.json(),x=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(u=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return w.length>0&&(w.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);f[`${N}Page`]=E}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(we(f))return{data:{users:[]},error:f};throw f}}async getUserById(e){Sa(e);try{return await ke(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Co})}catch(n){if(we(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Sa(e);try{return await ke(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Co})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Sa(e);try{return await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Co})}catch(r){if(we(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Sa(e.userId);try{const{data:n,error:r}=await ke(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:n,error:r}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Sa(e.userId),Sa(e.id);try{return{data:await ke(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,s,o,a,d,u;try{const f={nextPage:null,lastPage:0,total:0},p=await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&o!==void 0?o:""},xform:mC});if(p.error)throw p.error;const g=await p.json(),x=(a=p.headers.get("x-total-count"))!==null&&a!==void 0?a:0,w=(u=(d=p.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&u!==void 0?u:[];return w.length>0&&(w.forEach(C=>{const E=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(C.split(";")[1].split("=")[1]);f[`${N}Page`]=E}),f.total=parseInt(x)),{data:Object.assign(Object.assign({},g),f),error:null}}catch(f){if(we(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ke(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ke(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(we(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ke(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(we(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ke(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(we(n))return{data:null,error:n};throw n}}}function gC(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Ca={debug:!!(globalThis&&Yk()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Qk extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class P9 extends Qk{}async function O9(t,e,n){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await n()}finally{Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Ca.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new P9(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Ca.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function L9(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Zk(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function B9(t){return parseInt(t,16)}function U9(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function z9(t){var e;const{chainId:n,domain:r,expirationTime:s,issuedAt:o=new Date,nonce:a,notBefore:d,requestId:u,resources:f,scheme:p,uri:g,version:x}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(x!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${x}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const w=Zk(t.address),C=p?`${p}://${r}`:r,E=t.statement?`${t.statement}
`:"",N=`${C} wants you to sign in with your Ethereum account:
${w}

${E}`;let k=`URI: ${g}
Version: ${x}
Chain ID: ${n}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(s&&(k+=`
Expiration Time: ${s.toISOString()}`),d&&(k+=`
Not Before: ${d.toISOString()}`),u&&(k+=`
Request ID: ${u}`),f){let _=`
Resources:`;for(const j of f){if(!j||typeof j!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${j}`);_+=`
- ${j}`}k+=_}return`${N}
${k}`}class Bt extends Error{constructor({message:e,code:n,cause:r,name:s}){var o;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=s??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}}class Gh extends Bt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function q9({error:t,options:e}){var n,r,s;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Bt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Bt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Bt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((s=o.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new Bt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Bt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new Bt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Bt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(eA(a)){if(o.rp.id!==a)return new Bt({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new Bt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function H9({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Bt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Bt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(eA(r)){if(n.rpId!==r)return new Bt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Bt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Bt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Bt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class V9{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F9=new V9;function $9(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,s=rl(t,["challenge","user","excludeCredentials"]),o=za(e).buffer,a=Object.assign(Object.assign({},n),{id:za(n.id).buffer}),d=Object.assign(Object.assign({},s),{challenge:o,user:a});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let u=0;u<r.length;u++){const f=r[u];d.excludeCredentials[u]=Object.assign(Object.assign({},f),{id:za(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return d}function G9(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=rl(t,["challenge","allowCredentials"]),s=za(e).buffer,o=Object.assign(Object.assign({},r),{challenge:s});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let a=0;a<n.length;a++){const d=n[a];o.allowCredentials[a]=Object.assign(Object.assign({},d),{id:za(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return o}function J9(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ei(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ei(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function K9(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),s=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ei(new Uint8Array(s.authenticatorData)),clientDataJSON:Ei(new Uint8Array(s.clientDataJSON)),signature:Ei(new Uint8Array(s.signature)),userHandle:s.userHandle?Ei(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function eA(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function bC(){var t,e;return!!(pn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function W9(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",e)}:{data:null,error:new Gh("Empty credential response",e)}}catch(e){return{data:null,error:q9({error:e,options:t})}}}async function Y9(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Gh("Browser returned unexpected credential type",e)}:{data:null,error:new Gh("Empty credential response",e)}}catch(e){return{data:null,error:H9({error:e,options:t})}}}const X9={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},Q9={userVerification:"preferred",hints:["security-key"]};function Jh(...t){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),n=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),r={};for(const s of t)if(s)for(const o in s){const a=s[o];if(a!==void 0)if(Array.isArray(a))r[o]=a;else if(n(a))r[o]=a;else if(e(a)){const d=r[o];e(d)?r[o]=Jh(d,a):r[o]=Jh(a)}else r[o]=a}return r}function Z9(t,e){return Jh(X9,t,e||{})}function eq(t,e){return Jh(Q9,t,e||{})}class tq{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:s},o){try{const{data:a,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!a)return{data:null,error:d};const u=s??F9.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:f}=a.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${r}`),f.displayName||(f.displayName=f.name)}switch(a.webauthn.type){case"create":{const f=Z9(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:p,error:g}=await W9({publicKey:f,signal:u});return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}case"request":{const f=eq(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:p,error:g}=await Y9(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:f,signal:u}));return p?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:p}},error:null}:{data:null,error:g}}}}catch(a){return we(a)?{data:null,error:a}:{data:null,error:new vi("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s}},o){if(!n)return{data:null,error:new Fc("rpId is required for WebAuthn authentication")};try{if(!bC())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:a,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:s},{request:o});if(!a)return{data:null,error:d};const{webauthn:u}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:u.type,rpId:n,rpOrigins:r,credential_response:u.credential_response}})}catch(a){return we(a)?{data:null,error:a}:{data:null,error:new vi("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:s},o){if(!n)return{data:null,error:new Fc("rpId is required for WebAuthn registration")};try{if(!bC())return{data:null,error:new vi("Browser does not support WebAuthn",null)};const{data:a,error:d}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(p=>{var g;return(g=p.data)===null||g===void 0?void 0:g.all.find(x=>x.factor_type==="webauthn"&&x.friendly_name===e&&x.status!=="unverified")}).then(p=>p?this.client.mfa.unenroll({factorId:p==null?void 0:p.id}):void 0),{data:null,error:d};const{data:u,error:f}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:s},{create:o});return u?this._verify({factorId:a.id,challengeId:u.challengeId,webauthn:{rpId:n,rpOrigins:r,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:f}}catch(a){return we(a)?{data:null,error:a}:{data:null,error:new vi("Unexpected error in register",a)}}}}L9();const nq={url:Qz,storageKey:Zz,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:e9,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function xC(t,e,n){return await n()}const Na={};class $c{get jwks(){var e,n;return(n=(e=Na[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Na[this.storageKey]=Object.assign(Object.assign({},Na[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Na[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Na[this.storageKey]=Object.assign(Object.assign({},Na[this.storageKey]),{cachedAt:e})}constructor(e){var n,r,s;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},nq),e);if(this.storageKey=o.storageKey,this.instanceID=(n=$c.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,$c.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&pn()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new D9({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Xk(o.fetch),this.lock=o.lock||xC,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:pn()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=O9:this.lock=xC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new tq(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:Yk()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gC(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=gC(this.memoryStorage)),pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(s=this.broadcastChannel)===null||s===void 0||s.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Jk}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},r="none";if(pn()&&(n=p9(window.location.href),this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce")),pn()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:o}=await this._getSessionFromURL(n,r);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),i9(o)){const u=(e=o.details)===null||e===void 0?void 0:e.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:d}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",d),await this._saveSession(a),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return we(n)?this._returnResult({error:n}):this._returnResult({error:new vi("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,s;try{const o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:Nr}),{data:a,error:d}=o;if(d||!a)return this._returnResult({data:{user:null,session:null},error:d});const u=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(o){if(we(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var n,r,s;try{let o;if("email"in e){const{email:p,password:g,options:x}=e;let w=null,C=null;this.flowType==="pkce"&&([w,C]=await wa(this.storage,this.storageKey)),o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:x==null?void 0:x.emailRedirectTo,body:{email:p,password:g,data:(n=x==null?void 0:x.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken},code_challenge:w,code_challenge_method:C},xform:Nr})}else if("phone"in e){const{phone:p,password:g,options:x}=e;o=await ke(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:p,password:g,data:(r=x==null?void 0:x.data)!==null&&r!==void 0?r:{},channel:(s=x==null?void 0:x.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Nr})}else throw new zu("You must provide either an email or phone number and a password");const{data:a,error:d}=o;if(d||!a)return this._returnResult({data:{user:null,session:null},error:d});const u=a.session,f=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(o){if(we(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let n;if("email"in e){const{email:o,password:a,options:d}=e;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:pC})}else if("phone"in e){const{phone:o,password:a,options:d}=e;n=await ke(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:pC})}else throw new zu("You must provide either an email or phone number and a password");const{data:r,error:s}=n;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!r||!r.session||!r.user){const o=new va;return this._returnResult({data:{user:null,session:null},error:o})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,r,s,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,s,o,a,d,u,f,p,g,x;let w,C;if("message"in e)w=e.message,C=e.signature;else{const{chain:E,wallet:N,statement:k,options:_}=e;let j;if(pn())if(typeof N=="object")j=N;else{const G=window;if("ethereum"in G&&typeof G.ethereum=="object"&&"request"in G.ethereum&&typeof G.ethereum.request=="function")j=G.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=N}const P=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href),z=await j.request({method:"eth_requestAccounts"}).then(G=>G).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!z||z.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=Zk(z[0]);let D=(r=_==null?void 0:_.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!D){const G=await j.request({method:"eth_chainId"});D=B9(G)}const te={domain:P.host,address:O,statement:k,uri:P.href,version:"1",chainId:D,nonce:(s=_==null?void 0:_.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(a=(o=_==null?void 0:_.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(d=_==null?void 0:_.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(u=_==null?void 0:_.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(f=_==null?void 0:_.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(p=_==null?void 0:_.signInWithEthereum)===null||p===void 0?void 0:p.resources};w=z9(te),C=await j.request({method:"personal_sign",params:[U9(w),O]})}try{const{data:E,error:N}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:C},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(x=e.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:Nr});if(N)throw N;if(!E||!E.session||!E.user){const k=new va;return this._returnResult({data:{user:null,session:null},error:k})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:N})}catch(E){if(we(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async signInWithSolana(e){var n,r,s,o,a,d,u,f,p,g,x,w;let C,E;if("message"in e)C=e.message,E=e.signature;else{const{chain:N,wallet:k,statement:_,options:j}=e;let P;if(pn())if(typeof k=="object")P=k;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))P=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(j!=null&&j.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");P=k}const z=new URL((n=j==null?void 0:j.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in P&&P.signIn){const O=await P.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},j==null?void 0:j.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),_?{statement:_}:null));let D;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")D=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)D=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in D&&"signature"in D&&(typeof D.signedMessage=="string"||D.signedMessage instanceof Uint8Array)&&D.signature instanceof Uint8Array)C=typeof D.signedMessage=="string"?D.signedMessage:new TextDecoder().decode(D.signedMessage),E=D.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in P)||typeof P.signMessage!="function"||!("publicKey"in P)||typeof P!="object"||!P.publicKey||!("toBase58"in P.publicKey)||typeof P.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");C=[`${z.host} wants you to sign in with your Solana account:`,P.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(s=(r=j==null?void 0:j.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((o=j==null?void 0:j.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${j.signInWithSolana.notBefore}`]:[],...!((a=j==null?void 0:j.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${j.signInWithSolana.expirationTime}`]:[],...!((d=j==null?void 0:j.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${j.signInWithSolana.chainId}`]:[],...!((u=j==null?void 0:j.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${j.signInWithSolana.nonce}`]:[],...!((f=j==null?void 0:j.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${j.signInWithSolana.requestId}`]:[],...!((g=(p=j==null?void 0:j.signInWithSolana)===null||p===void 0?void 0:p.resources)===null||g===void 0)&&g.length?["Resources",...j.signInWithSolana.resources.map(D=>`- ${D}`)]:[]].join(`
`);const O=await P.signMessage(new TextEncoder().encode(C),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=O}}try{const{data:N,error:k}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:C,signature:Ei(E)},!((x=e.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:Nr});if(k)throw k;if(!N||!N.session||!N.user){const _=new va;return this._returnResult({data:{user:null,session:null},error:_})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:k})}catch(N){if(we(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await mi(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(n??"").split("/");try{const{data:o,error:a}=await ke(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Nr});if(await go(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const d=new va;return this._returnResult({data:{user:null,session:null,redirectType:null},error:d})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(we(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:n,provider:r,token:s,access_token:o,nonce:a}=e,d=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Nr}),{data:u,error:f}=d;if(f)return this._returnResult({data:{user:null,session:null},error:f});if(!u||!u.session||!u.user){const p=new va;return this._returnResult({data:{user:null,session:null},error:p})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:f})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,r,s,o,a;try{if("email"in e){const{email:d,options:u}=e;let f=null,p=null;this.flowType==="pkce"&&([f,p]=await wa(this.storage,this.storageKey));const{error:g}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=u==null?void 0:u.data)!==null&&n!==void 0?n:{},create_user:(r=u==null?void 0:u.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},code_challenge:f,code_challenge_method:p},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:g})}if("phone"in e){const{phone:d,options:u}=e,{data:f,error:p}=await ke(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(s=u==null?void 0:u.data)!==null&&s!==void 0?s:{},create_user:(o=u==null?void 0:u.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken},channel:(a=u==null?void 0:u.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:p})}throw new zu("You must provide either an email or phone number.")}catch(d){if(we(d))return this._returnResult({data:{user:null,session:null},error:d});throw d}}async verifyOtp(e){var n,r;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:d}=await ke(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:Nr});if(d)throw d;if(!a)throw new Error("An error occurred on token verification.");const u=a.session,f=a.user;return u!=null&&u.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:f,session:u},error:null})}catch(s){if(we(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var n,r,s;try{let o=null,a=null;this.flowType==="pkce"&&([o,a]=await wa(this.storage,this.storageKey));const d=await ke(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:M9});return this._returnResult(d)}catch(o){if(we(o))return this._returnResult({data:null,error:o});throw o}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Cr;const{error:s}=await ke(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(we(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:o}=e,{error:a}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:r,type:s,options:o}=e,{data:a,error:d}=await ke(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:d})}throw new zu("You must provide either an email or phone number and a type")}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await mi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Sg:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await mi(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Eg()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=k9(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Co}):await this._useSession(async n=>{var r,s,o;const{data:a,error:d}=n;if(d)throw d;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cr}:await ke(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:Co})})}catch(n){if(we(n))return o9(n)&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:s,error:o}=r;if(o)throw o;if(!s.session)throw new Cr;const a=s.session;let d=null,u=null;this.flowType==="pkce"&&e.email!=null&&([d,u]=await wa(this.storage,this.storageKey));const{data:f,error:p}=await ke(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:u}),jwt:a.access_token,xform:Co});if(p)throw p;return a.user=f.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(we(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Cr;const n=Date.now()/1e3;let r=n,s=!0,o=null;const{payload:a}=Ng(e.access_token);if(a.exp&&(r=a.exp,s=r<=n),s){const{data:d,error:u}=await this._callRefreshToken(e.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!d)return{data:{user:null,session:null},error:null};o=d}else{const{data:d,error:u}=await this._getUser(e.access_token);if(u)throw u;o={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(n){if(we(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:a,error:d}=n;if(d)throw d;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Cr;const{data:s,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(we(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!pn())throw new qu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new qu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new aC("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new qu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new aC("No code detected.");const{data:_,error:j}=await this._exchangeCodeForSession(e.code);if(j)throw j;const P=new URL(window.location.href);return P.searchParams.delete("code"),window.history.replaceState(window.history.state,"",P.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:d,expires_at:u,token_type:f}=e;if(!o||!d||!a||!f)throw new qu("No session defined in URL");const p=Math.round(Date.now()/1e3),g=parseInt(d);let x=p+g;u&&(x=parseInt(u));const w=x-p;w*1e3<=_a&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${g}s`);const C=x-g;p-C>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",C,x,p):p-C<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",C,x,p);const{data:E,error:N}=await this._getUser(o);if(N)throw N;const k={provider_token:r,provider_refresh_token:s,access_token:o,expires_in:g,expires_at:x,refresh_token:a,token_type:f,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:k,redirectType:e.type},error:null})}catch(r){if(we(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await mi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({error:o});const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:d}=await this.admin.signOut(a,e);if(d&&!(s9(d)&&(d.status===404||d.status===401||d.status===403)))return this._returnResult({error:d})}return e!=="others"&&(await this._removeSession(),await go(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=f9(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,s;try{const{data:{session:o},error:a}=n;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,n={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await wa(this.storage,this.storageKey,!0));try{return await ke(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(o){if(we(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:s}=await this._useSession(async o=>{var a,d,u,f,p;const{data:g,error:x}=o;if(x)throw x;const w=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(u=e.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await ke(this.fetch,"GET",w,{headers:this.headers,jwt:(p=(f=g.session)===null||f===void 0?void 0:f.access_token)!==null&&p!==void 0?p:void 0})});if(s)throw s;return pn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),this._returnResult({data:{provider:e.provider,url:r==null?void 0:r.url},error:null})}catch(r){if(we(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:s,data:{session:o}}=n;if(s)throw s;const{options:a,provider:d,token:u,access_token:f,nonce:p}=e,g=await ke(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=o==null?void 0:o.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:u,access_token:f,nonce:p,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Nr}),{data:x,error:w}=g;return w?this._returnResult({data:{user:null,session:null},error:w}):!x||!x.session||!x.user?this._returnResult({data:{user:null,session:null},error:new va}):(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("USER_UPDATED",x.session)),this._returnResult({data:x,error:w}))}catch(s){if(we(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)throw a;return await ke(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await b9(async s=>(s>0&&await g9(200*Math.pow(2,s-1)),this._debug(n,"refreshing attempt",s),await ke(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Nr})),(s,o)=>{const a=200*Math.pow(2,s);return o&&Cg(o)&&Date.now()+a-r<_a})}catch(r){if(this._debug(n,"error",r),we(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),pn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await mi(this.storage,this.storageKey);if(s&&this.userStorage){let a=await mi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await ja(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Eg()}else if(s&&!s.user&&!s.user){const a=await mi(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(s.user=a.user,await go(this.storage,this.storageKey+"-user"),await ja(this.storage,this.storageKey,s)):s.user=Eg()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const o=((n=s.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Sg;if(this._debug(r,`session has${o?"":" not"} expired with margin of ${Sg}s`),o){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Cg(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:d}=await this._getUser(s.access_token);!d&&(a!=null&&a.user)?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Cr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yf;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Cr;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const d={data:o.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(o){if(this._debug(s,"error",o),we(o)){const a={data:null,error:o};return Cg(o)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,n,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(u){o.push(u)}});if(await Promise.all(a),o.length>0){for(let d=0;d<o.length;d+=1)console.error(o[d]);throw o[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ja(this.userStorage,this.storageKey+"-user",{user:n.user});const s=Object.assign({},n);delete s.user;const o=hC(s);await ja(this.storage,this.storageKey,o)}else{const s=hC(n);await ja(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await go(this.storage,this.storageKey),await go(this.storage,this.storageKey+"-code-verifier"),await go(this.storage,this.storageKey+"-user"),this.userStorage&&await go(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),_a);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/_a);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${_a}ms, refresh threshold is ${S0} ticks`),s<=S0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Qk)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const s=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[o,a]=await wa(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(d.toString())}if(r!=null&&r.queryParams){const o=new URLSearchParams(r.queryParams);s.push(o.toString())}return r!=null&&r.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;return o?this._returnResult({data:null,error:o}):await ke(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,s;const{data:o,error:a}=n;if(a)return this._returnResult({data:null,error:a});const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:u,error:f}=await ke(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return f?this._returnResult({data:null,error:f}):(e.factorType==="totp"&&u.type==="totp"&&(!((s=u==null?void 0:u.totp)===null||s===void 0)&&s.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?J9(e.webauthn.credential_response):K9(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:u}=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),this._returnResult({data:d,error:u}))})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:s,error:o}=n;if(o)return this._returnResult({data:null,error:o});const a=await ke(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});if(a.error)return a;const{data:d}=a;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:$9(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:G9(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const s={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])s.all.push(o),o.status==="verified"&&s[o.factor_type].push(o);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Ng(r.access_token);let a=null;o.aal&&(a=o.aal);let d=a;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const f=o.amr||[];return{data:{currentLevel:a,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:s}=n;return s?this._returnResult({data:null,error:s}):r?await ke(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Cr})})}catch(n){if(we(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Cr});const a=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:s},error:o}=r;if(o)return this._returnResult({data:null,error:o});if(!s)return this._returnResult({data:null,error:new Cr});const a=await ke(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return a.data&&a.data.redirect_url&&pn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+n9>s)return r;const{data:o,error:a}=await ke(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=s,r=o.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:w,error:C}=await this.getSession();if(C||!w.session)return this._returnResult({data:null,error:C});r=w.session.access_token}const{header:s,payload:o,signature:a,raw:{header:d,payload:u}}=Ng(r);n!=null&&n.allowExpired||N9(o.exp);const f=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!f){const{error:w}=await this.getUser(r);if(w)throw w;return{data:{claims:o,header:s,signature:a},error:null}}const p=E9(s.alg),g=await crypto.subtle.importKey("jwk",f,p,!0,["verify"]);if(!await crypto.subtle.verify(p,g,a,u9(`${d}.${u}`)))throw new E0("Invalid JWT signature");return{data:{claims:o,header:s,signature:a},error:null}}catch(r){if(we(r))return this._returnResult({data:null,error:r});throw r}}}$c.nextInstanceID={};const rq=$c;class sq extends rq{constructor(e){super(e)}}class oq{constructor(e,n,r){var s,o,a;this.supabaseUrl=e,this.supabaseKey=n;const d=Xz(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const u=`sb-${d.hostname.split(".")[0]}-auth-token`,f={db:Vz,realtime:$z,auth:Object.assign(Object.assign({},Fz),{storageKey:u}),global:Hz},p=Yz(r??{},f);this.storageKey=(s=p.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken?(this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(g,x)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(x)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=p.auth)!==null&&a!==void 0?a:{},this.headers,p.global.fetch),this.fetch=Kz(n,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.rest=new QU(new URL("rest/v1",d).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new Uz(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new KU(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,storageKey:a,flowType:d,lock:u,debug:f,throwOnError:p},g,x){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new sq({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),g),storageKey:a,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:s,userStorage:o,flowType:d,lock:u,debug:f,throwOnError:p,fetch:x,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new mz(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const iq=(t,e,n)=>new oq(t,e,n);function aq(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}aq()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const lq="https://rptkhrboejbwexseikuo.supabase.co",cq="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJwdGtocmJvZWpid2V4c2Vpa3VvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzEyNjkyNTIsImV4cCI6MjA0Njg0NTI1Mn0.KxLqKgZ8N5Q6kXhPbKj7gT3dC4mB1wV9zR2eS8fN6jI",gi=iq(lq,cq),cc={announcements:{getAll:async()=>{try{const{data:t,error:e}=await gi.from("announcements").select("*").eq("published",!0).order("created_at",{ascending:!1});if(e)throw e;return{success:!0,data:t||[]}}catch(t){return console.error("Erro ao buscar comunicados:",t),{success:!1,error:t.message}}}},agendaItems:{getAll:async()=>{try{const{data:t,error:e}=await gi.from("agenda_items").select("*").eq("active",!0).order("created_at",{ascending:!1});if(e)throw e;return{success:!0,data:t||[]}}catch(t){return console.error("Erro ao buscar agenda:",t),{success:!1,error:t.message}}}},trainings:{getAll:async()=>{try{const{data:t,error:e}=await gi.from("trainings").select("*").eq("published",!0).order("order_index",{ascending:!0});if(e)throw e;return{success:!0,data:t||[]}}catch(t){return console.error("Erro ao buscar treinamentos:",t),{success:!1,error:t.message}}}},catalogs:{getAll:async()=>{try{const{data:t,error:e}=await gi.from("catalogs").select("*").eq("published",!0).order("created_at",{ascending:!1});if(e)throw e;return{success:!0,data:t||[]}}catch(t){return console.error("Erro ao buscar catlogos:",t),{success:!1,error:t.message}}},incrementDownload:async t=>{try{const{error:e}=await gi.rpc("increment_catalog_downloads",{catalog_id:t});if(e)throw e;return{success:!0}}catch(e){return console.error("Erro ao incrementar downloads do catlogo:",e),{success:!1,error:e.message}}}},downloadMaterials:{getAll:async t=>{try{let e=gi.from("download_materials").select("*").eq("published",!0);t&&t!=="all"&&(e=e.eq("icon_type",t));const{data:n,error:r}=await e.order("created_at",{ascending:!1});if(r)throw r;return{success:!0,data:n||[]}}catch(e){return console.error("Erro ao buscar materiais:",e),{success:!1,error:e.message}}},incrementDownload:async t=>{try{const{error:e}=await gi.rpc("increment_material_downloads",{material_id:t});if(e)throw e;return{success:!0}}catch(e){return console.error("Erro ao incrementar downloads do material:",e),{success:!1,error:e.message}}}}},T0=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 016 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 016-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0018 18a8.967 8.967 0 00-6 2.292m0-14.25v14.25"})}),Ia=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Ub=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0h18M12 12.75h.008v.008H12v-.008zm-3 0h.008v.008H9v-.008zm-3 0h.008v.008H6v-.008zm3 3h.008v.008H9v-.008zm3 0h.008v.008H12v-.008zm3 0h.008v.008H15v-.008zm-3-6h.008v.008H12v-.008z"})}),zb=(t,e="w-6 h-6")=>{const n={className:e};switch(t){case"alert":return l.jsx(Cs,{...n});case"info":return l.jsx(Cs,{...n});case"promo":return l.jsx(Cs,{...n});case"photo":return l.jsx(WC,{...n});case"presentation":return l.jsx(pr,{...n});case"catalog":return l.jsx(pr,{...n});case"document":return l.jsx(pr,{...n});case"Boas-vindas":return l.jsx(JC,{...n});case"Aniversariantes":return l.jsx(_0,{...n});case"PINs":return l.jsx(Da,{...n});case"Datas Comemorativas":return l.jsx(Ub,{...n});default:return null}},yC=async(t,e)=>{try{const n=await fetch(t);if(!n.ok)throw new Error("Network response was not ok");const r=await n.blob(),s=window.URL.createObjectURL(r),o=document.createElement("a");o.style.display="none",o.href=s,o.download=e,document.body.appendChild(o),o.click(),window.URL.revokeObjectURL(s),o.remove()}catch(n){console.error("Download failed:",n),window.open(t,"_blank")}},dq=({announcements:t})=>l.jsx("div",{className:"space-y-4",children:t.length>0?t.map(e=>l.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-900 rounded-lg border border-gray-800",children:[l.jsx("div",{className:"p-3 rounded-full bg-gray-800 text-yellow-500 flex-shrink-0",children:zb(e.type)}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsx("h3",{className:"text-lg font-bold text-white",children:e.title}),e.is_new&&l.jsx("span",{className:"px-3 py-1 text-xs font-bold text-black bg-yellow-500 rounded-full ml-4 flex-shrink-0",children:"Novo"})]}),l.jsx("p",{className:"text-sm text-gray-300 mt-1",children:e.content}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(e.created_at).toLocaleDateString("pt-BR")})]})]},e.id)):l.jsxs("div",{className:"text-center py-16 text-gray-500",children:[l.jsx(Cs,{className:"w-12 h-12 mx-auto"}),l.jsx("p",{className:"mt-2",children:"Nenhum comunicado disponvel."})]})}),uq=({items:t})=>{const e=R.useMemo(()=>t.reduce((n,r)=>((n[r.category]=n[r.category]||[]).push(r),n),{}),[t]);return l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Mensagens automticas para datas e conquistas especiais."}),t.length>0?l.jsx("div",{className:"space-y-6",children:Object.entries(e).map(([n,r])=>l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-3 flex items-center gap-2",children:[zb(n,"w-6 h-6 text-yellow-500")," ",n]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.map(s=>l.jsx("div",{className:"flex flex-col justify-between p-4 bg-gray-900 rounded-lg border border-gray-800",children:l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-white",children:s.title}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.content})]})},s.id))})]},n))}):l.jsxs("div",{className:"text-center py-16 text-gray-500",children:[l.jsx(Ub,{className:"w-12 h-12 mx-auto"}),l.jsx("p",{className:"mt-2",children:"Nenhum item na agenda comemorativa."})]})]})},hq=({trainings:t})=>l.jsx("div",{children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length>0?t.map(e=>l.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden hover:border-yellow-500 transition-colors",children:[l.jsx("div",{className:"aspect-video bg-gray-800 flex items-center justify-center",children:e.cover_image?l.jsx("img",{src:e.cover_image,alt:e.title,className:"w-full h-full object-cover"}):l.jsx(T0,{className:"w-12 h-12 text-gray-600"})}),l.jsxs("div",{className:"p-4",children:[l.jsx("h3",{className:"font-bold text-white mb-1",children:e.title}),e.description&&l.jsx("p",{className:"text-sm text-gray-400 mb-2",children:e.description}),e.duration&&l.jsxs("p",{className:"text-xs text-yellow-500",children:[e.duration," minutos"]})]})]},e.id)):l.jsxs("div",{className:"col-span-full text-center py-16 text-gray-500",children:[l.jsx(T0,{className:"w-12 h-12 mx-auto"}),l.jsx("p",{className:"mt-2",children:"Nenhum treinamento disponvel."})]})})}),fq=({catalogs:t,downloads:e})=>l.jsxs("div",{className:"space-y-8",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[l.jsx(pr,{className:"w-6 h-6 text-yellow-500"})," Catlogos"]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:t.map(n=>l.jsxs("div",{className:"group relative bg-gray-900 border border-gray-800 rounded-lg overflow-hidden",children:[l.jsx("div",{className:"aspect-w-3 aspect-h-4 bg-gray-800 flex items-center justify-center",children:n.cover_image?l.jsx("img",{src:n.cover_image,alt:n.title,className:"w-full h-full object-cover"}):l.jsx(pr,{className:"w-12 h-12 text-gray-600"})}),l.jsx("div",{className:"p-3",children:l.jsx("p",{className:"font-semibold text-white truncate",children:n.title})}),n.pdf_url&&l.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsxs("button",{onClick:()=>yC(n.pdf_url,n.file_name||n.title),className:"flex items-center gap-2 text-sm bg-yellow-500 text-black font-bold px-3 py-1.5 rounded-md hover:bg-yellow-400",children:[l.jsx(Ia,{className:"w-4 h-4"})," Baixar"]})})]},n.id))}),t.length===0&&l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(pr,{className:"w-12 h-12 mx-auto"}),l.jsx("p",{className:"mt-2",children:"Nenhum catlogo disponvel."})]})]}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2 mb-4",children:[l.jsx(Ia,{className:"w-6 h-6 text-yellow-500"})," Materiais para Download"]}),l.jsx("div",{className:"space-y-3",children:e.map(n=>l.jsxs("div",{className:"group flex items-center justify-between p-3 bg-gray-900 border border-gray-800 rounded-lg hover:border-yellow-500 transition-colors",children:[l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"p-2 bg-gray-800 rounded-lg text-yellow-500",children:zb(n.icon_type||"document")}),l.jsxs("div",{children:[l.jsx("p",{className:"font-semibold text-white",children:n.title}),n.description&&l.jsx("p",{className:"text-sm text-gray-400",children:n.description})]})]}),n.file_url&&l.jsx("button",{onClick:()=>yC(n.file_url,n.file_name||n.title),className:"p-2 text-gray-300 hover:text-yellow-500 transition-colors opacity-0 group-hover:opacity-100",children:l.jsx(Ia,{className:"w-5 h-5"})})]},n.id))}),e.length===0&&l.jsxs("div",{className:"text-center py-12 text-gray-500",children:[l.jsx(Ia,{className:"w-12 h-12 mx-auto"}),l.jsx("p",{className:"mt-2",children:"Nenhum material disponvel."})]})]})]}),pq=()=>{const[t,e]=R.useState("announcements"),[n,r]=R.useState(!0),[s,o]=R.useState([]),[a,d]=R.useState([]),[u,f]=R.useState([]),[p,g]=R.useState([]),[x,w]=R.useState([]);R.useEffect(()=>{C()},[]);const C=async()=>{r(!0);try{const[N,k,_,j,P]=await Promise.all([cc.announcements.getAll(),cc.agendaItems.getAll(),cc.trainings.getAll(),cc.catalogs.getAll(),cc.downloadMaterials.getAll()]);N.success&&N.data&&o(N.data),k.success&&k.data&&d(k.data),_.success&&_.data&&f(_.data),j.success&&j.data&&g(j.data),P.success&&P.data&&w(P.data)}catch(N){console.error("Erro ao carregar dados:",N)}finally{r(!1)}},E=({tabId:N,label:k,icon:_})=>l.jsxs("button",{onClick:()=>e(N),className:`flex items-center gap-2 px-4 py-3 text-sm font-bold transition-colors rounded-t-lg border-b-2 whitespace-nowrap ${t===N?"border-yellow-500 text-yellow-500":"border-transparent text-gray-400 hover:text-white"}`,children:[_," ",k]});return n?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400"})}):l.jsxs("div",{className:"animate-fade-in",children:[l.jsx("h1",{className:"text-3xl font-bold text-yellow-500 mb-6",children:"Central de Comunicao e Contedo"}),l.jsx("div",{className:"border-b border-gray-800 mb-6",children:l.jsxs("nav",{className:"-mb-px flex space-x-2 overflow-x-auto",children:[l.jsx(E,{tabId:"announcements",label:"Mural de Comunicados",icon:l.jsx(Cs,{className:"w-5 h-5"})}),l.jsx(E,{tabId:"agenda",label:"Agenda Comemorativa",icon:l.jsx(Ub,{className:"w-5 h-5"})}),l.jsx(E,{tabId:"training",label:"Central de Treinamentos",icon:l.jsx(T0,{className:"w-5 h-5"})}),l.jsx(E,{tabId:"materials",label:"Materiais de Apoio",icon:l.jsx(Ia,{className:"w-5 h-5"})})]})}),l.jsxs("div",{className:"animate-fade-in",children:[t==="announcements"&&l.jsx(dq,{announcements:s}),t==="agenda"&&l.jsx(uq,{items:a}),t==="training"&&l.jsx(hq,{trainings:u}),t==="materials"&&l.jsx(fq,{catalogs:p,downloads:x})]})]})},Zc=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),mq=({order:t,settings:e,product:n,onAccept:r,onDecline:s})=>{const[o,a]=R.useState(!1),d=()=>{a(!0),setTimeout(()=>{r(),a(!1)},1500)};return l.jsxs("div",{className:"max-w-2xl mx-auto my-8 p-6 rounded-lg border-2 border-dashed border-[rgb(var(--color-brand-gold))] bg-[rgb(var(--color-brand-gold))]/[.05] animate-pulse-border",children:[l.jsx("style",{children:`
                @keyframes pulse-border {
                    0%, 100% { border-color: rgb(var(--color-brand-gold)); }
                    50% { border-color: rgb(var(--color-warning)); }
                }
                .animate-pulse-border {
                    animation: pulse-border 2.5s ease-in-out infinite;
                }
            `}),l.jsx("h2",{className:"text-2xl font-bold font-display text-[rgb(var(--color-brand-gold))] text-center",children:e.title}),l.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-6 mt-4",children:[l.jsx("img",{src:n.images[0],alt:n.name,className:"w-32 h-32 object-cover rounded-md flex-shrink-0"}),l.jsxs("div",{children:[l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:e.description}),l.jsxs("div",{className:"flex items-baseline gap-2 mt-2",children:[l.jsx("span",{className:"text-2xl font-bold text-[rgb(var(--color-brand-gold))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.offerPrice)}),l.jsx("span",{className:"text-md text-[rgb(var(--color-brand-text-dim))] line-through",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(n.price)})]})]})]}),l.jsxs("div",{className:"mt-6 space-y-3",children:[l.jsxs("button",{onClick:d,disabled:o,className:"w-full bg-green-600 text-white font-bold py-3 px-4 rounded-md hover:bg-green-500 transition-colors disabled:opacity-70 disabled:cursor-wait flex items-center justify-center gap-2",children:[o&&l.jsx(_r,{className:"w-5 h-5"}),e.acceptButtonText]}),l.jsx("button",{onClick:s,disabled:o,className:"w-full text-center text-[rgb(var(--color-brand-text-dim))] hover:text-white text-sm transition-colors disabled:opacity-50",children:e.declineButtonText})]})]})},gq=({order:t,onContinueShopping:e,upsellSettings:n,allProducts:r,onAcceptUpsell:s})=>{const[o,a]=R.useState("pending"),[d,u]=R.useState(!1),f=R.useMemo(()=>n.enabled?r.find(w=>w.id===n.productId):null,[n,r]);if(!t)return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] text-white min-h-screen flex flex-col items-center justify-center text-center p-4",children:[l.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Pedido no encontrado."}),l.jsx("button",{onClick:e,className:"bg-[rgb(var(--color-brand-gold))] text-black font-bold py-3 px-8 rounded-full text-lg",children:"Voltar para a Loja"})]});const p=()=>{f&&(s(t,f,n.offerPrice),a("accepted"))},g=()=>{t.pixCopyableCode&&(navigator.clipboard.writeText(t.pixCopyableCode),u(!0),setTimeout(()=>u(!1),2e3))},x=()=>f&&o==="pending"?l.jsx(mq,{order:t,settings:n,product:f,onAccept:p,onDecline:()=>a("declined")}):l.jsxs(l.Fragment,{children:[l.jsx(Zc,{className:"w-20 h-20 text-[rgb(var(--color-success))] mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold font-display text-white",children:"Obrigado por sua compra!"}),l.jsx("p",{className:"text-lg text-[rgb(var(--color-brand-text-dim))] mt-2",children:"Seu pedido foi recebido e est sendo processado."}),o==="accepted"&&l.jsx("p",{className:"text-lg text-[rgb(var(--color-success))] mt-2 font-semibold",children:"Sua oferta especial foi adicionada com sucesso!"})]});return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] text-white min-h-screen",children:[l.jsx("header",{className:"bg-[rgb(var(--color-brand-gray))] backdrop-blur-sm border-b border-[rgb(var(--color-brand-gold))]/[.30]",children:l.jsx("div",{className:"container mx-auto px-4 h-20 flex items-center",children:l.jsx("span",{className:"text-3xl font-display text-[rgb(var(--color-brand-gold))]",children:"RS Prlipsi"})})}),l.jsxs("main",{className:"container mx-auto px-4 py-12 text-center",children:[x(),t.boletoUrl&&l.jsxs("div",{className:"max-w-2xl mx-auto my-8 p-6 rounded-lg border-2 border-[rgb(var(--color-brand-gold))] bg-[rgb(var(--color-brand-gold))]/[.05]",children:[l.jsx("h2",{className:"text-2xl font-bold font-display text-[rgb(var(--color-brand-gold))] text-center",children:"Boleto Gerado com Sucesso!"}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))] text-center mt-2",children:"Clique no boto abaixo para visualizar e imprimir seu boleto."}),l.jsx("div",{className:"mt-6 text-center",children:l.jsx("a",{href:t.boletoUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-[rgb(var(--color-brand-gold))] text-black font-bold py-3 px-8 rounded-full text-lg",children:"Visualizar Boleto"})})]}),t.pixQrCodeUrl&&l.jsxs("div",{className:"max-w-2xl mx-auto my-8 p-6 rounded-lg border-2 border-[rgb(var(--color-brand-gold))] bg-[rgb(var(--color-brand-gold))]/[.05]",children:[l.jsx("h2",{className:"text-2xl font-bold font-display text-[rgb(var(--color-brand-gold))] text-center",children:"Pague com PIX para Finalizar"}),l.jsxs("div",{className:"text-center p-4 rounded-lg",children:[l.jsx("img",{src:t.pixQrCodeUrl,alt:"QR Code PIX",className:"mx-auto bg-white p-2 rounded-md"}),l.jsx("p",{className:"text-sm mt-4 text-[rgb(var(--color-brand-text-dim))]",children:"Aponte a cmera do seu celular para pagar, ou use o cdigo abaixo."}),l.jsxs("button",{onClick:g,className:"mt-4 w-full bg-[rgb(var(--color-brand-gray))] text-white font-semibold py-3 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))] flex items-center justify-center gap-2",children:[d?l.jsx(Va,{className:"w-5 h-5 text-[rgb(var(--color-success))]"}):l.jsx(Ha,{className:"w-5 h-5"}),d?"Cdigo Copiado!":"Copiar Cdigo PIX"]})]})]}),l.jsxs("div",{className:"max-w-2xl mx-auto bg-[rgb(var(--color-brand-gray))] rounded-lg p-6 my-8 text-left",children:[l.jsxs("h2",{className:"text-xl font-bold text-white mb-4 border-b border-[rgb(var(--color-brand-gray-light))] pb-2",children:["Resumo do Pedido ",l.jsx("span",{className:"text-[rgb(var(--color-brand-gold))] font-mono",children:t.id})]}),l.jsx("div",{className:"space-y-3",children:t.items.map((w,C)=>l.jsxs("div",{className:"flex justify-between items-center text-sm",children:[l.jsxs("p",{className:"text-white",children:[w.productName," ",l.jsxs("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:["x",w.quantity]})]}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(w.price*w.quantity)})]},`${w.variantId}-${C}`))}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-[rgb(var(--color-brand-gray-light))] space-y-2 text-sm",children:[l.jsxs("div",{className:"flex justify-between",children:[l.jsx("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"Subtotal"}),l.jsx("span",{className:"text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.subtotal)})]}),l.jsxs("div",{className:"flex justify-between",children:[l.jsxs("span",{className:"text-[rgb(var(--color-brand-text-dim))]",children:["Frete (",t.shippingMethod,")"]}),l.jsx("span",{className:"text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.shippingCost)})]}),t.discount>0&&l.jsxs("div",{className:"flex justify-between text-[rgb(var(--color-success))]",children:[l.jsxs("span",{children:["Desconto (",t.appliedCoupon,")"]}),l.jsxs("span",{children:["- ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.discount)]})]}),l.jsxs("div",{className:"flex justify-between font-bold text-lg pt-2 text-[rgb(var(--color-brand-gold))]",children:[l.jsx("span",{children:"Total"}),l.jsx("span",{children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.total)})]})]})]}),l.jsx("button",{onClick:e,className:"bg-[rgb(var(--color-brand-gold))] text-black font-bold py-3 px-8 rounded-full text-lg hover:bg-yellow-400 transition-transform transform hover:scale-105",children:"Continuar Comprando"})]})]})},vC=({settings:t,products:e,onSave:n})=>{const[r,s]=R.useState(t),o=JSON.stringify(r)!==JSON.stringify(t);R.useEffect(()=>{s(t)},[t]);const a=()=>{n(r),alert("Configuraes do Order Bump salvas com sucesso!")},d=()=>s(t),u=g=>{const{name:x,value:w}=g.target;s(C=>({...C,[x]:x==="offerPrice"?Number(w):w}))},f=g=>{s(x=>({...x,enabled:g}))},p=e.find(g=>g.id===r.productId);return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[o&&l.jsx("p",{className:"text-sm text-yellow-400",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:d,disabled:!o,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50",children:"Descartar"}),l.jsx("button",{onClick:a,disabled:!o,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50",children:"Salvar"})]})}),l.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Configurao do Order Bump"}),l.jsx(wt,{checked:r.enabled,onChange:f,labelId:"order-bump-toggle"})]}),r.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"productId",className:"block text-sm font-medium text-gray-400 mb-2",children:"Produto da Oferta"}),l.jsx("select",{id:"productId",name:"productId",value:r.productId,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white",children:e.map(g=>l.jsx("option",{value:g.id,children:g.name},g.id))}),p&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Preo original: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p.price)]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"offerPrice",className:"block text-sm font-medium text-gray-400 mb-2",children:"Preo da Oferta"}),l.jsx("input",{type:"number",id:"offerPrice",name:"offerPrice",value:r.offerPrice,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-400 mb-2",children:"Ttulo da Oferta"}),l.jsx("input",{type:"text",id:"title",name:"title",value:r.title,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ex:  SIM, EU QUERO ESTA OFERTA ESPECIAL!"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Descrio da Oferta"}),l.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:u,rows:3,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]})]})})]})},wC=({settings:t,products:e,onSave:n})=>{const[r,s]=R.useState(t),o=JSON.stringify(r)!==JSON.stringify(t);R.useEffect(()=>{s(t)},[t]);const a=()=>{n(r),alert("Configuraes do Upsell salvas com sucesso!")},d=()=>s(t),u=g=>{const{name:x,value:w}=g.target;s(C=>({...C,[x]:x==="offerPrice"?Number(w):w}))},f=g=>{s(x=>({...x,enabled:g}))},p=e.find(g=>g.id===r.productId);return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"pb-6 mb-6 flex justify-end items-center border-b border-gray-800",children:l.jsxs("div",{className:"flex items-center gap-4",children:[o&&l.jsx("p",{className:"text-sm text-yellow-400",children:"Voc tem alteraes no salvas."}),l.jsx("button",{onClick:d,disabled:!o,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 disabled:opacity-50",children:"Descartar"}),l.jsx("button",{onClick:a,disabled:!o,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 disabled:opacity-50",children:"Salvar"})]})}),l.jsx("div",{className:"max-w-4xl mx-auto space-y-8",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Upsell Ps-Compra (One-Click)"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Oferea um produto complementar logo aps a finalizao da compra."})]}),l.jsx(wt,{checked:r.enabled,onChange:f,labelId:"upsell-toggle"})]}),r.enabled&&l.jsxs("div",{className:"p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"productId",className:"block text-sm font-medium text-gray-400 mb-2",children:"Produto da Oferta"}),l.jsx("select",{id:"productId",name:"productId",value:r.productId,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white",children:e.map(g=>l.jsx("option",{value:g.id,children:g.name},g.id))}),p&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Preo original: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(p.price)]})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"offerPrice",className:"block text-sm font-medium text-gray-400 mb-2",children:"Preo da Oferta de Upsell"}),l.jsx("input",{type:"number",id:"offerPrice",name:"offerPrice",value:r.offerPrice,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-400 mb-2",children:"Ttulo da Oferta"}),l.jsx("input",{type:"text",id:"title",name:"title",value:r.title,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ex:  OFERTA NICA PS-COMPRA! "})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-400 mb-2",children:"Descrio da Oferta"}),l.jsx("textarea",{id:"description",name:"description",value:r.description,onChange:u,rows:3,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"acceptButtonText",className:"block text-sm font-medium text-gray-400 mb-2",children:"Texto do Boto de Aceitar"}),l.jsx("input",{type:"text",id:"acceptButtonText",name:"acceptButtonText",value:r.acceptButtonText,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"declineButtonText",className:"block text-sm font-medium text-gray-400 mb-2",children:"Texto do Boto de Recusar"}),l.jsx("input",{type:"text",id:"declineButtonText",name:"declineButtonText",value:r.declineButtonText,onChange:u,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]})]})]})})]})},bq=({status:t})=>{const e={"No enviado":"bg-gray-500/20 text-gray-300",Enviado:"bg-blue-500/20 text-blue-300",Recuperado:"bg-green-500/20 text-green-300"};return l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${e[t]}`,children:t})},SC=({carts:t})=>{const e=t.reduce((r,s)=>r+s.total,0),n=r=>{alert(`Simulao: E-mail de recuperao enviado para ${r}.`)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 flex items-center gap-4",children:[l.jsx(Kh,{className:"w-8 h-8 text-yellow-400"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-gray-400",children:"Carrinhos Abandonados"}),l.jsx("p",{className:"text-2xl font-bold text-white",children:t.length})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 flex items-center gap-4",children:[l.jsx(Zc,{className:"w-8 h-8 text-yellow-400"}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-gray-400",children:"Valor Total Abandonado"}),l.jsx("p",{className:"text-2xl font-bold text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsx("div",{className:"p-4 border-b border-gray-800",children:l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Lista de Carrinhos"})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[l.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-black",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3",children:"Cliente"}),l.jsx("th",{className:"px-6 py-3",children:"Data"}),l.jsx("th",{className:"px-6 py-3",children:"Itens"}),l.jsx("th",{className:"px-6 py-3 text-right",children:"Valor"}),l.jsx("th",{className:"px-6 py-3",children:"Status Recuperao"}),l.jsx("th",{className:"px-6 py-3 text-center",children:"Aes"})]})}),l.jsx("tbody",{children:t.map(r=>l.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[l.jsxs("td",{className:"px-6 py-4",children:[l.jsx("p",{className:"font-medium text-white",children:r.customerName}),l.jsx("p",{className:"text-xs text-gray-500",children:r.customerEmail})]}),l.jsx("td",{className:"px-6 py-4",children:new Date(r.abandonedAt).toLocaleString("pt-BR")}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("ul",{className:"text-xs",children:r.items.map(s=>l.jsxs("li",{children:["- ",s.name," (x",s.quantity,")"]},s.id))})}),l.jsx("td",{className:"px-6 py-4 text-right font-semibold text-white",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(r.total)}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(bq,{status:r.recoveryStatus})}),l.jsx("td",{className:"px-6 py-4 text-center",children:l.jsx("button",{onClick:()=>n(r.customerEmail),className:"text-blue-400 hover:text-blue-300 disabled:text-gray-600 disabled:cursor-not-allowed",title:"Enviar e-mail de recuperao",disabled:r.recoveryStatus!=="No enviado",children:l.jsx(ik,{className:"w-5 h-5"})})})]},r.id))})]})})]})]})},tA=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 9.75l4.5 4.5m0-4.5l-4.5 4.5M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),xq=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),yq=({status:t})=>{const e={Pendente:{icon:xq,color:"yellow"},Aprovada:{icon:Zc,color:"green"},Rejeitada:{icon:tA,color:"red"}},{icon:n,color:r}=e[t],s={yellow:"bg-yellow-500/10 text-yellow-400",green:"bg-green-500/10 text-green-400",red:"bg-red-500/10 text-red-400"};return l.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded-full ${s[r]}`,children:[l.jsx(n,{className:"w-3.5 h-3.5"}),t]})},CC=({reviews:t,products:e,onReviewApprove:n,onReviewDelete:r})=>{const[s,o]=R.useState([]),[a,d]=R.useState("all"),u=R.useMemo(()=>a==="all"?t:t.filter(x=>x.status===a),[t,a]),f=x=>{o(x.target.checked?u.map(w=>w.id):[])},p=x=>{o(w=>w.includes(x)?w.filter(C=>C!==x):[...w,x])},g=x=>{s.length!==0&&(x==="delete"?window.confirm(`Tem certeza que deseja excluir ${s.length} avaliao(es)?`)&&s.forEach(w=>r(w)):s.forEach(w=>{x==="approve"&&n(w)}),o([]))};return l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Moderar Avaliaes"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Aprove, rejeite ou exclua as avaliaes enviadas pelos clientes."})]}),l.jsx("div",{className:"flex gap-2",children:["all","Pendente","Aprovada","Rejeitada"].map(x=>l.jsx("button",{onClick:()=>d(x),className:`px-3 py-1 text-sm rounded-full ${a===x?"bg-yellow-500 text-black font-semibold":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:x==="all"?"Todas":x},x))})]}),s.length>0&&l.jsxs("div",{className:"p-4 bg-gray-800/50 flex items-center gap-4",children:[l.jsxs("span",{className:"text-sm text-white",children:[s.length," selecionada(s)"]}),l.jsxs("button",{onClick:()=>g("approve"),className:"flex items-center gap-2 text-sm font-semibold bg-green-600/50 text-white py-1.5 px-3 rounded-md hover:bg-green-600",children:[l.jsx(Zc,{className:"w-4 h-4"})," Aprovar"]}),l.jsxs("button",{onClick:()=>g("reject"),className:"flex items-center gap-2 text-sm font-semibold bg-red-600/50 text-white py-1.5 px-3 rounded-md hover:bg-red-600",children:[l.jsx(tA,{className:"w-4 h-4"})," Rejeitar"]}),l.jsxs("button",{onClick:()=>g("delete"),className:"flex items-center gap-2 text-sm font-semibold bg-gray-700 text-white py-1.5 px-3 rounded-md hover:bg-gray-600",children:[l.jsx(cn,{className:"w-4 h-4"})," Excluir"]})]}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[l.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-black",children:l.jsxs("tr",{children:[l.jsx("th",{className:"p-4",children:l.jsx("input",{type:"checkbox",onChange:f,checked:s.length>0&&s.length===u.length})}),l.jsx("th",{className:"px-6 py-3",children:"Avaliao"}),l.jsx("th",{className:"px-6 py-3",children:"Produto"}),l.jsx("th",{className:"px-6 py-3",children:"Data"}),l.jsx("th",{className:"px-6 py-3",children:"Status"})]})}),l.jsx("tbody",{children:u.map(x=>l.jsxs("tr",{className:"border-b border-gray-800 hover:bg-gray-800/50",children:[l.jsx("td",{className:"w-4 p-4",children:l.jsx("input",{type:"checkbox",checked:s.includes(x.id),onChange:()=>p(x.id)})}),l.jsxs("td",{className:"px-6 py-4 max-w-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((w,C)=>l.jsx(Da,{className:`w-4 h-4 ${C<x.rating?"text-yellow-400":"text-gray-600"}`},C))}),l.jsx("p",{className:"font-semibold text-white",children:x.title})]}),l.jsxs("p",{className:"text-xs text-gray-300 italic",children:['"',x.text,'"']}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["- ",x.author]})]}),l.jsx("td",{className:"px-6 py-4 text-white font-medium",children:x.productName}),l.jsx("td",{className:"px-6 py-4",children:new Date(x.createdAt).toLocaleDateString("pt-BR")}),l.jsx("td",{className:"px-6 py-4",children:l.jsx(yq,{status:x.status})})]},x.id))})]})})]})},vq=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",children:l.jsx("path",{d:"M16 9V4h-2v5h-4V4H8v5H3.56c-.34 0-.67.14-.9.37-.23.23-.34.55-.31.87l.45 4.88c.11 1.22.69 2.33 1.58 3.09.89.76 2.06 1.23 3.32 1.23h.1c.34 0 .67-.14.9-.37.23-.23.34-.55.31-.87l-.45-4.88c-.02-.2-.11-.38-.25-.52-.14-.14-.33-.21-.53-.21H6v-3h12v3h-2.56c-.2 0-.39.08-.53.21-.14.14-.23.32-.25.52l-.45 4.88c-.03.32.08.64.31.87.23.23.56.37.9.37h.1c1.26 0 2.43-.47 3.32-1.23.89-.76 1.47-1.87 1.58-3.09l.45-4.88c.03-.32-.08-.64-.31-.87-.23-.23-.56-.37-.9-.37H16z"})}),NC=({announcements:t,onNavigate:e,onDelete:n})=>{const[r,s]=R.useState(""),[o,a]=R.useState([]),d=R.useMemo(()=>t.filter(p=>p.title.toLowerCase().includes(r.toLowerCase())).sort((p,g)=>p.isPinned&&!g.isPinned?-1:!p.isPinned&&g.isPinned?1:new Date(g.date).getTime()-new Date(p.date).getTime()),[t,r]),u=p=>{a(p.target.checked?d.map(g=>g.id):[])},f=p=>{a(g=>g.includes(p)?g.filter(x=>x!==p):[...g,p])};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>e("communication"),className:"flex items-center gap-2 text-sm font-semibold text-gray-300 hover:text-yellow-400",children:[l.jsx(Mi,{className:"w-5 h-5"}),"Voltar para a Central"]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar comunicados...",value:r,onChange:p=>s(p.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 pl-10 pr-4"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-gray-400"})})]}),l.jsx("button",{onClick:()=>e("addEditAnnouncement"),className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:"+ Novo Comunicado"})]}),o.length>0&&l.jsx("div",{className:"p-4 bg-gray-800/50",children:l.jsxs("button",{onClick:()=>n(o),className:"flex items-center gap-2 text-sm text-red-400 hover:text-red-300",children:[l.jsx(cn,{className:"w-5 h-5"}),"Excluir ",o.length," comunicado(s)"]})}),l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full text-sm text-left text-gray-400",children:[l.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-black",children:l.jsxs("tr",{children:[l.jsx("th",{scope:"col",className:"p-4",children:l.jsx("input",{type:"checkbox",onChange:u,checked:o.length>0&&o.length===d.length})}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Ttulo"}),l.jsx("th",{scope:"col",className:"px-6 py-3",children:"Data"})]})}),l.jsx("tbody",{children:d.map(p=>l.jsxs("tr",{className:`border-b border-gray-800 hover:bg-gray-800/50 ${p.isPinned?"bg-yellow-400/5":""}`,children:[l.jsx("td",{className:"w-4 p-4",children:l.jsx("input",{type:"checkbox",checked:o.includes(p.id),onChange:()=>f(p.id)})}),l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center gap-3",children:[p.isPinned&&l.jsx("span",{title:"Fixado",children:l.jsx(vq,{className:"w-5 h-5 text-yellow-400 flex-shrink-0"})}),l.jsx("button",{onClick:()=>e("addEditAnnouncement",p),className:"font-medium text-white hover:text-yellow-400",children:p.title})]})}),l.jsx("td",{className:"px-6 py-4",children:new Date(p.date).toLocaleDateString("pt-BR")})]},p.id))})]})})]})]})},EC=({announcement:t,onSave:e,onCancel:n})=>{const r=!!t,[s,o]=R.useState({title:"",content:"",isPinned:!1,date:new Date().toISOString(),...t}),a=R.useRef(null),[d,u]=R.useState(!1),f=x=>{const{name:w,value:C}=x.target;o(E=>({...E,[w]:C}))},p=x=>{var w;if(x.preventDefault(),!((w=s.title)!=null&&w.trim())){alert("Por favor, insira um ttulo.");return}e(s)},g=async()=>{if(!s.title){alert("Por favor, insira um ttulo antes de gerar o contedo.");return}u(!0);try{const x=new Wa({apiKey:void 0}),w=`Voc  um especialista em comunicao interna para uma empresa de luxo chamada RS Prlipsi. Com base no ttulo do comunicado "${s.title}", escreva um comunicado oficial claro, profissional e engajador. Use formatao rica em HTML, como ttulos (h2), pargrafos (p), listas (ul/li) e negrito (strong) para uma boa legibilidade.`,C=await x.models.generateContent({model:"gemini-2.5-flash",contents:w});o(E=>({...E,content:C.text??""}))}catch(x){console.error("AI Content Generation Error:",x),alert("Ocorreu um erro ao gerar o contedo. Tente novamente.")}finally{u(!1)}};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-gray-800",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:r?"Editar Comunicado":"Novo Comunicado"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md",children:"Descartar"}),l.jsx("button",{type:"button",onClick:()=>{var x;return(x=a.current)==null?void 0:x.requestSubmit()},className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md",children:"Salvar"})]})]}),l.jsx("form",{onSubmit:p,ref:a,className:"max-w-4xl mx-auto space-y-6",children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-white mb-2",children:"Ttulo"}),l.jsx("input",{type:"text",name:"title",id:"title",value:s.title,onChange:f,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-medium text-white",children:"Contedo"}),l.jsxs("button",{type:"button",onClick:g,disabled:d,className:"flex items-center gap-1.5 text-sm font-semibold bg-yellow-500/10 text-yellow-400 py-1 px-3 rounded-md",children:[d?l.jsx(_r,{className:"w-4 h-4"}):l.jsx(Lh,{className:"w-4 h-4"}),d?"Gerando...":"Gerar com IA"]})]}),l.jsx(RT,{value:s.content||"",onChange:x=>o(w=>({...w,content:x}))})]}),l.jsxs("div",{className:"flex items-center gap-3 pt-4",children:[l.jsx(wt,{checked:!!s.isPinned,onChange:x=>o(w=>({...w,isPinned:x})),labelId:"pin-toggle"}),l.jsx("label",{htmlFor:"pin-toggle",className:"text-sm text-white",children:"Fixar no topo da lista"})]})]})})]})},wq=({module:t,onNavigate:e,completedLessons:n})=>{const r=t.lessons.filter(o=>n.includes(o.id)).length,s=t.lessons.length>0?r/t.lessons.length*100:0;return l.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-lg overflow-hidden group flex flex-col transition-all duration-300 hover:shadow-lg hover:shadow-yellow-500/10 hover:border-gray-700 hover:-translate-y-1",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:t.thumbnailUrl,alt:t.title,className:"w-full h-40 object-cover"}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent"}),l.jsxs("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full",children:[t.lessons.length," Aulas"]})]}),l.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[l.jsx("h3",{className:"text-lg font-bold text-white group-hover:text-yellow-400 transition-colors flex-grow",children:t.title}),l.jsx("p",{className:"text-sm text-gray-400 mt-2 h-16",children:t.description}),l.jsxs("div",{className:"mt-4",children:[l.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-400 mb-1",children:[l.jsx("span",{children:"Progresso"}),l.jsxs("span",{children:[s.toFixed(0),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-yellow-400 h-2 rounded-full",style:{width:`${s}%`}})}),l.jsx("button",{onClick:e,className:"w-full mt-6 bg-gray-700 text-white font-bold py-2 px-4 rounded-md hover:bg-yellow-500 hover:text-black transition-colors",children:"Acessar Treinamento"})]})]})]})},TC=({trainings:t,onNavigate:e,completedLessons:n})=>l.jsxs("div",{className:"space-y-6",children:[l.jsxs("button",{onClick:()=>e("communication"),className:"flex items-center gap-2 text-sm font-semibold text-gray-300 hover:text-yellow-400 -mb-2",children:[l.jsx(Mi,{className:"w-5 h-5"}),"Voltar para a Central de Comunicao"]}),l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:"Central de Treinamentos"}),l.jsx("p",{className:"text-gray-400",children:"Capacite-se e impulsione seus resultados."})]}),l.jsxs("button",{onClick:()=>e("addEditTraining"),className:"flex items-center gap-2 text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:[l.jsx(_b,{className:"w-5 h-5"}),"Adicionar Mdulo"]})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(r=>l.jsx(wq,{module:r,completedLessons:n,onNavigate:()=>e("trainingModuleDetail",r)},r.id))})]}),kC=({training:t,onSave:e,onCancel:n})=>{const r=!!t,[s,o]=R.useState({title:"",description:"",thumbnailUrl:"",lessons:[],...t}),a=R.useRef(null),d=x=>{const{name:w,value:C}=x.target;o(E=>({...E,[w]:C}))},u=(x,w,C)=>{const E=[...s.lessons||[]];E[x][w]=C,o(N=>({...N,lessons:E}))},f=()=>{const x={id:`l-${Date.now()}`,title:"Nova Aula",videoUrl:"",content:""};o(w=>({...w,lessons:[...w.lessons||[],x]}))},p=x=>{o(w=>({...w,lessons:(w.lessons||[]).filter((C,E)=>E!==x)}))},g=x=>{if(x.preventDefault(),!s.title){alert("O ttulo do mdulo  obrigatrio.");return}e(s)};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-gray-800",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:r?"Editar Mdulo":"Novo Mdulo de Treinamento"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md",children:"Descartar"}),l.jsx("button",{type:"button",onClick:()=>{var x;return(x=a.current)==null?void 0:x.requestSubmit()},className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md",children:"Salvar Mdulo"})]})]}),l.jsxs("form",{onSubmit:g,ref:a,className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsx("input",{name:"title",value:s.title,onChange:d,placeholder:"Ttulo do Mdulo",className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsx("textarea",{name:"description",value:s.description,onChange:d,placeholder:"Descrio do Mdulo",rows:3,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Imagem de Capa (Thumbnail)"}),l.jsx(Dn,{currentImage:s.thumbnailUrl||"",onImageUpload:x=>o(w=>({...w,thumbnailUrl:x})),placeholderText:"Capa do Mdulo"})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Aulas do Mdulo"}),l.jsx("div",{className:"space-y-4",children:(s.lessons||[]).map((x,w)=>l.jsxs("div",{className:"bg-gray-800/50 p-4 rounded-lg border border-gray-700",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsxs("h4",{className:"font-semibold text-white",children:["Aula ",w+1]}),l.jsx("button",{type:"button",onClick:()=>p(w),className:"text-gray-400 hover:text-red-500",children:l.jsx(cn,{className:"w-5 h-5"})})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("input",{value:x.title,onChange:C=>u(w,"title",C.target.value),placeholder:"Ttulo da Aula",className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white text-sm"}),l.jsx("input",{value:x.videoUrl,onChange:C=>u(w,"videoUrl",C.target.value),placeholder:"URL do Vdeo",className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white text-sm"}),l.jsx("textarea",{value:x.content,onChange:C=>u(w,"content",C.target.value),placeholder:"Contedo/Transcrio para IA",rows:4,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-1 px-2 text-white text-sm"})]})]},w))}),l.jsx("button",{type:"button",onClick:f,className:"mt-4 text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"+ Adicionar Aula"})]})]})]})},Sq=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.91 11.672a.375.375 0 010 .656l-5.603 3.113a.375.375 0 01-.557-.328V8.887c0-.286.307-.466.557-.327l5.603 3.112z"})]}),Cq=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5"})}),Nq=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 100-2.186m0 2.186c-.18.324-.283.696-.283 1.093s.103.77.283 1.093m0-2.186l-9.566-5.314"})}),Eq=({module:t,onNavigate:e,completedLessons:n,onToggleLessonComplete:r,onLikeLesson:s})=>{var ne;const[o,a]=R.useState(t.lessons[0]||null),[d,u]=R.useState([{sender:"ai",text:"Ol! Faa uma pergunta sobre esta aula e eu responderei com base no contedo."}]),[f,p]=R.useState(""),[g,x]=R.useState(!1),[w,C]=R.useState(null),[E,N]=R.useState(null),[k,_]=R.useState({}),[j,P]=R.useState(null),[z,O]=R.useState("");R.useEffect(()=>{a(t.lessons[0]||null),u([{sender:"ai",text:"Ol! Faa uma pergunta sobre esta aula e eu responderei com base no contedo."}]),N(null),_({}),P(null)},[t]),R.useEffect(()=>{u([{sender:"ai",text:"Ol! Faa uma pergunta sobre esta aula e eu responderei com base no contedo."}]),N(null),_({}),P(null)},[o]);const D=async oe=>{if(!o)return;x(!0);const me=new Wa({apiKey:void 0});let fe="",q="";try{if(oe==="summarize")fe=`Resuma o seguinte contedo da aula de forma concisa e clara:

---
${o.content}
---`,q=`Resumo da Aula: ${o.title}`;else if(oe==="explain")fe=`Explique os conceitos chave do seguinte contedo da aula como se eu fosse um iniciante:

---
${o.content}
---`,q=`Explicao da Aula: ${o.title}`;else if(oe==="quiz"){const be=await me.models.generateContent({model:"gemini-2.5-flash",contents:`Gere um quiz com 3 perguntas de mltipla escolha (4 opes cada) sobre o seguinte contedo:

---
${o.content}
---`,config:{responseMimeType:"application/json",responseSchema:{type:Kt.OBJECT,properties:{questions:{type:Kt.ARRAY,items:{type:Kt.OBJECT,properties:{question:{type:Kt.STRING},options:{type:Kt.ARRAY,items:{type:Kt.STRING}},correctAnswerIndex:{type:Kt.INTEGER}}}}}}}}),ve=JSON.parse(be.text??"{}");ve.questions&&(N(ve.questions),P(null),_({})),x(!1);return}const W=await me.models.generateContent({model:"gemini-2.5-flash",contents:fe});C({title:q,content:W.text??"No foi possvel gerar uma resposta."})}catch(W){console.error("AI Interaction Error:",W),C({title:"Erro",content:"Ocorreu um erro ao processar sua solicitao."})}finally{x(!1)}},te=async()=>{if(!f.trim()||!o)return;const oe={sender:"user",text:f};u(me=>[...me,oe]),p(""),x(!0);try{const me=new Wa({apiKey:void 0}),fe=`Voc  a RSIA, uma assistente de IA da RS Prlipsi. Responda  pergunta do usurio baseando-se ESTREITAMENTE no contedo da aula fornecido abaixo. Se a resposta no estiver no contedo, diga que voc s pode responder sobre o material da aula.

[CONTEDO DA AULA]
${o.content}

[PERGUNTA DO USURIO]
${f}`,W={sender:"ai",text:(await me.models.generateContent({model:"gemini-2.5-flash",contents:fe})).text??"No consegui processar sua pergunta."};u(be=>[...be,W])}catch(me){console.error("AI Chat Error:",me);const fe={sender:"ai",text:"Desculpe, ocorreu um erro."};u(q=>[...q,fe])}finally{x(!1)}},G=()=>{if(!E)return;let oe=0;E.forEach((me,fe)=>{k[fe]===me.correctAnswerIndex&&oe++}),P({score:oe,total:E.length})},le=async()=>{if(!o)return;const oe={title:`Treinamento RS Prlipsi: ${t.title}`,text:`Estou fazendo a aula "${o.title}". Confira!`,url:window.location.href};try{if(navigator.share)await navigator.share(oe);else throw new Error("Web Share API not supported")}catch{await navigator.clipboard.writeText(oe.url),O("Link copiado para a rea de transferncia!"),setTimeout(()=>O(""),2500)}};if(!o)return l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>e("manageTrainings"),className:"flex items-center gap-2 text-sm font-semibold text-gray-300 hover:text-yellow-500 mb-4",children:[l.jsx(Mi,{className:"w-5 h-5"})," Voltar para todos os treinamentos"]}),l.jsx("p",{children:"Nenhuma aula encontrada neste mdulo."})]});const Ne=((ne=t.lessons.find(oe=>oe.id===o.id))==null?void 0:ne.likes)||0;return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>e("manageTrainings"),className:"flex items-center gap-2 text-sm font-semibold text-gray-300 hover:text-yellow-500",children:[l.jsx(Mi,{className:"w-5 h-5"})," Voltar para todos os treinamentos"]}),l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[l.jsx("div",{className:"aspect-video bg-black rounded-lg flex items-center justify-center border border-gray-800",children:o.videoUrl&&o.videoUrl!=="placeholder.mp4"?l.jsx("video",{src:o.videoUrl,controls:!0,autoPlay:!0,className:"w-full h-full rounded-lg"},o.id):l.jsx("p",{className:"text-gray-500",children:"Vdeo indisponvel"})}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-white",children:o.title}),l.jsxs("div",{className:"flex flex-wrap items-center gap-2 border-b border-gray-800 pb-4",children:[l.jsxs("button",{onClick:()=>D("summarize"),disabled:g,className:"flex items-center gap-1.5 text-sm font-semibold bg-yellow-500/10 text-yellow-400 py-2 px-3 rounded-md hover:bg-yellow-500/20",children:[l.jsx(Hh,{className:"w-4 h-4"})," Resumir"]}),l.jsxs("button",{onClick:()=>D("explain"),disabled:g,className:"flex items-center gap-1.5 text-sm font-semibold bg-yellow-500/10 text-yellow-400 py-2 px-3 rounded-md hover:bg-yellow-500/20",children:[l.jsx(Hh,{className:"w-4 h-4"})," Explicar"]})]}),l.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[l.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[l.jsx("input",{type:"checkbox",checked:n.includes(o.id),onChange:()=>r(o.id),className:"h-5 w-5 rounded bg-gray-700 border-gray-600 text-yellow-500 focus:ring-yellow-600"}),l.jsx("span",{className:"font-semibold text-white",children:"Marcar como concluda"})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{onClick:()=>D("quiz"),disabled:g,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:"Gerar Quiz"}),l.jsxs("button",{onClick:()=>s(t.id,o.id),className:"flex items-center gap-2 text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:[l.jsx(k0,{className:"w-4 h-4"})," ",Ne]}),l.jsxs("div",{className:"relative",children:[l.jsxs("button",{onClick:le,className:"flex items-center gap-2 text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600",children:[l.jsx(Nq,{className:"w-4 h-4"})," Compartilhar"]}),z&&l.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 bg-green-500 text-black text-xs font-bold px-2 py-1 rounded-md flex items-center gap-1 whitespace-nowrap",children:[l.jsx(Va,{className:"w-4 h-4"}),z]})]})]})]}),E&&l.jsxs("div",{className:"space-y-4 border-t border-gray-800 pt-4",children:[l.jsx("h3",{className:"font-bold text-lg text-white",children:"Quiz da Aula"}),E.map((oe,me)=>l.jsxs("div",{className:"text-sm",children:[l.jsxs("p",{className:"font-semibold text-gray-200 mb-2",children:[me+1,". ",oe.question]}),l.jsx("div",{className:"space-y-2",children:oe.options.map((fe,q)=>l.jsxs("label",{className:`flex items-center gap-2 p-2 rounded-md border ${k[me]===q?"border-yellow-500":"border-gray-700"}`,children:[l.jsx("input",{type:"radio",name:`q-${me}`,checked:k[me]===q,onChange:()=>_(W=>({...W,[me]:q})),disabled:!!j}),l.jsx("span",{children:fe})]},q))})]},me)),j?l.jsxs("div",{className:`p-3 rounded-lg text-center font-bold ${j.score/j.total>=.7?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"}`,children:["Voc acertou ",j.score," de ",j.total," perguntas!"]}):l.jsx("button",{onClick:G,className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:"Verificar Respostas"})]}),l.jsxs("div",{className:"border-t border-gray-800 pt-4",children:[l.jsx("h3",{className:"font-semibold text-white mb-2",children:"Pergunte  RSIA sobre esta aula"}),l.jsxs("div",{className:"bg-gray-900/50 p-3 rounded-lg h-64 flex flex-col",children:[l.jsxs("div",{className:"flex-grow space-y-3 overflow-y-auto pr-2 text-sm",children:[d.map((oe,me)=>l.jsx("div",{className:`flex ${oe.sender==="ai"?"justify-start":"justify-end"}`,children:l.jsx("div",{className:`p-2 rounded-lg max-w-[80%] ${oe.sender==="ai"?"bg-gray-700":"bg-yellow-600 text-black"}`,children:oe.text})},me)),g&&l.jsx("div",{className:"flex justify-start",children:l.jsx(_r,{className:"w-5 h-5 text-yellow-400"})})]}),l.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[l.jsx("input",{type:"text",value:f,onChange:oe=>p(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&te(),placeholder:"Faa uma pergunta...",className:"flex-grow bg-gray-800 border-2 border-gray-700 rounded-full py-2 px-4 text-white"}),l.jsx("button",{onClick:te,className:"p-2 bg-yellow-500 rounded-full text-black",children:l.jsx(Cq,{className:"w-5 h-5"})})]})]})]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-4 space-y-2 self-start",children:[l.jsx("h3",{className:"font-bold text-lg text-white mb-2 px-2",children:t.title}),t.lessons.map((oe,me)=>{const fe=n.includes(oe.id),q=(o==null?void 0:o.id)===oe.id;return l.jsxs("button",{onClick:()=>a(oe),className:`w-full text-left flex items-center gap-3 p-3 rounded-lg transition-colors ${q?"bg-yellow-500/10":"hover:bg-gray-800/50"}`,children:[fe?l.jsx(Zc,{className:"w-6 h-6 text-green-400 flex-shrink-0"}):l.jsx(Sq,{className:"w-6 h-6 text-gray-500 flex-shrink-0"}),l.jsxs("span",{className:`font-semibold ${q?"text-yellow-400":"text-white"}`,children:["Aula ",me+1,": ",oe.title]})]},oe.id)}),l.jsx("button",{onClick:()=>e("addEditTraining",t),className:"w-full text-left font-bold text-yellow-500 p-3 rounded-lg hover:bg-gray-800/50",children:"+ Adicionar Aula"})]})]}),w&&l.jsx("div",{className:"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4",onClick:()=>C(null),children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:oe=>oe.stopPropagation(),children:[l.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[l.jsx("h2",{className:"text-xl font-bold text-white",children:w.title}),l.jsx("button",{onClick:()=>C(null),children:l.jsx(Qa,{className:"w-6 h-6 text-gray-400 hover:text-white"})})]}),l.jsx("main",{className:"p-6 overflow-y-auto prose prose-invert max-w-none",dangerouslySetInnerHTML:{__html:w.content.replace(/\n/g,"<br />")}})]})})]})},AC=({assets:t,onNavigate:e,onDelete:n})=>{const[r,s]=R.useState(""),[o,a]=R.useState([]),[d,u]=R.useState(null),f=R.useMemo(()=>t.filter(x=>x.name.toLowerCase().includes(r.toLowerCase())),[t,r]),p=x=>{a(w=>w.includes(x)?w.filter(C=>C!==x):[...w,x])},g=x=>{x.format==="PDF"?window.open(x.downloadUrl,"_blank"):u(x)};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("button",{onClick:()=>e("communication"),className:"flex items-center gap-2 text-sm font-semibold text-gray-300 hover:text-yellow-400",children:[l.jsx(Mi,{className:"w-5 h-5"}),"Voltar para a Central"]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg",children:[l.jsxs("div",{className:"p-4 border-b border-gray-800 flex justify-between items-center",children:[l.jsxs("div",{className:"relative max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar materiais...",value:r,onChange:x=>s(x.target.value),className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 pl-10 pr-4"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-gray-400"})})]}),l.jsx("button",{onClick:()=>e("addEditMarketingAsset"),className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:"+ Novo Material"})]}),o.length>0&&l.jsx("div",{className:"p-4 bg-gray-800/50",children:l.jsxs("button",{onClick:()=>n(o),className:"flex items-center gap-2 text-sm text-red-400 hover:text-red-300",children:[l.jsx(cn,{className:"w-5 h-5"}),"Excluir ",o.length," item(s)"]})}),l.jsx("div",{className:"p-6",children:l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:f.map(x=>l.jsxs("div",{className:"relative group bg-gray-800/50 rounded-lg p-2 flex flex-col",children:[l.jsx("div",{className:"absolute top-2 left-2 z-10",children:l.jsx("input",{type:"checkbox",checked:o.includes(x.id),onChange:()=>p(x.id),className:"h-4 w-4 rounded bg-gray-900 border-gray-600 text-yellow-500 focus:ring-yellow-600"})}),l.jsx("button",{onClick:()=>g(x),className:"aspect-square bg-gray-800 flex items-center justify-center rounded-md mb-2 overflow-hidden flex-grow",children:x.format==="PDF"?l.jsx(pr,{className:"w-16 h-16 text-gray-500"}):l.jsx("img",{src:x.previewUrl,alt:x.name,className:"w-full h-full object-contain"})}),l.jsx("p",{className:"text-xs font-semibold text-white truncate text-center",title:x.name,children:x.name}),l.jsxs("div",{className:"absolute inset-0 bg-black/70 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col items-center justify-center p-2",children:[l.jsx("button",{onClick:()=>e("addEditMarketingAsset",x),className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md hover:bg-gray-600 mb-2 w-full",children:"Editar"}),l.jsx("button",{onClick:()=>g(x),className:"flex items-center justify-center gap-2 text-sm font-semibold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400 w-full",children:x.format==="PDF"?"Abrir":"Visualizar"})]})]},x.id))})})]}),d&&l.jsx("div",{className:"fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4",onClick:()=>u(null),children:l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:x=>x.stopPropagation(),children:[l.jsxs("header",{className:"flex items-center justify-between p-4 border-b border-gray-800",children:[l.jsx("h2",{className:"text-lg font-semibold text-white truncate",children:d.name}),l.jsx("button",{onClick:()=>u(null),children:l.jsx(Qa,{className:"w-6 h-6 text-gray-400 hover:text-white"})})]}),l.jsx("main",{className:"p-4 flex-grow flex items-center justify-center overflow-auto",children:l.jsx("img",{src:d.previewUrl,alt:d.name,className:"max-w-full max-h-full object-contain"})}),l.jsx("footer",{className:"p-4 border-t border-gray-800 bg-gray-900/50 text-right",children:l.jsxs("a",{href:d.downloadUrl,download:d.name,className:"inline-flex items-center gap-2 text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md hover:bg-yellow-400",children:[l.jsx(Ia,{className:"w-5 h-5"})," Baixar"]})})]})})]})},_C=({asset:t,onSave:e,onCancel:n})=>{const r=!!t,[s,o]=R.useState({name:"",type:"banner",format:"JPG",downloadUrl:"",previewUrl:"",...t}),a=R.useRef(null),[d,u]=R.useState(""),[f,p]=R.useState(!1),[g,x]=R.useState(null),w=_=>{const{name:j,value:P}=_.target;o(z=>({...z,[j]:P}))},C=_=>{if(_.target.files&&_.target.files[0]){const j=_.target.files[0];if(s.format==="PDF"&&j.type!=="application/pdf"){alert("Por favor, selecione um arquivo PDF.");return}x(j),s.format==="PDF"&&o(P=>({...P,previewUrl:"https://i.imgur.com/S5OK3sI.png",name:P.name||j.name.replace(/\.[^/.]+$/,"")}))}},E=_=>{_.preventDefault();const j=s.format==="JPG"||s.format==="PNG";if(!s.name||j&&!s.previewUrl){alert("Nome e pr-visualizao so obrigatrios.");return}if(s.format==="PDF"&&!g&&!r){alert("Por favor, envie um arquivo PDF.");return}let P={...s};if(g){const z=URL.createObjectURL(g);j&&(P.previewUrl=z),P.downloadUrl=z}else j&&!P.downloadUrl&&(P.downloadUrl=P.previewUrl);e(P)},N=async()=>{if(!d.trim()){alert("Por favor, descreva a imagem que voc quer gerar.");return}p(!0),o(_=>({..._,format:"JPG"}));try{const _=new Wa({apiKey:void 0}),j=`Um material de marketing para a marca de luxo "RS Prlipsi". Estilo sofisticado, com tema de preto e dourado. Briefing: "${d}"`,O=`data:image/jpeg;base64,${(await _.models.generateImages({model:"imagen-4.0-generate-001",prompt:j,config:{numberOfImages:1,outputMimeType:"image/jpeg"}})).generatedImages[0].image.imageBytes}`;o(D=>({...D,previewUrl:O,downloadUrl:O,name:D.name||d}))}catch(_){console.error("AI Image Generation Error:",_),alert("Erro ao gerar imagem. Tente novamente.")}finally{p(!1)}},k=s.format==="JPG"||s.format==="PNG";return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"pb-6 mb-6 flex justify-between items-center border-b border-gray-800",children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:r?"Editar Material":"Novo Material"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{type:"button",onClick:n,className:"text-sm font-semibold bg-gray-700 text-white py-2 px-4 rounded-md",children:"Descartar"}),l.jsx("button",{type:"button",onClick:()=>{var _;return(_=a.current)==null?void 0:_.requestSubmit()},className:"text-sm font-bold bg-yellow-500 text-black py-2 px-4 rounded-md",children:"Salvar"})]})]}),l.jsxs("form",{onSubmit:E,ref:a,className:"max-w-4xl mx-auto space-y-6",children:[l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:"Gerar Imagem com IA"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{value:d,onChange:_=>u(_.target.value),placeholder:"Descreva a imagem (ex: 'Banner para o dia das mes com um relgio dourado')",className:"flex-grow bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsxs("button",{type:"button",onClick:N,disabled:f,className:"font-semibold bg-yellow-500/10 text-yellow-400 py-2 px-4 rounded-md flex items-center gap-2",children:[f?l.jsx(_r,{className:"w-5 h-5"}):l.jsx(Lh,{className:"w-5 h-5"}),"Gerar"]})]})]}),l.jsxs("div",{className:"bg-black border border-gray-800 rounded-lg p-6 space-y-4",children:[l.jsx("input",{name:"name",value:s.name,onChange:w,placeholder:"Nome do Material",className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("select",{name:"type",value:s.type,onChange:w,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white",children:[l.jsx("option",{value:"banner",children:"Banner"}),l.jsx("option",{value:"logo",children:"Logo"}),l.jsx("option",{value:"template",children:"Template"})]}),l.jsxs("select",{name:"format",value:s.format,onChange:w,className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white",children:[l.jsx("option",{value:"JPG",children:"JPG"}),l.jsx("option",{value:"PNG",children:"PNG"}),l.jsx("option",{value:"PDF",children:"PDF"})]})]}),k?l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Arquivo de Imagem"}),l.jsx(Dn,{currentImage:s.previewUrl||"",onImageUpload:_=>o(j=>({...j,previewUrl:_,downloadUrl:_})),placeholderText:"Arraste ou envie uma imagem"})]}):l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-white mb-2",children:"Arquivo PDF"}),l.jsx("div",{className:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-700 border-dashed rounded-md",children:l.jsxs("div",{className:"space-y-1 text-center",children:[l.jsx(pr,{className:"mx-auto h-12 w-12 text-gray-400"}),l.jsxs("div",{className:"flex text-sm text-gray-500",children:[l.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer bg-gray-800 rounded-md font-medium text-yellow-400 hover:text-yellow-300 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-yellow-500 px-2",children:[l.jsx("span",{children:"Envie um arquivo"}),l.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:".pdf",onChange:C})]}),l.jsx("p",{className:"pl-1",children:"ou arraste e solte"})]}),g&&l.jsx("p",{className:"text-xs text-green-400",children:g.name}),!g&&r&&s.downloadUrl&&l.jsxs("p",{className:"text-xs text-gray-400",children:["Arquivo atual: ",l.jsxs("a",{href:s.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"underline",children:[s.name,".pdf"]})]})]})})]}),s.format==="PDF"&&l.jsx("input",{name:"downloadUrl",value:s.downloadUrl,onChange:w,placeholder:"URL para Download (se j estiver hospedado)",className:"w-full bg-gray-800 border-2 border-gray-700 rounded-md py-2 px-3 text-white"})]})]})]})},Tq=({orders:t,onOrderFound:e})=>{const[n,r]=R.useState(""),[s,o]=R.useState(""),[a,d]=R.useState(""),[u,f]=R.useState(!1),p=g=>{g.preventDefault(),d(""),f(!0),setTimeout(()=>{const x=t.find(w=>w.id.toLowerCase()===n.toLowerCase().trim()&&w.customerEmail.toLowerCase()===s.toLowerCase().trim());x?e(x):d("Pedido no encontrado. Verifique os dados e tente novamente."),f(!1)},1e3)};return l.jsx("div",{className:"flex items-center justify-center min-h-[70vh] bg-[rgb(var(--color-brand-dark))] py-12",children:l.jsxs("div",{className:"w-full max-w-lg p-8 space-y-8 bg-[rgb(var(--color-brand-gray))] border-2 border-[rgb(var(--color-brand-gold))]/[.30] rounded-lg shadow-2xl",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-3xl font-bold text-center font-display text-[rgb(var(--color-brand-gold))]",children:"Acompanhe seu Pedido"}),l.jsx("p",{className:"mt-2 text-center text-[rgb(var(--color-brand-text-dim))]",children:"Insira os dados abaixo para ver o status da sua entrega."})]}),l.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"orderId",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"Nmero do Pedido"}),l.jsx("input",{id:"orderId",name:"orderId",type:"text",required:!0,value:n,onChange:g=>r(g.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-[rgb(var(--color-brand-gray-light))] bg-[rgb(var(--color-brand-dark))] text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] rounded-md focus:outline-none focus:ring-[rgb(var(--color-brand-gold))] focus:border-[rgb(var(--color-brand-gold))] sm:text-sm",placeholder:"Ex: #2024-001"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-[rgb(var(--color-brand-text-light))] mb-2",children:"E-mail da Compra"}),l.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:s,onChange:g=>o(g.target.value),className:"appearance-none relative block w-full px-3 py-3 border-2 border-[rgb(var(--color-brand-gray-light))] bg-[rgb(var(--color-brand-dark))] text-[rgb(var(--color-brand-text-light))] placeholder-[rgb(var(--color-brand-text-dim))] rounded-md focus:outline-none focus:ring-[rgb(var(--color-brand-gold))] focus:border-[rgb(var(--color-brand-gold))] sm:text-sm",placeholder:"seuemail@exemplo.com"})]})]}),a&&l.jsx("p",{className:"text-[rgb(var(--color-error))] text-sm text-center !mt-4",children:a}),l.jsx("div",{children:l.jsxs("button",{type:"submit",disabled:u,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-bold rounded-md text-[rgb(var(--color-brand-dark))] bg-[rgb(var(--color-brand-gold))] hover:bg-[rgb(var(--color-warning))] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-[rgb(var(--color-brand-dark))] focus:ring-[rgb(var(--color-brand-gold))] transition-colors mt-6 disabled:opacity-50 disabled:cursor-wait",children:[u?l.jsx(_r,{className:"w-5 h-5"}):l.jsx(Mr,{className:"w-5 h-5"}),l.jsx("span",{className:"ml-2",children:u?"Buscando...":"Rastrear Pedido"})]})})]})]})})},kq=t=>l.jsxs("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.5-2.928a9.092 9.092 0 013.741-.479 3 3 0 014.682-2.72M12 12.75a9.092 9.092 0 00-3.741.479 3 3 0 00-4.682 2.72m7.5 2.928v-2.928m0 0a9.092 9.092 0 013.741.479 3 3 0 01-4.682 2.72m0 0V15m-3.72 3.72a9.094 9.094 0 01-3.741.479 3 3 0 01-4.682-2.72m7.5-2.928v-2.928"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Aq=t=>l.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z"})}),_q=({distributor:t})=>{const e=t.stores.length,n=t.stores.reduce((r,s)=>r+s.consultantIds.length,0);return l.jsxs("div",{className:"bg-[rgb(var(--color-brand-gray))] border border-[rgb(var(--color-brand-gray-light))] border-t-2 border-t-[rgb(var(--color-brand-gold))] rounded-lg p-6 transition-all duration-300 hover:shadow-lg hover:shadow-[rgb(var(--color-brand-gold))]/[0.10] hover:-translate-y-1",children:[l.jsxs("div",{className:"flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xl font-bold text-[rgb(var(--color-brand-gold))]",children:t.name}),l.jsxs("p",{className:"text-sm text-[rgb(var(--color-brand-text-dim))]",children:["Proprietrio: ",t.ownerName]})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))] font-mono",children:t.id}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:t.cpfCnpj})]})]}),l.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4 text-center",children:[l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-3 rounded-md",children:[l.jsx(lk,{className:"w-6 h-6 mx-auto text-[rgb(var(--color-brand-text-dim))]"}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))] mt-1",children:e}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Lojas"})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-3 rounded-md",children:[l.jsx(kq,{className:"w-6 h-6 mx-auto text-[rgb(var(--color-brand-text-dim))]"}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))] mt-1",children:n}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Consultores"})]}),l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] p-3 rounded-md",children:[l.jsx(Aq,{className:"w-6 h-6 mx-auto text-[rgb(var(--color-brand-text-dim))]"}),l.jsx("p",{className:"text-2xl font-bold text-[rgb(var(--color-brand-text-light))] mt-1",children:"R$--"}),l.jsx("p",{className:"text-xs text-[rgb(var(--color-brand-text-dim))]",children:"Faturamento (Ms)"})]})]})]})},jC=({distributors:t,onNavigate:e})=>{const[n,r]=R.useState(""),s=R.useMemo(()=>t.filter(o=>o.name.toLowerCase().includes(n.toLowerCase())||o.ownerName.toLowerCase().includes(n.toLowerCase())||o.id.toLowerCase().includes(n.toLowerCase())),[t,n]);return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"flex justify-between items-center gap-4",children:[l.jsxs("div",{className:"relative flex-grow max-w-lg",children:[l.jsx("input",{type:"text",placeholder:"Buscar por nome, proprietrio ou ID...",value:n,onChange:o=>r(o.target.value),className:"w-full bg-[rgb(var(--color-brand-dark))] border-2 border-[rgb(var(--color-brand-gray-light))] rounded-md py-2 pl-10 pr-4 text-[rgb(var(--color-brand-text-light))]"}),l.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l.jsx(Mr,{className:"h-5 w-5 text-[rgb(var(--color-brand-text-dim))]"})})]}),l.jsxs("button",{onClick:()=>{e("addEditDistributor")},className:"flex items-center gap-2 text-sm font-bold bg-[rgb(var(--color-brand-gold))] text-[rgb(var(--color-brand-dark))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-warning))] transition-colors whitespace-nowrap",children:[l.jsx(_b,{className:"w-5 h-5"}),"Adicionar CD"]})]}),l.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:s.map(o=>l.jsx(_q,{distributor:o},o.id))}),s.length===0&&l.jsx("div",{className:"text-center py-16 bg-[rgb(var(--color-brand-dark))] border-2 border-dashed border-[rgb(var(--color-brand-gray-light))] rounded-lg",children:l.jsx("p",{className:"text-lg text-[rgb(var(--color-brand-text-dim))]",children:"Nenhuma Central de Distribuio encontrada."})})]})},jq=({onCancel:t})=>l.jsxs("div",{className:"bg-[rgb(var(--color-brand-dark))] border border-[rgb(var(--color-brand-gray-light))] rounded-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-[rgb(var(--color-brand-text-light))] mb-4",children:"Adicionar/Editar Central de Distribuio"}),l.jsx("p",{className:"text-[rgb(var(--color-brand-text-dim))]",children:"O formulrio para adicionar e editar CDs ser implementado aqui."}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:t,className:"text-sm font-semibold bg-[rgb(var(--color-brand-gray))] text-[rgb(var(--color-brand-text-light))] py-2 px-4 rounded-md hover:bg-[rgb(var(--color-brand-gray-light))]",children:"Voltar"})})]});function Mq(t,e,n){const[r,s]=R.useState([]),[o,a]=R.useState(!0);return R.useEffect(()=>{const d=new URLSearchParams({tenantId:e,...n?{audience:n}:{},limit:"50"}).toString();fetch(`${t}/v1/communications/announcements?${d}`,{credentials:"include"}).then(u=>u.json()).then(u=>s(u.data||[])).finally(()=>a(!1))},[t,e,n]),{data:r,loading:o}}const Rq=({audience:t})=>{const e="https://api.rsprolipsi.com.br",n="SEU_TENANT_ID_AQUI",{data:r,loading:s}=Mq(e,n,t);return l.jsxs("div",{className:"p-6 bg-gray-900 text-white min-h-screen",children:[l.jsx("h1",{className:"text-3xl font-bold text-yellow-400 mb-6",children:"Mural de Comunicados"}),s&&l.jsx("p",{children:"Carregando comunicados..."}),!s&&r.length===0&&l.jsx("div",{className:"text-center py-12 bg-gray-800 rounded-lg",children:l.jsx("p",{className:"text-gray-400",children:"Nenhum comunicado disponvel no momento."})}),!s&&r.length>0&&l.jsx("div",{className:"space-y-4",children:r.map(o=>l.jsxs("div",{className:"bg-gray-800 p-4 rounded-lg border-l-4 border-yellow-400",children:[l.jsx("h2",{className:"text-xl font-semibold text-yellow-500",children:o.title}),l.jsx("p",{className:"text-gray-300 mt-2",children:o.message}),l.jsx("div",{className:"text-xs text-gray-500 mt-3",children:l.jsx("span",{children:new Date(o.created_at).toLocaleDateString("pt-BR")})})]},o.id))})]})},MC=[{id:"1",name:"Relgio de Pulso Clssico de Couro",seller:"Ana Carolina",price:1250,compareAtPrice:1500,currency:"BRL",shortDescription:"Um relgio atemporal que combina design clssico com funcionalidade moderna. Perfeito para qualquer ocasio.",description:`
      <h2>Design Atemporal, Qualidade Inquestionvel</h2>
      <p>Este relgio  mais do que um simples acessrio;  uma declarao de estilo. Com sua pulseira de couro genuno e caixa de ao inoxidvel polido, ele exala sofisticao.</p>
      <ul>
        <li><strong>Movimento:</strong> Quartzo Suo de alta preciso.</li>
        <li><strong>Material:</strong> Ao inoxidvel 316L e couro legtimo.</li>
        <li><strong>Resistncia  gua:</strong> 5 ATM (adequado para banho, no para mergulho).</li>
        <li><strong>Vidro:</strong> Cristal de safira resistente a arranhes.</li>
      </ul>
      <blockquote>"O tempo  o que mais queremos, mas o que usamos de pior maneira." - William Penn. Use o seu com sabedoria e estilo.</blockquote>
      <p>Seja para uma reunio de negcios ou um evento social, este relgio complementar seu visual com um toque de elegncia discreta.</p>
    `,images:["https://picsum.photos/seed/watch1/600/600","https://picsum.photos/seed/watch2/600/600","https://picsum.photos/seed/watch3/600/600","https://picsum.photos/seed/watch4/600/600"],rating:4.8,reviewCount:72,collectionId:"col-1",status:"Ativo",inventory:25,weight:.3,width:10,height:5,length:15,type:"Fsico",sku:"RW-CLASSIC-01",requiresShipping:!0,trackQuantity:!0,chargeTax:!0,continueSelling:!1,seoTitle:"Relgio Clssico de Couro | Elegncia e Preciso",seoDescription:"Descubra o relgio de pulso clssico com pulseira de couro e movimento suo. Uma pea de luxo atemporal para o homem moderno.",urlHandle:"relogio-pulso-classico-couro",options:[{id:"opt1",name:"Cor da Pulseira",values:["Marrom","Preto"]},{id:"opt2",name:"Cor da Caixa",values:["Prata","Dourado"]}],variants:[{id:"var1",options:{"Cor da Pulseira":"Marrom","Cor da Caixa":"Prata"},price:1250,inventory:10,sku:"RW-MAR-PRA"},{id:"var2",options:{"Cor da Pulseira":"Marrom","Cor da Caixa":"Dourado"},price:1350,inventory:5,sku:"RW-MAR-DOU"},{id:"var3",options:{"Cor da Pulseira":"Preto","Cor da Caixa":"Prata"},price:1250,inventory:8,sku:"RW-PRE-PRA"},{id:"var4",options:{"Cor da Pulseira":"Preto","Cor da Caixa":"Dourado"},price:1350,inventory:2,sku:"RW-PRE-DOU"}],supplier:"Relojoaria Sua Premium"},{id:"2",name:"Bolsa de Ombro de Designer em Couro",seller:"RS Prlipsi",price:2100,currency:"BRL",shortDescription:"Elegncia e praticidade em uma bolsa de couro legtimo com design exclusivo. Espao interno otimizado e acabamento impecvel.",description:`
      <h2>A Companheira Perfeita para o Seu Dia a Dia</h2>
      <p>Feita  mo com couro italiano da mais alta qualidade, esta bolsa de ombro  o eptome do luxo funcional. Seu design verstil a torna perfeita tanto para o trabalho quanto para o lazer.</p>
      <h3>Caractersticas:</h3>
      <ul>
        <li><strong>Material Externo:</strong> Couro bovino italiano de flor integral.</li>
        <li><strong>Forro:</strong> Tecido jacquard personalizado.</li>
        <li><strong>Metais:</strong> Banhados a ouro com acabamento acetinado.</li>
        <li><strong>Compartimentos:</strong> Trs compartimentos internos, incluindo um com zper, e um bolso externo de acesso rpido.</li>
      </ul>
    `,images:["https://picsum.photos/seed/bag1/600/600","https://picsum.photos/seed/bag2/600/600","https://picsum.photos/seed/bag3/600/600"],rating:4.9,reviewCount:45,collectionId:"col-2",status:"Ativo",inventory:15,weight:.8,width:30,height:25,length:10,type:"Fsico",sku:"HB-LEATHER-DESIGN",requiresShipping:!0,trackQuantity:!0,chargeTax:!0,continueSelling:!1,options:[],variants:[],supplier:"Artesos de Florena"},{id:"3",name:"Caneta-tinteiro Executiva",seller:"Escritrio Premium",price:850,compareAtPrice:950,currency:"BRL",shortDescription:"Uma experincia de escrita superior. Corpo em resina nobre, detalhes banhados a platina e pena de ouro 14K feita  mo.",description:`
      <h2>A Arte da Escrita</h2>
      <p>Redescubra o prazer de escrever com esta caneta-tinteiro executiva. Cada trao  uma experincia suave e fluida, graas  sua pena de ouro macio 14K, meticulosamente trabalhada.</p>
    `,images:["https://picsum.photos/seed/pen1/600/600","https://picsum.photos/seed/pen2/600/600"],rating:4.7,reviewCount:30,collectionId:"col-3",status:"Ativo",inventory:50,weight:.1,width:15,height:2,length:2,type:"Fsico",sku:"PEN-EXEC-BLK",requiresShipping:!0,trackQuantity:!0,chargeTax:!0,continueSelling:!1,options:[],variants:[],supplier:"Oficina Alem de Canetas"},{id:"4",name:"culos de Sol Aviador Polarizados",seller:"Estilo & Viso",price:720,currency:"BRL",shortDescription:"Proteo e estilo icnico. Lentes polarizadas com 100% de proteo UV e armao de metal leve e resistente.",description:`
      <h2>Viso Clara, Estilo Inconfundvel</h2>
      <p>O design clssico do aviador encontra a tecnologia moderna de lentes polarizadas. Estes culos de sol no apenas protegem seus olhos, mas tambm elevam seu estilo a um novo patamar.</p>
    `,images:["https://picsum.photos/seed/glasses1/600/600","https://picsum.photos/seed/glasses2/600/600","https://picsum.photos/seed/glasses3/600/600"],rating:4.9,reviewCount:88,collectionId:null,status:"Ativo",inventory:40,weight:.15,width:15,height:5,length:5,type:"Fsico",sku:"SUN-AVIA-POL",requiresShipping:!0,trackQuantity:!0,chargeTax:!0,continueSelling:!1,options:[],variants:[],supplier:"Design de culos Italiano"},{id:"5",name:"Curso Online de Marketing Digital",seller:"Academia do Saber",price:497,currency:"BRL",shortDescription:"Domine as estratgias essenciais de marketing digital, de SEO a mdias sociais, e impulsione sua carreira ou negcio.",description:`
      <h2>Transforme sua Carreira com Marketing Digital</h2>
      <p>Aprenda com especialistas do setor e adquira as habilidades mais procuradas do mercado. Este curso abrangente cobre tudo o que voc precisa para ter sucesso no mundo digital.</p>
    `,images:["https://picsum.photos/seed/course1/600/600"],rating:4.8,reviewCount:250,collectionId:null,status:"Ativo",inventory:1e3,weight:0,width:0,height:0,length:0,type:"Digital",sku:"DIG-MKT-COURSE",requiresShipping:!1,trackQuantity:!1,chargeTax:!1,continueSelling:!0,options:[],variants:[]}],Iq=[{id:"#2024-001",customerId:"cust-1",date:"2024-07-28T10:30:00Z",customerName:"Carlos Silva",customerEmail:"carlos.silva@example.com",customerCpf:"123.456.789-00",customerPhone:"11987654321",shippingAddress:{street:"Rua das Flores",number:"123",complement:"Apto 4B",neighborhood:"Jardim das Rosas",city:"So Paulo",state:"SP",zipCode:"01234-567"},subtotal:1250,shippingCost:0,discount:0,total:1250,currency:"BRL",paymentStatus:"Pago",fulfillmentStatus:"Realizado",items:[{productId:"1",variantId:"var1",productName:"Relgio de Pulso Clssico de Couro",quantity:1,price:1250,variantText:"Cor da Pulseira: Marrom / Material da Caixa: Ao Inoxidvel",sku:"RW-CLASSIC-01"}],trackingCode:"BR123456789SP",shippingMethod:"SEDEX",notes:"Cliente solicitou embalagem para presente."},{id:"#2024-002",customerId:"cust-2",date:"2024-07-28T11:45:00Z",customerName:"Maria Oliveira",customerEmail:"maria.oliveira@example.com",customerCpf:"234.567.890-11",customerPhone:"21912345678",shippingAddress:{street:"Avenida Copacabana",number:"456",neighborhood:"Copacabana",city:"Rio de Janeiro",state:"RJ",zipCode:"22345-678"},subtotal:2820,shippingCost:0,discount:0,total:2820,currency:"BRL",paymentStatus:"Pendente",fulfillmentStatus:"No Realizado",items:[{productId:"2",variantId:"default",productName:"Bolsa de Ombro de Designer em Couro",quantity:1,price:2100,sku:"HB-LEATHER-DESIGN"},{productId:"4",variantId:"default",productName:"culos de Sol Aviador Polarizados",quantity:1,price:720,sku:"SUN-AVIA-POL"}],shippingMethod:"Transportadora"},{id:"#2024-003",date:"2024-07-27T15:00:00Z",customerName:"Joo Pereira",customerEmail:"joao.pereira@example.com",customerCpf:"345.678.901-22",customerPhone:"31988887777",shippingAddress:{street:"Praa da Liberdade",number:"789",neighborhood:"Savassi",city:"Belo Horizonte",state:"MG",zipCode:"30140-010"},subtotal:850,shippingCost:0,discount:0,total:850,currency:"BRL",paymentStatus:"Cancelado",fulfillmentStatus:"No Realizado",items:[{productId:"3",variantId:"default",productName:"Caneta-tinteiro Executiva",quantity:1,price:850,sku:"PEN-EXEC-BLK"}],shippingMethod:"SEDEX"},{id:"#2024-004",date:"2024-07-26T09:10:00Z",customerName:"Ana Costa",customerEmail:"ana.costa@example.com",customerCpf:"456.789.012-33",customerPhone:"71999998888",shippingAddress:{street:"Largo do Pelourinho",number:"10",neighborhood:"Pelourinho",city:"Salvador",state:"BA",zipCode:"40026-280"},subtotal:4200,shippingCost:0,discount:0,total:4200,currency:"BRL",paymentStatus:"Pago",fulfillmentStatus:"No Realizado",items:[{productId:"2",variantId:"default",productName:"Bolsa de Ombro de Designer em Couro",quantity:2,price:2100,sku:"HB-LEATHER-DESIGN"}],shippingMethod:"Transportadora",notes:"Verificar endereo com o cliente antes de enviar. Possvel erro no nmero."},{id:"#2024-005",customerId:"cust-1",date:"2024-07-25T18:20:00Z",customerName:"Carlos Silva",customerEmail:"carlos.silva@example.com",customerCpf:"567.890.123-44",customerPhone:"51987651234",shippingAddress:{street:"Rua dos Andradas",number:"1000",neighborhood:"Centro Histrico",city:"Porto Alegre",state:"RS",zipCode:"90020-000"},subtotal:3350,shippingCost:0,discount:0,total:3350,currency:"BRL",paymentStatus:"Parcialmente Pago",fulfillmentStatus:"Parcial",items:[{productId:"1",variantId:"var1",productName:"Relgio de Pulso Clssico de Couro",quantity:1,price:1250,sku:"RW-CLASSIC-01"},{productId:"2",variantId:"default",productName:"Bolsa de Ombro de Designer em Couro",quantity:1,price:2100,sku:"HB-LEATHER-DESIGN"}],shippingMethod:"Retirar no Local"}],Dq=[{id:"RET-001",orderId:"#2024-001",customerName:"Carlos Silva",customerEmail:"carlos.silva@example.com",requestDate:"2024-07-29T14:00:00Z",items:[{productId:"1",productName:"Relgio de Pulso Clssico de Couro",quantity:1,reason:"Defeito no fecho"}],status:"Pendente",resolutionType:"Troca"},{id:"RET-002",orderId:"#2024-004",customerName:"Ana Costa",customerEmail:"ana.costa@example.com",requestDate:"2024-07-28T09:30:00Z",items:[{productId:"2",productName:"Bolsa de Ombro de Designer em Couro",quantity:1,reason:"No gostei da cor"}],status:"Aprovada",resolutionType:"Reembolso"},{id:"RET-003",orderId:"#2024-005",customerName:"Lucas Martins",customerEmail:"lucas.martins@example.com",requestDate:"2024-07-27T11:00:00Z",items:[{productId:"2",productName:"Bolsa de Ombro de Designer em Couro",quantity:1,reason:"Tamanho incorreto"}],status:"Concluda",resolutionType:"Troca"}],Pq=[{id:"DS-001",name:"Fone de Ouvido Sem Fio ProSound X5",supplier:"TechSupplier Inc.",costPrice:120,suggestedRetailPrice:249.9,images:["https://picsum.photos/seed/headphone/600/600"],description:"Experimente a liberdade do udio sem fio com o ProSound X5. Cancelamento de rudo ativo, bateria de 20 horas e design ergonmico.",category:"Eletrnicos",inventory:500},{id:"DS-002",name:"Smartwatch Fitness Tracker",supplier:"HealthGadgets",costPrice:85.5,suggestedRetailPrice:199.9,images:["https://picsum.photos/seed/smartwatch/600/600"],description:"Monitore sua sade e atividades fsicas com este smartwatch completo. Medidor de frequncia cardaca, contador de passos e notificaes inteligentes.",category:"Eletrnicos",inventory:1200},{id:"DS-003",name:"Mochila Urbana Anti-furto",supplier:"UrbanGear",costPrice:95,suggestedRetailPrice:219,images:["https://picsum.photos/seed/backpack/600/600"],description:"Mochila com design moderno, compartimento para notebook, porta USB para carregamento e zperes ocultos para maior segurana.",category:"Acessrios",inventory:350}],Oq=[{id:"DSO-001",orderId:"#2024-001",supplier:"TechSupplier Inc.",supplierOrderId:"TS-98765",date:"2024-07-28T10:35:00Z",items:[{productId:"DS-001",productName:"Fone de Ouvido Sem Fio ProSound X5",quantity:1,costPrice:120}],totalCost:120,status:"Enviado",trackingCode:"LP123456789CN"},{id:"DSO-002",orderId:"#2024-002",supplier:"HealthGadgets",supplierOrderId:"HG-A5B4C",date:"2024-07-28T11:50:00Z",items:[{productId:"DS-002",productName:"Smartwatch Fitness Tracker",quantity:2,costPrice:85.5}],totalCost:171,status:"Processando"}],Lq=[{id:"CUP-001",code:"BEMVINDO10",type:"Porcentagem",value:10,status:"Ativo",usageCount:45,usageLimit:1e3,startDate:"2024-07-01T00:00:00Z",endDate:null},{id:"CUP-002",code:"INVERNO50",type:"Valor Fixo",value:50,status:"Ativo",usageCount:120,usageLimit:500,startDate:"2024-06-15T00:00:00Z",endDate:"2024-08-31T23:59:59Z"},{id:"CUP-003",code:"FRETEGRATIS",type:"Valor Fixo",value:0,status:"Inativo",usageCount:250,usageLimit:null,startDate:"2024-05-01T00:00:00Z",endDate:"2024-05-31T23:59:59Z"}],Bq=[{id:"PIX-001",type:"Facebook",name:"Campanha de Vero",pixelId:"123456789012345",status:"Ativo"},{id:"PIX-002",type:"Google Ads",name:"Rede de Pesquisa",pixelId:"AW-987654321",idLabel:"xyz-ABC123",status:"Ativo"},{id:"PIX-003",type:"TikTok",name:"Campanha de Influencers",pixelId:"C1A2B3D4E5F6G7H8",status:"Ativo"},{id:"PIX-004",type:"Pinterest",name:"Campanha de Moda",pixelId:"9876543210987",status:"Inativo"},{id:"PIX-005",type:"Google Analytics",name:"Anlise de Trfego Principal",pixelId:"G-ABC123XYZ",status:"Ativo"},{id:"PIX-006",type:"Taboola",name:"Contedo Patrocinado",pixelId:"1234567",status:"Ativo"},{id:"PIX-007",type:"LinkedIn",name:"Gerao de Leads B2B",pixelId:"987654",status:"Ativo"},{id:"PIX-008",type:"Snapchat",name:"Filtro de Lanamento",pixelId:"snap-1234-5678-9012",status:"Ativo"},{id:"PIX-009",type:"Bing",name:"Campanha Microsoft Ads",pixelId:"UET-987654321",status:"Inativo"}],Uq=[{id:"PS-001",name:"Tech Store Brasil",description:"Eletrnicos",logo:"https://picsum.photos/seed/tech/40/40",commission:15},{id:"PS-002",name:"Beleza Natural Cosmticos",description:"Cosmticos",logo:"https://picsum.photos/seed/beleza/40/40",commission:20},{id:"PS-003",name:"Academia do Saber",description:"Cursos Online",logo:"https://picsum.photos/seed/saber/40/40",commission:30}],zq=[{id:"SL-001",shortUrl:"https://rs.shp/a83xZ",originalUrl:"https://rs-shop.com.br/loja/seller-01?ref=user-01",clicks:152},{id:"SL-002",shortUrl:"https://rs.shp/c7YuP",originalUrl:"https://rs-shop.com.br/loja/seller-03/curso-mkt?ref=user-01",clicks:89}],qq={storeName:"RS Prlipsi Marketplace",storeColors:{primary:"#FFD700",secondary:"#1E1E1E",accent:"#7FFF00"},contactEmail:"contato@rsprolipsi.com.br",contactPhone:"(11) 99999-9999",logoUrl:"",faviconUrl:"",hero:{title:"Elegncia, Redefinida.",subtitle:"Descubra um mercado selecionado de produtos premium de vendedores confiveis. Sua jornada para o luxo comea aqui.",desktopImage:"https://picsum.photos/seed/hero-desktop/1600/900?grayscale",mobileImage:"https://picsum.photos/seed/hero-mobile/800/1200?grayscale"},carouselBanners:[{id:"banner-1",desktopImage:"https://picsum.photos/seed/carousel1-desktop/1200/400",mobileImage:"https://picsum.photos/seed/carousel1-mobile/400/300",link:"#"},{id:"banner-2",desktopImage:"https://picsum.photos/seed/carousel2-desktop/1200/400",mobileImage:"https://picsum.photos/seed/carousel2-mobile/400/300",link:"#"},{id:"banner-3",desktopImage:"https://picsum.photos/seed/carousel3-desktop/1200/400",mobileImage:"https://picsum.photos/seed/carousel3-mobile/400/300",link:"#"}],midPageBanner:{id:"mid-banner-1",desktopImage:"https://picsum.photos/seed/midbanner-desktop/1200/300",mobileImage:"https://picsum.photos/seed/midbanner-mobile/400/200",link:"#"},footer:{description:"O futuro do e-commerce premium.",buyerLinks:[{label:"Encontrar Produtos",url:"#featured-products"},{label:"Sua Conta",url:"#"},{label:"Rastrear Pedidos",url:"#"}],sellerLinks:[{label:"Painel do Lojista",url:"#",isAction:!0},{label:"Seja um Lojista",url:"#"},{label:"Ferramentas de Marketing",url:"#"}],companyLinks:[],socialLinks:[{platform:"facebook",url:"https://facebook.com/rsprolipsi"},{platform:"instagram",url:"https://instagram.com/rsprolipsi"},{platform:"twitter",url:"https://twitter.com/rsprolipsi"},{platform:"linkedin",url:"https://linkedin.com/company/rsprolipsi"}],contactEmail:"contato@rsprolipsi.com.br",cnpj:"00.000.000/0001-00",businessAddress:"Rua Exemplo, 123 - Centro, So Paulo - SP, 01010-010",paymentMethods:[],shippingMethods:[]},orderBump:{enabled:!0,productId:"3",offerPrice:595,title:" SIM, EU QUERO ESTA OFERTA ESPECIAL!",description:"Adicione a Caneta-tinteiro Executiva ao seu pedido por um preo exclusivo e eleve sua experincia de escrita!"},upsell:{enabled:!0,productId:"4",offerPrice:499.9,title:" OFERTA NICA PS-COMPRA! ",description:"Parabns pela sua compra! Vimos que voc tem bom gosto. Que tal adicionar estes culos de Sol Aviador por um preo que voc no ver novamente?",acceptButtonText:"Sim, adicionar ao meu pedido com 1 clique!",declineButtonText:"No, obrigado. Perder esta oferta."},homepageSections:[{id:"featuredProducts",name:"Produtos em Destaque",enabled:!0},{id:"offers",name:"Ofertas Especiais",enabled:!0},{id:"bestsellers",name:"Mais Vendidos",enabled:!0},{id:"featuredCollections",name:"Colees em Destaque",enabled:!0},{id:"recentlyViewed",name:"Vistos Recentemente",enabled:!0},{id:"midPageBanner",name:"Banner de Meio da Pgina",enabled:!0}],customCss:`/*
============================================================
  CSS DA LOJA OFICIAL - RS Prlipsi
============================================================
  Este arquivo contm o estilo base completo da sua loja.
  Use-o como ponto de partida para suas personalizaes.
*/

/* 
============================================================
  1. ESTILOS GERAIS E FONTES (PALETA APLICADA)
============================================================
*/
body {
  background-color: #121212; /* Preto Absoluto */
  color: #E5E7EB; /* Branco Neve */
  font-family: 'Roboto', sans-serif;
}

.font-display {
  font-family: 'Playfair Display', serif;
}

/* Scrollbar Personalizada */
::-webkit-scrollbar {
  width: 8px;
}
::-webkit-scrollbar-track {
  background: #121212;
}
::-webkit-scrollbar-thumb {
  background: #2A2A2A;
  border-radius: 4px;
}
::-webkit-scrollbar-thumb:hover {
  background: #3a3a3a;
}

/* 
============================================================
  2. CABEALHO (HEADER) (PALETA APLICADA)
============================================================
*/
header {
  position: sticky;
  top: 0;
  z-index: 50;
  background-color: rgba(30, 30, 30, 0.8); /* Cinza Grafite com transparncia */
  backdrop-filter: blur(4px);
  border-bottom: 1px solid rgba(255, 215, 0, 0.3); /* Ouro Prlipsi com transparncia */
}

header .logo {
  font-family: 'Playfair Display', serif;
  font-size: 1.875rem; /* text-3xl */
  color: #FFD700; /* Ouro Prlipsi */
}

header .search-bar {
  background-color: #121212; /* Preto Absoluto */
  border: 2px solid #2A2A2A; /* Cinza Claro */
  border-radius: 9999px; /* rounded-full */
  color: #E5E7EB; /* Branco Neve */
  transition: border-color 0.3s;
}

header .search-bar:focus {
  outline: none;
  border-color: #FFD700; /* Ouro Prlipsi */
}

header .nav-link {
  color: #E5E7EB; /* Branco Neve */
  transition: color 0.3s;
}

header .nav-link:hover {
  color: #FFD700; /* Ouro Prlipsi */
}

/* Animao do Dropdown de Categorias */
@keyframes fade-in-down {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fade-in-down {
  animation: fade-in-down 0.2s ease-out forwards;
}

header .category-dropdown {
  background-color: #1E1E1E; /* Cinza Grafite */
  border: 2px solid rgba(255, 215, 0, 0.3);
  border-radius: 0.375rem; /* rounded-md */
}

header .category-dropdown a {
  color: #E5E7EB; /* Branco Neve */
  transition: background-color 0.3s, color 0.3s;
}

header .category-dropdown a:hover {
  background-color: #FFD700; /* Ouro Prlipsi */
  color: #121212; /* Preto Absoluto */
}


/* 
============================================================
  3. BANNER PRINCIPAL (HERO) (PALETA APLICADA)
============================================================
*/
.hero-section {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  height: 70vh;
  background-size: cover;
  background-position: center;
}

.hero-section::before {
  content: '';
  position: absolute;
  inset: 0;
  background-color: rgba(18, 18, 18, 0.6); /* Preto Absoluto com transparncia */
}

.hero-section h1 {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 3.75rem; /* text-6xl */
  color: #E5E7EB; /* Branco Neve */
  text-shadow: 0 2px 4px rgba(0,0,0,0.5);
}

.hero-section p {
  color: #E5E7EB; /* Branco Neve */
  font-size: 1.25rem; /* text-xl */
}

/* 
============================================================
  4. BOTES (BUTTONS) (PALETA APLICADA)
============================================================
*/
.btn-primary {
  background-color: #FFD700; /* Ouro Prlipsi */
  color: #121212; /* Preto Absoluto */
  font-weight: 700;
  padding: 0.75rem 2rem;
  border-radius: 9999px;
  transition: transform 0.2s, opacity 0.2s;
}

.btn-primary:hover {
  opacity: 0.9;
  transform: scale(1.05);
}

.btn-secondary {
  background-color: transparent;
  border: 2px solid #FFD700; /* Ouro Prlipsi */
  color: #FFD700; /* Ouro Prlipsi */
  font-weight: 700;
  padding: 0.75rem 2rem;
  border-radius: 9999px;
  transition: background-color 0.3s, color 0.3s;
}

.btn-secondary:hover {
  background-color: #FFD700;
  color: #121212;
}


/* 
============================================================
  5. SEES E CARDS (PALETA APLICADA)
============================================================
*/
.section-title {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  font-size: 2.25rem; /* text-4xl */
  color: #E5E7EB; /* Branco Neve */
}

.section-subtitle {
  color: #9CA3AF; /* Cinza Suave */
  font-size: 1.125rem; /* text-lg */
}

/* Card de Produto */
.product-card {
  background-color: rgba(30, 30, 30, 0.5); /* Cinza Grafite com transparncia */
  border: 1px solid #2A2A2A; /* Cinza Claro */
  border-radius: 0.5rem; /* rounded-lg */
  overflow: hidden;
  box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1);
  transition: box-shadow 0.3s;
  cursor: pointer;
}

.product-card:hover {
  box-shadow: 0 0 15px rgba(255, 215, 0, 0.1);
}

.product-card img {
  transition: transform 0.3s;
}

.product-card:hover img {
  transform: scale(1.05);
}

.product-card h3 {
  transition: color 0.3s;
}

.product-card:hover h3 {
  color: #FFD700; /* Ouro Prlipsi */
}

.product-card .price {
  color: #FFD700; /* Ouro Prlipsi */
  font-weight: 600;
  font-size: 1.25rem; /* text-xl */
}

/* Card de Chamada para Ao (CTA) */
.cta-card {
  background: linear-gradient(to bottom right, #1E1E1E, #121212); /* Cinza Grafite para Preto Absoluto */
  padding: 2rem;
  border-radius: 0.5rem; /* rounded-lg */
  border: 2px solid #2A2A2A; /* Cinza Claro */
  box-shadow: 0 10px 15px -3px rgba(0,0,0,0.1), 0 4px 6px -4px rgba(0,0,0,0.1);
}

/* 
============================================================
  6. RODAP (FOOTER) (PALETA APLICADA)
============================================================
*/
footer {
  background-color: #1E1E1E; /* Cinza Grafite */
  color: #9CA3AF; /* Cinza Suave */
  border-top: 1px solid #2A2A2A; /* Cinza Claro */
}

footer h4 {
  font-weight: 700;
  color: #E5E7EB; /* Branco Neve */
  letter-spacing: 0.05em; /* tracking-wider */
}

footer a, footer button {
  transition: color 0.3s;
}

footer a:hover, footer button:hover {
  color: #FFD700; /* Ouro Prlipsi */
}

/* 
============================================================
  7. DETALHES DO PRODUTO (PRODUCT DETAIL PAGE) (PALETA APLICADA)
============================================================
*/
.product-detail .category {
  color: #FFD700; /* Ouro Prlipsi */
  font-weight: 600;
}

.product-detail .title {
  font-family: 'Playfair Display', serif;
  font-weight: 700;
  color: #E5E7EB; /* Branco Neve */
}

.product-detail .price {
  color: #FFD700; /* Ouro Prlipsi */
  font-weight: 300;
}

.product-detail .prose {
  color: #E5E7EB; /* Branco Neve */
  line-height: 1.75;
}

.product-detail .prose h1,
.product-detail .prose h2,
.product-detail .prose h3 {
  color: #E5E7EB;
}

.product-detail .prose a {
  color: #60a5fa; /* blue-400 for links is fine */
}

.product-detail .prose blockquote {
  border-left: 3px solid #FFD700; /* Ouro Prlipsi */
  padding-left: 1rem;
  margin-left: 0.5rem;
  font-style: italic;
  color: #E5E7EB;
}

/* 
============================================================
  8. PAINEL DE ADMINISTRAO (ADMIN) (PALETA APLICADA)
============================================================
*/
.admin-layout {
  background-color: #121212; /* Preto Absoluto */
  color: #E5E7EB; /* Branco Neve */
}

.admin-sidebar {
  background-color: #1E1E1E; /* Cinza Grafite */
  color: #E5E7EB; /* Branco Neve */
}

.admin-sidebar button:hover {
  background-color: #2A2A2A; /* Cinza Claro */
}

.admin-sidebar button.active {
  color: #FFD700; /* Ouro Prlipsi */
  background-color: #2A2A2A; /* Cinza Claro */
}

.admin-header {
  background-color: #1E1E1E; /* Cinza Grafite */
  border-bottom: 1px solid #2A2A2A; /* Cinza Claro */
}

.admin-card {
  background-color: #1E1E1E; /* Cinza Grafite */
  border: 1px solid #2A2A2A; /* Cinza Claro */
  border-radius: 0.5rem; /* rounded-lg */
}

.admin-input {
  background-color: #121212; /* Preto Absoluto */
  border: 2px solid #2A2A2A; /* Cinza Claro */
  border-radius: 0.375rem; /* rounded-md */
  color: #E5E7EB; /* Branco Neve */
}

.admin-input:focus {
  outline: none;
  border-color: #FFD700; /* Ouro Prlipsi */
}

.admin-table th {
  text-transform: uppercase;
  background-color: #1E1E1E; /* Cinza Grafite */
  color: #9CA3AF; /* Cinza Suave */
}

.admin-table tr {
  border-bottom: 1px solid #2A2A2A; /* Cinza Claro */
}

.admin-table tr:hover {
  background-color: rgba(42, 42, 42, 0.5); /* Cinza Claro com transparncia */
}
`},Hq={mercadoPago:{enabled:!0,publicKey:"TEST-12345678-ABCD-1234-ABCD-1234567890AB",accessToken:"APP_USR-1234567890123456-123456-abcdefghijklmnopqrstuvwxyz123456"},pagSeguro:{enabled:!1,email:"seuemail@pagseguro.com.br",token:"ABCDEFGHIJKLMNOPQRSTUVWXYZ123456"},pix:{enabled:!0,pixKeyType:"Chave Aleatria",pixKey:"a1b2c3d4-e5f6-7890-1234-567890abcdef"},appmax:{enabled:!1,apiKey:""},asaas:{enabled:!0,apiKey:""},pagarme:{enabled:!1,apiKey:"",encryptionKey:""},stripe:{enabled:!1,publishableKey:"",secretKey:""}},Vq={frenet:{enabled:!1,apiKey:"",apiSecret:""},melhorEnvio:{enabled:!0,apiToken:""},correios:{enabled:!0,contrato:"9912345678",senha:"SUA_SENHA"},superFrete:{enabled:!1,apiToken:""},jadlog:{enabled:!1,apiToken:""},loggi:{enabled:!1,apiKey:""}},Fq={dropshippingPointsPerBrl:1,affiliatePointsPerBrl:1.5,frequency:"Trimestral",tiers:[{id:"tier-1",name:"Bronze",pointsRequired:1e3,reward:150,pinImageUrl:"https://i.imgur.com/J4pGo2K.png",bannerImageUrl:""},{id:"tier-2",name:"Prata",pointsRequired:2500,reward:400,pinImageUrl:"https://i.imgur.com/e22xkCr.png",bannerImageUrl:""},{id:"tier-3",name:"Ouro",pointsRequired:5e3,reward:1e3,pinImageUrl:"https://i.imgur.com/s6c3jZp.png",bannerImageUrl:""}]},$q=[{id:"col-1",title:"Relgios de Luxo",description:"Uma seleo de relgios premium para quem aprecia a arte da relojoaria.",imageUrl:"https://picsum.photos/seed/coll-watches/800/400",productIds:["1"]},{id:"col-2",title:"Essenciais de Couro",description:"Acessrios de couro atemporais, feitos para durar.",imageUrl:"https://picsum.photos/seed/coll-leather/800/400",productIds:["1","2"]},{id:"col-3",title:"Instrumentos de Escrita",description:"Eleve sua escrita com nossa coleo de canetas e acessrios de luxo.",imageUrl:"https://picsum.photos/seed/coll-writing/800/400",productIds:["3"]}],Gq=[{id:"cust-1",name:"Carlos Silva",email:"carlos.silva@example.com",passwordHash:"123456"},{id:"cust-2",name:"Maria Oliveira",email:"maria.oliveira@example.com",passwordHash:"123456"},{id:"cust-admin",name:"Admin RS Prlipsi",email:"rsprolipsioficial@gmail.com",passwordHash:"Yannis784512@"}],RC=[{id:"na-1",icon:"UserPlusIcon",text:"<strong>Lucas Martins</strong> se cadastrou usando seu link de indicao!",timestamp:"2 horas atrs"},{id:"na-2",icon:"ShoppingCartIcon",text:"Novo pedido de <strong>R$ 1.250,00</strong> na sua loja.",timestamp:"5 horas atrs"},{id:"na-3",icon:"TrophyIcon",text:"Voc alcanou o nvel <strong>PRATA</strong> no plano de carreira!",timestamp:"1 dia atrs"},{id:"na-4",icon:"StarOutlineIcon",text:"<strong>Maria Eduarda</strong> deixou uma nova avaliao em um produto.",timestamp:"2 dias atrs"}],IC=[{day:"Seg",bonus:150},{day:"Ter",bonus:220},{day:"Qua",bonus:180},{day:"Qui",bonus:300},{day:"Sex",bonus:250},{day:"Sb",bonus:350},{day:"Dom",bonus:190}],Jq=[{id:"rev-1",productId:"1",productName:"Relgio de Pulso Clssico de Couro",author:"Marcos Vinicius",rating:5,title:"Simplesmente perfeito!",text:"A qualidade do material  incrvel e o design  muito elegante. Chegou super rpido. Recomendo!",createdAt:"2024-07-25T10:00:00Z",status:"Aprovada"},{id:"rev-2",productId:"2",productName:"Bolsa de Ombro de Designer em Couro",author:"Ana Clara",rating:3,title:"Bonita, mas menor do que eu esperava",text:"A bolsa  linda e de tima qualidade, mas achei que seria um pouco maior pelas fotos. Para o dia a dia, acaba sendo pequena.",createdAt:"2024-07-24T15:30:00Z",status:"Pendente"},{id:"rev-3",productId:"1",productName:"Relgio de Pulso Clssico de Couro",author:"Juliana Costa",rating:4,title:"timo presente",text:"Comprei de presente para o meu marido e ele adorou.  um relgio muito bonito e verstil. A entrega foi pontual.",createdAt:"2024-07-22T09:15:00Z",status:"Aprovada"},{id:"rev-4",productId:"4",productName:"culos de Sol Aviador Polarizados",author:"Fernando Dias",rating:1,title:"No gostei",text:"O produto veio com um arranho na lente. Pedi a devoluo.",createdAt:"2024-07-28T11:00:00Z",status:"Rejeitada"},{id:"rev-5",productId:"3",productName:"Caneta-tinteiro Executiva",author:"Beatriz Lima",rating:5,title:"Experincia de escrita incrvel",text:"Nunca pensei que uma caneta pudesse fazer tanta diferena. A escrita  extremamente macia. Vale o investimento.",createdAt:"2024-07-29T18:00:00Z",status:"Pendente"}],Kq=[{id:"q-1",productId:"1",author:"Carlos P.",text:"A pulseira  de couro legtimo mesmo?  resistente?",createdAt:new Date(Date.now()-4320*60*1e3).toISOString(),answers:[{id:"a-1",author:"Ana Carolina (Vendedor)",text:"Ol, Carlos! Sim, a pulseira  de couro genuno de alta qualidade, muito resistente e confortvel para o uso dirio.",createdAt:new Date(Date.now()-2880*60*1e3).toISOString()}]},{id:"q-2",productId:"1",author:"Mariana F.",text:"  prova d'gua? Posso nadar com ele?",createdAt:new Date(Date.now()-7200*60*1e3).toISOString(),answers:[{id:"a-2",author:"Ana Carolina (Vendedor)",text:"Ol, Mariana. Ele tem resistncia  gua de 5 ATM, o que significa que  adequado para banho e respingos, mas no recomendamos para natao ou mergulho.",createdAt:new Date(Date.now()-7200*60*1e3+36e5).toISOString()},{id:"a-3",author:"Carlos P.",text:"Eu tenho um e j tomei chuva com ele sem problemas.",createdAt:new Date(Date.now()-5760*60*1e3).toISOString()}]}],Wq=[{id:"ann-1",title:"Lanamento do Novo Plano de Compensao 2025",date:new Date(Date.now()-1440*60*1e3).toISOString(),content:`
            <h2>Detalhes do Novo Plano de Compensao</h2>
            <p>Estamos entusiasmados em anunciar nosso novo plano de compensao, projetado para recompensar ainda mais seu esforo e dedicao. As principais mudanas incluem:</p>
            <ul>
                <li><strong>Novos Nveis:</strong> Introduzimos os nveis de Rubi e Esmeralda.</li>
                <li><strong>Bnus Acelerado:</strong> Ganhos mais rpidos nos primeiros 90 dias.</li>
                <li><strong>Prmios de Liderana:</strong> Recompensas exclusivas para lderes de equipe.</li>
            </ul>
            <p>Acesse a seo de treinamentos para um vdeo explicativo completo.</p>
        `,isPinned:!0},{id:"ann-2",title:"Atualizao da Poltica de Devolues",date:new Date(Date.now()-4320*60*1e3).toISOString(),content:"<p>Nossa poltica de devolues foi atualizada para melhor atender nossos clientes e lojistas. O prazo para solicitao de devoluo agora  de 10 dias corridos aps o recebimento do produto.</p>",isPinned:!1},{id:"ann-3",title:"Prxima Live de Treinamento: Tcnicas de Venda",date:new Date(Date.now()-7200*60*1e3).toISOString(),content:"<p>No perca nossa prxima live de treinamento nesta sexta-feira, s 19h. Vamos abordar as melhores tcnicas para aumentar suas vendas e engajar clientes. O link ser disponibilizado no dia.</p>",isPinned:!1}],Yq=[{id:"train-1",title:"Configurando Sua Loja de Sucesso",description:"Aprenda o passo a passo para montar e configurar sua loja virtual do zero, pronta para vender.",thumbnailUrl:"https://picsum.photos/seed/store-success/400/200",progress:50,lessons:[{id:"l1-1",title:"O que  Facebook Ads?",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerFun.mp4",content:"Facebook Ads  a plataforma de publicidade da Meta, que permite criar e veicular anncios no Facebook, Instagram, Messenger e Audience Network. Com ela,  possvel alcanar um pblico altamente segmentado com base em demografia, interesses e comportamentos. O objetivo principal  gerar resultados de negcios, como reconhecimento de marca, gerao de leads, trfego para o site e vendas. A plataforma oferece diversos formatos de anncio, incluindo imagens, vdeos, carrossis e colees.",likes:127},{id:"l1-2",title:"Criando sua Conta de Anncios",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerJoyrides.mp4",content:"Para comear a anunciar, voc precisa de uma conta no Gerenciador de Negcios (Business Manager) da Meta. Dentro do Gerenciador, voc criar uma Conta de Anncios.  crucial configurar corretamente as informaes de pagamento e faturamento. Lembre-se de adicionar uma forma de pagamento vlida, como carto de crdito ou boleto, para que seus anncios possam ser veiculados. A estrutura ideal  ter uma conta do Gerenciador de Negcios que gerencia mltiplas contas de anncios, caso voc trabalhe com diferentes clientes ou projetos.",likes:98},{id:"l1-3",title:"Como Criar uma Pgina (Fanpage)",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerMeltdowns.mp4",content:'Uma Pgina no Facebook (Fanpage)  a identidade da sua empresa na plataforma.  por meio dela que seus anncios sero veiculados. Para criar uma, v at a seo "Pginas" do seu perfil e clique em "Criar Nova Pgina". Preencha as informaes essenciais como nome, categoria, descrio, foto de perfil e capa. Uma pgina bem configurada transmite profissionalismo e confiana para seu pblico.',likes:153},{id:"l1-4",title:"Instalando o Pixel do Facebook",videoUrl:"https://storage.googleapis.com/gtv-videos-bucket/sample/ForBiggerEscapes.mp4",content:"O Pixel da Meta  um trecho de cdigo que voc instala em seu site. Sua funo  rastrear as aes dos visitantes, como visualizaes de pgina, adies ao carrinho e compras. Esses dados so valiosos para otimizar suas campanhas, criar pblicos personalizados (remarketing) e mensurar o retorno sobre o investimento (ROI) dos seus anncios. A instalao pode ser feita manualmente, via gerenciadores de tags como o Google Tag Manager, ou atravs de integraes com plataformas de e-commerce.",likes:212}]},{id:"train-2",title:"Dominando o Produto e a Oferta",description:"Aprenda a escolher produtos vencedores e criar ofertas irresistveis que vendem todos os dias.",thumbnailUrl:"https://picsum.photos/seed/product-offer/400/200",progress:50,lessons:[{id:"l2-1",title:"Anlise de Mercado e Nicho",videoUrl:"placeholder.mp4",content:"SEO (Search Engine Optimization)  o conjunto de tcnicas para otimizar seu site e contedo para os mecanismos de busca...",likes:88},{id:"l2-2",title:"Criao de Ofertas Irresistveis",videoUrl:"placeholder.mp4",content:"Aprenda a encontrar os termos que seu pblico-alvo utiliza para buscar por seus produtos ou servios...",likes:112}]},{id:"train-3",title:"Logstica de Dropshipping Simplificada",description:"Entenda todo o fluxo de um pedido, desde a venda at a entrega na casa do cliente, sem estresse.",thumbnailUrl:"https://picsum.photos/seed/dropship-logistics/400/200",progress:33,lessons:[{id:"l3-1",title:"O Ciclo de Vida do Pedido Drop",videoUrl:"placeholder.mp4",content:"Conhea a trajetria da RS Prlipsi e os valores que guiam nossa jornada...",likes:130}]},{id:"train-4",title:"RSIA: Sua Assistente de Vendas",description:"Aprenda a utilizar as ferramentas de IA da plataforma para otimizar suas vendas e marketing.",thumbnailUrl:"https://picsum.photos/seed/ai-assistant/400/200",progress:0,lessons:[{id:"l4-1",title:"Introduo  RSIA",videoUrl:"placeholder.mp4",content:"Descubra como nossa inteligncia artificial, a RSIA, pode ser sua maior aliada...",likes:250}]}],Xq=[{id:"asset-1",name:"Logo Oficial RS Prlipsi (Ouro)",type:"logo",format:"PNG",downloadUrl:"https://picsum.photos/seed/logo-gold-dl/500/500",previewUrl:"https://picsum.photos/seed/logo-gold-pv/200/200"},{id:"asset-2",name:"Banner Promocional - Dia das Mes",type:"banner",format:"JPG",downloadUrl:"https://picsum.photos/seed/assetbanner1/1200/600",previewUrl:"https://picsum.photos/seed/assetbanner1/400/200"},{id:"asset-3",name:"Template de Post (PDF)",type:"template",format:"PDF",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",previewUrl:"https://i.imgur.com/S5OK3sI.png"},{id:"asset-4",name:"Logo Oficial RS Prlipsi (Preto)",type:"logo",format:"PNG",downloadUrl:"https://picsum.photos/seed/logo-black-dl/500/500",previewUrl:"https://picsum.photos/seed/logo-black-pv/200/200"},{id:"asset-5",name:"Guia de Produto - Relgios",type:"template",format:"PDF",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",previewUrl:"https://i.imgur.com/S5OK3sI.png"},{id:"asset-6",name:"Manual de Marca",type:"template",format:"PDF",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",previewUrl:"https://i.imgur.com/S5OK3sI.png"},{id:"asset-7",name:"Catlogo de Bolsas",type:"template",format:"PDF",downloadUrl:"https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf",previewUrl:"https://i.imgur.com/S5OK3sI.png"}],Qq=[{id:"ac-1",customerName:"Joana Martins",customerEmail:"joana.m@example.com",customerPhone:"11987654321",items:[{id:"2-default",productId:"2",variantId:"default",name:"Bolsa de Ombro de Designer em Couro",price:2100,image:"https://picsum.photos/seed/bag1/600/600",quantity:1,variantText:""}],total:2100,abandonedAt:new Date(Date.now()-7200*1e3).toISOString(),recoveryStatus:"No enviado"},{id:"ac-2",customerName:"Ricardo Alves",customerEmail:"ricardo.alves@example.com",customerPhone:"21912345678",items:[{id:"1-var1",productId:"1",variantId:"var1",name:"Relgio de Pulso Clssico de Couro",price:1250,image:"https://picsum.photos/seed/watch1/600/600",quantity:1,variantText:"Cor da Pulseira: Marrom, Cor da Caixa: Prata"},{id:"4-default",productId:"4",variantId:"default",name:"culos de Sol Aviador Polarizados",price:720,image:"https://picsum.photos/seed/glasses1/600/600",quantity:1,variantText:""}],total:1970,abandonedAt:new Date(Date.now()-1440*60*1e3).toISOString(),recoveryStatus:"Enviado"},{id:"ac-3",customerName:"Cliente Annimo",customerEmail:"visitante@email.com",customerPhone:"31999998888",items:[{id:"3-default",productId:"3",variantId:"default",name:"Caneta-tinteiro Executiva",price:850,image:"https://picsum.photos/seed/pen1/600/600",quantity:2,variantText:""}],total:1700,abandonedAt:new Date(Date.now()-7200*60*1e3).toISOString(),recoveryStatus:"Recuperado"}],Zq=[{id:"CHG-001",customerName:"Fernanda Lima",customerEmail:"fernanda.lima@example.com",customerCpf:"111.222.333-44",customerPhone:"21987654321",customerAddress:{street:"Avenida Atlntica",number:"1702",neighborhood:"Copacabana",city:"Rio de Janeiro",state:"RJ",zipCode:"22021-001"},items:[{id:"1",description:"Relgio de Pulso Clssico de Couro",quantity:1,price:1250},{id:"custom-1",description:"Gravao Personalizada",quantity:1,price:150}],shipping:25,total:1425,status:"Pago",createdAt:"2024-07-28T10:00:00Z",dueDate:"2024-08-05T23:59:59Z",paymentLink:"https://rs.shp/pay/ab12cd34"},{id:"CHG-002",customerName:"Ricardo Alves",customerEmail:"ricardo.alves@example.com",customerCpf:"222.333.444-55",customerPhone:"11912345678",items:[{id:"2",description:"Bolsa de Ombro de Designer em Couro",quantity:1,price:2100}],shipping:0,total:2100,status:"Pendente",createdAt:"2024-07-29T14:30:00Z",dueDate:"2024-08-08T23:59:59Z",paymentLink:"https://rs.shp/pay/ef56gh78"},{id:"CHG-003",customerName:"Mariana Costa",customerEmail:"mariana.costa@example.com",customerCpf:"333.444.555-66",items:[{id:"custom-2",description:"Consultoria de Estilo",quantity:2,price:300}],shipping:0,total:600,status:"Vencido",createdAt:"2024-07-15T11:00:00Z",dueDate:"2024-07-22T23:59:59Z",paymentLink:"https://rs.shp/pay/ij90kl12"}],eH={automaticTransfers:{enabled:!1,frequency:"Semanal",dayOfWeek:5,minimumAmount:100},notifications:{onNewCommission:!0,onTransferSuccess:!0,onTransferFail:!0},security:{twoFactorAuth:!1}},tH=[{id:"CD-001",name:"CD Central Curitiba",ownerName:"Roberto Silveira",cpfCnpj:"12.345.678/0001-99",email:"roberto.silveira@rsprolipsi.com.br",phone:"(41) 99999-0001",stores:[{id:"STORE-01",name:"RS Prlipsi - Shopping Mueller",city:"Curitiba",state:"PR",consultantIds:["C-001","C-002","C-003"]},{id:"STORE-02",name:"RS Prlipsi - ParkShoppingBarigi",city:"Curitiba",state:"PR",consultantIds:["C-004","C-005"]}]},{id:"CD-002",name:"CD Litoral Catarinense",ownerName:"Mariana Costa",cpfCnpj:"98.765.432/0001-11",email:"mariana.costa@rsprolipsi.com.br",phone:"(47) 98888-0002",stores:[{id:"STORE-03",name:"RS Prlipsi - Balnerio Shopping",city:"Balnerio Cambori",state:"SC",consultantIds:["C-006","C-007","C-008","C-009"]},{id:"STORE-04",name:"RS Prlipsi - Itaja Shopping",city:"Itaja",state:"SC",consultantIds:["C-010"]}]},{id:"CD-003",name:"CD Norte do Paran",ownerName:"Carlos Andrade",cpfCnpj:"55.666.777/0001-22",email:"carlos.andrade@rsprolipsi.com.br",phone:"(43) 97777-0003",stores:[{id:"STORE-05",name:"RS Prlipsi - Catua Shopping Londrina",city:"Londrina",state:"PR",consultantIds:["C-011","C-012","C-013"]}]}],nH=[{id:"dash-banner-1",desktopImage:"https://picsum.photos/seed/launch/1200/400",mobileImage:"https://picsum.photos/seed/launch-m/400/300",link:"#"},{id:"dash-banner-2",desktopImage:"https://picsum.photos/seed/logistics/1200/400",mobileImage:"https://picsum.photos/seed/logistics-m/400/300",link:"#"}],rH={components:[{id:"comp-1",column:"left",type:"userInfo",enabled:!0,visibleFields:{id:!0,graduation:!0,accountStatus:!0,monthlyActivity:!0,category:!0,referralLink:!1,affiliateLink:!1}},{id:"comp-2",column:"right",type:"adminBanner",enabled:!0},{id:"comp-3",column:"right",type:"bonusCards",enabled:!0},{id:"comp-4",column:"left",type:"qualificationProgress",enabled:!0,title:"Qualificao Atual",value:4500,max:15e3,startLabel:"Iniciante",endLabel:"Prata",startIcon:"StarOutlineIcon",endIcon:"TrophyIcon"},{id:"comp-5",column:"left",type:"qualificationProgress",enabled:!0,title:"Qualificao do Ms",value:800,max:2500,startLabel:"Base",endLabel:"Bronze",startIcon:"UserIcon",endIcon:"GlobalIcon"},{id:"comp-6",column:"right",type:"incentivesProgram",enabled:!0,title:"Programa de Incentivos e Premiaes",content:[{title:"Viagem Nacional",progress:60},{title:"Carro 0km",progress:30}]},{id:"comp-7",column:"left",type:"referralLinks",enabled:!0},{id:"comp-8",column:"right",type:"networkActivity",enabled:!0,title:"Atividade da Rede"},{id:"comp-9",column:"right",type:"performanceChart",enabled:!0,title:"Bnus Semanal"},{id:"comp-10",column:"left",type:"shortcut",enabled:!0,title:"Gerenciar Produtos",url:"manageProducts",icon:"ProductsIcon"},{id:"comp-11",column:"left",type:"shortcut",enabled:!0,title:"Viso Geral WalletPay",url:"walletOverview",icon:"WalletIcon"}],cards:[{id:"card-1",title:"Bnus Ciclo Global",icon:"GlobalIcon",dataKey:"cycleBonus"},{id:"card-2",title:"Bnus Top Sigme",icon:"TrophyIcon",dataKey:"topSigmeBonus"},{id:"card-3",title:"Bnus Plano de Carreira",icon:"StarOutlineIcon",dataKey:"careerPlanBonus"}]},nA=new URLSearchParams(window.location.search),kg=nA.get("view"),DC=nA.get("productId"),dc=window.self!==window.top,sH=window.location.pathname==="/loja"||window.location.pathname.startsWith("/loja/"),oH=()=>{const[t,e]=R.useState(dc&&kg?kg:"home"),[n,r]=R.useState(null),[s,o]=R.useState(null),[a,d]=R.useState(null),[u,f]=R.useState(null),[p,g]=R.useState(null),[x,w]=R.useState(null),[C,E]=R.useState("home"),[N,k]=R.useState(MC),[_,j]=R.useState(Iq),[P,z]=R.useState(Dq),[O,D]=R.useState(Oq),[te]=R.useState(Pq),[G,le]=R.useState(Lq),[Ne,ne]=R.useState(Bq),[oe,me]=R.useState(Uq),[fe,q]=R.useState(zq),[W,be]=R.useState(qq),[ve,Pe]=R.useState(Hq),[M,B]=R.useState(Vq),[K,ie]=R.useState(Fq),[he,Ae]=R.useState(nH),[Me,Re]=R.useState(rH),[_e,Zt]=R.useState($q),[Ct,bt]=R.useState(Gq),[Ge,xt]=R.useState(null),[Rt,Rs]=R.useState(null),[Is,Ft]=R.useState(null),[Xn,Ir]=R.useState(null),[$t,Ui]=R.useState(null),[Uo,dn]=R.useState(null),[zo,Ds]=R.useState(Jq),[zi,$r]=R.useState([]),[ol,xe]=R.useState(W.orderBump),[Ue,ze]=R.useState(W.upsell),[Qe,Ye]=R.useState(Kq),[en,Ze]=R.useState(Wq),[ut,et]=R.useState(Yq),[Gr,qo]=R.useState(Xq),[Ho,il]=R.useState(Qq),[Ps,al]=R.useState(Zq),[Vo,qb]=R.useState(tH),[vf,ed]=R.useState(eH),[mr,wf]=R.useState({name:"Ana Carolina",id:"C0000111000000",graduation:"DIAMANTE PRESIDENCIAL",accountStatus:"Ativo",monthlyActivity:"Ativo",category:"DIAMANTE",referralLink:"https://rsprolipsi.com/register/anacaro",affiliateLink:"https://rs-shop.com/loja/anacarolina",avatarUrl:"https://i.pravatar.cc/80?u=anacarolina"}),[ll,Sf]=R.useState({cycleBonus:500,topSigmeBonus:250,careerPlanBonus:1e3,affiliateBonus:1572.5,dropshipBonus:834.75,logisticsBonus:212.3}),[cl,dl]=R.useState([]),[Jr,td]=R.useState([]),[ul,gr]=R.useState(null),[Gt,un]=R.useState([]);R.useEffect(()=>{const F=localStorage.getItem("currentCustomer");if(F)try{xt(JSON.parse(F))}catch(X){console.error("Erro ao carregar usurio:",X)}},[]);const[qt,Os]=R.useState([]),[nd,Kr]=R.useState(!1),[rd,Ls]=R.useState(!1);R.useEffect(()=>{dc||window.scrollTo(0,0)},[t]),R.useEffect(()=>{const F=()=>{const X=window.location.hash.replace("#","");if(X&&X!==t){const Z=document.getElementById(X);Z&&Z.scrollIntoView({behavior:"smooth"})}};return window.addEventListener("hashchange",F),F(),()=>window.removeEventListener("hashchange",F)},[t]),R.useEffect(()=>{const F=X=>{X.data.type==="LIVE_PREVIEW_UPDATE"&&dc&&be(X.data.payload)};return window.addEventListener("message",F),()=>{window.removeEventListener("message",F)}},[]),R.useEffect(()=>{if(dc&&kg==="productDetail"&&DC){const F=MC.find(X=>X.id===DC);F&&r(F)}},[]),R.useEffect(()=>{const F=document.getElementById("favicon");F&&W.faviconUrl&&(F.href=W.faviconUrl)},[W.faviconUrl]);const Fo=vn.useRef(0);R.useEffect(()=>{const F=qt.reduce((X,Z)=>X+Z.quantity,0);if(F>Fo.current){Ls(!0);const X=setTimeout(()=>Ls(!1),3e3);return Fo.current=F,()=>clearTimeout(X)}Fo.current=F},[qt]);const Bs=(F,X,Z)=>{console.log("App.tsx - handleAddToCart chamado:",{product:F.name,quantity:X,selectedVariant:Z}),Os(ce=>{console.log("App.tsx - Cart ANTES:",ce);const Nt=ce.find(Ln=>Ln.productId===F.id&&Ln.variantId===Z.id);if(Nt){const Ln=ce.map(Ko=>Ko.id===Nt.id?{...Ko,quantity:Ko.quantity+X}:Ko);return console.log("App.tsx - Cart DEPOIS (atualizado):",Ln),Ln}const yr=`${F.id}-${Z.id}-${Date.now()}`,Qn=Object.values(Z.options).join(" / "),Qr=[...ce,{id:yr,productId:F.id,variantId:Z.id,name:F.name,price:Z.price,image:F.images[0],quantity:X,variantText:Qn}];return console.log("App.tsx - Cart DEPOIS (novo item):",Qr),Qr}),console.log("App.tsx - Item adicionado, mostrando status flutuante")},Wr=(F,X)=>{Os(Z=>X<=0?Z.filter(ce=>ce.id!==F):Z.map(ce=>ce.id===F?{...ce,quantity:X}:ce))},Us=F=>{Os(X=>X.filter(Z=>Z.id!==F))},zs=F=>{gr(F),j(X=>[...X,F]),Os([]),Kr(!1),e("orderConfirmation")},It=(F,X,Z)=>{var yr,Qn;const ce={productId:X.id,variantId:((Qn=(yr=X.variants)==null?void 0:yr[0])==null?void 0:Qn.id)||"default",productName:`${X.name} (Upsell)`,quantity:1,price:Z},Nt={...F,items:[...F.items,ce],total:F.total+Z,subtotal:F.subtotal+Z};j(Qr=>Qr.map(Ln=>Ln.id===F.id?Nt:Ln)),gr(Nt)},Dr=()=>re((Ge==null?void 0:Ge.email)==="rsprolipsioficial@gmail.com"?"consultantStore":"consultantLogin"),re=(F,X)=>{if(!dc){if(F==="walletPayHub"||F==="walletOverview"||F==="walletReports"||F==="walletTransfers"||F==="walletCharges"||F==="walletSettings"){const Z=btoa(JSON.stringify({timestamp:Date.now(),source:"escritorio",autoLogin:!0,userId:(Ge==null?void 0:Ge.id)||"guest"}));window.open(`https://walletpay.rsprolipsi.com.br?token=${Z}`,"_blank");return}if(F==="checkout"&&(E(t),Kr(!1)),F==="productDetail"&&X){const Z=X.id;un(ce=>[Z,...ce.filter(Nt=>Nt!==Z)].slice(0,4))}e(F),r(null),o(null),d(null),f(null),g(null),w(null),Rs(null),Ft(null),Ui(null),X&&(["productDetail","addEditProduct","editDropshippingProduct"].includes(F)?r(X):["orderDetail","orderStatus"].includes(F)?o(X):F==="returnDetail"?d(X):F==="addEditCoupon"?f(X):F==="addEditMarketingPixel"?g(X):["collectionView","addEditCollection"].includes(F)?w(X):F==="addEditAnnouncement"?Rs(X):["trainingModuleDetail","addEditTraining"].includes(F)?Ft(X):F==="addEditMarketingAsset"&&Ui(X))}},Yr=F=>{be(X=>({...X,...F}))},qs=F=>{Ae(F),alert("Banners do painel atualizados com sucesso!")},Cf=F=>{Re(F),alert("Painel atualizado com sucesso!")},sd=F=>{k(X=>X.find(ce=>ce.id===F.id)?X.map(ce=>ce.id===F.id?F:ce):[...X,{...F,id:String(Date.now())}]),re("manageProducts")},od=F=>{window.confirm(`Tem certeza de que deseja excluir ${F.length} produto(s)?`)&&k(X=>X.filter(Z=>!F.includes(Z.id)))},$o=vn.useMemo(()=>SU(k,re),[re]),Pr=vn.useMemo(()=>CU(Zt,re),[re]),Go=vn.useMemo(()=>NU(j),[]);vn.useEffect(()=>{(Ge==null?void 0:Ge.email)==="rsprolipsioficial@gmail.com"&&($o.loadProducts(),Pr.loadCollections(),Go.loadOrders())},[Ge,$o,Pr,Go]);const br=$o.handleSaveProduct,En=$o.handleDeleteProduct,id=$o.handleUpdateStock,Nf=Pr.handleSaveCollection,hl=Pr.handleDeleteCollection,ad=Pr.handleCreateCollection,qi=(F,X)=>{j(Z=>Z.map(ce=>ce.id===F?{...ce,...X}:ce))},Ef=F=>{le(X=>X.find(ce=>ce.id===F.id)?X.map(ce=>ce.id===F.id?F:ce):[...X,{...F,id:`CUP-${Date.now()}`}]),re("managePromotions")},Tn=F=>{window.confirm("Tem certeza de que deseja excluir este cupom?")&&le(X=>X.filter(Z=>Z.id!==F))},fl=F=>{ne(X=>X.find(ce=>ce.id===F.id)?X.map(ce=>ce.id===F.id?F:ce):[...X,{...F,id:`PIX-${Date.now()}`}]),re("virtualOfficePixels")},ld=F=>{window.confirm("Tem certeza que deseja excluir este pixel?")&&ne(X=>X.filter(Z=>Z.id!==F))},pl=F=>{ne(X=>X.map(Z=>Z.id===F?{...Z,status:Z.status==="Ativo"?"Inativo":"Ativo"}:Z))},Hs=F=>{const X=Ne.find(Z=>Z.id===F);if(X){const Z={...X,id:`PIX-${Date.now()}`,name:`${X.name} (Cpia)`};ne(ce=>[...ce,Z])}},cd=F=>{Zt(X=>X.find(ce=>ce.id===F.id)?X.map(ce=>ce.id===F.id?F:ce):[...X,{...F,id:`col-${Date.now()}`}]),re("manageCollections")},dd=F=>{window.confirm("Tem certeza que deseja excluir esta coleo?")&&Zt(X=>X.filter(Z=>Z.id!==F))},Vs=F=>{xt(F),re("home")},Tf=F=>{const X={id:`cust-${Date.now()}`,...F};bt(Z=>[...Z,X]),alert("Cadastro realizado com sucesso! Faa seu login para continuar."),re("customerLogin")},ud=F=>{window.confirm("Tem certeza?")&&Ds(X=>X.filter(Z=>Z.id!==F))},hd=F=>Ds(X=>X.map(Z=>Z.id===F?{...Z,status:"Aprovada"}:Z)),ml=F=>$r(X=>[...X,{...F,id:`link-${Date.now()}`}]),kf=F=>{window.confirm("Tem certeza?")&&$r(X=>X.filter(Z=>Z.id!==F))},Af=F=>{const X={...F,id:`rev-${Date.now()}`,createdAt:new Date().toISOString(),status:"Pendente"};Ds(Z=>[X,...Z]),alert("Sua avaliao foi enviada para moderao. Obrigado!")},Hi=F=>{Ze(X=>{const Z=X.find(ce=>ce.id===F.id);return Z?X.map(ce=>ce.id===F.id?{...Z,...F}:ce):[{...F,id:`ann-${Date.now()}`},...X]}),re("manageAnnouncements")},xr=F=>{window.confirm("Tem certeza?")&&Ze(X=>X.filter(Z=>!F.includes(Z.id)))},gl=F=>{et(X=>{const Z=X.find(ce=>ce.id===F.id);return Z?X.map(ce=>ce.id===F.id?{...Z,...F}:ce):[{...F,id:`train-${Date.now()}`},...X]}),re("manageTrainings")},bl=F=>{qo(X=>{const Z=X.find(ce=>ce.id===F.id);return Z?X.map(ce=>ce.id===F.id?{...Z,...F}:ce):[{...F,id:`asset-${Date.now()}`},...X]}),re("manageMarketingAssets")},Fs=F=>{window.confirm("Tem certeza?")&&qo(X=>X.filter(Z=>!F.includes(Z.id)))},$s=F=>{dl(X=>X.includes(F)?X.filter(Z=>Z!==F):[...X,F])},fd=(F,X)=>{et(Z=>Z.map(ce=>ce.id===F?{...ce,lessons:ce.lessons.map(Nt=>Nt.id===X?{...Nt,likes:(Nt.likes||0)+1}:Nt)}:ce))},Xr=F=>{if(!Ge){alert("Por favor, faa login para adicionar itens  sua lista de desejos."),re("customerLogin");return}td(X=>X.includes(F)?X.filter(Z=>Z!==F):[...X,F])},xl=["consultantStore","rsStudio","communication","manageProducts","addEditProduct","manageInventory","manageCollections","addEditCollection","manageOrders","orderDetail","managePromotions","addEditCoupon","manageOrderBump","manageUpsell","manageAbandonedCarts","manageReviews","manageAffiliates","walletPayHub","walletOverview","walletReports","walletTransfers","walletCharges","walletSettings","manageDistributors","addEditDistributor","virtualOfficePixels","addEditMarketingPixel","virtualOfficeLinkShortener","userProfileEditor","storeEditor","dashboardEditor","bannerDashboard","manageAnnouncements","addEditAnnouncement","manageTrainings","addEditTraining","trainingModuleDetail","manageMarketingAssets","addEditMarketingAsset","compensationPlan","managePayments","manageShipping"],Jo=()=>{const F=xl.includes(t),X=(()=>{switch(t){case"home":return l.jsxs(l.Fragment,{children:[l.jsx(Im,{logoUrl:W.logoUrl,onLogoClick:()=>re("home"),onConsultantClick:Dr,cartItems:qt,onCartClick:()=>Kr(!0),collections:_e,onNavigate:re,currentCustomer:Ge,onLogout:()=>{xt(null),re("home")}}),l.jsx(x5,{content:W.hero}),l.jsx(zC,{banners:W.carouselBanners}),l.jsx(y5,{onProductClick:Z=>re("productDetail",Z),products:N,wishlist:Jr,onToggleWishlist:Xr}),l.jsx(zU,{onProductClick:Z=>re("productDetail",Z),products:N,orders:_,wishlist:Jr,onToggleWishlist:Xr}),l.jsx(mU,{onProductClick:Z=>re("productDetail",Z),products:N,wishlist:Jr,onToggleWishlist:Xr}),l.jsx(gU,{banner:W.midPageBanner}),l.jsx(HU,{collections:_e.slice(0,3),onNavigate:re}),l.jsx(w5,{onConsultantClick:Dr,onBecomeSellerClick:()=>re("sellerRegistration")}),l.jsx(Dm,{logoUrl:W.logoUrl,content:W.footer,onConsultantClick:Dr,onNavigate:re,currentCustomer:Ge})]});case"consultantLogin":return l.jsx(k1,{onLoginSuccess:()=>re("consultantStore"),onBackToHome:()=>re("home")});case"consultantStore":return l.jsx(_1,{onNavigate:re,banners:he,settings:Me,userProfile:mr,bonuses:ll,networkActivity:RC,userPoints:12500,monthlyUserPoints:3200,compensationSettings:K,weeklyBonuses:IC});case"customerLogin":return l.jsx(PU,{onLoginSuccess:Vs,onBackToHome:()=>re("home"),onNavigateToRegister:()=>re("customerRegister"),onNavigateToForgotPassword:()=>re("customerForgotPassword"),customers:Ct});case"customerRegister":return l.jsx(OU,{onRegister:Tf,onBackToHome:()=>re("home"),onNavigateToLogin:()=>re("customerLogin"),existingCustomers:Ct});case"customerAccount":return l.jsx(UU,{customer:Ge,orders:_,onNavigate:re});case"productDetail":return n?l.jsxs(l.Fragment,{children:[l.jsx(Im,{logoUrl:W.logoUrl,onLogoClick:()=>re("home"),onConsultantClick:Dr,cartItems:qt,onCartClick:()=>Kr(!0),collections:_e,onNavigate:re,currentCustomer:Ge,onLogout:()=>{xt(null),re("home")}}),l.jsx(T5,{product:n,collections:_e,onBack:()=>re("home"),onAddToCart:Bs,onNavigate:(Z,ce)=>re(Z,ce),reviews:zo.filter(Z=>Z.productId===n.id),onReviewSubmit:Af,wishlist:Jr,onToggleWishlist:Xr,questions:Qe.filter(Z=>Z.productId===n.id),onQuestionSubmit:Z=>{const ce={...Z,id:`q-${Date.now()}`,createdAt:new Date().toISOString(),answers:[]};Ye(Nt=>[...Nt,ce])},onAnswerSubmit:(Z,ce)=>{const Nt={...ce,id:`a-${Date.now()}`,createdAt:new Date().toISOString()};Ye(yr=>yr.map(Qn=>Qn.id===Z?{...Qn,answers:[...Qn.answers,Nt]}:Qn))}}),l.jsx(Dm,{logoUrl:W.logoUrl,content:W.footer,onConsultantClick:Dr,onNavigate:re,currentCustomer:Ge})]}):null;case"sellerRegistration":return l.jsx(AU,{onRegisterSuccess:()=>re("consultantStore"),onBackToHome:()=>re("home")});case"checkout":return qt.length>0?l.jsx(kU,{cartItems:qt,onBack:()=>re(C||"home"),onFinalizePurchase:zs,currentCustomer:Ge,coupons:G,orderBumpConfig:W.orderBump,allProducts:N,paymentSettings:ve,onUpdateQuantity:Wr,onRemoveItem:Us}):null;case"orderConfirmation":return ul?l.jsx(gq,{order:ul,onContinueShopping:()=>re("home"),upsellSettings:W.upsell,allProducts:N,onAcceptUpsell:(Z,ce,Nt)=>{It(Z,ce,Nt)}}):null;case"collectionView":return x?l.jsxs(l.Fragment,{children:[l.jsx(Im,{logoUrl:W.logoUrl,onLogoClick:()=>re("home"),onConsultantClick:Dr,cartItems:qt,onCartClick:()=>Kr(!0),collections:_e,onNavigate:re,currentCustomer:Ge,onLogout:()=>{xt(null),re("home")}}),l.jsx(DU,{collection:x,products:N.filter(Z=>Z.collectionId===x.id&&Z.status==="Ativo"),onProductClick:Z=>re("productDetail",Z),onBack:()=>re("home"),wishlist:Jr,onToggleWishlist:Xr}),l.jsx(Dm,{logoUrl:W.logoUrl,content:W.footer,onConsultantClick:Dr,onNavigate:re,currentCustomer:Ge})]}):null;case"orderLookup":return l.jsx(Tq,{orders:_,onOrderFound:Z=>re("orderStatus",Z)});case"communication":return l.jsx(Rq,{audience:"marketplace"});case"manageProducts":return l.jsx(j1,{products:N,onNavigate:re,onProductsChange:k,onProductEdit:Z=>re("addEditProduct",Z),onProductDelete:od});case"addEditProduct":return l.jsx(TS,{product:n,collections:_e,onSave:sd,onCancel:()=>re("manageProducts")});case"manageCollections":return l.jsx(zS,{collections:_e,onNavigate:re,onCollectionEdit:Z=>re("addEditCollection",Z),onCollectionDelete:dd});case"addEditCollection":return l.jsx(qS,{collection:x,products:N,onSave:cd,onCancel:()=>re("manageCollections"),onNavigate:re});case"manageOrders":return l.jsx(kS,{orders:_,onNavigate:re,onOrderClick:Z=>re("orderDetail",Z)});case"orderDetail":return s?l.jsx(VB,{order:s,onBack:()=>re("manageOrders"),onUpdateOrder:qi}):null;case"managePromotions":return l.jsx(AS,{coupons:G,onNavigate:re,onCouponEdit:Z=>re("addEditCoupon",Z),onCouponDelete:Tn});case"addEditCoupon":return l.jsx(FB,{coupon:u,onSave:Ef,onCancel:()=>re("managePromotions")});case"manageOrderBump":return l.jsx(vC,{settings:ol,products:N,onSave:xe});case"manageUpsell":return l.jsx(wC,{settings:Ue,products:N,onSave:ze});case"manageAbandonedCarts":return l.jsx(SC,{carts:Ho});case"manageReviews":return l.jsx(CC,{reviews:zo,products:N,onReviewApprove:hd,onReviewDelete:ud});case"manageAffiliates":return l.jsx(HS,{links:zi,onNavigate:re,onLinkAdd:ml,onLinkDelete:kf});case"walletPayHub":case"walletOverview":case"walletReports":case"walletTransfers":case"walletCharges":case"walletSettings":return null;case"manageDistributors":return l.jsx(jC,{distributors:Vo,onNavigate:re});case"addEditDistributor":return l.jsx(jq,{onCancel:()=>re("manageDistributors")});case"virtualOfficePixels":return l.jsx(jS,{pixels:Ne,onNavigate:re,onDelete:ld,onStatusToggle:pl,onDuplicate:Hs});case"addEditMarketingPixel":return l.jsx(RS,{pixel:p,onSave:fl,onCancel:()=>re("virtualOfficePixels")});case"virtualOfficeLinkShortener":return l.jsx(MS,{links:fe,setLinks:q});case"userProfileEditor":return l.jsx(VS,{userProfile:mr,onSave:wf});case"storeEditor":return l.jsx($B,{customization:W,onUpdate:Yr,onNavigate:re});case"dashboardEditor":return l.jsx(US,{settings:Me,onUpdate:Cf});case"bannerDashboard":return l.jsx(BS,{banners:he,onUpdate:qs});case"manageAnnouncements":return l.jsx(NC,{announcements:en,onNavigate:re,onDelete:xr});case"addEditAnnouncement":return l.jsx(EC,{announcement:Rt,onSave:Hi,onCancel:()=>re("manageAnnouncements")});case"manageTrainings":return l.jsx(TC,{trainings:ut,onNavigate:re,completedLessons:cl});case"addEditTraining":return l.jsx(kC,{training:Is,onSave:gl,onCancel:()=>re("manageTrainings")});case"trainingModuleDetail":return Is?l.jsx(Eq,{module:Is,completedLessons:cl,onToggleLessonComplete:$s,onLikeLesson:fd,onNavigate:re}):null;case"manageMarketingAssets":return l.jsx(AC,{assets:Gr,onNavigate:re,onDelete:Fs});case"addEditMarketingAsset":return l.jsx(_C,{asset:$t,onSave:bl,onCancel:()=>re("manageMarketingAssets")});case"compensationPlan":return l.jsx(LS,{settings:K,onSave:ie,onNavigate:re});case"managePayments":return l.jsx(IS,{settings:ve,onSave:Pe,onNavigate:re});case"manageShipping":return l.jsx(DS,{settings:M,onSave:B,onNavigate:re});case"rsStudio":return l.jsx(FS,{products:N,onNavigate:re});default:return l.jsx("div",{className:"p-8 text-center text-white",children:"Pgina no encontrada"})}})();return F?l.jsx(pg,{currentView:t,onNavigate:re,onLogout:()=>re("home"),children:X}):X};if(sH){if(!Ge||Ge.email!=="rsprolipsioficial@gmail.com")return l.jsx("div",{className:"min-h-screen bg-brand-dark",children:l.jsx(k1,{onLoginSuccess:()=>{xt({id:"rsprolipsi-admin",name:"RS Prlipsi",email:"rsprolipsioficial@gmail.com",cpf:"",phone:"",birthDate:""})},onBackToHome:()=>{e("home")}})});if(xl.includes(t)&&t!=="consultantStore"){const F=(()=>{switch(t){case"manageProducts":return l.jsx(j1,{products:N,onNavigate:re,onDeleteProduct:En});case"addEditProduct":return l.jsx(bU,{children:l.jsx(TS,{product:n,onSave:br,onCancel:()=>re("manageProducts"),collections:_e})});case"manageInventory":return l.jsx(LB,{products:N,onUpdateStock:id});case"manageCollections":return l.jsx(zS,{collections:_e,onNavigate:re,onDeleteCollection:hl,onCreateCollection:ad});case"addEditCollection":return l.jsx(qS,{collection:x,products:N,onSave:Nf,onCancel:()=>re("manageCollections")});case"manageOrders":return l.jsx(kS,{orders:_,products:N});case"managePromotions":return l.jsx(AS,{coupons:G,onCreateCoupon:handleCreateCoupon,onUpdateCoupon:handleUpdateCoupon,onDeleteCoupon:handleDeleteCoupon});case"manageOrderBump":return l.jsx(vC,{config:W.orderBump,allProducts:N,onSave:handleSaveOrderBumpConfig});case"manageUpsell":return l.jsx(wC,{config:W.upsell,allProducts:N,onSave:handleSaveUpsellConfig});case"manageAbandonedCarts":return l.jsx(SC,{abandonedCarts:Ho,onNavigate:re});case"manageReviews":return l.jsx(CC,{reviews:zo,products:N,onApprove:handleApproveReview,onDelete:handleDeleteReview});case"manageAffiliates":return l.jsx(HS,{affiliates});case"storeEditor":return l.jsx(StoreEditor,{customization:W,onSave:handleSaveStoreCustomization,collections:_e,products:N});case"dashboardEditor":return l.jsx(US,{dashboardSettings:Me,onSave:handleSaveDashboardSettings});case"bannerDashboard":return l.jsx(BS,{banners:he,onSave:handleSaveDashboardBanners});case"virtualOfficePixels":return l.jsx(jS,{pixels:Ne,onAddPixel:()=>re("addEditMarketingPixel"),onEditPixel:X=>re("addEditMarketingPixel",X),onDeletePixel:handleDeleteMarketingPixel});case"addEditMarketingPixel":return l.jsx(RS,{pixel:p,onSave:handleSaveMarketingPixel,onCancel:()=>re("virtualOfficePixels")});case"virtualOfficeLinkShortener":return l.jsx(MS,{links:fe,onAddLink:handleAddShortenedLink});case"manageAnnouncements":return l.jsx(NC,{announcements:en,onNavigate:re,onDeleteAnnouncement:handleDeleteAnnouncement});case"addEditAnnouncement":return l.jsx(EC,{announcement:Rt,onSave:handleSaveAnnouncement,onCancel:()=>re("manageAnnouncements")});case"manageTrainings":return l.jsx(TC,{trainings:ut,onNavigate:re,onDeleteTraining:handleDeleteTraining});case"addEditTraining":return l.jsx(kC,{training:Xn,onSave:handleSaveTraining,onCancel:()=>re("manageTrainings")});case"manageMarketingAssets":return l.jsx(AC,{assets:Gr,onNavigate:re,onDeleteAsset:handleDeleteMarketingAsset});case"addEditMarketingAsset":return l.jsx(_C,{asset:$t,onSave:handleSaveMarketingAsset,onCancel:()=>re("manageMarketingAssets")});case"compensationPlan":return l.jsx(LS,{settings:K,onSave:handleSaveCompensationSettings});case"managePayments":return l.jsx(IS,{settings:ve,onSave:handleSavePaymentSettings});case"manageShipping":return l.jsx(DS,{settings:M,onSave:handleSaveShippingSettings});case"walletPayHub":return l.jsx(WalletPayHub,{consultorName:mr.name,walletBalance,onNavigate:re,userTransactions});case"userProfileEditor":return l.jsx(VS,{profile:mr,onSave:handleSaveUserProfile});case"manageDistributors":return l.jsx(jC,{distributorCenters,onAdd:handleAddDistributorCenter,onEdit:handleEditDistributorCenter,onDelete:handleDeleteDistributorCenter,onNavigate:re});case"communication":return l.jsx(pq,{});case"rsStudio":return l.jsx(FS,{products:N,onNavigate:re});default:return l.jsx("div",{className:"p-8 text-center text-white",children:"Pgina no encontrada"})}})();return l.jsx(pg,{currentView:t,onNavigate:re,onLogout:()=>{xt(null),e("home")},children:F})}return l.jsx(pg,{currentView:t,onNavigate:re,onLogout:()=>{xt(null),e("home")},children:l.jsx(_1,{onNavigate:re,banners:he,settings:Me,userProfile:mr,bonuses:ll,networkActivity:RC,userPoints:4500,monthlyUserPoints:800,compensationSettings:K,weeklyBonuses:IC})})}return l.jsxs("div",{className:"min-h-screen bg-brand-dark",children:[Jo(),nd&&qt&&l.jsx(EU,{isOpen:nd,onClose:()=>Kr(!1),cartItems:qt,onUpdateQuantity:Wr,onRemoveItem:Us,onNavigate:re}),rd&&qt&&qt.length>0&&l.jsx(TU,{cartItems:qt,onViewCart:()=>Kr(!0)})]})},rA=document.getElementById("root");if(!rA)throw new Error("Could not find root element to mount to");const iH=b5.createRoot(rA);iH.render(l.jsx(vn.StrictMode,{children:l.jsx(oH,{})}));

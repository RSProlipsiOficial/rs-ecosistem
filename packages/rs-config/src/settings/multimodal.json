{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "description": "Configuração de Pagamentos Multimodais",
  "meta": {
    "version": "1.0.0",
    "updatedAt": "2025-11-06",
    "notes": "Formas de pagamento: saldo, PIX, cartão e pagamento no local"
  },
  
  "modes": {
    "balance": {
      "enabled": true,
      "priority": 1,
      "label": "Saldo da Carteira",
      "icon": "wallet",
      "description": "Pagamento com saldo disponível na carteira",
      "instantConfirmation": true,
      "requiresGateway": false
    },
    "pix": {
      "enabled": true,
      "priority": 2,
      "label": "PIX",
      "icon": "pix",
      "provider": "WalletPay",
      "description": "Pagamento instantâneo via PIX",
      "instantConfirmation": true,
      "requiresGateway": true,
      "timeout": 300
    },
    "card": {
      "enabled": true,
      "priority": 3,
      "label": "Cartão de Crédito/Débito",
      "icon": "credit-card",
      "provider": "WalletPay",
      "description": "Pagamento com cartão",
      "instantConfirmation": false,
      "requiresGateway": true,
      "allowInstallments": true,
      "maxInstallments": 12,
      "minInstallmentValue": 30.00
    },
    "boleto": {
      "enabled": false,
      "priority": 4,
      "label": "Boleto Bancário",
      "icon": "barcode",
      "provider": "WalletPay",
      "description": "Pagamento via boleto (1-3 dias úteis)",
      "instantConfirmation": false,
      "requiresGateway": true,
      "expirationDays": 3
    },
    "onsite": {
      "enabled": true,
      "priority": 5,
      "label": "Pagamento no Local",
      "icon": "map-pin",
      "description": "Pagamento presencial na retirada do produto",
      "instantConfirmation": false,
      "requiresGateway": false,
      "requiresPickupLocation": true,
      "allowedMethods": ["cash", "card", "pix"]
    }
  },
  
  "splitRules": {
    "allowSplit": true,
    "splitMax": 3,
    "methods": ["balance", "pix", "card"],
    "description": "Permite dividir pagamento em até 3 formas diferentes",
    "validation": {
      "mustCoverTotal": true,
      "roundingMode": "nearest_cent",
      "minSplitAmount": 10.00,
      "allowPartialBalance": true
    }
  },
  
  "fees": {
    "balance": 0.00,
    "pix": 0.00,
    "card_debit": 0.02,
    "card_credit": 0.035,
    "boleto": 3.50,
    "onsite": 0.00,
    "description": "Taxas por forma de pagamento"
  },
  
  "validation": {
    "checkBalance": true,
    "checkGatewayAvailability": true,
    "checkMinimumAmount": true,
    "minimumAmount": 5.00,
    "maximumAmount": 100000.00
  },
  
  "audit": {
    "table": "payment_transactions",
    "logTable": "payment_logs",
    "storeMetadata": true,
    "retentionYears": 7
  },
  
  "notifications": {
    "onPaymentInitiated": {
      "enabled": true,
      "channels": ["email"],
      "template": "payment_initiated"
    },
    "onPaymentConfirmed": {
      "enabled": true,
      "channels": ["email", "push"],
      "template": "payment_confirmed"
    },
    "onPaymentFailed": {
      "enabled": true,
      "channels": ["email", "push"],
      "template": "payment_failed"
    }
  },
  
  "status": {
    "pending": "Pendente",
    "processing": "Processando",
    "confirmed": "Confirmado",
    "failed": "Falhou",
    "cancelled": "Cancelado",
    "refunded": "Reembolsado"
  }
}
